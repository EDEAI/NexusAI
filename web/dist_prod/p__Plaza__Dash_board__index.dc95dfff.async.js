"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{35790:function(Q,L,t){var R=t(1413),n=t(67294),Z=t(19369),v=t(91146),m=function(x,B){return n.createElement(v.Z,(0,R.Z)((0,R.Z)({},x),{},{ref:B,icon:Z.Z}))},b=n.forwardRef(m);L.Z=b},83510:function(Q,L,t){t.d(L,{LK:function(){return P},bs:function(){return g},go:function(){return W},uy:function(){return e}});var R=t(15009),n=t.n(R),Z=t(99289),v=t.n(Z),m=t(47520),b="/v1/apps/apps_list",$="/v1/agent/agent_delete/",x="/v1/workflow/workflow_app_delete/",B="/v1/vector/delete_dataset/",U="/v1/skill/delete_skill_by_app_id/",M="/v1/apps/apps_create",D="/v1/apps/app_update/",W=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("".concat(b),{method:"GET",data:r});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),P=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(r),a.next=3,r.mode;case 3:if(a.t0=a.sent,a.t0!=1){a.next=8;break}a.t1=(0,m.ZP)("".concat($).concat(r.app_id),{method:"DELETE"}),a.next=9;break;case 8:a.t1=r.mode==2?(0,m.ZP)("".concat(x).concat(r.app_id),{method:"DELETE"}):r.mode==3?(0,m.ZP)("".concat(B).concat(r.app_id),{method:"DELETE"}):(0,m.ZP)("".concat(U).concat(r.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return o=a.t1,a.abrupt("return",o);case 11:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),e=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("".concat(M),{method:"POST",data:r});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),g=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("".concat(D).concat(r.app_id),{method:"PUT",data:r});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}()},43722:function(Q,L,t){t.d(L,{Gn:function(){return B},KH:function(){return g},cH:function(){return M},dB:function(){return U},gp:function(){return $},j2:function(){return D},r5:function(){return P},rw:function(){return b},sI:function(){return W},sT:function(){return e},vu:function(){return x}});var R=t(15009),n=t.n(R),Z=t(99289),v=t.n(Z),m=t(47520),b=function(){var c=v()(n()().mark(function s(){var r;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.ZP)("/v1/index/",{method:"GET"});case 2:return r=u.sent,u.abrupt("return",r);case 4:case"end":return u.stop()}},s)}));return function(){return c.apply(this,arguments)}}(),$=function(){var c=v()(n()().mark(function s(r,o){var u;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,m.ZP)(r,{method:"GET",data:o});case 2:return u=d.sent,d.abrupt("return",u);case 4:case"end":return d.stop()}},s)}));return function(r,o){return c.apply(this,arguments)}}(),x=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("/v1/chatroom/",{method:"GET",data:r});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),B=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("/v1/chatroom/".concat(r.id),{method:"DELETE"});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),U=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("/v1/chatroom/",{method:"POST",data:r});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),M=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("/v1/chatroom/".concat(r.id,"/details"),{method:"GET"});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),D=function(){var c=v()(n()().mark(function s(r){var o;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:r.id}});case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},s)}));return function(r){return c.apply(this,arguments)}}(),W=function(){var c=v()(n()().mark(function s(r,o){var u;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,m.ZP)("/v1/chatroom/".concat(o,"/update_chatroom"),{method:"POST",data:r});case 2:return u=d.sent,d.abrupt("return",u);case 4:case"end":return d.stop()}},s)}));return function(r,o){return c.apply(this,arguments)}}(),P=function(){var c=v()(n()().mark(function s(r,o){var u;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,m.ZP)("/v1/chatroom/".concat(o,"/smart_selection"),{method:"POST",data:r});case 2:return u=d.sent,d.abrupt("return",u);case 4:case"end":return d.stop()}},s)}));return function(r,o){return c.apply(this,arguments)}}(),e=function(){var c=v()(n()().mark(function s(r,o,u){var a;return n()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,m.ZP)("/v1/chatroom/".concat(o,"/agents/").concat(u,"/setting"),{method:"PUT",data:r});case 2:return a=E.sent,E.abrupt("return",a);case 4:case"end":return E.stop()}},s)}));return function(r,o,u){return c.apply(this,arguments)}}(),g=function(){var c=v()(n()().mark(function s(r,o){var u;return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,m.ZP)("/v1/chatroom/".concat(r,"/chatroom_message"),{method:"GET",data:o});case 2:return u=d.sent,d.abrupt("return",u);case 4:case"end":return d.stop()}},s)}));return function(r,o){return c.apply(this,arguments)}}()},21446:function(Q,L,t){var R=t(15009),n=t.n(R),Z=t(97857),v=t.n(Z),m=t(99289),b=t.n(m),$=t(5574),x=t.n($),B=t(83510),U=t(32332),M=t(35312),D=t(55102),W=t(17788),P=t(67294),e=t(94840),g=t(85893),c=D.Z.TextArea,s=function(o){var u=o.setIsModalOpen,a=o.isModalOpen,d=o.transformData,E=o.CreationType,ae=o.setcreationType,de=o.ModalType,N=(0,M.useIntl)(),te=(0,P.useState)(""),re=x()(te,2),ne=re[0],pe=re[1],_e=(0,P.useState)(""),se=x()(_e,2),me=se[0],fe=se[1],ve=(0,P.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),oe=x()(ve,2),G=oe[0],l=oe[1];(0,P.useEffect)(function(){},[]);var _=function(h){pe(h.target.value)},p=function(h){fe(h.target.value)},O=function(){var f=b()(n()().mark(function h(){var k,i;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(k={name:ne,mode:E.apps_mode,description:me,icon:JSON.stringify(G.id),icon_background:""},E.apps_mode!=2){C.next=8;break}return C.next=4,(0,B.uy)(k);case 4:i=C.sent,i.code===0&&(u(!1),j(i.data.app_id)),C.next=10;break;case 8:(0,U.Go)("SET",v()(v()({},k),{},{type:!1})),j();case 10:case"end":return C.stop()}},h)}));return function(){return f.apply(this,arguments)}}(),K=function(h){d.map(function(k){k.name==h.name&&(console.log(k,"item"),ae(k))})},j=function(h){h?M.history.push("/".concat(E.path,"?app_id=").concat(h,"&&type=false")):M.history.push("/".concat(E.path,"?type=false"))};return(0,g.jsx)(W.Z,{title:N.formatMessage({id:"creation.addnewapp"}),open:a,okText:N.formatMessage({id:"creation"}),onOk:O,onCancel:function(){return u(!1)},okButtonProps:{disabled:ne===""},width:820,children:(0,g.jsxs)("div",{className:"pb-1",children:[de?(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:N.formatMessage({id:"creation.appntype"})}),(0,g.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:d&&d.map(function(f){return(0,g.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:f.apps_mode===E.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){K(f)},children:[(0,g.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,g.jsx)("img",{className:"w-6 h-6",src:f.signicon,alt:""})}),(0,g.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:f.name})]})})})]}):null,(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"mb-5",children:[(0,g.jsxs)("p",{className:"text-xs mt-5",children:[E.apps_mode==1?N.formatMessage({id:"creation.agent"}):E.apps_mode==2?N.formatMessage({id:"creation.workflow"}):E.apps_mode==3?N.formatMessage({id:"creation.repository"}):N.formatMessage({id:"creation.skill"}),N.formatMessage({id:"creation.appiconname"})]}),(0,g.jsxs)("div",{className:"flex items-center justify-around",children:[(0,g.jsx)(e.Z,{CardData:G,setCardData:l}),(0,g.jsx)(D.Z,{showCount:!0,maxLength:20,placeholder:N.formatMessage({id:"creation.placeholder.appname"}),onChange:_})]})]}),(0,g.jsxs)("div",{className:"mb-5 text-xs",children:[(0,g.jsxs)("p",{children:[E.apps_mode==1?N.formatMessage({id:"creation.agent"}):E.apps_mode==2?N.formatMessage({id:"creation.workflow"}):E.apps_mode==3?N.formatMessage({id:"creation.repository"}):N.formatMessage({id:"creation.skill"}),N.formatMessage({id:"creation.appdescribe"})]}),(0,g.jsx)(c,{showCount:!0,maxLength:100,rows:4,placeholder:N.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:p})]})]})]})})};L.Z=s},94840:function(Q,L,t){var R=t(97857),n=t.n(R),Z=t(32332),v=t(55241),m=t(67294),b=t(85893),$=function(B){var U=B.CardData,M=B.setCardData;(0,m.useEffect)(function(){},[]);var D=function(){return(0,b.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,Z.s9)("all").map(function(e){return(0,b.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){W(e)},children:(0,b.jsx)("img",{src:e.image,alt:""})})})})},W=function(e){M(n()(n()({},U),{},{icon:e.image,id:e.id}))};return(0,b.jsx)(v.Z,{content:D,trigger:"click",placement:"bottomLeft",children:(0,b.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,b.jsx)("img",{src:(0,Z.s9)("single",U.id?U.id:U.icon),alt:""})})})};L.Z=$},33816:function(Q,L,t){t.r(L),t.d(L,{default:function(){return oe}});var R=t(15009),n=t.n(R),Z=t(99289),v=t.n(Z),m=t(5574),b=t.n(m),$=t(97857),x=t.n($),B=t(43722),U=t(21446),M=t(99702),D=t(32332),W=t(38703),P=t(67294),e=t(85893),g=function(l){var _=l.subtitle,p=l.handleClick,O=l.lineClamp,K=O===void 0?2:O,j=l.textDetails,f=l.title,h=l.icon,k=l.iconType,i=k===void 0?"":k,y=l.operation,C=y===void 0?"":y,X=l.progress,Y=l.status,he=(0,P.useState)(0),ee=b()(he,2),le=ee[0],ie=ee[1],ue=function(){ie(X)},xe=function(){ie(0)},ge=function(ce){return"rounded-[4px] border-l-[4px] ".concat(ce==1?"border-[#1B64F3]":ce==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,e.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative ".concat(Y!==void 0?ge(Y):"graphicbox"),onClick:p,onMouseEnter:function(){X!=null&&ue()},onMouseLeave:function(){X!=null&&xe()},children:[Y!==void 0&&(0,e.jsx)("div",{style:{width:"".concat(le,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(Y==1?"bg-[#1B64F3]/[.03]":Y==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,e.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,e.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,e.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,e.jsx)("img",{src:(0,D.s9)("single",h),className:"w-[22px] h-[22px]"}),i&&(0,e.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,e.jsx)("img",{src:"/icons/".concat(i,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,e.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,e.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,e.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,e.jsx)("span",{className:"truncate",children:f}),(0,e.jsx)("span",{className:"flex items-center flex-1",children:_})]}),(0,e.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:j})]})}),C&&(0,e.jsx)("div",{className:"flex items-center w-[24px]",children:(0,e.jsx)("span",{className:"operation",children:C})}),X!=null&&(0,e.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,e.jsx)(W.Z,{type:"circle",percent:X,size:29})})]})]})},c=g,s=t(29608),r=t(55927),o=t(35790),u=t(35312),a=t(14726),d=t(71230),E=t(15746),ae=t(32983),de=t(74330),N=t(54941),te=function(l){var _,p=l.subtitle;return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:p.app_name}),(0,e.jsx)(o.Z,{}),(0,e.jsx)("span",{className:"pl-[10px] text-[#1B64F3] text-[12px]",children:p.node_name||((_=p.node_exec_data)===null||_===void 0?void 0:_.node_name)})]})})},re=function(l){var _=l.progressObj,p=function(){return parseFloat(_.elapsed_time).toFixed(6)},O=function(j){var f=new Date(j),h=f.getFullYear(),k=(f.getMonth()+1).toString().padStart(2,"0"),i=f.getDate().toString().padStart(2,"0"),y=f.getHours().toString().padStart(2,"0"),C=f.getMinutes().toString().padStart(2,"0"),X=f.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(h,".").concat(k,".").concat(i," ").concat(y,":").concat(C,":").concat(X)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:_.created_time&&O(_.created_time)}),(0,e.jsx)("div",{className:"truncate",children:_.apps_name||_.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(_.status==1?"bg-blue-600":_.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[p(),"S"]})]})]})})},ne=function(l){var _=l.operationObj,p=(0,s.Z)(function(j){return j.setRunId}),O=(0,s.Z)(function(j){return j.setRunPanelLogRecord}),K=(0,s.Z)(function(j){return j.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(a.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:_.publish_status==0,icon:(0,e.jsx)("img",{src:_.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"}),onClick:function(f){return f.stopPropagation(),O(!1),K(!1),p(_.app_id),!1}})})})},pe=function(l){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:l.bindAdd,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:l.type})]})})})},_e=function(l){var _=l.blocklsit,p=l.item,O=l.blockIndex,K=(0,s.Z)(function(i){return i.setRunPanelLogRecord}),j=(0,s.Z)(function(i){return i.setDealtWithData}),f=(0,s.Z)(function(i){return i.setRunId}),h=function(y){switch(p.key){case"my_agent":u.history.push("/Agents?app_id=".concat(p.list[y].app_id,"&type=false"));break;case"more_agent":u.history.push("/ReadOnlyAgent?app_id=".concat(p.list[y].app_id,"&type=true"));break;case"my_workflow":u.history.push("/workspace/workflow?app_id=".concat(p.list[y].app_id,"&type=false"));break;case"more_workflow":u.history.push("/workspace/workflow?app_id=".concat(p.list[y].app_id,"&type=true"));break;case"workflow_log":K(p.list[y]),f(null),j(!1);break;case"backlogs":j(p.list[y]),f(null),K(!1);break;default:break}},k=function(y){return y.completed_progress?parseInt(y.completed_progress.slice(0,-1)):!1};return(0,e.jsx)("div",{className:"".concat(p.key=="workflow_log"?"px-[10px] cardbox":"cardbox"),style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(d.Z,{gutter:[30,p.key=="workflow_log"?20:0],children:_.map(function(i,y){return(0,e.jsxs)(E.Z,{className:"graphicHoverbox",span:p.biserial?12:24,children:[p.key=="backlogs"&&(0,e.jsx)(c,{icon:i.icon,title:i.node_name&&(0,e.jsx)(te,{subtitle:i})||i.node_exec_data.node_name&&(0,e.jsx)(te,{subtitle:i}),textDetails:i.app_run_name||i.run_name,handleClick:function(){h(y)},lineClamp:1}),(p.key=="my_agent"||p.key=="more_agent")&&(0,e.jsx)(c,{icon:i.icon,title:i.name,textDetails:i.description,handleClick:function(){h(y)},lineClamp:1}),(p.key=="my_workflow"||p.key=="more_workflow")&&(0,e.jsx)(c,{icon:i.icon,title:i.name,textDetails:i.description,handleClick:function(){h(y)},lineClamp:1,operation:(0,e.jsx)(ne,{operationObj:i}),iconType:p.key=="my_workflow"?i.publish_status==0?"play_disable_icon":"play_icon":""}),p.key=="workflow_log"&&(0,e.jsx)(c,{status:i.status,icon:i.icon,title:i.app_runs_name||i.run_name,textDetails:(0,e.jsx)(re,{progressObj:i}),handleClick:function(){h(y)},lineClamp:1,progress:i.percentage||k(i)})]},y)})})})},se=function(l){var _=l.item,p=l.intl,O=function(){var j=_.key=="my_agent"||_.key=="more_agent"?1:2,f=_.key=="more_agent"||_.key=="more_workflow";(0,D.f1)("SET",j,f),u.history.push("/creation")};return(0,e.jsx)("div",{onClick:O,children:_.key!=="backlogs"&&_.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:p.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},me=function(l,_,p,O){var K=function(){var h=l.key=="my_agent"?{name:"Agent",path:"Agents",id:1}:{name:"WorkFlow",path:"workspace/workflow",id:2};p(function(k){return x()(x()({},k),h)}),_(!0)},j=l.key=="my_agent"?O.formatMessage({id:"app.dashboard.title_button_1.1"}):l.isAdd?O.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[l.isAdd&&(0,e.jsx)(pe,{bindAdd:K,type:l.isAdd&&j}),(0,e.jsx)(se,{item:l,intl:O})]})},fe=function(){var l=(0,u.useIntl)(),_=[{title:l.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0},{title:l.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:l.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:l.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:l.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:l.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],p=(0,P.useState)(!1),O=b()(p,2),K=O[0],j=O[1],f=(0,P.useState)({}),h=b()(f,2),k=h[0],i=h[1],y=(0,P.useState)(_),C=b()(y,2),X=C[0],Y=C[1],he=(0,P.useState)(!1),ee=b()(he,2),le=ee[0],ie=ee[1],ue=(0,P.useRef)(!1),xe=function(){var T=v()(n()().mark(function A(){var S,I;return n()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,B.rw)();case 2:S=V.sent,S.code==0&&(I=S.data,ue.current=!0,Y(function(H){return H.map(function(F){return x()(x()({},F),{},{list:I[F.key]})})}),ie(!0));case 4:case"end":return V.stop()}},A)}));return function(){return T.apply(this,arguments)}}(),ge=function(A,S){var I=new Map;return S.reverse().forEach(function(w){I.set(w.app_run_id,w)}),A.forEach(function(w){I.set(w.app_run_id,w)}),Array.from(I.values()).reverse()},q=function(A,S){var I=new Map;return S.reverse().forEach(function(w){I.set(w.exec_id,w)}),A.forEach(function(w){var V,H;w.exec_id=(V=w.node_exec_data)===null||V===void 0?void 0:V.node_exec_id,(H=w.node_exec_data)!==null&&H!==void 0&&H.node_exec_id&&I.set(w.exec_id,w)}),Array.from(I.values()).reverse()},ce=function(){var T=v()(n()().mark(function A(){var S,I,w;return n()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(ue.current){H.next=3;break}return H.next=3,xe();case 3:I=J==null||(S=J.filter(function(F){return F.type=="workflow_need_human_confirm"}).map(function(F){var z=F.data;return z}))===null||S===void 0?void 0:S.filter(function(F){return F.type!==1}),w=J==null?void 0:J.filter(function(F){return F.type=="workflow_run_progress"}).map(function(F){var z=F.data;return z}),(I&&I.length||w&&w.length)&&Y(function(F){return F.map(function(z){return z.list?x()(x()({},z),{},{list:z.key=="backlogs"?q(I,z.list):z.key=="workflow_log"?ge(w,z.list):z.list}):x()({},z)})});case 6:case"end":return H.stop()}},A)}));return function(){return T.apply(this,arguments)}}(),J=(0,r.Z)(function(T){return T.flowMessage});(0,P.useEffect)(function(){ce()},[J]);var be=(0,s.Z)(function(T){return T.submitPromptId});return(0,P.useEffect)(function(){be&&Y(function(T){return T.map(function(A){var S;return A.key=="backlogs"?x()(x()({},A),{},{list:(S=A.list)===null||S===void 0?void 0:S.filter(function(I){return I.exec_id!=be})}):x()({},A)})})},[be]),(0,e.jsxs)(e.Fragment,{children:[le&&X.map(function(T,A){return(0,e.jsx)(E.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:T.title}),(0,e.jsx)("span",{children:me(T,j,i,l)})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:T.list&&T.list.length?(0,e.jsx)(_e,{blocklsit:T.list,item:T,blockIndex:A}):(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(ae.Z,{image:ae.Z.PRESENTED_IMAGE_SIMPLE,description:l.formatMessage({id:"app.dashboard.None"})})})})]})},A)}),!le&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(de.Z,{size:"large"})}),(0,e.jsx)(U.Z,{setIsModalOpen:j,isModalOpen:K,ModalType:!1,CreationType:k})]})},ve=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"px-[30px] pb-[10px] flex flex-col",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:[(0,e.jsx)(N.Z,{keys:"dash_board",path:"/meeting"}),(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(d.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(fe,{})})})]}),(0,e.jsx)(M.Z,{})]})},oe=ve},54941:function(Q,L,t){var R=t(35312),n=t(85893),Z=function(m){var b=(0,R.useIntl)(),$=[{label:b.formatMessage({id:"app.dashboard.menu"}),key:"dash_board",icon:function(D,W){return(0,n.jsx)("img",{src:"/icons/plaza_m1_c".concat(D==W?"1":"2",".svg"),className:"w-[16px] h-[16px]"})}},{label:b.formatMessage({id:"app.chatroom_list.menu"}),key:"meeting",icon:function(D,W){return(0,n.jsx)("img",{src:"/icons/plaza_m2_c".concat(D==W?"1":"2",".svg"),className:"w-[16px] h-[16px]"})}}],x=m.keys,B=m.path,U=function(D){D!==x&&R.history.push(B)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex gap-x-[20px] pt-[20px] pb-[20px]",children:$.map(function(M,D){return(0,n.jsxs)("div",{className:"pt-[6px] pb-[6px] pl-[15px] pr-[15px] cursor-pointer rounded-[8px] items-center flex gap-x-[10px] ".concat(M.key==x?"bg-[#fff] text-[#1B64F3]":""),onClick:function(){U(M.key)},children:[(0,n.jsx)("span",{children:M.icon(x,M.key)}),(0,n.jsx)("span",{className:"text-[14px]",children:M.label})]},D)})})})};L.Z=Z}}]);
