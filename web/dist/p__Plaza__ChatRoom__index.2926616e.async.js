"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[57],{82826:function(Ke,_e,l){l.d(_e,{Z:function(){return re}});var ge=l(1413),S=l(67294),we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},J=we,pe=l(91146),x=function(V,be){return S.createElement(pe.Z,(0,ge.Z)((0,ge.Z)({},V),{},{ref:be,icon:J}))},ce=S.forwardRef(x),re=ce},2068:function(Ke,_e,l){l.d(_e,{Z:function(){return re}});var ge=l(1413),S=l(67294),we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},J=we,pe=l(91146),x=function(V,be){return S.createElement(pe.Z,(0,ge.Z)((0,ge.Z)({},V),{},{ref:be,icon:J}))},ce=S.forwardRef(x),re=ce},86:function(Ke,_e,l){var ge=l(5574),S=l.n(ge),we=l(32332),J=l(38703),pe=l(67294),x=l(85893),ce=function(a){var V=a.subtitle,be=a.handleClick,ie=a.lineClamp,je=ie===void 0?2:ie,Y=a.textDetails,he=a.title,Pe=a.icon,Te=a.iconType,ke=Te===void 0?"":Te,$e=a.operation,Fe=$e===void 0?"":$e,Ce=a.progress,me=a.status,Le=a.backlogTips,De=(0,pe.useState)(0),ye=S()(De,2),Ne=ye[0],Ie=ye[1],He=function(){Ie(Ce)},Ve=function(){Ie(0)},Ze=function(e){return"rounded-[4px] border-l-[4px] ".concat(e==1?"border-[#1B64F3]":e==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,x.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(me!==void 0?Ze(me):"graphicbox"),onClick:be,onMouseEnter:function(){Ce!=null&&He()},onMouseLeave:function(){Ce!=null&&Ve()},children:[me!==void 0&&(0,x.jsx)("div",{style:{width:"".concat(Ne,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(me==1?"bg-[#1B64F3]/[.03]":me==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,x.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,x.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,x.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,x.jsx)("img",{src:(0,we.s9)("single",Pe),className:"w-[22px] h-[22px]"}),ke&&(0,x.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,x.jsx)("img",{src:"/icons/".concat(ke,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,x.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,x.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,x.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,x.jsx)("span",{className:"truncate",children:he}),(0,x.jsx)("span",{className:"flex items-center flex-1",children:V})]}),(0,x.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:Y})]})}),Le||(0,x.jsx)(x.Fragment,{}),Fe&&(0,x.jsx)("div",{className:"flex items-center w-[24px]",children:(0,x.jsx)("span",{className:"operation",children:Fe})}),Ce!=null&&(0,x.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,x.jsx)(J.Z,{type:"circle",percent:Ce,size:29})})]})]})};_e.Z=ce},39873:function(Ke,_e,l){var ge=l(5574),S=l.n(ge),we=l(42881),J=l(67294),pe=l(85893),x=function(re){var a=re.children,V=re.className,be=V===void 0?"":V,ie=re.dragDirection,je=ie===void 0?"left":ie,Y=re.minWidth,he=Y===void 0?415:Y,Pe=re.maxWidth,Te=Pe===void 0?820:Pe,ke=re.minHeight,$e=ke===void 0?200:ke,Fe=re.maxHeight,Ce=Fe===void 0?800:Fe,me=re.defaultWidth,Le=me===void 0?415:me,De=re.defaultHeight,ye=De===void 0?300:De,Ne=re.onChange,Ie=(0,J.useState)(Le),He=S()(Ie,2),Ve=He[0],Ze=He[1],G=(0,J.useState)(ye),e=S()(G,2),et=e[0],Je=e[1],tt=(0,J.useCallback)(function(Qe,We){Ze(Qe),We&&Je(We),Ne==null||Ne(Qe,We)},[Ze,Je,Ne]),Ye=(0,we.W)({direction:["left","right"].includes(je)?"horizontal":"vertical",triggerDirection:je,minWidth:he,maxWidth:Te,minHeight:$e,maxHeight:Ce,onResize:tt}),Be=Ye.triggerRef,xe=Ye.containerRef;return(0,pe.jsxs)("div",{ref:xe,style:{width:["left","right"].includes(je)?"".concat(Ve,"px"):void 0,height:["top","bottom"].includes(je)?"".concat(et,"px"):void 0},className:"flex flex-col p-4 shadow-lg rounded-md border border-blue-300 bg-white z-10 wrapPanel ".concat(be),children:[je==="left"&&(0,pe.jsx)("div",{ref:Be,className:"absolute top-1/2 -translate-y-1/2 -left-2 w-3 h-6 cursor-col-resize resize-x",children:(0,pe.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),je==="right"&&(0,pe.jsx)("div",{ref:Be,className:"absolute top-1/2 -translate-y-1/2 -right-2 flex justify-end w-3 h-6 cursor-col-resize resize-x",children:(0,pe.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),je==="top"&&(0,pe.jsx)("div",{ref:Be,className:"absolute left-1/2 -translate-x-1/2 -top-2 h-3 w-6 cursor-row-resize resize-y",children:(0,pe.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),je==="bottom"&&(0,pe.jsx)("div",{ref:Be,className:"absolute left-1/2 -translate-x-1/2 -bottom-2 h-3 w-6 cursor-row-resize resize-y",children:(0,pe.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),a]})};_e.Z=(0,J.memo)(x)},23987:function(Ke,_e,l){l.r(_e),l.d(_e,{default:function(){return Da}});var ge=l(15009),S=l.n(ge),we=l(99289),J=l.n(we),pe=l(5574),x=l.n(pe),ce=l(43722),re=l(32983),a=l(67294),V=l(35312),be=l(19632),ie=l.n(be),je=l(97857),Y=l.n(je),he=l(32332),Pe=l(82114),Te=l(82826),ke=l(63783),$e=l(3471),Fe=l(45360),Ce=l(85576),me=l(28036),Le=l(83062),De=l(72269),ye=l(74330),Ne=l(96486),Ie=l(44010),He=l(73445),Ve=l(782),Ze=(0,He.Ue)((0,Ve.mW)(function(u,n){return{clearMemory:null,truncatable:!1,disableInput:!1,summaryParams:null,runsSummaryShow:!1,summaryClick:!0,orientationShow:!0,setClearMemory:function(d){u({clearMemory:d})},setTruncatable:function(d){u({truncatable:d})},setDisableInput:function(d){u({disableInput:d})},setSummaryParams:function(d){u({summaryParams:d})},setRunsSummaryShow:function(d){u({runsSummaryShow:d})},setSummaryClick:function(d){console.log(d),u({summaryClick:d})},setOrientationShow:function(d){u({orientationShow:d})}}})),G=Ze,e=l(85893),et=function(n){var i=(0,V.useIntl)(),d=n.roomDetail,_=n.setAgent,f=Fe.ZP.useMessage(),h=x()(f,2),v=h[0],I=h[1],y=(0,V.useParams)(),g=y.id,p=G(function(r){return r.disableInput}),N=G(function(r){return r.truncatable}),C=G(function(r){return r.setClearMemory}),D=(0,a.useState)([]),E=x()(D,2),m=E[0],H=E[1],ee=(0,a.useState)(Y()({},d)),$=x()(ee,2),t=$[0],Z=$[1],W=(0,a.useState)([]),Q=x()(W,2),B=Q[0],A=Q[1],X=(0,a.useRef)(!1),ne=(0,a.useRef)(!1),ae=(0,a.useState)(!1),K=x()(ae,2),P=K[0],z=K[1],T=function(){var s=Ce.Z.confirm;s({title:i.formatMessage({id:"app.chatroom.clear.title"}),icon:(0,e.jsx)(Pe.Z,{}),content:i.formatMessage({id:"app.chatroom.clear.tips"}),okText:i.formatMessage({id:"app.chatroom.clear.confirm"}),okType:"danger",cancelText:i.formatMessage({id:"app.chatroom.clear.cancel"}),onOk:function(){C(["TRUNCATE","0"])}})},M=function(){var r=J()(S()().mark(function s(){var c;return S()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!g){j.next=5;break}return j.next=3,(0,ce.cH)({id:g});case 3:if(c=j.sent,c.code==0)try{Z(function(){return Y()(Y()({},c.data.chat_info),{},{max_round:c.data.max_round,smart_selection:c.data.smart_selection})}),H(c.data.agent_list),X.current=!0}catch(b){}case 5:case"end":return j.stop()}},s)}));return function(){return r.apply(this,arguments)}}(),se=function(){var r=J()(S()().mark(function s(){var c;return S()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,ce.j2)({id:g});case 2:c=j.sent,c.code==0&&(A(c.data.list),ne.current=!0);case 4:case"end":return j.stop()}},s)}));return function(){return r.apply(this,arguments)}}(),oe=function(){var r=J()(S()().mark(function s(c){var o,j,b;return S()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!g){k.next=11;break}if(o=c.active==1?0:1,o!=0){k.next=7;break}if(j=m.filter(function(L){return L.active==1}),j.length-1!=0){k.next=7;break}return v.open({type:"error",content:i.formatMessage({id:"app.chatroom.sidebar.agent_tips"}),duration:2}),k.abrupt("return",!1);case 7:return k.next=9,(0,ce.sT)({active:o},g,c.agent_id);case 9:b=k.sent,b.code==0&&H(function(L){return L.map(function(ue){return Y()(Y()({},ue),{},{active:ue.agent_id==c.agent_id?o:ue.active})})});case 11:case"end":return k.stop()}},s)}));return function(c){return r.apply(this,arguments)}}(),ve=function(s){return s.length>6?s.length=6:s.lenth,s},U=function(s){s.type=="my_agent"?V.history.push("/Agents?app_id=".concat(s.app_id,"&type=false&from=chat_room")):V.history.push("/ReadOnlyAgent?app_id=".concat(s.app_id,"&type=true&from=chat_room"))},O=function(s){V.history.replace("/chat_room/".concat(s.chatroom_id)),window.location.reload()},te=function(){z(!0)},q=function(){z(!1)},R=function(){var r=J()(S()().mark(function s(c){var o,j,b;return S()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(c.checkItem&&c.checkItem.length==0)){k.next=3;break}return v.open({type:"error",content:i.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2}),k.abrupt("return");case 3:return o=ie()(c.checkItem).map(function(L){var ue=L.agent_id,de=L.active,le=de===void 0?1:de;return{agent_id:ue,active:le}}),j={description:t.description,name:t.name,max_round:t.max_round},k.next=7,(0,ce.sI)(Y()(Y()({},j),{},{agent:o}),g);case 7:b=k.sent,b.code==0?(c.checkItem.map(function(L){L.active=L.active==null?1:L.active}),H(ie()(c.checkItem)),_.current=ie()(c.checkItem),v.open({type:"success",content:i.formatMessage({id:"app.chatroom.content.addAgentTips"}),duration:2})):v.open({type:"error",content:i.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2});case 9:case"end":return k.stop()}},s)}));return function(c){return r.apply(this,arguments)}}(),w=function(){var r=J()(S()().mark(function s(){var c;return S()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return c=t.smart_selection==1?0:1,j.next=3,(0,ce.r5)({smart_selection:c},g);case 3:Z(function(b){return Y()(Y()({},b),{},{smart_selection:c})});case 4:case"end":return j.stop()}},s)}));return function(){return r.apply(this,arguments)}}();return(0,a.useEffect)(function(){M(),se()},[]),(0,e.jsxs)(e.Fragment,{children:[I,(0,e.jsxs)("div",{className:"h-full w-[320px] bg-[#fff] shrink-0",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.1)"},id:"sider",children:[(0,e.jsxs)("div",{className:"flex flex-col  h-full",children:[(0,e.jsx)("div",{className:"w-full flex  justify-start px-[30px]",children:(0,e.jsxs)("div",{className:"py-[20px] text-[14px] text-[#213044] font-[500] flex gap-x-[10px] items-center w-full",children:[(0,e.jsxs)("div",{className:"cursor-pointer flex items-center shrink-0",onClick:function(){V.history.go(-1)},children:[(0,e.jsx)(me.ZP,{type:"link",danger:!0,className:"p-0",children:(0,e.jsx)(Te.Z,{className:"text-[#1B64F3] w-[16px] h-[16px]"})}),(0,e.jsx)("span",{className:"ml-[5px] text-[#213044] text-sm",children:i.formatMessage({id:"app.chatroom.sidebar.return"})})]}),(0,e.jsx)("div",{className:"h-full flex items-center shrink-0",children:(0,e.jsx)("div",{className:"w-[1px] h-[13px] bg-[#ebebeb]"})}),(0,e.jsx)("div",{className:"flex-1 min-w-0 truncate",children:t.name})]})}),(0,e.jsx)("div",{className:"h-[360px]",children:(0,e.jsxs)("div",{className:"pb-[20px] border-b-[1px] px-[10px]",children:[(0,e.jsxs)("div",{className:"flex items-center cursor-pointer px-[20px]",children:[(0,e.jsx)("div",{className:"flex gap-x-[5px] flex-1",children:(0,e.jsx)("span",{className:"text-[#666] text-[14px]",children:i.formatMessage({id:"app.chatroom.sidebar.agent_title"})})}),(0,e.jsxs)("div",{className:"shrink-0 flex items-center",children:[(0,e.jsx)(Le.Z,{className:"pr-[2px]",overlayStyle:{fontSize:"12px"},title:i.formatMessage({id:"app.chatroom.sidebar.chatroom_switch_tips"}),children:(0,e.jsx)(ke.Z,{className:"cursor-pointer text-[#666] text-[12px]"})}),(0,e.jsx)("span",{className:"text-[12px] text-[#666] pr-[5px]",children:i.formatHTMLMessage({id:"app.chatroom_list.switch"})}),(0,e.jsx)(De.Z,{size:"small",defaultChecked:!0,className:"w-[28px]",checked:t.smart_selection==1,onChange:w,disabled:p})]})]}),(0,e.jsx)("div",{className:"py-[20px] pt-[10px]",children:(0,e.jsx)("div",{className:"h-[220px] overflow-y-auto px-[10px]",children:X.current?(0,e.jsx)("div",{className:"flex flex-col",children:m&&m.length>0?m.map(function(r){return(0,e.jsxs)("div",{className:"flex items-center gap-x-[5px] hover:bg-[#FAFAFA] transition p-[10px] slider_agent_box",children:[(0,e.jsxs)("div",{className:"flex gap-x-[15px] flex-1 min-w-[0]",children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] flex items-center justify-center shrink-0",children:(0,e.jsx)("img",{src:(0,he.s9)("single",r.icon),alt:"",className:"w-[18px]  h-[18px]"})}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("span",{className:"text-[#213044] text-[12px] font-[500] truncate w-full",children:r.name}),(0,e.jsx)("span",{className:"text-[#999999] text-[12px] truncate",children:r.description})]})]}),(0,e.jsxs)("div",{className:"shrink-0 flex gap-x-[15px] items-center",children:[(0,e.jsx)("div",{className:"edit cursor-pointer w-[20px] h-[20px] flex justify-center items-center opacity-0 transition",onClick:function(){U(r)},children:(0,e.jsx)("img",{className:"w-[16px] h-[16px]",src:"/icons/edit_icon_1.svg"})}),(0,e.jsx)(De.Z,{size:"small",disabled:p,defaultChecked:!0,className:"w-[28px]",checked:r.active==1,onChange:function(){oe(r)}})]})]},r.agent_id)}):(0,e.jsx)("div",{className:"w-full min-h-[220px] flex items-center justify-center",children:(0,e.jsx)(re.Z,{image:re.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(ye.Z,{})})})}),(0,e.jsx)("div",{className:"px-[20px] ",children:(0,e.jsx)("div",{style:{border:"1px solid #1B64F3"},onClick:te,className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:i.formatMessage({id:"app.chatroom.add.agent"})})})}),(0,e.jsx)("div",{className:"px-[20px] pt-[15px]",children:(0,e.jsx)("div",{style:N&&!p?{border:"1px solid #1B64F3"}:{background:"#d9d9d9",color:"rgba(0,0,0,0.25)",cursor:"not-allowed"},onClick:(0,Ne.throttle)(function(){N&&!p&&T()}),className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:i.formatMessage({id:"app.chatroom.sidebar.agent_button"})})})})]})}),(0,e.jsxs)("div",{className:"flex-1 min-h-[0] flex flex-col",children:[(0,e.jsx)("div",{className:"pt-[30px] px-[30px] text-[#666] text-[14px] shrink-0",children:i.formatMessage({id:"app.chatroom.sidebar.othe_title"})}),(0,e.jsx)("div",{className:"px-[10px] flex-1 min-h-[0] py-[10px]",children:(0,e.jsx)("div",{style:{height:"calc(100% - 20px)"},className:"px-[10px]  overflow-y-auto",children:ne.current?(0,e.jsx)("div",{className:"h-full flex flex-col",children:B&&B.length>0?B.map(function(r){return(0,e.jsxs)("div",{className:"w-full transition hover:bg-[#FAFAFA] p-[10px] cursor-pointer",onClick:function(){O(r)},children:[(0,e.jsxs)("div",{className:"flex pb-[10px]",children:[(0,e.jsx)("div",{className:"flex-1 min-w-[0] truncate text-[#333] text-[14px]",children:r.name}),r.active==0?(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c2.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:i.formatMessage({id:"app.chatroom.sidebar.othe_status"})})]}):(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c1.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:i.formatMessage({id:"app.chatroom.sidebar.othe_status_succeed"})})]})]}),(0,e.jsx)("div",{className:"flex gap-x-[10px]",children:r.agent_list&&r.agent_list.length>0?(0,e.jsxs)(e.Fragment,{children:[ve(r.agent_list).map(function(s,c){return(0,e.jsx)("div",{className:"flex",children:(0,e.jsx)("div",{className:"w-[30px] h-[30px] bg-[#F4F8F1] rounded-[6px] flex items-center justify-center",children:(0,e.jsx)("img",{src:(0,he.s9)("single",s.icon),alt:"",className:"w-[18px]  h-[18px]"})})},c)}),r.agent_list.length>=6?(0,e.jsx)($e.Z,{}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})]},r.chatroom_id)}):(0,e.jsx)("div",{className:"w-full h-full",children:(0,e.jsx)(re.Z,{image:re.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(ye.Z,{})})})})]})]}),(0,e.jsx)(Ie.Z,{show:P,popupClose:q,popupSave:R,checkList:m,zIndex:99})]})]})},Je=(0,a.memo)(et),tt=l(13769),Ye=l.n(tt),Be=l(47635),xe=l(1413),Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},We=Qe,Ae=l(91146),ht=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:We}))},gt=a.forwardRef(ht),jt=gt,yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},St=yt,_t=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:St}))},Nt=a.forwardRef(_t),wt=Nt,bt=l(2068),Ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M312.1 591.5c3.1 3.1 8.2 3.1 11.3 0l101.8-101.8 86.1 86.2c3.1 3.1 8.2 3.1 11.3 0l226.3-226.5c3.1-3.1 3.1-8.2 0-11.3l-36.8-36.8a8.03 8.03 0 00-11.3 0L517 485.3l-86.1-86.2a8.03 8.03 0 00-11.3 0L275.3 543.4a8.03 8.03 0 000 11.3l36.8 36.8z"}},{tag:"path",attrs:{d:"M904 160H548V96c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H120c-17.7 0-32 14.3-32 32v520c0 17.7 14.3 32 32 32h356.4v32L311.6 884.1a7.92 7.92 0 00-2.3 11l30.3 47.2v.1c2.4 3.7 7.4 4.7 11.1 2.3L512 838.9l161.3 105.8c3.7 2.4 8.7 1.4 11.1-2.3v-.1l30.3-47.2a8 8 0 00-2.3-11L548 776.3V744h356c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 512H160V232h704v440z"}}]},name:"fund-projection-screen",theme:"outlined"},Mt=Ct,Rt=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:Mt}))},Ft=a.forwardRef(Rt),kt=Ft,lt=l(26915),Dt=l(20640),ct=l.n(Dt),Me=l(22683),Re=l(97807),It=["node","className","children"],At=lt.Z.TextArea,Ot=(0,a.memo)(function(u){var n=u.setInstruction,i=u.messageApi,d=u.isStop,_=u.scrollDomRef,f=u.upButtonDom,h=(0,V.useIntl)(),v=G(function(E){return E.disableInput}),I=G(function(E){return E.setDisableInput}),y=(0,a.useState)(""),g=x()(y,2),p=g[0],N=g[1],C=function(m){!m.shiftKey&&m.target.value==""&&(i.open({type:"warning",content:h.formatMessage({id:"app.chatroom.content.input"}),duration:10}),N(""),m.preventDefault()),!m.shiftKey&&m.keyCode==13&&m.target.value!=""&&(I(!0),N(""),n(["INPUT",m.target.value]),m.preventDefault())},D=(0,Ne.throttle)(function(){n(["STOP",null])},300);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"max-w-[920px] w-full min-h-[60px] mt-[20px] mb-[20px] mx-auto relative",children:[(0,e.jsx)("div",{ref:f,className:"w-[40px] h-[40px] rounded-[6px]  bg-[#fff] border border-[#ddd] cursor-pointer absolute top-[-67px] left-2/4 flex items-center justify-center hidden",onClick:function(m){_.current.scrollTo({top:0,behavior:"smooth"})},children:(0,e.jsx)(jt,{className:"text-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center p-[12px] gap-[10px] box-border border border-[#ccc] bg-[#fff] rounded-[8px]",children:[(0,e.jsx)(At,{id:"userValue",className:"placeholder-text-[#aaa] placeholder-text-[14px]",autoSize:{minRows:1,maxRows:6},value:p,disabled:v,onChange:function(m){N(m.target.value)},onPressEnter:C,style:{height:"34px",border:"none",resize:"none",backgroundColor:"transparent"},placeholder:"".concat(h.formatMessage({id:"app.chatroom.content.input"}),"\u2026")}),d?(0,e.jsx)("div",{className:"min-w-[34px] h-[34px] bg-[#000] flex items-center justify-center cursor-pointer rounded-[4px]",onClick:D,children:(0,e.jsx)(wt,{style:{color:"#fff",fontSize:"20px"}})}):(0,e.jsx)("div",{className:"".concat(v||!p?"bg-[#ddd]":"bg-[#1B64F3]"," min-w-[30px] h-[30px]  flex items-center justify-center cursor-pointer rounded-[6px]"),onClick:(0,Ne.throttle)(function(){if(v||!p)return!1;p||i.open({type:"warning",content:h.formatMessage({id:"app.chatroom.content.input"}),duration:10}),I(!0),n(["INPUT",p]),N("")},300),children:(0,e.jsx)("img",{src:"/icons/send_icon_w.svg",alt:"",className:"w-[18px] h-[18px]"})})]})]})})}),Et=function u(n){return typeof n=="string"?n:Array.isArray(n)?n.map(u).join(""):a.isValidElement(n)?u(n.props.children):""},Pt=function(n){return Et(n)},at=function(n,i){return{code:function(_){var f=_.node,h=_.className,v=_.children,I=Ye()(_,It),y=/language-(\w+)/.exec(h||"");if(y!=null&&y.length){var g=Math.random().toString(36).substr(2,9);return(0,e.jsxs)("div",{className:" rounded-md border overflow-hidden",children:[(0,e.jsxs)("div",{className:"flex h-12 items-center justify-between bg-zinc-100 px-4 bg-zinc-900",children:[(0,e.jsx)("div",{className:"flex items-center gap-2",children:(0,e.jsx)("p",{className:"text-sm  text-[#fff] mb-[0]",children:y[1]})}),(0,e.jsxs)("div",{className:"text-[12px] text-[#fff] mb-[0] cursor-pointer flex gap-x-[5px]",onClick:function(){var p=J()(S()().mark(function N(C){var D;return S()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,D=C.currentTarget,m.next=4,ct()(Pt(v));case 4:D&&(D.children[1].innerText=i.formatMessage({id:"app.chatroom.content.copySucceed"})),setTimeout(function(){D&&(D.children[1].innerText=i.formatMessage({id:"app.chatroom.content.copycode"}))},200),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(0),console.error("Failed to copy text: ",m.t0);case 11:case"end":return m.stop()}},N,null,[[0,8]])}));return function(N){return p.apply(this,arguments)}}(),children:[(0,e.jsx)("img",{src:"/icons/chat_copy_w.svg"}),(0,e.jsx)("span",{children:i.formatMessage({id:"app.chatroom.content.copycode"})})]})]}),(0,e.jsx)("div",{className:"overflow-x-auto bg-[#282c34] text-[#abb2bf]",children:(0,e.jsx)("div",{id:"".concat(g).concat(n),className:"p-4",children:v})})]})}else return(0,e.jsx)("code",Y()(Y()({},I),{},{children:v}))}}},ot=(0,a.memo)(function(u){var n=u.messageApi,i=u.index,d=u.idName,_=u.cidName,f=(0,V.useIntl)(),h=(0,a.useState)(!1),v=x()(h,2),I=v[0],y=v[1];return(0,e.jsx)("div",{className:"flex gap-x-[4px]",children:(0,e.jsxs)("div",{onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1)},className:" p-[2px] cursor-pointer rounded-md flex gap-x-[5px] items-center pt-[10px]",onClick:function(){var g=J()(S()().mark(function p(N){var C,D;return S()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return C=N.target.closest("#".concat(d).concat(i)),D=C.querySelector("#".concat(_).concat(i)),m.prev=2,m.next=5,ct()(D.innerText);case 5:n.open({type:"success",content:f.formatMessage({id:"app.chatroom.content.copySucceed"}),duration:2}),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(2),console.error("Failed to copy text: ",m.t0);case 11:case"end":return m.stop()}},p,null,[[2,8]])}));return function(p){return g.apply(this,arguments)}}(),children:[(0,e.jsx)("img",{src:"".concat(I?"/icons/chat_copy_check.svg":"/icons/chat_copy.svg"),className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[12px] ".concat(I?" text-[#1B64F3]":"text-[#666]"),children:f.formatMessage({id:"app.chatroom.content.copy"})})]})})}),ut=function(n){var i=n.id,d=n.index,_=n.idName,f=n.cidName,h=(0,V.useIntl)(),v=G(function(D){return D.setSummaryClick}),I=(0,a.useState)(!0),y=x()(I,2),g=y[0],p=y[1],N=G(function(D){return D.summaryClick});(0,a.useEffect)(function(){p(N)},[N]);var C=G(function(D){return D.setSummaryParams});return(0,e.jsx)("div",{className:"flex gap-x-[4px] text-[#666] ".concat(g?"cursor-pointer hover:text-[#1B64F3]":"cursor-no-drop"),children:(0,e.jsxs)("div",{className:" p-[2px]  rounded-md flex gap-x-[5px] items-center pt-[10px]",onClick:function(E){if(g){var m=E.target.closest("#".concat(_).concat(d)),H=m.querySelector("#".concat(f).concat(d));C({id:i,message:H.innerText}),v(!1)}},children:[(0,e.jsx)(bt.Z,{className:"text-[16px]"}),(0,e.jsx)("span",{className:"text-[12px]",children:h.formatMessage({id:"app.chatroom.content.summary"})})]})})},Tt=function(n){var i=n.roomid,d=(0,V.useIntl)(),_=G(function(p){return p.setSummaryClick}),f=(0,a.useState)(!0),h=x()(f,2),v=h[0],I=h[1],y=G(function(p){return p.summaryClick});(0,a.useEffect)(function(){I(y)},[y]);var g=G(function(p){return p.setSummaryParams});return(0,e.jsx)("div",{className:"bg-[#fff] text-[#999999]   items-center justify-center rounded-[8px] ".concat(v?"cursor-pointer hover:text-[#1B64F3]":"cursor-no-drop"),style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,e.jsxs)("div",{className:" gap-x-[4px] flex items-center justify-center h-[40px] px-[20px]",onClick:function(){v&&(g({id:i}),_(!1))},children:[(0,e.jsx)(kt,{className:"text-[16px]"}),(0,e.jsx)("span",{className:"text-[14px]",children:d.formatMessage({id:"app.chatroom.content.meetingSummary"})})]})})},$t=(0,a.memo)(function(u){var n=u.messageApi,i=u.setCurrentMessageContent,d=u.sendValue,_=u.agentList,f=u.scrollDomRef,h=u.upButtonDom,v=u.setIsStop,I=u.setisEnd,y=u.setSendValue,g=(0,V.useIntl)(),p=(0,V.useParams)(),N=p.id,C=G(function(X){return X.setDisableInput}),D=(0,a.useState)({}),E=x()(D,2),m=E[0],H=E[1],ee=(0,a.useRef)(!1),$=(0,a.useRef)(""),t=G(function(X){return X.setTruncatable}),Z=function(ne){var ae=ne.data;if(ae.indexOf("--NEXUSAI-INSTRUCTION-")!==-1){var K=JSON.parse(ae.slice(22,-2));switch(K[0]){case"ERROR":C(!1),v(!1),y(""),n.open({type:"error",content:"webSocket-".concat(K[1]),duration:10});break;case"CHAT":var P={content:"".concat(K[1]),is_agent:0};i(function(M){return[].concat(ie()(M),[P])}),setTimeout(function(){f.current.scrollTop=0,h.current.style.display="none"});break;case"STOPPABLE":v(K[1]);break;case"TRUNCATABLE":t(K[1]),K[1]||n.open({type:"success",content:"".concat(g.formatMessage({id:"app.chatroom.sidebar.cleartips"})),duration:3});break;case"TRUNCATEOK":n.open({type:"success",content:"".concat(g.formatMessage({id:"app.chatroom.sidebar.cleartips"})),duration:3});break}}if(ae.indexOf("REPLY")!==-1&&ae.indexOf("--NEXUSAI-INSTRUCTION-")!==-1){var z=JSON.parse(ae.slice(22,-2))[1];$.current="",ee.current=!0;var T=_.current.filter(function(M){return M.agent_id==z})[0];Object.keys(m).length&&i(function(M){return[].concat(ie()(M),[m])}),H(function(M){return Y()(Y()({},M),{},{is_agent:1,icon:T==null?void 0:T.icon,name:T==null?void 0:T.name})}),v(!0),t(!1)}ae.indexOf("--NEXUSAI-INSTRUCTION-")===-1&&ee.current&&(f.current.scrollTop=0,h.current.style.display="none",$.current+=ae,H(function(M){return Y()(Y()({},M),{},{content:$.current})})),ae.indexOf("ENDCHAT")!==-1&&(ee.current=!1,$.current="",C(!1),v(!1),t(!0),Object.keys(m).length&&i(function(M){return[].concat(ie()(M),[m])}),H({}),I(!0),y(""))},W=(0,Be.Z)("chat",Z),Q=W.runSocket,B=W.sendMessage,A=W.readyState;return(0,a.useEffect)(function(){A==1&&N&&B(JSON.stringify(["ENTER",parseInt(N)]))},[A]),(0,a.useEffect)(function(){d&&A==1&&B(d)},[d]),(0,a.useEffect)(function(){Q()},[]),(0,e.jsx)(e.Fragment,{children:m.name?(0,e.jsxs)("div",{className:"w-full flex gap-[15px] pt-[15px] pb-[15px] ".concat(m.is_agent!=1?"flex-row-reverse":""),children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] flex items-center justify-center shrink-0",children:m.is_agent==1?(0,e.jsx)("img",{src:(0,he.s9)("single",m.icon),alt:"",className:"w-[18px]  h-[18px]"}):(0,e.jsx)("img",{src:"/icons/user_header.svg",className:"w-[18px]  h-[18px]"})}),(0,e.jsxs)("div",{className:"flex1 max-w-[560px] text-right",id:"addcontent",children:[(0,e.jsx)("div",{className:"".concat(m.is_agent==1?"text-left":"text-right"," font-[500] text-[14px] text-[#213044] pb-[8px]"),children:m.name?m.name:(0,he.Qy)("GET").nickname}),(0,e.jsx)("div",{className:"flex ".concat(m.is_agent==1?"flex-row":"flex-row-reverse"),children:(0,e.jsx)("div",{className:"text-left inline-block markdown-container text-[14px] font-[400] text-[#213044] bg-[#F7F7F7] p-[15px] pb-[1px] leading-[22px]",style:m.is_agent==1?{borderRadius:" 0px 8px 8px 8px"}:{borderRadius:"8px 0px 8px 8px",background:"rgba(27,100,243,0.1)",whiteSpace:"pre-wrap"},id:"addchilContent",children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],components:at("add",g),children:m.content})})})]})]}):(0,e.jsx)(e.Fragment,{})})}),Lt=(0,a.memo)(function(u){var n=u.messageApi,i=u.setUserMessage,d=u.sendValue,_=u.agentList,f=u.scrollDomRef,h=u.upButtonDom,v=u.setIsStop,I=u.setSendValue,y=(0,V.useIntl)(),g=(0,a.useState)([]),p=x()(g,2),N=p[0],C=p[1],D=(0,a.useState)(!1),E=x()(D,2),m=E[0],H=E[1],ee=(0,V.useParams)(),$=ee.id;return(0,a.useEffect)(function(){m&&(i(function(t){return[].concat(ie()(N.reverse()),ie()(t))}),C([]),setTimeout(function(){H(!1),f.current.scrollTop=0},200))},[m]),(0,e.jsxs)(e.Fragment,{children:[N.length?N.map(function(t,Z){return(0,e.jsxs)("div",{className:"w-full flex gap-[15px] pt-[15px] pb-[15px] ".concat(t.is_agent!=1?"flex-row-reverse":""),children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] flex items-center justify-center shrink-0",children:t.is_agent==1?(0,e.jsx)("img",{src:(0,he.s9)("single",t.icon),alt:"",className:"w-[18px]  h-[18px]"}):(0,e.jsx)("img",{src:"/icons/user_header.svg",className:"w-[18px]  h-[18px]"})}),(0,e.jsxs)("div",{className:"flex1 max-w-[560px] text-right",id:"currentContent".concat(Z),children:[(0,e.jsx)("div",{className:"".concat(t.is_agent==1?"text-left":"text-right"," font-[500] text-[14px] text-[#213044] pb-[8px]"),children:t.name?t.name:(0,he.Qy)("GET").nickname}),(0,e.jsx)("div",{className:"flex ".concat(t.is_agent==1?"flex-row":"flex-row-reverse"),children:(0,e.jsx)("div",{className:"text-left inline-block markdown-container text-[14px] font-[400] text-[#213044] bg-[#F7F7F7] p-[15px] pb-[1px] leading-[22px]",style:t.is_agent==1?{borderRadius:" 0px 8px 8px 8px"}:{borderRadius:"8px 0px 8px 8px",background:"rgba(27,100,243,0.1)",whiteSpace:"pre-wrap"},id:"currentChilContent".concat(Z),children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],components:at(Z,y),children:t.content})})}),t.is_agent==1?(0,e.jsxs)("div",{className:"flex gap-x-[20px]",children:[(0,e.jsx)(ot,{messageApi:n,index:Z,idName:"currentContent",cidName:"currentChilContent"}),(0,e.jsx)(ut,{id:$,index:Z,idName:"currentContent",cidName:"currentChilContent"})]}):(0,e.jsx)(e.Fragment,{})]})]},Z)}):(0,e.jsx)(e.Fragment,{}),(0,e.jsx)($t,{messageApi:n,setCurrentMessageContent:C,sendValue:d,agentList:_,scrollDomRef:f,upButtonDom:h,setIsStop:v,setisEnd:H,setSendValue:I})]})}),Ht=(0,a.memo)(function(u){var n=u.messageApi,i=u.scrollDomRef,d=u.instruction,_=u.setIsStop,f=u.upButtonDom,h=u.setInstruction,v=u.agentList,I=(0,V.useIntl)(),y=(0,V.useParams)(),g=y.id,p=(0,a.useState)([]),N=x()(p,2),C=N[0],D=N[1],E=(0,a.useRef)(!1),m=(0,a.useState)(""),H=x()(m,2),ee=H[0],$=H[1],t=(0,a.useRef)(null),Z=(0,a.useRef)(!0),W=(0,a.useRef)(2),Q=(0,a.useRef)(1),B=(0,a.useRef)(0),A=function(){var P=J()(S()().mark(function z(T){var M,se,oe=arguments;return S()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(M=oe.length>1&&oe[1]!==void 0?oe[1]:function(){},!g){U.next=6;break}return U.next=4,(0,ce.KH)(g,{page:Q.current,page_size:10});case 4:se=U.sent,se.code==0&&(W.current=se.data.total_pages,T||(t.current.style.display="none"),D(function(O){return T?ie()(se.data.list.reverse()):[].concat(ie()(O),ie()(se.data.list.reverse()))}),T?setTimeout(function(){i.current.scrollTop=0,f.current.style.display="none"}):B.current=se.data.list.length,Z.current=!0);case 6:case"end":return U.stop()}},z)}));return function(T){return P.apply(this,arguments)}}(),X=function(z){var T=z.target.scrollHeight+(z.target.scrollTop-z.target.clientHeight);E.current!==Math.ceil(z.target.scrollTop)<-50&&(E.current=Math.ceil(z.target.scrollTop)<-50,f.current.style.display=E.current?"flex":"none"),T<10&&Z.current&&(Z.current=!1,Q.current=Q.current+1,t.current.style.display="flex",W.current>=Q.current?A(!1):t.current.style.display="none")},ne=function(z,T){T==="0"&&(T=Number(T));var M=["".concat(z),T===0||T?T:null];$(JSON.stringify(M))},ae=G(function(P){return P.disableInput}),K=G(function(P){return P.clearMemory});return(0,a.useEffect)(function(){K&&K.length&&ne(K[0],K[1])},[K]),(0,a.useEffect)(function(){d&&d.length&&(ne(d[0],d[1]?d[1]:""),h([]))},[d]),(0,a.useEffect)(function(){Q.current=1,A(!0)},[]),(0,e.jsx)("div",{className:"flex-1 min-h-0",children:(0,e.jsxs)("div",{className:"h-full min-h-full overflow-y-auto flex flex-col-reverse  items-center  scroll-smooth chatroom",ref:i,onScroll:X,children:[(0,e.jsxs)("div",{className:"min-w-[860px]",children:[(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"flex flex-col-reverse",children:(0,e.jsx)(e.Fragment,{children:C&&C.length?C.map(function(P,z){return(0,e.jsxs)("div",{id:"c".concat(P.id),className:"w-full flex gap-[15px] pt-[15px] pb-[15px] ".concat(P.is_agent!=1?"flex-row-reverse":""),children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] flex items-center justify-center shrink-0",children:P.is_agent==1?(0,e.jsx)("img",{src:(0,he.s9)("single",P.icon),alt:"",className:"w-[18px]  h-[18px]"}):(0,e.jsx)("img",{src:"/icons/user_header.svg",className:"w-[18px]  h-[18px]"})}),(0,e.jsxs)("div",{className:"flex1 max-w-[560px] text-right",id:"content".concat(z),children:[(0,e.jsx)("div",{className:"".concat(P.is_agent==1?"text-left":"text-right"," font-[500] text-[14px] text-[#213044] pb-[8px]"),children:P.name?P.name:(0,he.Qy)("GET").nickname}),(0,e.jsx)("div",{className:"flex ".concat(P.is_agent==1?"flex-row":"flex-row-reverse"),children:(0,e.jsx)("div",{className:"text-left markdown-container inline-block text-[14px] font-[400] text-[#213044] bg-[#F7F7F7] p-[15px] pb-[1px] leading-[22px]",style:P.is_agent==1?{borderRadius:" 0px 8px 8px 8px"}:{borderRadius:"8px 0px 8px 8px",background:"rgba(27,100,243,0.1)",whiteSpace:"pre-wrap"},id:"chilContent".concat(z),children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],components:at(z,I),children:P.content})})}),P.is_agent==1?(0,e.jsxs)("div",{className:"flex gap-x-[20px]",children:[(0,e.jsx)(ot,{messageApi:n,idName:"content",cidName:"chilContent",index:z}),(0,e.jsx)(ut,{id:g,index:z,idName:"content",cidName:"chilContent"})]}):(0,e.jsx)(e.Fragment,{})]})]},z)}):(0,e.jsx)(e.Fragment,{})})}),(0,e.jsx)(Lt,{messageApi:n,setUserMessage:D,sendValue:ee,agentList:v,scrollDomRef:i,upButtonDom:f,setIsStop:_,setSendValue:$})]}),(0,e.jsx)("div",{className:"w-full flex justify-center pb-[10px]",children:!ae&&C.length?(0,e.jsx)(Tt,{roomid:g}):(0,e.jsx)(e.Fragment,{})})]}),(0,e.jsx)("div",{className:"text-center justify-center items-center flex",style:{display:"none"},ref:t,children:(0,e.jsx)(ye.Z,{})})]})})}),Zt=(0,a.memo)(function(u){var n=u.agentList,i=(0,a.useRef)(null),d=(0,a.useRef)(null),_=(0,a.useState)(!1),f=x()(_,2),h=f[0],v=f[1],I=(0,a.useState)([]),y=x()(I,2),g=y[0],p=y[1],N=Fe.ZP.useMessage(),C=x()(N,2),D=C[0],E=C[1];return(0,e.jsxs)(e.Fragment,{children:[E,(0,e.jsx)("div",{className:"mx-[44px] flex justify-center relative box-border pt-[12px] h-full",children:(0,e.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,e.jsx)(Ht,{instruction:g,setInstruction:p,messageApi:D,scrollDomRef:i,setIsStop:v,upButtonDom:d,agentList:n}),(0,e.jsx)(Ot,{setInstruction:p,messageApi:D,isStop:h,upButtonDom:d,scrollDomRef:i})]})})]})}),Bt=l(39873),zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},Ut=zt,Vt=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:Ut}))},Wt=a.forwardRef(Vt),Gt=Wt,Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},Jt=Kt,Yt=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:Jt}))},Qt=a.forwardRef(Yt),Xt=Qt,qt=l(83159),ea={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},ta=ea,aa=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:ta}))},na=a.forwardRef(aa),ra=na,Xe=l(86),dt=l(34994),pt=l(2216),sa=l(85877),ia=l(29432),la=l(39944),ca=l(11551),nt=l(55927),oa=function(n){var i,d,_,f=n.selectApp,h=n.runid,v=n.setBoxLoading,I=n.setinputShow,y=n.appId,g=n.id,p=n.setisRun,N=(0,V.useIntl)(),C=(0,a.useRef)(""),D=(0,a.useRef)(""),E=(0,a.useRef)(null),m=(0,a.useState)(""),H=x()(m,2),ee=H[0],$=H[1],t=(0,a.useState)(null),Z=x()(t,2),W=Z[0],Q=Z[1],B=(0,a.useState)([]),A=x()(B,2),X=A[0],ne=A[1],ae=(0,a.useState)(""),K=x()(ae,2),P=K[0],z=K[1],T=(0,nt.Z)(function(U){return U.flowMessage}),M=function(O){D.current=se(O);var te={user:{value:se(O)}};z(new la.z(te))},se=function U(O){return O.map(function(te){return te.type==="mention"?te.id:te.children?U(te.children):te.text}).join("")},oe=function(){var U=J()(S()().mark(function O(te){var q,R;return S()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return v(!0),q=Object.keys(te),q.forEach(function(s){E.current.properties[s]&&(E.current.properties[s].value=te[s])}),r.next=5,(0,ca.LH)({agent_id:f.checkItem[0].agent_id,ability_id:0,input_dict:E.current,prompt:P,data_source_run_id:C.current});case 5:R=r.sent,R.code==0&&($(R.data.outputs_md),v(!1),p(!1));case 7:case"end":return r.stop()}},O)}));return function(te){return U.apply(this,arguments)}}(),ve=function(){var U=J()(S()().mark(function O(te,q){var R,w;return S()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,ce.xT)(te,q);case 2:R=s.sent,(R==null?void 0:R.code)==0&&(C.current=R==null||(w=R.data)===null||w===void 0?void 0:w.app_run_id);case 4:case"end":return s.stop()}},O)}));return function(te,q){return U.apply(this,arguments)}}();return(0,a.useEffect)(function(){f&&f.checkItem.length&&(p(!0),ve(g,{app_id:y,app_run_id:h,status:1,corrected_parameter:""}))},[f]),(0,a.useEffect)(function(){var U=T.filter(function(r){return r.data.app_run_id==h&&r.type.indexOf("generate_meeting_action_items")!==-1});if(U.length!=0){var O,te=(O=U[U.length-1])===null||O===void 0||(O=O.data)===null||O===void 0||(O=O.exec_data)===null||O===void 0||(O=O.outputs)===null||O===void 0?void 0:O.value;if(te){var q=JSON.parse(te);E.current=q;var R=Object.keys(q.properties);if(R.length){Q(q.properties);var w=R.map(function(r){return{value:"<<".concat(ia.qX,".inputs.").concat(r,">>"),label:r}});ne(w)}I(!1),v(!1)}}},[T]),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Xe.Z,{icon:f==null||(i=f.checkItem[0])===null||i===void 0?void 0:i.icon,title:f==null||(d=f.checkItem[0])===null||d===void 0?void 0:d.name,textDetails:f==null||(_=f.checkItem[0])===null||_===void 0?void 0:_.description,iconType:"robot_icon",handleClick:function(){}})}),W!=null?(0,e.jsxs)(dt.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full",disabled:!D.current},searchConfig:{submitText:N.formatMessage({id:"workflow.button.run"})}},onFinish:function(O){oe(O)},children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(pt._,{data:W})}),(0,e.jsx)("div",{className:"h-[150px] overflow-y-auto border border-color-[#eee] py-[4px] px-[11px] mb-[8px]",children:(0,e.jsx)(sa.Z,{onChange:function(O){M(O)},options:X,placeholder:"\u8BF7\u8F93\u5165\u8FD0\u884C\u6307\u4EE4\uFF0C\u8F93\u5165@\u63D2\u5165\u53D8\u91CF"})})]}):(0,e.jsx)(e.Fragment,{}),ee?(0,e.jsx)("div",{className:"max-h-[400px] overflow-y-auto mt-[16px]",children:(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],children:ee})})}):(0,e.jsx)(e.Fragment,{})]})},ua=(0,a.memo)(oa),da=l(66309),ft=l(42237),pa=l(93696),fa=function(n,i){return a.createElement(Ae.Z,(0,xe.Z)((0,xe.Z)({},n),{},{ref:i,icon:pa.Z}))},xa=a.forwardRef(fa),ma=xa,va=l(4981),rt=l(29608),ha=(0,a.memo)(function(u){var n=u.progressObj,i=function(){return parseFloat(n.elapsed_time).toFixed(6)},d=function(f){var h=new Date(f),v=h.getFullYear(),I=(h.getMonth()+1).toString().padStart(2,"0"),y=h.getDate().toString().padStart(2,"0"),g=h.getHours().toString().padStart(2,"0"),p=h.getMinutes().toString().padStart(2,"0"),N=h.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(v,".").concat(I,".").concat(y," ").concat(g,":").concat(p,":").concat(N)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:n.created_time&&d(n.created_time)}),(0,e.jsx)("div",{className:"truncate",children:n.apps_name||n.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(n.status==1?"bg-blue-600":n.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[i(),"S"]})]})]})})}),ga=function(n){var i,d,_,f=n.selectApp,h=n.runid,v=n.setBoxLoading,I=n.setinputShow,y=n.appId,g=n.id,p=n.setisRun,N=(0,V.useIntl)(),C=(0,a.useRef)(""),D=(0,a.useRef)(null),E=(0,a.useState)(null),m=x()(E,2),H=m[0],ee=m[1],$=(0,a.useState)(!1),t=x()($,2),Z=t[0],W=t[1],Q=(0,a.useState)(null),B=x()(Q,2),A=B[0],X=B[1],ne=(0,a.useState)(null),ae=x()(ne,2),K=ae[0],P=ae[1],z=(0,a.useState)(null),T=x()(z,2),M=T[0],se=T[1],oe=(0,rt.Z)(function(s){return s.setDealtWithData}),ve=(0,rt.Z)(function(s){return s.setRunPanelLogRecord}),U=function(){var s=J()(S()().mark(function c(o){var j,b,F,k,L;return S()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return v(!0),j=Object.keys(o),b={},j.forEach(function(le){D.current.properties[le]&&(D.current.properties[le].value=o[le]),K&&K.forEach(function(Se){Se.node_id==le&&(b[le]=o[le])})}),F={inputs:D.current,node_confirm_users:b,run_name:"chatroom-".concat(g,"-run-").concat(C.current,"-driven"),run_type:1,data_source_run_id:C.current},de.next=7,(0,ft.UE)(y,F);case 7:k=de.sent,k.code==0&&(C.current=k==null||(L=k.data)===null||L===void 0?void 0:L.app_run_id,W(!0),p(!1));case 9:case"end":return de.stop()}},c)}));return function(o){return s.apply(this,arguments)}}(),O=function(){var s=J()(S()().mark(function c(){var o,j;return S()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:o=r==null?void 0:r.filter(function(k){return k.type=="workflow_run_progress"&&k.data.app_run_id==C.current}).map(function(k){var L=k.data;return L}),o&&o.length&&(j=o[o.length-1],ee(j),v(!1));case 2:case"end":return F.stop()}},c)}));return function(){return s.apply(this,arguments)}}(),te=function(){var s=J()(S()().mark(function c(){var o,j,b,F,k;return S()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:j=r==null?void 0:r.filter(function(de){return de.type=="workflow_need_human_confirm"&&de.data.app_run_id==C.current}),b=(o=j.map(function(de){var le=de.data,Se=de.need_human_confirm;return{data:le,need_human_confirm:Se}}))===null||o===void 0?void 0:o.filter(function(de){return de.data.type!==1}),b&&b.length&&(k=b[b.length-1].data,k.exec_id=k==null||(F=k.node_exec_data)===null||F===void 0?void 0:F.node_exec_id,se(b[b.length-1]),v(!1));case 3:case"end":return ue.stop()}},c)}));return function(){return s.apply(this,arguments)}}(),q=function(c){return c.completed_progress?parseInt(c.completed_progress.slice(0,-1)):!1},R=function(){var s=J()(S()().mark(function c(o,j){var b,F;return S()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,ce.xT)(o,j);case 2:b=L.sent,(b==null?void 0:b.code)==0&&(C.current=b==null||(F=b.data)===null||F===void 0?void 0:F.app_run_id);case 4:case"end":return L.stop()}},c)}));return function(o,j){return s.apply(this,arguments)}}(),w=function(){var s=J()(S()().mark(function c(){var o,j;return S()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return console.log(y),F.next=3,(0,ft.zO)(y);case 3:o=F.sent,o.code==0&&P(o==null||(j=o.data)===null||j===void 0?void 0:j.need_confirm_nodes),R(g,{app_id:y,app_run_id:h,status:1,corrected_parameter:""});case 6:case"end":return F.stop()}},c)}));return function(){return s.apply(this,arguments)}}();(0,a.useEffect)(function(){f&&f.checkItem.length&&(p(!0),w())},[f]);var r=(0,nt.Z)(function(s){return s.flowMessage});return(0,a.useEffect)(function(){O(),te();var s=r.filter(function(F){return F.data.app_run_id==h&&F.type.indexOf("generate_meeting_action_items")!==-1});if(s.length!=0){var c,o=(c=s[s.length-1])===null||c===void 0||(c=c.data)===null||c===void 0||(c=c.exec_data)===null||c===void 0||(c=c.outputs)===null||c===void 0?void 0:c.value;if(o){var j=JSON.parse(o);D.current=j;var b=Object.keys(j.properties);b.length&&(console.log(j.properties),X(j.properties)),I(!1),v(!1)}}},[r]),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Xe.Z,{icon:f==null||(i=f.checkItem[0])===null||i===void 0?void 0:i.icon,title:f==null||(d=f.checkItem[0])===null||d===void 0?void 0:d.name,textDetails:f==null||(_=f.checkItem[0])===null||_===void 0?void 0:_.description,iconType:"workflow_icon",handleClick:function(){}})}),!Z&&A!=null?(0,e.jsxs)(dt.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full"},searchConfig:{submitText:N.formatMessage({id:"workflow.button.run"})}},onFinish:U,children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(pt._,{data:A})}),(0,e.jsx)(va.e,{data:K})]}):(0,e.jsx)(e.Fragment,{children:A!=null?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[N.formatMessage({id:"app.summaryhistory.input"}),":"]}),Object.values(A).map(function(s){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:s.display_name||s.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:s.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),M&&M.need_human_confirm!=0?(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[6px] items-center h-[20px] cursor-pointer",onClick:function(){oe(M.data)},children:[(0,e.jsx)("div",{children:(0,e.jsx)(ma,{className:"text-[#1B64F3] text-[16px]"})}),(0,e.jsx)("span",{children:N.formatMessage({id:"app.summary.backlogTips"})})]})}):(0,e.jsx)(e.Fragment,{}),H?(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(Xe.Z,{status:H.status,icon:H.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:H.run_name}),H.need_human_confirm==1?(0,e.jsx)(da.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:N.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)(ha,{progressObj:H}),handleClick:function(){ve(H)},progress:q(H)})}):(0,e.jsx)(e.Fragment,{})]})},ja=(0,a.memo)(ga),ya=function(n){var i,d,_,f=(0,V.useIntl)(),h=n.runid,v=n.id,I=n.setBoxLoading,y=n.scrollDom,g=n.setinputShow,p=(0,a.useRef)("agent"),N=(0,a.useRef)(""),C=(0,a.useState)(!1),D=x()(C,2),E=D[0],m=D[1],H=(0,a.useState)({type:"agent",checkItem:[],show:!1}),ee=x()(H,2),$=ee[0],t=ee[1],Z=[{key:"1",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){t(function(A){return Y()(Y()({},A),{},{type:"agent",show:!0})})},children:f.formatMessage({id:"app.summary.SelectAgent"})})},{key:"2",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){t(function(A){return Y()(Y()({},A),{},{type:"workflow",show:!0})})},children:f.formatMessage({id:"app.summary.SelectWorkflow"})})}],W=function(){t(function(A){return Y()(Y()({},A),{},{show:!1})})},Q=function(A){I(!0),t(function(X){return Y()(Y()({},X),{},{checkItem:A.checkItem})}),p.current=$.type,N.current=A.checkItem[0].app_id};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"pt-[24px]  border-[#ddd]",style:{minHeight:$!=null&&(i=$.checkItem)!==null&&i!==void 0&&i.length?y==null||(d=y.current)===null||d===void 0?void 0:d.offsetHeight:"100%"},children:[(0,e.jsxs)("div",{className:"text-[14px] font-[500] flex item-center",children:[(0,e.jsx)("div",{className:"flex-1",children:f.formatMessage({id:"app.summary.Runapp"})}),(0,e.jsx)("div",{className:"px-[10px]",children:E?(0,e.jsx)(qt.Z,{menu:{items:Z},children:(0,e.jsx)(ra,{className:"transition cursor-pointer text-[#999] text-[18px] hover:text-[#1B64F3]"})}):(0,e.jsx)(e.Fragment,{})})]}),(0,e.jsx)("div",{children:$!=null&&(_=$.checkItem)!==null&&_!==void 0&&_.length?(0,e.jsx)(e.Fragment,{children:p.current=="agent"?(0,e.jsx)(ua,{id:v,appId:N.current,selectApp:$,runid:h,setBoxLoading:I,scrollDom:y,setinputShow:g,setisRun:m}):(0,e.jsx)(ja,{id:v,appId:N.current,selectApp:$,runid:h,setBoxLoading:I,scrollDom:y,setinputShow:g,setisRun:m})}):(0,e.jsxs)("div",{className:"flex gap-x-[20px] min-h-[70px] items-center px-[20px]",children:[(0,e.jsxs)(me.ZP,{className:"flex-1 text-[14px]",onClick:function(){t(function(A){return Y()(Y()({},A),{},{type:"agent",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/robot_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),f.formatMessage({id:"app.summary.SelectAgent"})]}),(0,e.jsxs)(me.ZP,{className:"flex-1 text-[14px]",onClick:function(){t(function(A){return Y()(Y()({},A),{},{type:"workflow",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/workflow_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),f.formatMessage({id:"app.summary.SelectWorkflow"})]})]})})]}),(0,e.jsx)(Ie.Z,{show:$.show,nodetype:$.type,popupClose:W,popupSave:Q,checkList:p.current==$.type?$.checkItem:[],zIndex:99,radio:!0})]})},Sa=(0,a.memo)(ya),xt=l(87740),mt=(0,a.memo)(function(u){var n=u.id,i=u.message,d=(0,V.useIntl)(),_=G(function(p){return p.setSummaryClick}),f=(0,a.useState)(!0),h=x()(f,2),v=h[0],I=h[1],y=G(function(p){return p.summaryClick}),g=G(function(p){return p.setSummaryParams});return(0,a.useEffect)(function(){I(y)},[y]),(0,e.jsx)("div",{className:"flex flex-row-reverse",children:(0,e.jsxs)(me.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(N){v&&(g({id:n,message:i}),_(!1))},children:[(0,e.jsx)("span",{className:"text-[12px]",children:d.formatMessage({id:"app.summaryhistory.submitText"})}),(0,e.jsx)(xt.Z,{className:"text-[14px]"})]})})}),_a=function(n){var i,d,_,f,h=n.setShow,v=n.inputShow,I=n.setBoxLoading,y=n.setAppRunId,g=n.scrollDom,p=(0,V.useIntl)(),N=(0,a.useState)(!1),C=x()(N,2),D=C[0],E=C[1],m=(0,a.useState)(""),H=x()(m,2),ee=H[0],$=H[1],t=(0,a.useState)(""),Z=x()(t,2),W=Z[0],Q=Z[1],B=(0,a.useRef)(""),A=(0,a.useRef)(""),X=(0,a.useRef)(!1),ne=(0,a.useState)(!1),ae=x()(ne,2),K=ae[0],P=ae[1],z=(0,a.useState)(null),T=x()(z,2),M=T[0],se=T[1],oe=G(function(w){return w.setSummaryClick}),ve=function(){var w=J()(S()().mark(function r(s){var c,o,j,b,F=arguments;return S()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return c=F.length>1&&F[1]!==void 0?F[1]:{app_run_id:"",corrected_parameter:""},L.next=3,(0,ce.Rp)(s,c);case 3:o=L.sent,(o==null?void 0:o.code)==0&&(y(o==null||(j=o.data)===null||j===void 0?void 0:j.app_run_id),A.current=o==null||(b=o.data)===null||b===void 0?void 0:b.app_run_id,c.app_run_id&&(X.current=!0));case 5:case"end":return L.stop()}},r)}));return function(s){return w.apply(this,arguments)}}(),U=function(){var w=J()(S()().mark(function r(s,c){var o,j,b,F,k;return S()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,ce.xM)(s,{message:c});case 2:o=ue.sent,(o==null?void 0:o.code)==0&&(A.current=o==null||(j=o.data)===null||j===void 0?void 0:j.app_run_id,y(o==null||(b=o.data)===null||b===void 0?void 0:b.app_run_id),o!=null&&(F=o.data)!==null&&F!==void 0&&(F=F.outputs)!==null&&F!==void 0&&F.value&&($(o==null||(k=o.data)===null||k===void 0||(k=k.outputs)===null||k===void 0?void 0:k.value),h(!0),I(!1),oe(!0),g.current.scrollTo({top:0})));case 4:case"end":return ue.stop()}},r)}));return function(s,c){return w.apply(this,arguments)}}(),O=function(){var w=J()(S()().mark(function r(){var s;return S()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,ce.Gh)({chatroom_id:B.current,app_run_id:A.current});case 2:s=o.sent,s&&s!==null&&s!==void 0&&s.data&&se(s.data);case 4:case"end":return o.stop()}},r)}));return function(){return w.apply(this,arguments)}}(),te=function(r){var s=new Date(r),c=s.getMonth()+1,o=s.getDate(),j=s.getHours(),b=s.getMinutes(),F=s.getSeconds();return s.getFullYear()+"-"+(c<10?"0"+c:c)+"-"+(o<10?"0"+o:o)+" "+(j<10?"0"+j:j)+":"+(b<10?"0"+b:b)+":"+(F<10?"0"+F:F)},q=(0,nt.Z)(function(w){return w.flowMessage});(0,a.useEffect)(function(){var w=q.filter(function(c){return c.data.app_run_id==A.current&&c.type.indexOf("generate_meeting_summary")!==-1});if(w.length!=0){var r,s=(r=w[w.length-1])===null||r===void 0||(r=r.data)===null||r===void 0||(r=r.exec_data)===null||r===void 0||(r=r.outputs)===null||r===void 0?void 0:r.value;s&&(X.current&&O(),$(s),P(!1),h(!0),oe(!0),I(!1),g.current.scrollTo({top:0}))}},[q]);var R=G(function(w){return w.summaryParams});return(0,a.useEffect)(function(){R&&R.id&&(B.current=R.id,M&&se(null),K&&P(!1),ee&&$(""),E(!0),R.message?(I(!0),U(R.id,R.message)):ve(R.id))},[R]),(0,e.jsx)(e.Fragment,{children:D?(0,e.jsxs)("div",{className:"pb-[16px]",children:[(0,e.jsx)("div",{className:"text-[16px] font-[600] pt-[12px]",children:p.formatMessage({id:"app.summary.title"})}),(0,e.jsx)("div",{className:"text-[14px] pt-[12px] leading-[23px] px-[8px]",children:ee?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:" ".concat("max-h-[400px]"," p-[12px]  bg-[#F7F7F7]  relative overflow-y-auto"),children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],children:M?M==null||(i=M.source_run)===null||i===void 0?void 0:i.summary:ee})}),M&&(M==null||(d=M.source_corrections)===null||d===void 0?void 0:d.length)>0||!v?(0,e.jsx)(mt,{id:B.current,message:M?M==null||(_=M.source_run)===null||_===void 0?void 0:_.summary:ee}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)("div",{className:"min-h-[120px] flex items-center justify-center",children:(0,e.jsx)(ye.Z,{size:"large"})})}),M&&(M==null||(f=M.source_corrections)===null||f===void 0?void 0:f.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[p.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),M.source_corrections.map(function(w,r){return(0,e.jsxs)("div",{className:"mb-[16px]",children:[(0,e.jsx)("div",{className:"rounded-[4px]  ".concat(M.source_corrections.length-1==r?"bg-blue-100":"bg-[#F7F7F7]"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[p.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",w.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[p.formatMessage({id:"app.summaryhistory.time"}),": ",te(w.created_time)]}),(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],children:w==null?void 0:w.corrected_summary})]})},w.created_time),!v||M.source_corrections.length-1!=r?(0,e.jsx)(mt,{id:B.current,message:w==null?void 0:w.corrected_summary}):(0,e.jsx)(e.Fragment,{})]},w.created_time)})]}):(0,e.jsx)(e.Fragment,{}),v?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsx)(lt.Z.TextArea,{onChange:function(r){Q(r.target.value)},value:W,disabled:!ee||K,rows:4,placeholder:p.formatMessage({id:"app.summary.placeholder"})})}),(0,e.jsx)("div",{className:"flex pt-[12px] gap-x-[4px]",children:(0,e.jsx)(me.ZP,{type:"primary",disabled:!ee||!W,loading:K,className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px] flex-1",onClick:function(){ve(B.current,{app_run_id:String(A.current),corrected_parameter:W}),P(!0),Q(""),h("")},children:p.formatMessage({id:"app.summary.submitText"})})})]}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})},Na=(0,a.memo)(_a),wa=(0,a.memo)(function(u){var n=u.progressObj;console.log(n);var i=function(){return parseFloat(n.elapsed_time).toFixed(6)},d=function(f){var h=new Date(f),v=h.getFullYear(),I=(h.getMonth()+1).toString().padStart(2,"0"),y=h.getDate().toString().padStart(2,"0"),g=h.getHours().toString().padStart(2,"0"),p=h.getMinutes().toString().padStart(2,"0"),N=h.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(v,".").concat(I,".").concat(y," ").concat(g,":").concat(p,":").concat(N)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:n.created_time&&d(n.created_time)}),(0,e.jsx)("div",{className:"truncate",children:n.apps_name||n.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(n.status==1?"bg-blue-600":n.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[i(),"S"]})]})]})})}),vt=(0,a.memo)(function(u){var n=u.id,i=u.message,d=(0,V.useIntl)(),_=G(function(p){return p.setSummaryClick}),f=(0,a.useState)(!0),h=x()(f,2),v=h[0],I=h[1],y=G(function(p){return p.summaryClick}),g=G(function(p){return p.setSummaryParams});return(0,a.useEffect)(function(){I(y)},[y]),(0,e.jsx)("div",{className:"flex flex-row-reverse",children:(0,e.jsxs)(me.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(N){v&&(g({id:n,message:i}),_(!1))},children:[(0,e.jsx)("span",{className:"text-[12px]",children:d.formatMessage({id:"app.summaryhistory.submitText"})}),(0,e.jsx)(xt.Z,{className:"text-[14px]"})]})})}),ba=function(n){var i=n.list,d=n.scrollDom,_=n.historyHeight,f=n.id,h=n.runid,v=(0,V.useIntl)(),I=(0,a.useState)([]),y=x()(I,2),g=y[0],p=y[1],N=(0,a.useRef)("100%"),C=(0,a.useState)(0),D=x()(C,2),E=D[0],m=D[1],H=(0,rt.Z)(function(t){return t.setRunPanelLogRecord}),ee=function(Z){var W=new Date(Z),Q=W.getMonth()+1,B=W.getDate(),A=W.getHours(),X=W.getMinutes(),ne=W.getSeconds();return W.getFullYear()+"-"+(Q<10?"0"+Q:Q)+"-"+(B<10?"0"+B:B)+" "+(A<10?"0"+A:A)+":"+(X<10?"0"+X:X)+":"+(ne<10?"0"+ne:ne)},$=function(Z){var W=Object.keys(Z),Q=[];return W.forEach(function(B){Q.push(Z[B])}),Q};return(0,a.useEffect)(function(){if(d){var t;N.current=d==null||(t=d.current)===null||t===void 0?void 0:t.offsetHeight}},[d]),(0,a.useEffect)(function(){_&&(N.current="auto")},[_]),(0,a.useEffect)(function(){p(ie()(i))},[i]),(0,a.useEffect)(function(){console.log(h),m(h)},[h]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"px-4",style:{minHeight:N.current},children:g&&g.length?g.map(function(t){var Z,W,Q,B,A,X,ne,ae,K,P,z,T,M,se,oe,ve,U,O,te,q;return t!=null&&t.source_run&&t!==null&&t!==void 0&&t.source_run.summary&&(!E||E!=(t==null||(Z=t.source_run)===null||Z===void 0?void 0:Z.id))?(0,e.jsx)("div",{className:"pt-[16px] border-b-[1px] border-color-[#eee] ",children:(0,e.jsxs)("div",{className:"pb-[60px]",children:[(0,e.jsx)("div",{className:"text-[16px] font-[600] pb-[8px] flex items-center",children:(0,e.jsx)("span",{className:"flex-1",children:v.formatMessage({id:"app.summary.title"})})}),(0,e.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:ee(t==null||(W=t.source_run)===null||W===void 0?void 0:W.created_time)}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"p-[12px]  leading-[22px] ".concat(t!=null&&t.source_corrections&&(t==null?void 0:t.source_corrections.length)>0?"bg-[#F7F7F7]":"bg-blue-100 rounded-[4px]"),children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],children:t==null||(Q=t.source_run)===null||Q===void 0?void 0:Q.summary})}),(0,e.jsx)(vt,{id:f,message:t==null||(B=t.source_run)===null||B===void 0?void 0:B.summary})]}),t!=null&&t.source_corrections&&(t==null?void 0:t.source_corrections.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[v.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),t==null?void 0:t.source_corrections.map(function(R,w){return(0,e.jsxs)("div",{className:"mb-[16px] last-of-type:mb-0",children:[(0,e.jsx)("div",{className:"rounded-[4px]  ".concat((t==null?void 0:t.source_corrections.length)-1!=w?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[v.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",R.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[v.formatMessage({id:"app.summaryhistory.time"}),":"," ",ee(R.created_time)]}),(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],children:R==null?void 0:R.corrected_summary})]})}),(0,e.jsx)(vt,{id:f,message:R==null?void 0:R.corrected_summary})]},R.created_time)})]}):(0,e.jsx)(e.Fragment,{}),t!=null&&t.target_run?(0,e.jsxs)("div",{className:"py-[12px]",children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[v.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,e.jsx)("span",{className:"font-[500] ",children:t!=null&&(A=t.target_run)!==null&&A!==void 0&&A.agent_id?"agent":"workflow"}),(0,e.jsx)("span",{className:"px-[6px]",children:":"}),(0,e.jsx)("span",{children:t==null||(X=t.target_run)===null||X===void 0||(X=X.app)===null||X===void 0?void 0:X.name})]})}),(0,e.jsx)("div",{children:t!=null&&(ne=t.target_run)!==null&&ne!==void 0&&(ne=ne.inputs)!==null&&ne!==void 0&&ne.properties?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[v.formatMessage({id:"app.summaryhistory.input"}),":"]}),$(t==null||(ae=t.target_run)===null||ae===void 0||(ae=ae.inputs)===null||ae===void 0?void 0:ae.properties).map(function(R){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:R.display_name||R.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:R.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{children:t!=null&&(K=t.target_run)!==null&&K!==void 0&&K.raw_user_prompt?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[v.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:t==null||(P=t.target_run)===null||P===void 0?void 0:P.raw_user_prompt})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[v.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(t==null||(z=t.target_run)===null||z===void 0?void 0:z.agent_id)!=0?(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(Me.U,{rehypePlugins:[Re.Z],children:t==null||(T=t.target_run)===null||T===void 0||(T=T.outputs)===null||T===void 0?void 0:T.value})}):(0,e.jsx)(Xe.Z,{status:t==null||(M=t.target_run)===null||M===void 0?void 0:M.status,icon:t==null||(se=t.target_run)===null||se===void 0?void 0:se.icon,title:t==null||(oe=t.target_run)===null||oe===void 0?void 0:oe.name,textDetails:(0,e.jsx)(wa,{progressObj:{created_time:t==null||(ve=t.target_run)===null||ve===void 0?void 0:ve.created_time,elapsed_time:t==null||(U=t.target_run)===null||U===void 0?void 0:U.elapsed_time,app_name:t==null||(O=t.target_run)===null||O===void 0?void 0:O.app.name,status:t==null||(te=t.target_run)===null||te===void 0?void 0:te.status}}),handleClick:function(){var w,r,s,c,o,j,b,F,k,L;H({app_id:t==null||(w=t.target_run)===null||w===void 0||(w=w.app)===null||w===void 0?void 0:w.id,app_name:t==null||(r=t.target_run)===null||r===void 0||(r=r.app)===null||r===void 0?void 0:r.name,icon:t==null||(s=t.target_run)===null||s===void 0?void 0:s.icon,workflow_id:t==null||(c=t.target_run)===null||c===void 0?void 0:c.workflow_id,type:2,app_run_id:t==null||(o=t.target_run)===null||o===void 0?void 0:o.id,run_name:t==null||(j=t.target_run)===null||j===void 0?void 0:j.name,status:t==null||(b=t.target_run)===null||b===void 0?void 0:b.status,created_time:t==null||(F=t.target_run)===null||F===void 0?void 0:F.created_time,elapsed_time:t==null||(k=t.target_run)===null||k===void 0?void 0:k.elapsed_time,completed_progress:"".concat(t==null||(L=t.target_run)===null||L===void 0?void 0:L.percentage,"%")})},progress:t==null||(q=t.target_run)===null||q===void 0?void 0:q.percentage})})]})]}):(0,e.jsx)(e.Fragment,{})]})},t.source_run.id):(0,e.jsx)(e.Fragment,{})}):(0,e.jsx)(e.Fragment,{})})})},Ca=(0,a.memo)(ba),Ma=function(n){var i,d=n.id,_=(0,a.useState)(""),f=x()(_,2),h=f[0],v=f[1],I=(0,a.useState)(!1),y=x()(I,2),g=y[0],p=y[1],N=(0,a.useState)([]),C=x()(N,2),D=C[0],E=C[1],m=(0,a.useState)(!1),H=x()(m,2),ee=H[0],$=H[1],t=(0,a.useState)(!1),Z=x()(t,2),W=Z[0],Q=Z[1],B=(0,a.useState)(""),A=x()(B,2),X=A[0],ne=A[1],ae=(0,a.useState)(!1),K=x()(ae,2),P=K[0],z=K[1],T=(0,a.useState)(!1),M=x()(T,2),se=M[0],oe=M[1],ve=(0,a.useState)(!0),U=x()(ve,2),O=U[0],te=U[1],q=(0,a.useRef)(null),R=(0,a.useRef)(1),w=(0,a.useRef)(!1),r=(0,a.useRef)(!0),s=(0,a.useRef)(0),c=(0,a.useState)(!1),o=x()(c,2),j=o[0],b=o[1],F=G(function(le){return le.summaryParams}),k=G(function(le){return le.setSummaryParams}),L=function(){var le=J()(S()().mark(function Se(){var Oe,qe,fe,st,ze,it,Ue=arguments;return S()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(Oe=Ue.length>0&&Ue[0]!==void 0?Ue[0]:!0,qe=Ue.length>1&&Ue[1]!==void 0?Ue[1]:!0,!(s.current!=0&&s.current<R.current)){Ee.next=5;break}return b(!1),Ee.abrupt("return");case 5:return Ee.next=8,(0,ce.sh)({chatroom_id:d,page:R.current,page_size:10});case 8:fe=Ee.sent,fe.code==0&&(fe!=null&&(st=fe.data)!==null&&st!==void 0&&st.list&&fe!==null&&fe!==void 0&&(ze=fe.data)!==null&&ze!==void 0&&(ze=ze.list)!==null&&ze!==void 0&&ze.length&&(s.current=fe==null||(it=fe.data)===null||it===void 0?void 0:it.total_pages,E(function(Ge){return qe?ie()(fe.data.list.reverse()):[].concat(ie()(fe.data.list.reverse()),ie()(Ge))}),p(!0),b(!0),setTimeout(function(){r.current=!0},500)),qe&&setTimeout(function(){var Ge;q==null||(Ge=q.current)===null||Ge===void 0||Ge.scrollTo({top:0})},200),Oe||(v(F.id),k({})));case 10:case"end":return Ee.stop()}},Se)}));return function(){return le.apply(this,arguments)}}(),ue=function(){var le=J()(S()().mark(function Se(Oe){return S()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:Oe.target.scrollHeight+(Oe.target.scrollTop-Oe.target.clientHeight)<400&&r.current&&(r.current=!1,b(!0),R.current=R.current+=1,L(!0,!1));case 1:case"end":return fe.stop()}},Se)}));return function(Oe){return le.apply(this,arguments)}}();(0,a.useEffect)(function(){R.current=1,L()},[d]),(0,a.useEffect)(function(){F&&F.id&&(p(!0),O||te(!0),ee&&$(!1),P&&z(!1),R.current=1,Q(!0),L(!1),w.current=!0)},[F]);var de=G(function(le){return le.setOrientationShow});return(0,a.useEffect)(function(){g&&de(!0)},[g]),(0,e.jsx)(e.Fragment,{children:g?(0,e.jsxs)(Bt.Z,{minWidth:400,className:"relative h-full right-0 border-0 returned-0 px-[0] ".concat(P?"translate-x-full flex-[0]":""),children:[se?(0,e.jsx)("div",{className:"h-full w-full absolute top-0 left-0 flex justify-center items-center z-[100] bg-[rgba(255,255,255,0.5)]",children:(0,e.jsx)(ye.Z,{size:"large"})}):(0,e.jsx)(e.Fragment,{}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:function(){z(function(Se){return!Se})},className:`
                                        `.concat(P?"fixed right-[100%] top-[60px]":"absolute right-[99%] top-[60px]",`
                                        history_packup
                                        hover:text-[#1B64F3]
                                         w-[30px] h-[60px] bg-[rgba(255,255,255,1)] shadow-md flex justify-center items-center cursor-pointer z-[99]
                                    `),children:P?(0,e.jsx)(Xt,{className:"text-[18px]"}):(0,e.jsx)(Gt,{className:"text-[18px]"})}),(0,e.jsxs)("div",{className:"h-full min-h-full overflow-y-auto flex flex-col-reverse scroll-smooth relative",onScroll:ue,ref:q,children:[(0,e.jsxs)("div",{children:[D.length?(0,e.jsx)(Ca,{id:d,runid:X,scrollDom:q,list:D,historyHeight:w.current}):(0,e.jsx)(e.Fragment,{}),(0,e.jsxs)("div",{className:"w-full px-4 h-full",style:{minHeight:W?q==null||(i=q.current)===null||i===void 0?void 0:i.offsetHeight:""},children:[(0,e.jsx)(Na,{setShow:$,inputShow:O,setBoxLoading:oe,setAppRunId:ne,scrollDom:q}),ee?(0,e.jsx)(Sa,{id:h,runid:X,setBoxLoading:oe,scrollDom:q,setinputShow:te}):(0,e.jsx)(e.Fragment,{})]})]}),j?(0,e.jsx)("div",{className:"text-center justify-center items-center flex",children:(0,e.jsx)(ye.Z,{})}):(0,e.jsx)(e.Fragment,{})]})]})]}):(0,e.jsx)(e.Fragment,{})})},Ra=(0,a.memo)(Ma),Fa=function(n){return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(re.Z,{image:re.Z.PRESENTED_IMAGE_SIMPLE})})},ka=(0,a.memo)(function(){var u=(0,V.useParams)(),n=u.id,i=(0,a.useRef)([]),d=(0,a.useRef)(null),_=(0,a.useState)(!1),f=x()(_,2),h=f[0],v=f[1],I=function(){var y=J()(S()().mark(function g(){var p;return S()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!n){C.next=5;break}return C.next=3,(0,ce.cH)({id:n});case 3:p=C.sent,p.code==0?(v(!0),d.current=p.data,i.current=p.data.agent_list):V.history.replace("/meeting");case 5:case"end":return C.stop()}},g)}));return function(){return y.apply(this,arguments)}}();return(0,a.useEffect)(function(){I()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex bg-[#fff] overflow-hidden overflow-x-auto",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)(Je,{roomDetail:d.current,setAgent:i}),(0,e.jsx)("div",{className:"flex-1 min-h-0 h-full",children:h?(0,e.jsx)(Zt,{agentList:i}):(0,e.jsx)(Fa,{})}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Ra,{id:n})})]})})}),Da=ka}}]);
