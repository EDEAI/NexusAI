"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[928],{83510:function(je,F,a){a.d(F,{LK:function(){return N},bs:function(){return I},go:function(){return G},uy:function(){return D}});var Y=a(15009),_=a.n(Y),K=a(99289),d=a.n(K),T=a(47520),y="/v1/apps/apps_list",S="/v1/agent/agent_delete/",l="/v1/workflow/workflow_app_delete/",z="/v1/vector/delete_dataset/",U="/v1/skill/delete_skill_by_app_id/",$="/v1/apps/apps_create",R="/v1/apps/app_update/",G=function(){var A=d()(_()().mark(function i(h){var E;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,T.ZP)("".concat(y),{method:"GET",data:h});case 2:return E=o.sent,o.abrupt("return",E);case 4:case"end":return o.stop()}},i)}));return function(h){return A.apply(this,arguments)}}(),N=function(){var A=d()(_()().mark(function i(h){var E;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(h),o.next=3,h.mode;case 3:if(o.t0=o.sent,o.t0!=1){o.next=8;break}o.t1=(0,T.ZP)("".concat(S).concat(h.app_id),{method:"DELETE"}),o.next=9;break;case 8:o.t1=h.mode==2?(0,T.ZP)("".concat(l).concat(h.app_id),{method:"DELETE"}):h.mode==3?(0,T.ZP)("".concat(z).concat(h.app_id),{method:"DELETE"}):(0,T.ZP)("".concat(U).concat(h.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return E=o.t1,o.abrupt("return",E);case 11:case"end":return o.stop()}},i)}));return function(h){return A.apply(this,arguments)}}(),D=function(){var A=d()(_()().mark(function i(h){var E;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,T.ZP)("".concat($),{method:"POST",data:h});case 2:return E=o.sent,o.abrupt("return",E);case 4:case"end":return o.stop()}},i)}));return function(h){return A.apply(this,arguments)}}(),I=function(){var A=d()(_()().mark(function i(h){var E;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,T.ZP)("".concat(R).concat(h.app_id),{method:"PUT",data:h});case 2:return E=o.sent,o.abrupt("return",E);case 4:case"end":return o.stop()}},i)}));return function(h){return A.apply(this,arguments)}}()},72406:function(je,F,a){var Y=a(58533),_=a(99702),K=a(74330),d=a(85893),T=function(S){var l=S.children,z=S.elid,U=S.dataLength,$=S.ishasMore,R=S.upSlide,G=S.isFooter,N=S.pageNumber,D=N===void 0?2:N;return(0,d.jsxs)("div",{className:"h-full flex flex-col",children:[(0,d.jsx)(Y.Z,{dataLength:U,scrollableTarget:z,next:R,hasMore:$,loader:(0,d.jsx)("div",{className:"flex justify-center h-[60px] items-center",children:D>1?(0,d.jsx)(K.Z,{}):(0,d.jsx)(d.Fragment,{})}),children:l}),G&&(0,d.jsx)("div",{className:"mt-[30px] flex-1 flex ",style:{alignItems:"flex-end"},children:(0,d.jsx)(_.Z,{className:"relative"})})]})};F.Z=T},21446:function(je,F,a){var Y=a(15009),_=a.n(Y),K=a(97857),d=a.n(K),T=a(99289),y=a.n(T),S=a(5574),l=a.n(S),z=a(83510),U=a(29608),$=a(32332),R=a(35312),G=a(26915),N=a(28036),D=a(85576),I=a(67294),A=a(94840),i=a(85893),h=G.Z.TextArea,E=function(o){var ee=o.setIsModalOpen,c=o.isModalOpen,ae=o.transformData,O=o.CreationType,Ie=o.setcreationType,Ae=o.ModalType,v=(0,R.useIntl)(),H=(0,I.useState)(""),p=l()(H,2),J=p[0],ke=p[1],Ze=(0,I.useState)(""),ue=l()(Ze,2),Ue=ue[0],Be=ue[1],Le=(0,I.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),Me=l()(Le,2),e=Me[0],Re=Me[1],Ge=(0,U.Z)(),We=Ge.setAgentCreateOpen;(0,I.useEffect)(function(){},[]);var Fe=function(s){ke(s.target.value)},Ce=function(s){Be(s.target.value)},ye=function(){var w=y()(_()().mark(function s(){var b,g;return _()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(b={name:J,mode:O.apps_mode,description:Ue,icon:JSON.stringify(e.id),icon_background:""},O.apps_mode!=2){k.next=8;break}return k.next=4,(0,z.uy)(b);case 4:g=k.sent,g.code===0&&(ee(!1),Ee(g.data.app_id)),k.next=10;break;case 8:(0,$.Go)("SET",d()(d()({},b),{},{type:!1})),Ee();case 10:case"end":return k.stop()}},s)}));return function(){return w.apply(this,arguments)}}(),Ke=function(s){ae.map(function(b){b.name==s.name&&(console.log(b,"item"),Ie(b))})},Ee=function(s){s?R.history.push("/".concat(O.path,"?app_id=").concat(s,"&&type=false")):R.history.push("/".concat(O.path,"?type=false"))},ze=function(){return(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("div",{className:"flex items-center",children:O.apps_mode==1&&(0,i.jsx)(N.ZP,{onClick:function(){We(!0),ee(!1)},children:v.formatMessage({id:"agent.creation.button.ai"})})}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(N.ZP,{onClick:function(){return ee(!1)},children:v.formatMessage({id:"agent.modal.button.cancel"})}),(0,i.jsx)(N.ZP,{disabled:J==="",onClick:ye,type:"primary",children:v.formatMessage({id:"creation"})})]})]})};return(0,i.jsx)(D.Z,{title:v.formatMessage({id:"creation.addnewapp"}),open:c,okText:v.formatMessage({id:"creation"}),onOk:ye,onCancel:function(){return ee(!1)},okButtonProps:{disabled:J===""},width:820,footer:(0,i.jsx)(ze,{}),children:(0,i.jsxs)("div",{className:"pb-1",children:[Ae?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:v.formatMessage({id:"creation.appntype"})}),(0,i.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:ae&&ae.map(function(w){return(0,i.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:w.apps_mode===O.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){Ke(w)},children:[(0,i.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,i.jsx)("img",{className:"w-6 h-6",src:w.signicon,alt:""})}),(0,i.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:w.name})]})})})]}):null,(0,i.jsxs)("div",{className:" mt-5",children:[(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsxs)("p",{className:"text-xs",children:[O.apps_mode==1?v.formatMessage({id:"creation.agent"}):O.apps_mode==2?v.formatMessage({id:"creation.workflow"}):O.apps_mode==3?v.formatMessage({id:"creation.repository"}):v.formatMessage({id:"creation.skill"}),v.formatMessage({id:"creation.appiconname"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-around",children:[(0,i.jsx)(A.Z,{CardData:e,setCardData:Re}),(0,i.jsx)(G.Z,{showCount:!0,maxLength:20,placeholder:v.formatMessage({id:"creation.placeholder.appname"}),onChange:Fe})]})]}),(0,i.jsxs)("div",{className:"mb-5 text-xs",children:[(0,i.jsxs)("p",{children:[O.apps_mode==1?v.formatMessage({id:"creation.agent"}):O.apps_mode==2?v.formatMessage({id:"creation.workflow"}):O.apps_mode==3?v.formatMessage({id:"creation.repository"}):v.formatMessage({id:"creation.skill"}),v.formatMessage({id:"creation.appdescribe"})]}),(0,i.jsx)(h,{showCount:!0,maxLength:100,rows:4,placeholder:v.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Ce})]})]})]})})};F.Z=E},94840:function(je,F,a){var Y=a(97857),_=a.n(Y),K=a(32332),d=a(55241),T=a(67294),y=a(85893),S=function(z){var U=z.CardData,$=z.setCardData;(0,T.useEffect)(function(){},[]);var R=function(){return(0,y.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,K.s9)("all").map(function(D){return(0,y.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){G(D)},children:(0,y.jsx)("img",{src:D.image,alt:""})})})})},G=function(D){$(_()(_()({},U),{},{icon:D.image,id:D.id}))};return(0,y.jsx)(d.Z,{content:R,trigger:"click",placement:"bottomLeft",children:(0,y.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,y.jsx)("img",{src:(0,K.s9)("single",U.id?U.id:U.icon),alt:""})})})};F.Z=S},91375:function(je,F,a){a.r(F),a.d(F,{default:function(){return ze}});var Y=a(97857),_=a.n(Y),K=a(15009),d=a.n(K),T=a(99289),y=a.n(T),S=a(5574),l=a.n(S),z=a(40110),U=a(47389),$=a(82061),R=a(43425),G=a(71471),N=a(26915),D=a(85576),I=a(45360),A=a(78045),i=a(74330),h=a(71230),E=a(15746),q=a(4393),o=a(55241),ee=a(28036),c=a(67294),ae=a(83510),O=a(42237),Ie=a(78697),Ae=a(72406),v=a(4346),H=a(29608),p=a(32332),J=a(35312),ke=a(27484),Ze=a.n(ke),ue=a(21446),Ue=a(47520),Be=a(33914),Le=a(57546),Me=a(46822),e=a(85893),Re=function(s){var b=s.optionsModalId,g=(0,J.useIntl)(),P=(0,c.useState)(!0),k=l()(P,2),He=k[0],Te=k[1],ie=N.Z.TextArea,te=[{name:g.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",unselected:"/icons/creation/unselectedrobot.svg",apps_mode:1},{name:g.formatMessage({id:"creation.workflow"}),path:"workspace/workflow",icon:"/icons/creation/gongzuoliu1.svg",pitchicon:"/icons/creation/pitchgongzuoliu.svg",signicon:"/icons/creation/signgongzuoliu.svg",unselected:"/icons/creation/unselectedprocess.svg",apps_mode:2},{name:g.formatMessage({id:"creation.skill"}),path:"Skill",icon:"/icons/creation/jienng1.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg",unselected:"/icons/creation/unselectedrepository.svg",apps_mode:4}];location.pathname=="/knowledgebase"&&te.push({name:g.formatMessage({id:"creation.repository"}),path:"Createkb",icon:"/icons/creation/jienng1.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg",unselected:"/icons/creation/unselectedrepository.svg",apps_mode:3});var Je=(0,c.useState)(!1),pe=l()(Je,2),Ve=pe[0],se=pe[1],Ye=(0,c.useState)({name:g.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1}),me=l()(Ye,2),le=me[0],ce=me[1],$e=(0,c.useState)(""),fe=l()($e,2),Se=fe[0],Ne=fe[1],Qe=(0,c.useState)(""),he=l()(Qe,2),u=he[0],De=he[1],Xe=(0,c.useState)({id:12,icon:"\u{1F612}"}),ge=l()(Xe,2),qe=ge[0],ia=ge[1];(0,c.useEffect)(function(){location.pathname=="/knowledgebase"&&Te(!1)});var Oe=function(x){var j=te.filter(function(de){return de.apps_mode==x});se(!0),ce(j[0]?j[0]:{name:"Agent",path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1})},ea=function(){se(!1)},aa=function(x){J.history.push("/".concat(le.path,"?app_id=").concat(x,"&type=false"))},ta=function(x){te.map(function(j){j.name==x.target.value&&(console.log(j,"item"),ce(j))})},la=function(x){Ne(x.target.value)},sa=function(x){De(x.target.value)},ca=function(){var m=y()(d()().mark(function x(){var j;return d()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,ae.uy)({name:Se,mode:le.apps_mode,description:u,icon:qe.icon,icon_background:""});case 2:j=Q.sent,j.code===0&&(se(!1),aa(j.data.app_id));case 4:case"end":return Q.stop()}},x)}));return function(){return m.apply(this,arguments)}}(),be=(0,c.useState)(!1),oe=l()(be,2),na=oe[0],re=oe[1],ve=function(){console.log("Import cancelled"),re(!1)},oa=(0,c.memo)(function(){var m=(0,c.useState)([]),x=l()(m,2),j=x[0],de=x[1],Q={icon:(0,e.jsx)(Be.Z,{}),title:g.formatMessage({id:"workflow.uploadFileText",defaultMessage:"Drag file here, or click to upload"}),description:"Upload the exported workflow yml file",accept:".yml,.yaml",fieldProps:{listType:"text",name:"file",multiple:!0,maxCount:1,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},action:Ue._n+"/v1/workflow/import",beforeUpload:function(B){return de([B]),!1}},onChange:function(B){var W=B.file.status;if(W==="done"){var Z;(B==null||(Z=B.file)===null||Z===void 0||(Z=Z.response)===null||Z===void 0?void 0:Z.code)===0?(I.ZP.success(g.formatMessage({id:"workflow.importSuccess"})),re(!1)):I.ZP.error(g.formatMessage({id:"workflow.importFailed"}))}else W==="error"&&I.ZP.error("".concat(B.file.name," file upload failed."))}},Pe=function(){if(j.length>0){var B=new FormData;B.append("file",j[0]),(0,O.Uq)(B).then(function(W){if((W==null?void 0:W.code)==0){var Z;J.history.push("/workspace/workflow?app_id=".concat(W==null||(Z=W.data)===null||Z===void 0?void 0:Z.app_id,"&type=false"))}})}re(!1)};return(0,e.jsx)(D.Z,{title:g.formatMessage({id:"creation.importWorkflow"}),open:na,onOk:Pe,okButtonProps:{loading:!1},okText:g.formatMessage({id:"workflow.import"}),onCancel:ve,children:(0,e.jsx)(Me.Z,_()({name:"file"},Q))})});return(0,e.jsxs)(q.Z,{style:{minWidth:300,marginTop:10,backgroundColor:"#EFF0F2"},bodyStyle:{height:"100%"},hoverable:!1,children:[(0,e.jsx)(oa,{}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"194px"},children:[b===6?(0,e.jsxs)("div",{className:"flex justify-around items-start h-full w-full ",style:{flexDirection:"column",height:"calc(100% + 24px)"},children:[te.map(function(m,x){return(0,e.jsxs)("div",{className:"hover:bg-[#fff] w-full rounded-lg h-8 cursor-pointer flex items-center",onClick:function(){return Oe(m.apps_mode)},children:[(0,e.jsx)("img",{src:m.icon,style:{width:"16px",height:"16px",margin:"0 5px 0 10px"},alt:""}),(0,e.jsxs)("div",{style:{color:"#213044"},children:[g.formatMessage({id:"creation.new"}),m.name]})]})}),(0,e.jsxs)("div",{onClick:function(){return re(!0)},className:"hover:bg-[#fff] w-full rounded-lg h-8 cursor-pointer flex items-center text-[#213044]",children:[(0,e.jsx)(Le.Z,{className:"size-4  mr-[5px] ml-[10px]"})," ",g.formatMessage({id:"creation.importWorkflow"})]})]}):null,(0,e.jsx)("div",{className:" flex-wrap h-full text-[#999] text-[12px] cursor-pointer",style:{width:b===6?"50%":"100%"},onClick:function(){return Oe(b)},children:b===6?(0,e.jsxs)("div",{className:"mt-[62px]",children:[(0,e.jsx)("div",{className:"h-[42px] flex justify-center",children:(0,e.jsx)("img",{src:"/icons/creation/add.svg",alt:""})}),(0,e.jsxs)("div",{className:"svg-container w-full text-center",children:[" ",g.formatMessage({id:"creation.addcreation"})]})]}):te.filter(function(m,x){return m.apps_mode==b}).map(function(m,x){return(0,e.jsxs)("div",{className:"mt-[50px]",children:[(0,e.jsx)("div",{className:"h-[42px] flex justify-center mb-[10px]",children:(0,e.jsx)("img",{src:m.unselected?m.unselected:"/icons/creation/add.svg",alt:""})}),(0,e.jsxs)("div",{className:"svg-container w-full text-center",children:[g.formatMessage({id:"creation.new"}),m.name?m.name:g.formatMessage({id:"creation.adhibition"})]})]})})})]}),(0,e.jsx)(ue.Z,{setIsModalOpen:se,isModalOpen:Ve,ModalType:He,CreationType:le,setcreationType:ce,transformData:te})]})},Ge=Re,We=a(94840),Fe=a(26474),Ce=G.Z.Text,ye=G.Z.Paragraph,Ke=N.Z.TextArea,Ee=function(){var s=(0,J.useIntl)(),b=(0,c.useState)(null),g=l()(b,2),P=g[0],k=g[1],He=(0,c.useState)(1),Te=l()(He,2),ie=Te[0],te=Te[1],Je=(0,c.useState)(!1),pe=l()(Je,2),Ve=pe[0],se=pe[1],Ye=(0,c.useState)(""),me=l()(Ye,2),le=me[0],ce=me[1],$e=(0,c.useState)(""),fe=l()($e,2),Se=fe[0],Ne=fe[1],Qe=(0,c.useState)(null),he=l()(Qe,2),u=he[0],De=he[1],Xe=(0,c.useState)(!1),ge=l()(Xe,2),qe=ge[0],ia=ge[1],Oe=(0,c.useState)(!1),ea=l()(Oe,2),aa=ea[0],ta=ea[1],la=(0,c.useState)({name:"Agent",path:s.formatMessage({id:"creation.agent"}),icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1}),sa=l()(la,2),ca=sa[0],be=sa[1],oe=[{apps_mode:6,name:s.formatMessage({id:"creation.all"}),path:"Agents",icon:"/icons/creation/quanbu.svg",unselected:"/icons/creation/quanbu.svg",pitchicon:"/icons/creation/pitchquanbu.svg",signicon:"/icons/creation/pitchquanbu.svg"},{apps_mode:1,name:s.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",unselected:"/icons/creation/unselectedrobot.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg"},{apps_mode:2,name:s.formatMessage({id:"creation.workflow"}),path:"workspace/workflow",icon:"/icons/creation/gongzuoliu1.svg",unselected:"/icons/creation/unselectedprocess.svg",pitchicon:"/icons/creation/pitchgongzuoliu.svg",signicon:"/icons/creation/signgongzuoliu.svg"},{apps_mode:4,name:s.formatMessage({id:"creation.skill"}),path:"Skill",icon:"/icons/creation/jienng1.svg",unselected:"/icons/creation/unselectedskill.svg",pitchicon:"/icons/creation/pitchskill.svg",signicon:"/icons/creation/signskill.svg"}],na=(0,c.useState)(6),re=l()(na,2),ve=re[0],oa=re[1],m=(0,c.useState)(!1),x=l()(m,2),j=x[0],de=x[1],Q=(0,c.useState)(""),Pe=l()(Q,2),ne=Pe[0],B=Pe[1],W=(0,c.useState)(!1),Z=l()(W,2),Sa=Z[0],da=Z[1],Na=(0,c.useState)([{apps_mode:1,name:s.formatMessage({id:"creation.agent"}),path:"Agents",readOnlypath:"ReadOnlyAgent"},{apps_mode:2,name:s.formatMessage({id:"creation.workflow"}),path:"workspace/workflow"},{apps_mode:3,name:s.formatMessage({id:"creation.repository"}),path:"createkb"},{apps_mode:4,name:s.formatMessage({id:"creation.skill"}),path:"Skill",readOnlypath:"ReadOnlySkill"}]),ua=l()(Na,2),pa=ua[0],Qa=ua[1],Da=(0,c.useState)(!0),ma=l()(Da,2),Oa=ma[0],fa=ma[1],ba=(0,c.useState)(-1),ha=l()(ba,2),Pa=ha[0],xe=ha[1],wa=(0,c.useState)([]),ga=l()(wa,2),va=ga[0],Ia=ga[1],Aa=(0,c.useState)(Date.now()),xa=l()(Aa,2),_a=xa[0],ka=xa[1],ja=(0,H.Z)(),Ma=ja.shouldComponentUpdate,Za=ja.clearUpdateNotification,V=function(){var t=y()(d()().mark(function n(f,M,L,r,C,ra,X){var Ta,we;return d()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return Ta={page:f||ie,page_size:27,search_type:(0,p.f1)("GET").searchType==!0?2:1,apps_mode:(0,p.f1)("GET").optionsModalId,apps_name:r||r==""?r:ne,tag_ids:X?X.join(","):""},fa(!0),_e.next=4,(0,ae.go)(Ta);case 4:we=_e.sent,da(!0),k(C?{list:P.list.concat(we.data.list)}:we.data),fa(!1),we.data.list.length<27&&da(!1);case 9:case"end":return _e.stop()}},n)}));return function(f,M,L,r,C,ra,X){return t.apply(this,arguments)}}();(0,c.useEffect)(function(){if((0,p.op)(),location.pathname=="/knowledgebase"){var t={apps_mode:3,name:s.formatMessage({id:"creation.repository"}),path:"Createkb"};Ca(t)}else ia(!0),V(1,null)},[]);var Ua=function(){te(ie+1),V(ie+1,j,null,null,!0)},Ca=function(n){oa(n.apps_mode),(0,p.f1)("SET",n.apps_mode,JSON.parse((0,p.f1)("GET").searchType)),V(1,j,n.apps_mode)},Ba=function(n){B(n.target.value),V(1,j,ve,n.target.value)};(0,c.useEffect)(function(){V(1,j,ve,ne,null,null,va)},[va]);var La=function(){se(!1)},Ra=function(){var t=y()(d()().mark(function n(){var f,M;return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f={name:le,description:Se,app_id:u.app_id,mode:u.mode,icon:u.id?JSON.stringify(u.id):u.icon,icon_background:""},r.next=3,(0,ae.bs)(f);case 3:M=r.sent,M.code==0&&(se(!1),V(1,j,null,null,null,ie*27));case 5:case"end":return r.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),Ga=function(n,f){xe(f),se(!0),ce(n.name),Ne(n.description),De(n)},Wa=function(n){ce(n.target.value)},Fa=function(n){Ne(n.target.value)},ya=function(n){event.stopPropagation(),(0,p.Go)("SET",_()(_()({},n),{},{type:(0,p.f1)("GET").searchType}));var f=pa.filter(function(M){return M.apps_mode===n.mode});(n.mode===1||n.mode===4)&&(0,p.f1)("GET").searchType==!0?J.history.push("/".concat(f[0].readOnlypath,"?app_id=").concat(n.app_id?n.app_id:n.apps_id,"&type=").concat((0,p.f1)("GET").searchType)):J.history.push("/".concat(f[0].path,"?app_id=").concat(n.app_id?n.app_id:n.apps_id,"&type=").concat((0,p.f1)("GET").searchType))},Ka=function(n,f){xe(f),D.Z.confirm({title:s.formatMessage({id:"creation.modal.returnconfirm"}),content:s.formatMessage({id:"creation.modal.deldescribe"}),onOk:function(){var M=y()(d()().mark(function r(){var C;return d()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,ae.LK)(n);case 2:C=X.sent,C&&C.code==0?(I.ZP.success(s.formatMessage({id:"creation.modal.delsuccess"})),V(1,null,null,null,null,ie*27)):I.ZP.error(s.formatMessage({id:"creation.modal.delerror"}));case 4:case"end":return X.stop()}},r)}));function L(){return M.apply(this,arguments)}return L}(),onCancel:function(){}})},za=function(n){var f=JSON.parse(n.target.value);de(f),(0,p.f1)("SET",null,f),V(1,f)},Ha=function(){var n=oe.filter(function(f){return f.apps_mode==(0,p.f1)("GET").optionsModalId});ta(!0),be(n[0].apps_mode!==6?n[0]:{name:"Agent",path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1})},Ja=(0,H.Z)(function(t){return t.setRunId}),Xa=(0,H.Z)(function(t){return t.setRunPanelLogRecord}),qa=(0,H.Z)(function(t){return t.setDealtWithData}),Va=function(n){Ja(n.app_id)},Ea=(0,Fe.v)(),Ya=Ea.tags,$a=Ea.fetchTags;return(0,c.useEffect)(function(){},[ve]),(0,c.useEffect)(function(){var t=function(){if(Ma(H.B.AGENT_LIST,_a)){var M,L=H.Z.getState().updateNotifications.get(H.B.AGENT_LIST);L==null||(M=L.payload)===null||M===void 0||M.action,V(1,null),ka(Date.now()),Za(H.B.AGENT_LIST)}},n=setInterval(t,1e3);return function(){return clearInterval(n)}},[Ma,_a]),(0,e.jsxs)("div",{className:" pb-[10px] flex flex-col",style:{height:"calc(-60px + 100vh)",width:"100%",margin:"0 auto"},children:[(0,e.jsxs)("div",{className:"flex px-[30px] py-[20px] mx-[8px] items-center justify-between",children:[(0,e.jsx)("div",{className:"flex items-center",children:qe?oe.map(function(t,n){return(0,e.jsxs)("div",{onClick:function(){Ca(t)},className:"flex justify-center items-center h-8 rounded-lg mr-4 cursor-pointer px-[10px]",style:(0,p.f1)("GET").optionsModalId==t.apps_mode?{color:"#1B64F3",backgroundColor:"#ffffff"}:{color:"#9097a1"},children:[(0,e.jsx)("div",{className:"mr-2",children:(0,e.jsx)("img",{src:(0,p.f1)("GET").optionsModalId==t.apps_mode?t.pitchicon:t.unselected,alt:""})}),(0,e.jsx)("div",{children:t.name})]})}):""}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"min-w-[200px] mr-4",children:(0,e.jsx)(v.Z,{allowClear:!0,modes:(0,p.f1)("GET").optionsModalId,placeholder:s.formatMessage({id:"creation.placeholder.selectTags"}),onTagChange:function(){$a()},onChange:function(n){Ia(n)}})}),(0,e.jsx)("div",{className:" mr-5",children:(0,e.jsxs)(A.ZP.Group,{onChange:za,defaultValue:JSON.stringify((0,p.f1)("GET").searchType),children:[(0,e.jsx)(A.ZP.Button,{value:"true",children:s.formatMessage({id:"creation.team"})}),(0,e.jsx)(A.ZP.Button,{value:"false",children:s.formatMessage({id:"creation.individual"})})]})}),(0,e.jsx)(N.Z,{style:{width:300},prefix:(0,e.jsx)(z.Z,{}),placeholder:s.formatMessage({id:"creation.placeholder.searchname"}),variant:"filled",onChange:Ba})]})]}),(0,e.jsx)(i.Z,{spinning:Oa,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{id:"Creation",style:{overflowY:"auto",height:"calc(100vh - 128px)"},children:P&&P.list&&P.list.length>0?(0,e.jsx)(Ae.Z,{dataLength:P.list.length,elid:"Creation",ishasMore:Sa,upSlide:Ua,isFooter:!0,children:(0,e.jsxs)(h.Z,{gutter:[16,8],wrap:!0,style:{margin:0},className:"px-[30px]",children:[(0,e.jsx)(E.Z,{sm:24,md:12,lg:12,xl:8,xxl:6,children:(0,e.jsx)(Ge,{optionsModalId:(0,p.f1)("GET").optionsModalId})}),P&&P.list&&P.list.length?P.list.map(function(t,n){var f,M,L;return(0,e.jsx)(E.Z,{className:"gutter-row",sm:24,md:12,lg:12,xl:8,xxl:6,children:(0,e.jsx)(q.Z,{className:" cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",style:{marginTop:10,minWidth:300},hoverable:!1,styles:{body:{padding:"20px"}},children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{onClick:function(){return ya(t)},children:(0,e.jsx)(q.Z.Meta,{title:[(0,e.jsxs)("div",{className:"flex w-full",children:[(0,e.jsx)("div",{className:"mr-[17px] shrink-0",children:(0,e.jsx)(Ie.Z,{Image:(0,p.s9)("single",t.icon),icon:(0,p.f1)("GET").optionsModalId===6?(f=oe.filter(function(r){return r.apps_mode===t.mode})[0])===null||f===void 0?void 0:f.signicon:null})}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[" ",(0,e.jsx)("div",{style:{maxWidth:"160px"},className:"text-sm text-[#213044] font-medium truncate",children:(0,e.jsx)(Ce,{ellipsis:{tooltip:t.name},children:t.name})}),(0,e.jsxs)("div",{className:" leading-6 flex items-center justify-end text-xs font-normal text-[#999999]",children:[(0,e.jsxs)("div",{children:[s.formatMessage({id:"creation.numberofcitation"}),":"," "]}),(0,e.jsxs)("div",{className:"text-[#1B64F3] ml-2",children:[" ",t.execution_times?t.execution_times:0]})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between w-full text-xs font-normal text-[#999999]",children:[(0,e.jsx)("div",{className:"text-xs font-normal text-[#999999] mt-[7px]",children:pa.map(function(r,C){return r.apps_mode===t.mode?r.name:null})}),(0,e.jsxs)("div",{className:" flex items-center justify-end mt-[7px]",children:[(0,e.jsx)("div",{className:"max-w-[56px] mr-2 ",children:(0,e.jsx)(Ce,{ellipsis:{tooltip:t.published_creator},className:"text-base",children:(0,e.jsx)("div",{className:" text-[#999999] text-xs",children:t.published_creator})})}),(0,e.jsx)("div",{children:t.published_time?(0,e.jsxs)("span",{className:"text-[#1B64F3]",children:[Ze()(t.published_time).format("YYYY-MM-DD HH:mm:ss")," ",s.formatMessage({id:"creation.publish"})]}):t.mode!==3?(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("img",{src:"/icons/unpublish.svg",alt:"",className:"mr-[5px]"}),s.formatMessage({id:"creation.unpublish"})]}):null})]})]})]})]})],description:(0,e.jsxs)("div",{style:{height:100,margin:"20px 0 20px 0"},children:[(0,e.jsx)(ye,{ellipsis:{rows:4,tooltip:t.description},className:"!mb-0",children:(0,e.jsx)("div",{style:{color:"#999999"},children:t.description})}),(0,e.jsx)("div",{onClick:function(C){C.stopPropagation()},className:"not_has_down_select hover:bg-gray-100 rounded-md",children:(0,e.jsx)(v.O,{onBlur:function(C){(0,O.v_)(t.changeTags,[t.app_id])},listStyle:"horizontal",onChange:function(C){t.changeTags=C},placeholder:s.formatMessage({id:"addTag.addTag"}),defaultValue:(M=t.tags)===null||M===void 0?void 0:M.map(function(r){return r.id}),maxTagCount:5,options:Ya,className:"!w-full",variant:"borderless"},t.app_id)})]})})}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("div",{className:"flex items-center justify-start",style:{height:"24px"},children:t.list&&t.list.length?(0,e.jsx)(o.Z,{placement:"bottomLeft",content:(0,e.jsx)("div",{className:" overflow-auto",children:t.list.map(function(r,C){return(0,e.jsxs)("div",{className:"w-80 flex items-center justify-start p-1.5 rounded-md  cursor-pointer hover:bg-[#fafafa]",onClick:function(){return ya(r)},children:[(0,e.jsx)("div",{className:"mr-3.5",children:(0,e.jsx)("div",{className:"w-[36px] h-[36px] bg-[#EDF3FE] rounded-lg mr-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:(0,p.s9)("single",r.icon),alt:""})})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs font-normal text-[#213044]",children:r.name}),(0,e.jsx)("div",{className:"text-xs font-normal text-[#666]",children:(r==null?void 0:r.mode)==1?s.formatMessage({id:"workflow.agent"}):(r==null?void 0:r.mode)==2?s.formatMessage({id:"component.menu.workflow"}):(r==null?void 0:r.mode)==3?s.formatMessage({id:"component.menu.knowledgeBase"}):s.formatMessage({id:"workflow.skill"})})]})]},C)})}),children:(0,e.jsxs)("div",{className:"flex items-center justify-around text-xs font-normal",children:[s.formatMessage({id:"creation.relevancy.app"})," ",":",t.list.slice(0,4).map(function(r,C){return(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"w-8 h-8 bg-[#EDF3FE] rounded-lg ml-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:(0,p.s9)("single",r.icon),alt:""})})},C)}),t.list.length>4?(0,e.jsx)("div",{className:"w-8 h-8 bg-[#EDF3FE] rounded-lg ml-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:"/icons/more.svg",alt:""})}):null]})}):null}),(t==null?void 0:t.mode)===2?(0,e.jsx)("div",{className:"flex-1 flex justify-end items-center",children:(t==null?void 0:t.publish_status)==1?(0,e.jsx)("img",{onClick:function(){return Va(t)},src:"/icons/operation_icon.svg",className:"mr-2"}):(0,e.jsx)("img",{src:"/icons/operation_disable_icon.svg",className:"mr-2"})}):null,(0,e.jsx)("div",{children:JSON.parse((L=(0,p.f1)("GET"))===null||L===void 0?void 0:L.searchType)?null:(0,e.jsx)(o.Z,{placement:"rightTop",open:Pa==n,onOpenChange:function(C){xe(-1)},content:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsxs)(ee.ZP,{type:"link",className:"text-[#213044]",onClick:function(){Ga(t,-1)},children:[(0,e.jsx)(U.Z,{}),s.formatMessage({id:"creation.redact"})]})}),(0,e.jsx)("div",{children:(0,e.jsxs)(ee.ZP,{type:"link",className:"text-[#E12222]",onClick:function(){return Ka(t,-1)},children:[(0,e.jsx)($.Z,{}),s.formatMessage({id:"creation.delete"})]})})]}),children:(0,e.jsx)("div",{onMouseEnter:function(){xe(n)},className:"w-[26px] h-[26px] flex items-center justify-center",children:(0,e.jsx)(R.Z,{onClick:function(){xe(n)}},"setting")})})})]})]})})},n)}):null]})}):P&&P.list&&P.list.length==0?(0,e.jsxs)("div",{className:"w-full flex items-center flex-wrap justify-center mt-48",children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-center mb-2.5",children:(0,e.jsx)("img",{src:"/icons/default.svg",alt:""})}),ne&&ne!==""?(0,e.jsxs)("div",{children:["\u201C",ne,"\u201D"]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"w-full text-center mb-3 text-[#666] text-sm",children:[s.formatMessage({id:"creation.margindescribe"})," ~"]}),(0,e.jsxs)("div",{className:"w-full text-center",children:[" ",(0,e.jsx)(ee.ZP,{color:"primary",onClick:function(){Ha()},children:s.formatMessage({id:"creation.addnewapp"})})," "]})]})]}):null})}),(0,e.jsxs)(D.Z,{title:"",open:Ve,okText:s.formatMessage({id:"creation.conserve"}),onOk:Ra,onCancel:La,children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"mb-[15px]",children:[(u==null?void 0:u.mode)==1?s.formatMessage({id:"creation.agent"}):(u==null?void 0:u.mode)==2?s.formatMessage({id:"creation.workflow"}):(u==null?void 0:u.mode)==3?s.formatMessage({id:"creation.repository"}):s.formatMessage({id:"creation.skill"}),s.formatMessage({id:"creation.appiconname"})]}),(0,e.jsxs)("div",{className:"flex items-center justify-around",children:[(0,e.jsx)(We.Z,{CardData:u,setCardData:De}),(0,e.jsx)(N.Z,{showCount:!0,maxLength:20,placeholder:s.formatMessage({id:"creation.placeholder.appname"}),onChange:Wa,value:le})]})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"mb-[15px]",children:[(u==null?void 0:u.mode)==1?s.formatMessage({id:"creation.agent"}):(u==null?void 0:u.mode)==2?s.formatMessage({id:"creation.workflow"}):(u==null?void 0:u.mode)==3?s.formatMessage({id:"creation.repository"}):s.formatMessage({id:"creation.skill"}),s.formatMessage({id:"creation.appdescribe"})]}),(0,e.jsx)(Ke,{showCount:!0,maxLength:100,rows:4,placeholder:s.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Fa,value:Se})]})]}),(0,e.jsx)(ue.Z,{setIsModalOpen:ta,isModalOpen:aa,ModalType:!0,CreationType:ca,setcreationType:be,transformData:oe.filter(function(t){return t.apps_mode!==6})})]})},ze=Ee}}]);
