"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[891],{14694:function(X,v,e){e.r(v);var j=e(97857),P=e.n(j),T=e(15009),u=e.n(T),A=e(99289),C=e.n(A),I=e(5574),c=e.n(I),R=e(47389),L=e(82061),K=e(51042),S=e(85576),B=e(45360),U=e(83062),f=e(83622),W=e(53455),m=e(67294),g=e(76772),p=e(32060),s=e(85893),y=function(){var t=(0,g.useIntl)(),k=(0,m.useState)(!1),D=c()(k,2),x=D[0],O=D[1],N=(0,m.useState)([]),b=c()(N,2),Z=b[0],z=b[1],F=(0,m.useState)({current:1,pageSize:10,total:0}),w=c()(F,2),M=w[0],G=w[1],h=function(){var l=C()(u()().mark(function a(){var r,i,d,o=arguments;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=o.length>0&&o[0]!==void 0?o[0]:1,i=o.length>1&&o[1]!==void 0?o[1]:10,O(!0),n.prev=3,n.next=6,(0,p.Sd)({page:r,page_size:i});case 6:d=n.sent,d.code===0&&(z(d.data.list),G({current:r,pageSize:i,total:d.data.total_count})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.error("Failed to fetch roles list:",n.t0);case 13:return n.prev=13,O(!1),n.finish(13);case 16:case"end":return n.stop()}},a,null,[[3,10,13,16]])}));return function(){return l.apply(this,arguments)}}(),$=function(a,r){S.Z.confirm({title:t.formatMessage({id:"workflow.roleManagement.deleteConfirmTitle"}),content:t.formatMessage({id:"workflow.roleManagement.deleteConfirmContent"},{name:r}),okText:t.formatMessage({id:"workflow.roleManagement.confirm"}),cancelText:t.formatMessage({id:"workflow.roleManagement.cancel"}),okType:"danger",onOk:function(){var i=C()(u()().mark(function o(){var E;return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,p.Rd)(a);case 3:E=_.sent,E.code===0&&(B.ZP.success(t.formatMessage({id:"workflow.roleManagement.deleteSuccess"})),h(M.current,M.pageSize)),_.next=10;break;case 7:_.prev=7,_.t0=_.catch(0),console.error("Failed to delete role:",_.t0);case 10:case"end":return _.stop()}},o,null,[[0,7]])}));function d(){return i.apply(this,arguments)}return d}()})},J=function(a){g.history.push("/role-management/edit/".concat(a))},Q=function(){g.history.push("/role-management/create")},H=function(a){h(a.current,a.pageSize)},V=[{title:t.formatMessage({id:"workflow.roleManagement.roleName"}),dataIndex:"name",key:"name",width:200},{title:t.formatMessage({id:"workflow.roleManagement.description"}),dataIndex:"description",key:"description",ellipsis:{showTitle:!1},render:function(a){return(0,s.jsx)(U.Z,{placement:"topLeft",title:a,children:a})}},{title:t.formatMessage({id:"workflow.roleManagement.createdAt"}),dataIndex:"created_at",key:"created_at",width:180,render:function(a){return new Date(a).toLocaleString()}},{title:t.formatMessage({id:"workflow.roleManagement.actions"}),key:"actions",width:120,render:function(a,r){return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(f.ZP,{type:"text",size:"small",icon:(0,s.jsx)(R.Z,{}),onClick:function(){return J(r.id)},title:t.formatMessage({id:"workflow.roleManagement.edit"})}),(0,s.jsx)(f.ZP,{type:"text",size:"small",danger:!0,icon:(0,s.jsx)(L.Z,{}),onClick:function(){return $(r.id,r.name)},title:t.formatMessage({id:"workflow.roleManagement.delete"})})]})}}];return(0,m.useEffect)(function(){h()},[]),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:t.formatMessage({id:"workflow.roleManagement.title"})}),(0,s.jsx)(f.ZP,{type:"primary",icon:(0,s.jsx)(K.Z,{}),onClick:Q,children:t.formatMessage({id:"workflow.roleManagement.createRole"})})]}),(0,s.jsx)(W.Z,{columns:V,dataSource:Z,loading:x,rowKey:"id",pagination:P()(P()({},M),{},{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(a,r){return t.formatMessage({id:"workflow.roleManagement.pagination"},{start:r[0],end:r[1],total:a})}}),onChange:H})]})};v.default=y}}]);
