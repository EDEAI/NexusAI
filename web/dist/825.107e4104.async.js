"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[825],{2068:function(xe,O,r){r.d(O,{Z:function(){return W}});var C=r(1413),F=r(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},E=B,R=r(91146),s=function(L,o){return F.createElement(R.Z,(0,C.Z)((0,C.Z)({},L),{},{ref:o,icon:E}))},U=F.forwardRef(s),W=U},86:function(xe,O,r){var C=r(5574),F=r.n(C),B=r(32332),E=r(38703),R=r(67294),s=r(85893),U=function(l){var L=l.subtitle,o=l.handleClick,T=l.lineClamp,Z=T===void 0?2:T,n=l.textDetails,z=l.title,G=l.icon,w=l.iconType,k=w===void 0?"":w,h=l.operation,a=h===void 0?"":h,u=l.progress,t=l.status,v=l.backlogTips,f=l.avatar,d=(0,R.useState)(0),i=F()(d,2),M=i[0],x=i[1],j=function(){x(u)},_=function(){x(0)},y=function(H){return"rounded-[4px] border-l-[4px] ".concat(H==1?"border-[#1B64F3]":H==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,s.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(t!==void 0?y(t):"graphicbox"),onClick:o,onMouseEnter:function(){u!=null&&j()},onMouseLeave:function(){u!=null&&_()},children:[t!==void 0&&(0,s.jsx)("div",{style:{width:"".concat(M,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(t==1?"bg-[#1B64F3]/[.03]":t==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,s.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,s.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,s.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[f?(0,s.jsx)("img",{src:f,className:"w-[40px] h-[40px] rounded-[6px]"}):(0,s.jsx)("img",{src:(0,B.s9)("single",G),className:"w-[22px] h-[22px]"}),k&&(0,s.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,s.jsx)("img",{src:"/icons/".concat(k,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,s.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,s.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,s.jsx)("span",{className:"truncate",children:z}),(0,s.jsx)("span",{className:"flex items-center flex-1",children:L})]}),(0,s.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:n})]})}),v||(0,s.jsx)(s.Fragment,{}),a&&(0,s.jsx)("div",{className:"flex items-center w-[24px]",children:(0,s.jsx)("span",{className:"operation",children:a})}),u!=null&&(0,s.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,s.jsx)(E.Z,{type:"circle",percent:u,size:29})})]})]})};O.Z=U},38027:function(xe,O,r){r.d(O,{p1:function(){return z},vw:function(){return w}});var C=r(19632),F=r.n(C),B=r(5574),E=r.n(B),R=r(86),s=r(39e3),U=r(29608),W=r(87740),l=r(35312),L=r(28036),o=r(67294),T=r(22683),Z=r(97807),n=r(85893),z=(0,o.memo)(function(h){var a=h.progressObj;console.log(a);var u=function(){return parseFloat(a.elapsed_time).toFixed(6)},t=function(f){var d=new Date(f),i=d.getFullYear(),M=(d.getMonth()+1).toString().padStart(2,"0"),x=d.getDate().toString().padStart(2,"0"),j=d.getHours().toString().padStart(2,"0"),_=d.getMinutes().toString().padStart(2,"0"),y=d.getSeconds().toString().padStart(2,"0");return(0,n.jsx)(n.Fragment,{children:"".concat(i,".").concat(M,".").concat(x," ").concat(j,":").concat(_,":").concat(y)})};return(0,n.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,n.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,n.jsx)("div",{className:"truncate min-w-[70px]",children:a.created_time&&t(a.created_time)}),(0,n.jsx)("div",{className:"truncate",children:a.apps_name||a.app_name}),(0,n.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,n.jsx)("div",{className:"shrink-0 rounded-full ".concat(a.status==1?"bg-blue-600":a.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,n.jsxs)("div",{className:"truncate",children:[u(),"S"]})]})]})})}),G=(0,o.memo)(function(h){var a=h.id,u=h.message,t=(0,l.useIntl)(),v=(0,s.Z)(function(_){return _.setSummaryClick}),f=(0,o.useState)(!0),d=E()(f,2),i=d[0],M=d[1],x=(0,s.Z)(function(_){return _.summaryClick}),j=(0,s.Z)(function(_){return _.setSummaryParams});return(0,o.useEffect)(function(){M(x)},[x]),(0,n.jsx)("div",{className:"flex flex-row-reverse",children:(0,n.jsxs)(L.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(y){i&&(j({id:a,message:u}),v(!1))},children:[(0,n.jsx)("span",{className:"text-[12px]",children:t.formatMessage({id:"app.summaryhistory.submitText"})}),(0,n.jsx)(W.Z,{className:"text-[14px]"})]})})}),w=function(a){var u=Object.keys(a),t=[];return u.forEach(function(v){t.push(a[v])}),t},k=function(a){var u=a.list,t=a.scrollDom,v=a.historyHeight,f=a.id,d=a.runid,i=(0,l.useIntl)(),M=(0,o.useState)([]),x=E()(M,2),j=x[0],_=x[1],y=(0,o.useRef)("100%"),I=(0,o.useState)(0),H=E()(I,2),pe=H[0],me=H[1],he=(0,U.Z)(function(e){return e.setRunPanelLogRecord}),ge=function(K){var p=new Date(K),D=p.getMonth()+1,N=p.getDate(),P=p.getHours(),g=p.getMinutes(),m=p.getSeconds();return p.getFullYear()+"-"+(D<10?"0"+D:D)+"-"+(N<10?"0"+N:N)+" "+(P<10?"0"+P:P)+":"+(g<10?"0"+g:g)+":"+(m<10?"0"+m:m)};return(0,o.useEffect)(function(){if(t){var e;y.current=t==null||(e=t.current)===null||e===void 0?void 0:e.offsetHeight}},[t]),(0,o.useEffect)(function(){v&&(y.current="auto")},[v]),(0,o.useEffect)(function(){_(F()(u))},[u]),(0,o.useEffect)(function(){console.log(d),me(d)},[d]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"px-4",style:{minHeight:y.current},children:j&&j.length?j.map(function(e){var K,p,D,N,P,g,m,A,V,Y,J,S,Q,X,q,ee,ne,re,se,ae,te;return e!=null&&e.source_run&&e!==null&&e!==void 0&&e.source_run.summary&&(!pe||pe!=(e==null||(K=e.source_run)===null||K===void 0?void 0:K.id))?(0,n.jsx)("div",{className:"pt-[16px] border-b-[1px] border-color-[#eee] ",children:(0,n.jsxs)("div",{className:"pb-[60px]",children:[(0,n.jsx)("div",{className:"text-[16px] font-[600] pb-[8px] flex items-center",children:(0,n.jsx)("span",{className:"flex-1",children:i.formatMessage({id:"app.summary.title"})})}),(0,n.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:ge(e==null||(p=e.source_run)===null||p===void 0?void 0:p.created_time)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"p-[12px]  leading-[22px] ".concat(e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?"bg-[#F7F7F7]":"bg-blue-100 rounded-[4px]"),children:(0,n.jsx)(T.U,{rehypePlugins:[Z.Z],children:e==null||(D=e.source_run)===null||D===void 0?void 0:D.summary})}),(0,n.jsx)(G,{id:f,message:e==null||(N=e.source_run)===null||N===void 0?void 0:N.summary})]}),e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[i.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),e==null?void 0:e.source_corrections.map(function(c,b){return(0,n.jsxs)("div",{className:"mb-[16px] last-of-type:mb-0",children:[(0,n.jsx)("div",{className:"rounded-[4px]  ".concat((e==null?void 0:e.source_corrections.length)-1!=b?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,n.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,n.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[i.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",c.user_prompt]}),(0,n.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[i.formatMessage({id:"app.summaryhistory.time"}),":"," ",ge(c.created_time)]}),(0,n.jsx)(T.U,{rehypePlugins:[Z.Z],children:c==null?void 0:c.corrected_summary})]})}),(0,n.jsx)(G,{id:f,message:c==null?void 0:c.corrected_summary})]},c.created_time)})]}):(0,n.jsx)(n.Fragment,{}),e!=null&&e.target_run?(0,n.jsxs)("div",{className:"py-[12px]",children:[(0,n.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[i.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,n.jsx)("span",{className:"font-[500] ",children:e!=null&&(P=e.target_run)!==null&&P!==void 0&&P.agent_id?"agent":"workflow"}),(0,n.jsx)("span",{className:"px-[6px]",children:":"}),(0,n.jsx)("span",{children:e==null||(g=e.target_run)===null||g===void 0||(g=g.app)===null||g===void 0?void 0:g.name})]})}),(0,n.jsx)("div",{children:e!=null&&(m=e.target_run)!==null&&m!==void 0&&(m=m.inputs)!==null&&m!==void 0&&m.properties?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[i.formatMessage({id:"app.summaryhistory.input"}),":"]}),w(e==null||(A=e.target_run)===null||A===void 0||(A=A.inputs)===null||A===void 0?void 0:A.properties).map(function(c){return(0,n.jsxs)("div",{className:"pb-[10px]",children:[(0,n.jsx)("div",{className:"pb-[8px] font-[600]",children:c.display_name||c.name}),(0,n.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:c.value})]})})]}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)("div",{children:e!=null&&(V=e.target_run)!==null&&V!==void 0&&V.raw_user_prompt?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[i.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,n.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:e==null||(Y=e.target_run)===null||Y===void 0?void 0:Y.raw_user_prompt})]}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[i.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,n.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(e==null||(J=e.target_run)===null||J===void 0?void 0:J.agent_id)!=0?(0,n.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,n.jsx)(T.U,{rehypePlugins:[Z.Z],children:e==null||(S=e.target_run)===null||S===void 0||(S=S.outputs)===null||S===void 0?void 0:S.value})}):(0,n.jsx)(R.Z,{status:e==null||(Q=e.target_run)===null||Q===void 0?void 0:Q.status,icon:e==null||(X=e.target_run)===null||X===void 0?void 0:X.icon,title:e==null||(q=e.target_run)===null||q===void 0?void 0:q.name,avatar:e==null||(ee=e.target_run)===null||ee===void 0?void 0:ee.avatar,textDetails:(0,n.jsx)(z,{progressObj:{created_time:e==null||(ne=e.target_run)===null||ne===void 0?void 0:ne.created_time,elapsed_time:e==null||(re=e.target_run)===null||re===void 0?void 0:re.elapsed_time,app_name:e==null||(se=e.target_run)===null||se===void 0?void 0:se.app.name,status:e==null||(ae=e.target_run)===null||ae===void 0?void 0:ae.status}}),handleClick:function(){var b,$,le,oe,de,ie,ue,ce,_e,ve;he({app_id:e==null||(b=e.target_run)===null||b===void 0||(b=b.app)===null||b===void 0?void 0:b.id,app_name:e==null||($=e.target_run)===null||$===void 0||($=$.app)===null||$===void 0?void 0:$.name,icon:e==null||(le=e.target_run)===null||le===void 0?void 0:le.icon,workflow_id:e==null||(oe=e.target_run)===null||oe===void 0?void 0:oe.workflow_id,type:2,app_run_id:e==null||(de=e.target_run)===null||de===void 0?void 0:de.id,run_name:e==null||(ie=e.target_run)===null||ie===void 0?void 0:ie.name,status:e==null||(ue=e.target_run)===null||ue===void 0?void 0:ue.status,created_time:e==null||(ce=e.target_run)===null||ce===void 0?void 0:ce.created_time,elapsed_time:e==null||(_e=e.target_run)===null||_e===void 0?void 0:_e.elapsed_time,completed_progress:"".concat(e==null||(ve=e.target_run)===null||ve===void 0?void 0:ve.percentage,"%")})},progress:e==null||(te=e.target_run)===null||te===void 0?void 0:te.percentage})})]})]}):(0,n.jsx)(n.Fragment,{})]})},e.source_run.id):(0,n.jsx)(n.Fragment,{})}):(0,n.jsx)(n.Fragment,{})})})};O.ZP=(0,o.memo)(k)}}]);
