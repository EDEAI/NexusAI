"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[891],{14694:function(X,D,e){e.r(D);var w=e(97857),v=e.n(w),j=e(15009),u=e.n(j),b=e(99289),P=e.n(b),A=e(5574),c=e.n(A),R=e(47389),B=e(82061),U=e(51042),L=e(85576),K=e(45360),S=e(83062),f=e(28036),W=e(86842),m=e(67294),M=e(35312),p=e(32060),s=e(85893),y=function(){var n=(0,M.useIntl)(),k=(0,m.useState)(!1),O=c()(k,2),x=O[0],T=O[1],N=(0,m.useState)([]),I=c()(N,2),G=I[0],Z=I[1],z=(0,m.useState)({current:1,pageSize:10,total:0}),C=c()(z,2),g=C[0],H=C[1],E=function(){var l=P()(u()().mark(function a(){var r,i,d,o=arguments;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&o[0]!==void 0?o[0]:1,i=o.length>1&&o[1]!==void 0?o[1]:10,T(!0),t.prev=3,t.next=6,(0,p.Sd)({page:r,page_size:i});case 6:d=t.sent,d.code===0&&(Z(d.data.list),H({current:r,pageSize:i,total:d.data.total_count})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Failed to fetch roles list:",t.t0);case 13:return t.prev=13,T(!1),t.finish(13);case 16:case"end":return t.stop()}},a,null,[[3,10,13,16]])}));return function(){return l.apply(this,arguments)}}(),F=function(a,r){L.Z.confirm({title:n.formatMessage({id:"workflow.roleManagement.deleteConfirmTitle"}),content:n.formatMessage({id:"workflow.roleManagement.deleteConfirmContent"},{name:r}),okText:n.formatMessage({id:"workflow.roleManagement.confirm"}),cancelText:n.formatMessage({id:"workflow.roleManagement.cancel"}),okType:"danger",onOk:function(){var i=P()(u()().mark(function o(){var h;return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,p.Rd)(a);case 3:h=_.sent,h.code===0&&(K.ZP.success(n.formatMessage({id:"workflow.roleManagement.deleteSuccess"})),E(g.current,g.pageSize)),_.next=10;break;case 7:_.prev=7,_.t0=_.catch(0),console.error("Failed to delete role:",_.t0);case 10:case"end":return _.stop()}},o,null,[[0,7]])}));function d(){return i.apply(this,arguments)}return d}()})},$=function(a){M.history.push("/role-management/edit/".concat(a))},J=function(){M.history.push("/role-management/create")},Q=function(a){E(a.current,a.pageSize)},V=[{title:n.formatMessage({id:"workflow.roleManagement.roleName"}),dataIndex:"name",key:"name",width:200},{title:n.formatMessage({id:"workflow.roleManagement.description"}),dataIndex:"description",key:"description",ellipsis:{showTitle:!1},render:function(a){return(0,s.jsx)(S.Z,{placement:"topLeft",title:a,children:a})}},{title:n.formatMessage({id:"workflow.roleManagement.createdAt"}),dataIndex:"created_at",key:"created_at",width:180,render:function(a){return new Date(a).toLocaleString()}},{title:n.formatMessage({id:"workflow.roleManagement.actions"}),key:"actions",width:120,render:function(a,r){return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(f.ZP,{type:"text",size:"small",icon:(0,s.jsx)(R.Z,{}),onClick:function(){return $(r.id)},title:n.formatMessage({id:"workflow.roleManagement.edit"})}),(0,s.jsx)(f.ZP,{type:"text",size:"small",danger:!0,icon:(0,s.jsx)(B.Z,{}),onClick:function(){return F(r.id,r.name)},title:n.formatMessage({id:"workflow.roleManagement.delete"})})]})}}];return(0,m.useEffect)(function(){E()},[]),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:n.formatMessage({id:"workflow.roleManagement.title"})}),(0,s.jsx)(f.ZP,{type:"primary",icon:(0,s.jsx)(U.Z,{}),onClick:J,children:n.formatMessage({id:"workflow.roleManagement.createRole"})})]}),(0,s.jsx)(W.Z,{columns:V,dataSource:G,loading:x,rowKey:"id",pagination:v()(v()({},g),{},{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(a,r){return n.formatMessage({id:"workflow.roleManagement.pagination"},{start:r[0],end:r[1],total:a})}}),onChange:Q})]})};D.default=y}}]);
