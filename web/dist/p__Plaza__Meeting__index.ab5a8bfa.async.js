"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[979],{82114:function(fe,U,s){var $=s(1413),a=s(67294),u=s(83707),c=s(91146),h=function(v,g){return a.createElement(c.Z,(0,$.Z)((0,$.Z)({},v),{},{ref:g,icon:u.Z}))},y=a.forwardRef(h);U.Z=y},43722:function(fe,U,s){s.d(U,{Gh:function(){return Z},Gn:function(){return g},KH:function(){return F},Rp:function(){return W},cH:function(){return V},dB:function(){return N},j2:function(){return J},r5:function(){return L},rw:function(){return y},sI:function(){return C},sT:function(){return E},sh:function(){return ce},vu:function(){return v},xM:function(){return xe},xT:function(){return Y}});var $=s(15009),a=s.n($),u=s(99289),c=s.n(u),h=s(47520),y=function(){var d=c()(a()().mark(function n(){var t;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,h.ZP)("/v1/index/",{method:"GET"});case 2:return t=o.sent,o.abrupt("return",t);case 4:case"end":return o.stop()}},n)}));return function(){return d.apply(this,arguments)}}(),k=null,v=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/",{method:"GET",data:t});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),g=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/".concat(t.id),{method:"DELETE"});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),N=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/",{method:"POST",data:t});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),V=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/".concat(t.id,"/details"),{method:"GET"});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),J=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:t.id}});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),C=function(){var d=c()(a()().mark(function n(t,l){var o;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.ZP)("/v1/chatroom/".concat(l,"/update_chatroom"),{method:"POST",data:t});case 2:return o=i.sent,i.abrupt("return",o);case 4:case"end":return i.stop()}},n)}));return function(t,l){return d.apply(this,arguments)}}(),L=function(){var d=c()(a()().mark(function n(t,l){var o;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.ZP)("/v1/chatroom/".concat(l,"/smart_selection"),{method:"POST",data:t});case 2:return o=i.sent,i.abrupt("return",o);case 4:case"end":return i.stop()}},n)}));return function(t,l){return d.apply(this,arguments)}}(),E=function(){var d=c()(a()().mark(function n(t,l,o){var r;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,h.ZP)("/v1/chatroom/".concat(l,"/agents/").concat(o,"/setting"),{method:"PUT",data:t});case 2:return r=I.sent,I.abrupt("return",r);case 4:case"end":return I.stop()}},n)}));return function(t,l,o){return d.apply(this,arguments)}}(),F=function(){var d=c()(a()().mark(function n(t,l){var o;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.ZP)("/v1/chatroom/".concat(t,"/chatroom_message"),{method:"GET",data:l});case 2:return o=i.sent,i.abrupt("return",o);case 4:case"end":return i.stop()}},n)}));return function(t,l){return d.apply(this,arguments)}}(),W=function(){var d=c()(a()().mark(function n(t,l){var o;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.ZP)("/v1/chatroom/".concat(t,"/chat_history_message_summary"),{method:"POST",data:l});case 2:return o=i.sent,i.abrupt("return",o);case 4:case"end":return i.stop()}},n)}));return function(t,l){return d.apply(this,arguments)}}(),Y=function(){var d=c()(a()().mark(function n(t,l){var o;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.ZP)("/v1/chatroom/".concat(t,"/chat_history_summary"),{method:"POST",data:l});case 2:return o=i.sent,i.abrupt("return",o);case 4:case"end":return i.stop()}},n)}));return function(t,l){return d.apply(this,arguments)}}(),ce=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:t});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),Z=function(){var d=c()(a()().mark(function n(t){var l;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,h.ZP)("/v1/chatroom/chat_room_history_single",{method:"GET",data:t});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(t){return d.apply(this,arguments)}}(),xe=function(){var d=c()(a()().mark(function n(t,l){var o;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,h.ZP)("/v1/chatroom/".concat(t,"/chat_single_message_generation"),{method:"POST",data:l});case 2:return o=i.sent,i.abrupt("return",o);case 4:case"end":return i.stop()}},n)}));return function(t,l){return d.apply(this,arguments)}}()},80459:function(fe,U,s){var $=s(32332),a=s(67294),u=s(85893),c=function(y){var k=y.width,v=k===void 0?"40px":k,g=y.bg,N=g===void 0?"#F4F8F1":g,V=y.rounded,J=V===void 0?"6px":V,C=y.data,L=y.imgWidth,E=L===void 0?"18px":L,F=y.background;C!=null&&C.avatar&&(E=v);var W=F||N;return(0,u.jsx)("div",{className:"relative flex items-center justify-center shrink-0",style:{width:v,height:v,backgroundColor:W,borderRadius:J},children:(0,u.jsx)("img",{src:C!=null&&C.avatar?C.avatar:(0,$.s9)("single",C==null?void 0:C.icon),style:{width:E,height:E,borderRadius:J},alt:""})})};U.Z=(0,a.memo)(c)},88864:function(fe,U,s){var $=s(32332),a=s(67294),u=s(85893);U.Z=(0,a.memo)(function(c){var h=c.agentList,y=c.size,k=y===void 0?"sm":y,v=c.rounded,g=v===void 0?!1:v,N=h==null?void 0:h.map(function(L){return L.avatar?L.avatar:(0,$.s9)("single",L.icon)}),V={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},J={sm:"w-[47%] h-[47%]",md:"w-[47%] h-[47%]",lg:"w-[47%] h-[47%]"},C=function(){var E=(N==null?void 0:N.length)||0;if(!E||!N)return(0,u.jsx)("div",{className:"bg-gray-200 w-full h-full ".concat(g?"rounded-full":"")});if(E===1)return(0,u.jsx)("div",{className:"w-full h-full overflow-hidden ".concat(g?"rounded-full":""),children:(0,u.jsx)("img",{src:N[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})});if(E===2)return(0,u.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,u.jsx)("div",{className:"w-1/2 h-full pr-[2%]",children:(0,u.jsx)("img",{src:N[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-l-full":"")})}),(0,u.jsx)("div",{className:"w-1/2 h-full pl-[2%]",children:(0,u.jsx)("img",{src:N[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-r-full":"")})})]});if(E===3)return(0,u.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,u.jsx)("div",{className:"w-1/2 h-full pr-[2%] flex items-center justify-center",children:(0,u.jsx)("img",{src:N[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-l-full":"")})}),(0,u.jsxs)("div",{className:"w-1/2 h-full pl-[2%] flex flex-col",children:[(0,u.jsx)("div",{className:"h-1/2 pb-[2%]",children:(0,u.jsx)("img",{src:N[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-tr-full":"")})}),(0,u.jsx)("div",{className:"h-1/2 pt-[2%]",children:(0,u.jsx)("img",{src:N[2],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-br-full":"")})})]})]});if(E===4)return(0,u.jsx)("div",{className:"w-full h-full flex flex-wrap",children:N.slice(0,4).map(function(ce,Z){return(0,u.jsx)("div",{className:"".concat(J[k]," p-[3%] ").concat(Z===0?"pl-0 pt-0":Z===1?"pr-0 pt-0":Z===2?"pl-0 pb-0":"pr-0 pb-0"),children:(0,u.jsx)("img",{src:ce,alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?Z===0?"rounded-tl-full":Z===1?"rounded-tr-full":Z===2?"rounded-bl-full":"rounded-br-full":"")})},Z)})});for(var F=N.slice(0,9),W=[],Y=0;Y<Math.min(9,F.length);Y++)W.push((0,u.jsx)("div",{className:"w-1/3 h-1/3",style:{padding:"1.5%"},children:(0,u.jsx)("img",{src:F[Y],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})},Y));return(0,u.jsx)("div",{className:"w-full h-full flex flex-wrap",children:W})};return(0,u.jsx)("div",{className:"".concat(V[k]," overflow-hidden bg-white ").concat(g?"rounded-full":""),children:C()})})},52700:function(fe,U,s){s.r(U),s.d(U,{default:function(){return Le}});var $=s(97857),a=s.n($),u=s(15009),c=s.n(u),h=s(99289),y=s.n(h),k=s(5574),v=s.n(k),g=s(43722),N=s(78697),V=s(72406),J=s(32332),C=s(82114),L=s(3471),E=s(35312),F=s(15746),W=s(45360),Y=s(85576),ce=s(83159),Z=s(71230),xe=s(32983),d=s(74330),n=s(28036),t=s(67294),l=s(19632),o=s.n(l),r=s(28508),i=s(26915),I=s(40741),Ce=s(13457),Ee=s(96486),Se=s(44010),Re=s(80459),e=s(85893),Pe=i.Z.TextArea,Te=function(p){var x=(0,E.useIntl)(),ee=p.show,w=p.id,te=p.close,ue=p.save,A=p.isUpdata,le=I.Z.useForm(),ie=v()(le,1),Q=ie[0],G=(0,t.useRef)(!1),X=(0,E.useLocation)(),de=(0,t.useRef)(null),pe=W.ZP.useMessage(),ae=v()(pe,2),re=ae[0],z=ae[1],D=(0,t.useState)({name:"",description:"",max_round:10,agent:[]}),B=v()(D,2),m=B[0],S=B[1],ge=(0,t.useState)([]),se=v()(ge,2),K=se[0],me=se[1],q=(0,t.useRef)(!1),_e=(0,Ee.throttle)(function(){var b=y()(c()().mark(function M(oe){var T,H;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!q.current){f.next=2;break}return f.abrupt("return");case 2:if(q.current=!0,T=K.map(function(be){var Ue=be.agent_id,Me=be.active,$e=Me===void 0?1:Me;return{agent_id:Ue,active:$e}}),m.name){f.next=7;break}return q.current=!1,f.abrupt("return");case 7:if(T.length!=0){f.next=11;break}return q.current=!1,re.open({type:"error",content:x.formatMessage({id:"app.create_chatroom.label_4_tips"})}),f.abrupt("return");case 11:if(S(a()(a()({},m),{},{agent:T})),re.open({key:"create",type:"loading",content:"Loading..."}),G.current){f.next=19;break}return f.next=16,(0,g.dB)(a()(a()({},m),{},{agent:T}));case 16:f.t0=f.sent,f.next=22;break;case 19:return f.next=21,(0,g.sI)(a()(a()({},m),{},{agent:T}),w);case 21:f.t0=f.sent;case 22:H=f.t0,H.code==0&&(re.open({key:"create",type:"success",content:G.current?x.formatMessage({id:"app.edit_chatroom.succeed"}):x.formatMessage({id:"app.create_chatroom.succeed"}),duration:2}),ue(!0),ye()),q.current=!1;case 25:case"end":return f.stop()}},M)}));return function(M){return b.apply(this,arguments)}}(),300),we=(0,t.useState)(!1),je=v()(we,2),_=je[0],R=je[1],P=function(M){var oe={};return M.slice(1).split("&").forEach(function(T){var H=T.split("=");oe[H[0]]=H[1]}),oe},j=function(){var b=y()(c()().mark(function M(oe){var T,H;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,g.cH)({id:oe});case 2:T=f.sent,T.code==0&&(H=T.data.chat_info,S(a()(a()({},m),{},{name:H.name,description:H.description,max_round:T.data.max_round?T.data.max_round:10,agent:T.data.agent_list})),me(T.data.agent_list));case 4:case"end":return f.stop()}},M)}));return function(oe){return b.apply(this,arguments)}}(),he=function(){R(!0)},Ne=function(){R(!1)},ne=function(M){me(o()(M.checkItem))},O=function(){G.current=!1,A&&w!=0&&(G.current=!0,j(w))},ye=function(){Q.setFieldsValue({Title:"",Description:"",MaxRound:10}),S(a()(a()({},m),{},{name:"",description:"",max_round:10,agent:[]})),me([]),q.current=!1,te()};return(0,t.useEffect)(function(){ee&&O()},[ee]),(0,t.useEffect)(function(){Q.setFieldsValue({Title:m.name,Description:m.description,MaxRound:m.max_round})},[m,Q]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{ref:de,className:"w-full h-full fixed top-[0] left-[0] bg-[rgba(0,0,0,0.5)] flex items-center justify-center z-20",children:[(0,e.jsxs)("div",{className:"w-[980px] h-[646px] bg-[#fff] rounded-[6px]",children:[z,(0,e.jsx)("div",{className:"w-full flex relative",style:{height:"100%"},children:(0,e.jsx)("div",{className:"w-full relative box-border flex-1",style:{height:"100%"},children:(0,e.jsx)(I.Z,{form:Q,className:"h-full",initialValues:{Title:m.name,Description:m.description,MaxRound:m.max_round},children:(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("div",{className:"text-[16px] flex items-center p-[20px]",style:{borderBottom:"1px solid #ebebeb"},children:[(0,e.jsx)("span",{className:"flex-1 text-[14px] font-[500] text-[#213044]",children:G.current?x.formatMessage({id:"app.edit_chatroom.title"}):x.formatMessage({id:"app.create_chatroom.title"})}),(0,e.jsx)(r.Z,{className:"text-[16px] cursor-pointer",onClick:ye})]}),(0,e.jsx)("div",{className:"flex-1 min-h-[0] overflow-auto",children:(0,e.jsxs)("div",{className:"pt-[20px] px-[20px]",children:[(0,e.jsxs)("div",{className:"text-[12px] text-[#213044]",children:[(0,e.jsx)("span",{style:{color:"red",paddingRight:"4px"},children:"*"}),x.formatMessage({id:"app.create_chatroom.label_1"})]}),(0,e.jsx)("div",{className:"pt-[15px]",children:(0,e.jsx)(I.Z.Item,{name:"Title",rules:[{required:!0,message:x.formatMessage({id:"app.create_chatroom.label_1_tips"})}],style:{marginBottom:"0px"},children:(0,e.jsx)(i.Z,{placeholder:x.formatMessage({id:"app.create_chatroom.label_1_pl"}),maxLength:50,style:{height:40,background:"#F7F7F7"},className:"placeholder:text-[#bbb] placeholder:text-[12px] h-[40px] border-[#eee] text-[#213044]",onChange:function(M){S(a()(a()({},m),{},{name:M.target.value}))}})})}),(0,e.jsx)("div",{className:"text-[12px] text-[#213044] pt-[20px]",children:x.formatMessage({id:"app.create_chatroom.label_2"})}),(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(I.Z.Item,{name:"Description",style:{marginBottom:"0px"},children:(0,e.jsx)(Pe,{showCount:!0,maxLength:1e3,placeholder:x.formatMessage({id:"app.create_chatroom.label_2_pl"}),value:m.description,style:{height:57,resize:"none",background:"#F7F7F7"},className:"placeholder:text-[#bbb] placeholder:text-[12px] h-[40px] border-[#eee] text-[#213044]",onChange:function(M){S(a()(a()({},m),{},{description:M.target.value}))}})})}),(0,e.jsxs)("div",{className:"text-[12px] text-[#213044] pt-[20px]",children:[(0,e.jsx)("span",{style:{color:"red",paddingRight:"4px"},children:"*"}),x.formatMessage({id:"app.create_chatroom.label_3"})]}),(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(I.Z.Item,{name:"MaxRound",rules:[{required:!0,message:x.formatMessage({id:"app.create_chatroom.label_3_tips"})}],style:{marginBottom:"0px"},children:(0,e.jsx)(Ce.Z,{min:10,step:1,max:100,size:"large",style:{background:"#F7F7F7"},className:"placeholder:text-[#bbb] placeholder:text-[12px]  border-[#eee] text-[#213044] w-full",onChange:function(M){S(a()(a()({},m),{},{max_round:M}))},formatter:function(M){return M!==void 0?Math.floor(M).toString():m.max_round.toString()}})})}),(0,e.jsxs)("div",{className:"text-[14px]  pt-[20px] flex",children:[(0,e.jsx)("span",{style:{color:"red",paddingRight:"4px"},children:"*"}),(0,e.jsx)("span",{className:"text-[12px] text-[#213044]",children:x.formatMessage({id:"app.create_chatroom.label_4"})})]}),(0,e.jsx)("div",{className:"pt-[15px] pb-[20px] overflow-hidden w-full",children:(0,e.jsxs)(Z.Z,{gutter:[15,15],children:[(0,e.jsx)(F.Z,{span:6,children:(0,e.jsx)("div",{className:"text-[12px] text-[#BBBBBB] h-[62px] rounded-[4px] bg-[#F7F7F7] leading-[62px] text-center cursor-pointer",onClick:he,style:{border:"1px solid #EEEEEE"},children:x.formatMessage({id:"app.create_chatroom.add_button"})})}),K&&K.length?K.map(function(b){return(0,e.jsx)(F.Z,{span:6,children:(0,e.jsxs)("div",{className:"bg-[#fff] flex gap-x-[20px] p-[10px] cursor-pointer border-solid border-[1px] rounded-[4px] border-[#eee]",children:[(0,e.jsx)(Re.Z,{data:b,imgWidth:"20px"}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("div",{className:"text-[#213044] text-[12px] font-[500] w-full truncate",children:b.name}),(0,e.jsx)("div",{className:"text-[#999] text-[12px] w-full truncate",children:b.description})]})]})},b.agent_id)}):(0,e.jsx)(e.Fragment,{})]})})]})}),(0,e.jsxs)("div",{className:"p-[20px] flex gap-x-[20px] justify-end",style:{borderTop:"1px solid #e8e8e8"},children:[(0,e.jsx)(n.ZP,{className:"text-[14px] text-[#213044] w-[88px] h-[40px]",style:{border:"1px solid #D8D8D8"},onClick:ye,children:x.formatMessage({id:"app.create_chatroom.cancel"})}),(0,e.jsx)(n.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px]",htmlType:"submit",onClick:_e,children:x.formatMessage({id:"app.create_chatroom.save"})})]})]})})})})]}),(0,e.jsx)(Se.Z,{show:_,popupClose:Ne,popupSave:ne,checkList:K})]})})},Ze=Te,De=s(88864),Fe=function(p){return(0,e.jsx)(F.Z,{className:"gutter-row",xs:24,sm:24,md:12,lg:8,xl:6,children:(0,e.jsxs)("div",{className:"h-[236px] rounded-[8px] bg-[#EFF0F2] flex flex-col items-center justify-center gap-y-[10px] cursor-pointer",style:{border:"1px solid #E9E9E9"},onClick:function(){p.setCreateShow(!0),p.isUpdataChatRoom.current=!1,p.upDataId.current=0},children:[(0,e.jsx)("img",{src:"/icons/plaza_m2_c2.svg",className:"w-[42px] h-[42px]",alt:""}),(0,e.jsx)("span",{className:"text-[#213044] text-[12px]",children:p.intl.formatMessage({id:"app.chatroom_list.create"})})]})})},Ie=function(p){var x=p.item,ee=p.resetList,w=p.setCreateShow,te=p.isUpdataChatRoom,ue=p.upDataId,A=p.intl,le=W.ZP.useMessage(),ie=v()(le,2),Q=ie[0],G=ie[1],X=Y.Z.confirm,de=function(){X({title:A.formatMessage({id:"app.chatroom.del.title"}),icon:(0,e.jsx)(C.Z,{}),content:A.formatMessage({id:"app.chatroom.del.tips"}),okText:A.formatMessage({id:"app.chatroom.del.confirm"}),okType:"danger",cancelText:A.formatMessage({id:"app.chatroom.del.cancel"}),onOk:function(){pe()}})},pe=function(){var z=y()(c()().mark(function D(){var B;return c()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,g.Gn)({id:x.chatroom_id});case 2:B=S.sent,B.code==0&&(Q.open({key:"del",type:"success",content:A.formatMessage({id:"app.chatroom.del.delsuccess"}),duration:10}),ee(x.chatroom_id));case 4:case"end":return S.stop()}},D)}));return function(){return z.apply(this,arguments)}}(),ae=function(){var z=y()(c()().mark(function D(){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:w(!0),te.current=!0,ue.current=x.chatroom_id;case 3:case"end":return m.stop()}},D)}));return function(){return z.apply(this,arguments)}}(),re=[{key:"1",label:(0,e.jsx)("div",{className:"py-[3px] px-[3px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[5px] text-[12px] text-[#213044] items-center p-y-[8]",onClick:ae,children:[(0,e.jsx)("img",{src:"/icons/edit_icon.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{children:A.formatMessage({id:"app.chatroom_list.fun_button_1"})})]})})},{key:"2",label:(0,e.jsx)("div",{className:"py-[3px] px-[3px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[5px] text-[12px] text-[#E12222] items-center",onClick:de,children:[(0,e.jsx)("img",{src:"/icons/delete_icon.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{children:A.formatMessage({id:"app.chatroom_list.fun_button_2"})})]})})}];return(0,e.jsxs)(e.Fragment,{children:[G,(0,e.jsxs)("div",{className:"flex  items-center",children:[(0,e.jsx)("div",{className:"flex gap-x-[6px] items-center flex-1"}),(0,e.jsx)(ce.Z,{menu:{items:re},placement:"topRight",className:"cursor-pointer",children:(0,e.jsx)("div",{className:"w-[18px] h-[18px] bg-[#ebebeb] rounded-[4px] flex justify-center items-center",children:(0,e.jsx)(L.Z,{className:"hover:text-[#1B64F3]",style:{fontSize:"14px"}})})})]})]})},Ae=function(){var p=(0,E.useIntl)(),x=(0,t.useState)(null),ee=v()(x,2),w=ee[0],te=ee[1],ue=(0,t.useState)(!1),A=v()(ue,2),le=A[0],ie=A[1],Q=(0,t.useState)({page:1,page_size:20,name:""}),G=v()(Q,2),X=G[0],de=G[1],pe=(0,t.useState)(!0),ae=v()(pe,2),re=ae[0],z=ae[1],D=(0,t.useRef)(!1),B=(0,t.useRef)(0),m=(0,t.useState)(!1),S=v()(m,2),ge=S[0],se=S[1],K=function(){var _=y()(c()().mark(function R(){var P,j,he=arguments;return c()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return P=he.length>0&&he[0]!==void 0?he[0]:!1,ne.next=3,(0,g.vu)(X);case 3:j=ne.sent,P&&ie(!0),j.code==0&&(z(j.data.total_pages>X.page),j.data.total_pages>=X.page&&!P&&(j.data.list=w.list.concat(j.data.list)),j.data.list&&j.data.list.length&&j.data.list.forEach(function(O){O.old_agent_list=JSON.parse(JSON.stringify(O.agent_list||[])),O.agent_list&&O.agent_list.length&&(O.agent_list.length=O.agent_list.length>6?6:O.agent_list.length,O.old_agent_list.length=O.old_agent_list.length>9?9:O.old_agent_list.length)}),te(j.data));case 6:case"end":return ne.stop()}},R)}));return function(){return _.apply(this,arguments)}}();(0,t.useEffect)(function(){K(!0),z(!0)},[]);var me=function(R){de(function(P){return a()(a()({},P),{},{page:X.page++})}),K()},q=function(R){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;w&&w.list.length&&(P!=null?te(a()(a()({},w),{},{list:w.list.map(function(j){return a()(a()({},j),{},{smart_selection:j.chatroom_id===R?P:j.smart_selection})})})):te(a()(a()({},w),{},{list:w.list.filter(function(j){return j.chatroom_id!==R})})))},_e=function(R){E.history.push("/chat_room/".concat(R.chatroom_id))},we=function(){se(!1)},je=function(R){R&&K(!0)};return(0,e.jsx)("div",{className:"pt-0 w-full",id:"Meeting",style:{height:"calc(100vh - 94px)",overflowY:"auto"},children:(0,e.jsx)(V.Z,{dataLength:w&&w.list.length,elid:"Meeting",ishasMore:re,upSlide:me,isFooter:!0,pageNumber:X.page,children:(0,e.jsx)("div",{className:"px-[30px] pt-[30px]",children:(0,e.jsxs)(Z.Z,{gutter:[20,20],style:{margin:0},children:[w&&w.list.length&&le?(0,e.jsx)(Fe,{setCreateShow:se,isUpdataChatRoom:D,intl:p,upDataId:B}):(0,e.jsx)(e.Fragment,{}),w&&w.list.length?w.list.map(function(_,R){return(0,e.jsx)(F.Z,{className:"gutter-row",xs:24,sm:24,md:12,lg:8,xl:6,xxl:6,children:(0,e.jsx)("div",{className:"relative h-[236px] rounded-[8px] cursor-pointer shadow-lg shadow-gray-100 hover:shadow-gray-200",onClick:function(){_e(_)},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] h-full",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"flex pt-[20px] pb-[15px] px-[20px] text-[#213044] text-[14px] font-[500] gap-x-[6px]",children:[(0,e.jsx)(De.Z,{agentList:_.old_agent_list}),(0,e.jsx)("span",{className:"flex-1 min-w-[0px] truncate",children:_.name}),(0,e.jsxs)("div",{className:"flex gap-x-[5px] items-center",children:[(0,e.jsx)("img",{src:"".concat(_.active==0?"/icons/plaza_m2_c2.svg":"/icons/plaza_m2_c1.svg"),className:"w-[14px] h-[14px]"}),(0,e.jsx)("span",{className:"text-[12px]",children:_.active==0?(0,e.jsx)("span",{className:"text-[#aaa]",children:p.formatMessage({id:"app.chatroom_list.status"})}):(0,e.jsx)("span",{className:"text-[#1B64F3]",children:p.formatMessage({id:"app.chatroom_list.status_succeed"})})})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"px-[20px]",children:(0,e.jsxs)("div",{style:{borderBottom:"1px solid #eee"},children:[(0,e.jsx)("div",{className:"text-[#666666] text-[12px] font-[400] w-full truncate min-h-[14px]",children:_.description?_.description:(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{className:"py-[20px] h-[115px] overflow-hidden",children:_.agent_list&&_.agent_list.length?(0,e.jsx)(Z.Z,{gutter:[20,18],children:_.agent_list.map(function(P,j){return(0,e.jsx)(F.Z,{md:12,lg:12,xl:12,xxl:8,children:(0,e.jsxs)("div",{className:"flex gap-x-[10px] items-center",children:[(0,e.jsx)(N.Z,{Image:(0,J.s9)("single",P.icon),size:"30",avatar:P.avatar}),(0,e.jsx)("div",{className:"text-[#666] text-[12px] truncate",children:P.name})]})},j)})}):(0,e.jsx)(xe.Z,{style:{margin:"0px",fontSize:"12px"},imageStyle:{width:"60px",margin:"0 auto",marginBottom:"2px"},description:p.formatMessage({id:"app.dashboard.None"}),image:xe.Z.PRESENTED_IMAGE_SIMPLE})})]})}),(0,e.jsx)("div",{className:"pt-[15px] pb-[16px] px-[20px]",onClick:function(j){return j.stopPropagation(),!1},children:(0,e.jsx)(Ie,{item:_,resetList:q,setCreateShow:se,isUpdataChatRoom:D,upDataId:B,intl:p})})]})]})})},R)}):(0,e.jsx)(e.Fragment,{children:le?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex items-center flex-wrap justify-center mt-48",children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-center mb-2.5",children:(0,e.jsx)("img",{src:"/icons/default.svg",alt:""})}),(0,e.jsxs)("div",{className:"w-full text-center mb-3 text-[#666] text-sm",children:[p.formatMessage({id:"creation.margindescribe"})," ","~"]}),(0,e.jsxs)("div",{className:"w-full text-center",children:[" ",(0,e.jsx)(n.ZP,{color:"primary",onClick:function(){se(!0),D.current=!1,B.current=0},children:p.formatMessage({id:"app.chatroom_list.create"})})," "]})]})}):(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(d.Z,{size:"large"})})}),ge?(0,e.jsx)(Ze,{show:ge,id:B.current,close:we,save:je,isUpdata:D.current}):(0,e.jsx)(e.Fragment,{})]})})})})},Oe=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Ae,{})})})},Le=Oe}}]);
