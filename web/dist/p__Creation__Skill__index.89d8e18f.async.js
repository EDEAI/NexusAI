(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{82826:function(Q,V,t){"use strict";t.d(V,{Z:function(){return i}});var O=t(1413),a=t(67294),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},u=K,k=t(91146),T=function(_,N){return a.createElement(k.Z,(0,O.Z)((0,O.Z)({},_),{},{ref:N,icon:u}))},$=a.forwardRef(T),i=$},89035:function(Q,V,t){"use strict";t.d(V,{Z:function(){return i}});var O=t(1413),a=t(67294),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},u=K,k=t(91146),T=function(_,N){return a.createElement(k.Z,(0,O.Z)((0,O.Z)({},_),{},{ref:N,icon:u}))},$=a.forwardRef(T),i=$},81644:function(Q,V,t){"use strict";t.d(V,{Z:function(){return i}});var O=t(1413),a=t(67294),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},u=K,k=t(91146),T=function(_,N){return a.createElement(k.Z,(0,O.Z)((0,O.Z)({},_),{},{ref:N,icon:u}))},$=a.forwardRef(T),i=$},2068:function(Q,V,t){"use strict";t.d(V,{Z:function(){return i}});var O=t(1413),a=t(67294),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},u=K,k=t(91146),T=function(_,N){return a.createElement(k.Z,(0,O.Z)((0,O.Z)({},_),{},{ref:N,icon:u}))},$=a.forwardRef(T),i=$},15360:function(Q,V,t){"use strict";t.d(V,{Z:function(){return i}});var O=t(1413),a=t(67294),K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},u=K,k=t(91146),T=function(_,N){return a.createElement(k.Z,(0,O.Z)((0,O.Z)({},_),{},{ref:N,icon:u}))},$=a.forwardRef(T),i=$},83510:function(Q,V,t){"use strict";t.d(V,{LK:function(){return se},bs:function(){return L},go:function(){return ye},uy:function(){return W}});var O=t(15009),a=t.n(O),K=t(99289),u=t.n(K),k=t(47520),T="/v1/apps/apps_list",$="/v1/agent/agent_delete/",i="/v1/workflow/workflow_app_delete/",ie="/v1/vector/delete_dataset/",_="/v1/skill/delete_skill_by_app_id/",N="/v1/apps/apps_create",ue="/v1/apps/app_update/",ye=function(){var F=u()(a()().mark(function b(s){var m;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,k.ZP)("".concat(T),{method:"GET",data:s});case 2:return m=r.sent,r.abrupt("return",m);case 4:case"end":return r.stop()}},b)}));return function(s){return F.apply(this,arguments)}}(),se=function(){var F=u()(a()().mark(function b(s){var m;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(s),r.next=3,s.mode;case 3:if(r.t0=r.sent,r.t0!=1){r.next=8;break}r.t1=(0,k.ZP)("".concat($).concat(s.app_id),{method:"DELETE"}),r.next=9;break;case 8:r.t1=s.mode==2?(0,k.ZP)("".concat(i).concat(s.app_id),{method:"DELETE"}):s.mode==3?(0,k.ZP)("".concat(ie).concat(s.app_id),{method:"DELETE"}):(0,k.ZP)("".concat(_).concat(s.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return m=r.t1,r.abrupt("return",m);case 11:case"end":return r.stop()}},b)}));return function(s){return F.apply(this,arguments)}}(),W=function(){var F=u()(a()().mark(function b(s){var m;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,k.ZP)("".concat(N),{method:"POST",data:s});case 2:return m=r.sent,r.abrupt("return",m);case 4:case"end":return r.stop()}},b)}));return function(s){return F.apply(this,arguments)}}(),L=function(){var F=u()(a()().mark(function b(s){var m;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,k.ZP)("".concat(ue).concat(s.app_id),{method:"PUT",data:s});case 2:return m=r.sent,r.abrupt("return",m);case 4:case"end":return r.stop()}},b)}));return function(s){return F.apply(this,arguments)}}()},24805:function(Q,V,t){"use strict";t.d(V,{Hb:function(){return _},Ur:function(){return ye},cN:function(){return ue},ej:function(){return N}});var O=t(15009),a=t.n(O),K=t(99289),u=t.n(K),k=t(47520),T="/v1/skill/skill_info/",$="/v1/skill/skill_update/",i="/v1/skill/skill_publish/",ie="/v1/skill/skill_run",_=function(){var se=u()(a()().mark(function W(L,F){var b;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,k.ZP)("".concat(T).concat(L),{method:"GET",data:{publish_status:F=="true"?1:0}});case 2:return b=m.sent,m.abrupt("return",b);case 4:case"end":return m.stop()}},W)}));return function(L,F){return se.apply(this,arguments)}}(),N=function(){var se=u()(a()().mark(function W(L){var F;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,k.ZP)("".concat($).concat(L.app_id),{method:"PUT",data:L.data});case 2:return F=s.sent,s.abrupt("return",F);case 4:case"end":return s.stop()}},W)}));return function(L){return se.apply(this,arguments)}}(),ue=function(){var se=u()(a()().mark(function W(L){var F;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,k.ZP)("".concat(i).concat(L),{method:"PUT"});case 2:return F=s.sent,s.abrupt("return",F);case 4:case"end":return s.stop()}},W)}));return function(L){return se.apply(this,arguments)}}(),ye=function(){var se=u()(a()().mark(function W(L){var F;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,k.ZP)("".concat(ie),{method:"POST",data:L});case 2:return F=s.sent,s.abrupt("return",F);case 4:case"end":return s.stop()}},W)}));return function(L){return se.apply(this,arguments)}}()},31664:function(Q,V,t){"use strict";t.r(V),t.d(V,{default:function(){return it}});var O=t(97857),a=t.n(O),K=t(15009),u=t.n(K),k=t(99289),T=t.n(k),$=t(5574),i=t.n($),ie=t(83510),_=t(24805),N=t(10759),ue=t(32332),ye=t(2068),se=t(89035),W=t(81644),L=t(15360),F=t(82826),b=t(35312),s=t(40741),m=t(45360),z=t(28036),r=t(50136),Oe=t(74330),E=t(67294),Ue=t(13769),Fe=t.n(Ue),ke=t(92939),Te=t(51042),Ee=t(82061),ae=t(26915),Me=t(72269),Ce=t(34041),e=t(85893),Ke=["key","name"],Ft=ae.Z.TextArea,$e=function(l){var j=l.FirstValue,I=l.FirstSkillref,Z=l.Skillinfo,v=l.setSkillInfo,oe=l.Operationbentate,ce=l.firstjudgingcondition,q=l.pageKeyfun,h=l.skillmenudisabled,fe=l.setskillmenudisabled,o=(0,b.useIntl)();(0,E.useEffect)(function(){},[]);var le=function(D){v(a()(a()({},Z),{},{is_public:D?1:0}))},f=function(D){v(a()(a()({},Z),{},{attrs_are_visible:D?1:0}))},A=function(D,re){var G=new N.Kr("output","","");D.users.forEach(function(d){var M=new N._w(d.name,d.type?d.type:"string","",d.content,d.status);G.addProperty(d.name,M)});var H={input_variables:G,is_public:Z.is_public,attrs_are_visible:Z.attrs_are_visible};j(H)},ne=function(){ce(I.getFieldsValue().users,1)||I.validateFields().then(function(D){q("2"),fe(a()(a()({},h),{},{second:!1}))}).catch(function(D){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:o.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",onFinish:function(D){j(D)},style:{width:900},autoComplete:"off",form:I,children:[(0,e.jsx)(s.Z.List,{name:"users",children:function(D,re){var G=re.add,H=re.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:o.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[Z&&Z.name,"\xA0"]})]}),(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:o.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:Z&&Z.description})]}),(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(ke.Z,{className:"font-medium text-xs text-[#555555]",name:o.formatMessage({id:"skill.teamvisibility"}),title:o.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(Me.Z,{size:"small",onChange:le,checked:!!(Z&&Z.is_public==1)})]}),(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:o.formatMessage({id:"agent.attrVisible"})}),(0,e.jsx)(Me.Z,{size:"small",onChange:f,checked:!!(Z&&Z.attrs_are_visible==1)})]}),(0,e.jsxs)("div",{className:"mb-[11px] text-xs font-bold flex justify-between items-center",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:(0,e.jsx)(ke.Z,{required:!0,name:o.formatMessage({id:"skill.inputvariable"}),title:o.formatMessage({id:"skill.Callword.inputvariable"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(z.ZP,{type:"link",onClick:function(){return G()},block:!0,icon:(0,e.jsx)(Te.Z,{}),children:o.formatMessage({id:"skill.add"})})})]}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-[10px]",children:o.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:o.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-36 mr-[100px]",children:o.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"w-14 mr-[90px]",children:o.formatMessage({id:"skill.variable.required"})}),(0,e.jsx)("div",{children:o.formatMessage({id:"skill.variable.operation"})})]}),(0,e.jsx)("div",{children:D.map(function(d){var M=d.key,X=d.name,Y=Fe()(d,Ke);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(s.Z.Item,a()(a()({className:"m-0"},Y),{},{name:[X,"name"],rules:[{required:!0,message:o.formatMessage({id:"skill.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:o.formatMessage({id:"skill.rules.verifydescription"})}],children:(0,e.jsx)(ae.Z,{placeholder:o.formatMessage({id:"skill.variable.name"}),className:"w-48 mr-5"})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"m-0"},Y),{},{name:[X,"content"],rules:[{required:!0,message:o.formatMessage({id:"skill.rules.displayname"})}],children:(0,e.jsx)(ae.Z,{placeholder:o.formatMessage({id:"skill.variable.display"}),className:"w-52 mr-5"})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"w-36 mr-[110px] m-0"},Y),{},{name:[X,"type"],children:(0,e.jsx)(Ce.Z,{defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"}]})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"w-12 mr-[100px] m-0"},Y),{},{name:[X,"status"],children:(0,e.jsx)(Me.Z,{size:"small"})})),(0,e.jsx)(s.Z.Item,{children:I&&I.getFieldsValue().users.length>1?(0,e.jsx)(Ee.Z,{onClick:function(){return H(X)}}):null})]},M)})})]})}}),(0,e.jsxs)("div",{className:"mt-[20px]",children:[(0,e.jsx)(z.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ne()},children:o.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(z.ZP,{onClick:function(){history.back()},children:o.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},We=$e,Ie=t(92485),Je=function(l){var j=l.SecondValue,I=l.handleBack,Z=l.Skillinfo,v=l.setSkillInfo,oe=l.SkillRelyOn,ce=l.setSkillRelyOn,q=l.Secondref,h=l.setskillcodestate,fe=l.setNewcode,o=l.pageKeyfun,le=l.skillmenudisabled,f=l.setskillmenudisabled,A=(0,b.useIntl)();(0,E.useEffect)(function(){},[]);var ne=function(H){ce(H)},J=function(H){h(H===""),fe(JSON.stringify({python3:H}))},D=function(H){var d={dependencies:{python3:oe?oe.split(","):[]},code:Z.code?Z.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})};j(d)},re=function(){o("3"),f(a()(a()({},le),{},{thirdly:!1}))};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:A.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:q,children:[(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(ke.Z,{className:"font-medium",name:A.formatMessage({id:"skill.dependency"}),title:A.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Ce.Z,{mode:"tags",style:{width:"100%"},value:oe,onChange:ne,tokenSeparators:[","]})]}),(0,e.jsxs)(s.Z.Item,{children:[(0,e.jsx)("div",{className:"",children:A.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-[345px]",children:(0,e.jsx)(Ie.Z,{language:"python3",value:Z&&Z.code?JSON.parse(Z.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,onChange:J,title:"python3"})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(z.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){re()},children:A.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(z.ZP,{onClick:function(){history.back()},children:A.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Xe=Je,be=t(78045),Ye=["key","name"],Mt=ae.Z.TextArea,Ct=ae.Z.Search,Qe=function(l){var j=l.ThirdlyValue,I=l.Thirdlyref,Z=l.handleBack,v=l.Skillinfo,oe=l.setSkillInfo,ce=l.Operationbentate,q=l.firstjudgingcondition,h=l.pageKeyfun,fe=l.skillmenudisabled,o=l.setskillmenudisabled,le=l.skillupdata,f=(0,b.useIntl)(),A=(0,E.useState)(null),ne=i()(A,2),J=ne[0],D=ne[1];(0,E.useEffect)(function(){},[]);var re=function(M){oe(a()(a()({},v),{},{output_type:M.target.value}))},G=function(M){var X=new N.Kr("output","","");M.users.forEach(function(p){var ee=new N._w(p.name,p.type?p.type:"string","",p.content,!1);X.addProperty(p.name,ee)});var Y={output_type:v.output_type,output_variables:X};j(Y)},H=function(){q(I.getFieldsValue().users,2)||I.validateFields().then(function(M){le()}).catch(function(M){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsxs)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:[" ",f.formatMessage({id:"skill.menu.output"})]})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",onFinish:G,style:{width:900},autoComplete:"off",form:I,children:[(0,e.jsx)(s.Z.List,{name:"users",children:function(M,X){var Y=X.add,p=X.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(ke.Z,{name:f.formatMessage({id:"skill.outputvariable"}),title:f.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(be.ZP.Group,{onChange:re,value:v&&v.output_type,children:[(0,e.jsx)(be.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(be.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(be.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(be.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.file"})})})]})]}),(0,e.jsxs)("div",{className:"mb-[11px] text-[#555555] text-xs font-medium flex justify-between items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(ke.Z,{required:!0,name:f.formatMessage({id:"skill.outputv"}),title:f.formatMessage({id:"skill.Callword.outputv"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(z.ZP,{type:"link",onClick:function(){return Y()},block:!0,icon:(0,e.jsx)(Te.Z,{}),children:f.formatMessage({id:"skill.add"})})})]}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-[290px] ml-2.5",children:f.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-[290px]",children:f.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-[240px]",children:f.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"",children:f.formatMessage({id:"skill.variable.operation"})})]}),M.map(function(ee){var U=ee.key,x=ee.name,w=Fe()(ee,Ye);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(s.Z.Item,a()(a()({},w),{},{name:[x,"name"],rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:f.formatMessage({id:"skill.rules.verifydescription"})}],className:"m-0",children:(0,e.jsx)(ae.Z,{placeholder:f.formatMessage({id:"skill.variable.name"}),className:"w-[270px] mr-[20px]"})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"m-0"},w),{},{name:[x,"content"],rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})}],children:(0,e.jsx)(ae.Z,{placeholder:f.formatMessage({id:"skill.variable.display"}),className:"w-[260px] mr-[20px]"})})),(0,e.jsx)(s.Z.Item,a()(a()({},w),{},{name:[x,"type"],children:(0,e.jsx)(Ce.Z,{style:{width:"150px",marginRight:"115px"},placeholder:"Please select",defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"},{value:"file",label:"File"}]})})),(0,e.jsx)(s.Z.Item,{children:I&&I.getFieldsValue().users.length>1?(0,e.jsx)(Ee.Z,{onClick:function(){return p(x)}}):null})]})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(z.ZP,{type:"primary",className:"mr-[20px] mt-[30px]",onClick:function(){H()},children:[" ",f.formatMessage({id:"skill.btn.savedebug"})]}),(0,e.jsx)(z.ZP,{onClick:function(){history.back()},children:f.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},qe=Qe,et=t(49677),tt=t.n(et),st=t(69753),at=["key","name"],Pt=ae.Z.TextArea,Ot=ae.Z.Search,lt=function(l){var j=l.FourthlyValue,I=l.Fourthlyref,Z=l.handleBack,v=l.Skillinfo,oe=l.Operationbentate,ce=l.skillid,q=l.app_id,h=(0,b.useIntl)(),fe=(0,E.useState)(null),o=i()(fe,2),le=o[0],f=o[1],A=(0,E.useState)(!1),ne=i()(A,2),J=ne[0],D=ne[1];(0,E.useEffect)(function(){},[]);var re=function(){var U=T()(u()().mark(function x(){var w;return u()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,_.cN)(q||v.app_id);case 2:w=R.sent,w.code==0?m.ZP.success(h.formatMessage({id:"skill.publishsuccess"})):m.ZP.error(h.formatMessage({id:"skill.select.value"}));case 4:case"end":return R.stop()}},x)}));return function(){return U.apply(this,arguments)}}(),G=function(x){var w=x.users.filter(function(y,S){return y.type=="number"&&!Number(y.value)&&!!y.value});if(w.length>0)m.ZP.warning(h.formatMessage({id:"skill.message.warning.vlaue"}));else{D(!0);var C=new N.Kr("output","","");x.users.forEach(function(y){var S=new N._w(y.name,y.type,y.type=="string"?y.value:Number(y.value),y.content,y.status);C.addProperty(y.name,S)});var R={skill_id:ce||v.id,input_dict:C};Y(R)}},H=(0,E.useState)([]),d=i()(H,2),M=d[0],X=d[1],Y=function(){var U=T()(u()().mark(function x(w){return u()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:(0,_.Ur)(w).then(function(y){m.ZP.success(h.formatMessage({id:"skill.run.success"})),f(y.data.outputs),X(y.data.file_list||[]),D(!1)}).catch(function(y){D(!1),y.code==="ERR_NETWORK"&&m.ZP.error(h.formatMessage({id:"skill.run.error"})),console.log(y,"err-===>")});case 1:case"end":return R.stop()}},x)}));return function(w){return U.apply(this,arguments)}}(),p=function(){var U=T()(u()().mark(function x(){return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:b.history.push("/Skill?app_id=".concat(q||(v==null?void 0:v.app_id),"&type=false")),location.reload();case 2:case"end":return C.stop()}},x)}));return function(){return U.apply(this,arguments)}}(),ee=function(){var U=T()(u()().mark(function x(w){var C,R;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,S.next=3,fetch("/api/novel/".concat(novelId,"/outline"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});case 3:if(C=S.sent,C.ok){S.next=6;break}throw new Error("HTTP error! status: ".concat(C.status));case 6:return S.next=8,C.json();case 8:R=S.sent,m.ZP.success("\u4FDD\u5B58\u6210\u529F"),S.next=16;break;case 12:S.prev=12,S.t0=S.catch(0),console.error("Error saving outline:",S.t0),m.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 16:case"end":return S.stop()}},x,null,[[0,12]])}));return function(w){return U.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:h.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",onFinish:G,style:{width:900},autoComplete:"off",form:I,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsxs)("div",{children:[" ",h.formatMessage({id:"skill.inputvariable"})]})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:h.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:h.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(s.Z.List,{name:"users",children:function(x,w){return tt()(w),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:x.map(function(C){var R=C.key,y=C.name,S=Fe()(C,at);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(s.Z.Item,a()(a()({},S),{},{name:[y,"content"],children:(0,e.jsx)(ae.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless"})})),(0,e.jsx)(s.Z.Item,a()(a()({},S),{},{name:[y,"value"],rules:[{required:!!(I.getFieldsValue()&&I.getFieldsValue().users[R].status==!0),message:h.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(ae.Z,{placeholder:I.getFieldsValue()&&I.getFieldsValue().users[R].status==!0?h.formatMessage({id:"skill.variantcontent.required"}):h.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(s.Z.Item,{rules:[{required:!0,message:h.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:h.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Oe.Z,{spinning:J,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:le?(0,e.jsx)(Ie.Z,{language:"python3",value:le&&JSON.stringify(le)}):null}),M.length>0&&(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:h.formatMessage({id:"skill.downloadFiles"})}),(0,e.jsx)("div",{className:"space-y-2",children:M.map(function(U,x){return(0,e.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-md p-2",children:[(0,e.jsx)("span",{className:"text-sm text-gray-600",children:U.file_name}),(0,e.jsxs)("a",{href:U.file_path,download:U.file_name,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800",children:[(0,e.jsx)(st.Z,{className:"w-4 h-4"}),(0,e.jsx)("span",{className:"text-sm",children:h.formatMessage({id:"skill.download"})})]})]},x)})})]}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(z.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:h.formatMessage({id:"skill.run"})})})})]})})]})]}),(0,e.jsx)("div",{className:"w-28",children:(v==null?void 0:v.publish_status)===1&&(v==null?void 0:v.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsxs)(z.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:p,children:[" ",h.formatMessage({id:"skill.amend"})]})}):(0,e.jsx)("div",{children:(0,e.jsxs)(z.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:re,children:[" ",h.formatMessage({id:"skill.publish"})]})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},nt=lt,rt=function(){var l,j=(0,b.useIntl)(),I=s.Z.useForm(),Z=i()(I,1),v=Z[0],oe=s.Z.useForm(),ce=i()(oe,1),q=ce[0],h=s.Z.useForm(),fe=i()(h,1),o=fe[0],le=s.Z.useForm(),f=i()(le,1),A=f[0],ne=(0,E.useState)(0),J=i()(ne,2),D=J[0],re=J[1],G=(0,E.useState)("1"),H=i()(G,2),d=H[0],M=H[1],X=(0,E.useState)(null),Y=i()(X,2),p=Y[0],ee=Y[1],U=(0,E.useState)(null),x=i()(U,2),w=x[0],C=x[1],R=(0,E.useState)(!0),y=i()(R,2),S=y[0],Tt=y[1],dt=(0,E.useState)(!1),_e=i()(dt,2),Et=_e[0],ut=_e[1],ot=(0,E.useState)(null),Ve=i()(ot,2),Ze=Ve[0],ct=Ve[1],mt=(0,E.useState)(null),De=i()(mt,2),je=De[0],Re=De[1],ft=(0,E.useState)(null),Ae=i()(ft,2),pt=Ae[0],Be=Ae[1],vt=(0,E.useState)(!1),Le=i()(vt,2),ht=Le[0],Se=Le[1],xt=(0,E.useState)({first:!1,second:!1,thirdly:!1,fourthly:!1}),ze=i()(xt,2),me=ze[0],ve=ze[1],gt=[{key:"1",disabled:me.first,icon:(0,e.jsx)(ye.Z,{}),label:j.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:me.second,icon:(0,e.jsx)(se.Z,{}),label:j.formatMessage({id:"skill.menu.code"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="2"?"#1B64F3":"#213044"}},{key:"3",disabled:me.thirdly,icon:(0,e.jsx)(W.Z,{}),label:j.formatMessage({id:"skill.menu.output"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="3"?"#1B64F3":"#213044"}},{key:"4",disabled:me.fourthly,icon:(0,e.jsx)(L.Z,{}),label:j.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="4"?"#1B64F3":"#213044"}}];(0,E.useEffect)(function(){Se(!0);var B=new URLSearchParams(window.location.search);B.get("app_id")||ve({first:!1,second:!0,thirdly:!0,fourthly:!0}),Ge()},[]);var Ge=function(){var B=T()(u()().mark(function c(P){var n,g,te,we,de;return u()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(n=new URLSearchParams(window.location.search),g=null,!(n.get("app_id")||P)){pe.next=10;break}return pe.next=5,(0,_.Hb)(P||n.get("app_id"),n.get("type"));case 5:g=pe.sent,Re(g.data.app_id),Be(g.data.id),pe.next=11;break;case 10:g=(0,ue.iJ)();case 11:Se(!1),g.code==0?(ee(g.data),te=he(g.data.input_variables),v.setFieldsValue(te),C(g.data.dependencies?g.data.dependencies.python3:[]),we=he(g.data.output_variables),o.setFieldsValue(we),de=he(g.data.input_variables),A.setFieldsValue(de)):m.ZP.error(j.formatMessage({id:"skill.message.listerror"}));case 13:case"end":return pe.stop()}},c)}));return function(P){return B.apply(this,arguments)}}(),he=function(c){var P={users:c&&c.properties?Object.values(c.properties).map(function(n){return{name:n.name,type:n.type,content:n.display_name,status:n.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return P},xe=function(){var B=T()(u()().mark(function c(P,n){var g,te;return u()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return g={app_id:n||je,data:P},de.next=3,(0,_.ej)(g);case 3:te=de.sent,Se(!1),te.code===0&&(m.ZP.success(j.formatMessage({id:"skill.conserve.success"})),Ge(n||je),Se(!1));case 6:case"end":return de.stop()}},c)}));return function(P,n){return B.apply(this,arguments)}}(),yt=function(){history.back()},kt=function(c,P){xe(c,P);var n=he(c.input_variables);A.setFieldsValue(n)},bt=function(c){xe(c)},jt=function(c){xe(c)},St=function(c){xe(c)},Pe=function(c){re(c)},wt=function(c){M(c.key)},Nt=function(){if(Se(!0),!je)(0,ie.uy)((0,ue.Go)("GET")).then(function(n){Re(n.data.app_id),(0,_.Hb)(n.data.app_id,!1).then(function(g){Be(g.data.id);var te={};te={input_variables:ge(v.getFieldsValue()),is_public:p.is_public,attrs_are_visible:p.attrs_are_visible,dependencies:{python3:w||[]},code:Ze||(p.code?p.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:p.output_type,output_variables:ge(o.getFieldsValue())};var we=he(ge(v.getFieldsValue()));A.setFieldsValue(we),xe(te,n.data.app_id);var de=a()(a()({},(0,ue.Go)("GET")),{},{app_id:n.data.app_id});(0,ue.Go)("SET",de),M("4"),ve(a()(a()({},me),{},{fourthly:!1}))}).catch(function(g){})}).catch(function(n){});else{var c={input_variables:ge(v.getFieldsValue()),is_public:p.is_public,attrs_are_visible:p.attrs_are_visible,dependencies:{python3:w||[]},code:Ze||(p.code?p.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:p.output_type,output_variables:ge(o.getFieldsValue())},P=he(ge(v.getFieldsValue()));A.setFieldsValue(P),xe(c,je),M("4"),ve(a()(a()({},me),{},{fourthly:!1}))}},He=function(c,P){var n=c.filter(function(g){return!g||!g.name||!g.content});if(c[0]){if(n.length!==0)return m.ZP.warning("".concat(P===1?j.formatMessage({id:"skill.message.inputerror3"}):j.formatMessage({id:"skill.message.inputerror4"}))),!0}else return m.ZP.warning("".concat(P===1?j.formatMessage({id:"skill.message.inputerror1"}):j.formatMessage({id:"skill.message.inputerror2"}))),!0;return Zt(c,"name")?(m.ZP.warning(j.formatMessage({id:"skill.message.inputerror5"})),!0):!1},Zt=function(c,P){var n=new Set;return c.some(function(g){var te=g[P];return n.has(te)?n.add(te):n.add(te)&&!1})},ge=function(c){var P=new N.Kr("output","","");return c.users.forEach(function(n){var g=new N._w(n.name,n.type?n.type:"string",n.value?n.value:"",n.content,n.status?n.status:!1);P.addProperty(n.name,g)}),P};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(z.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:yt,children:[(0,e.jsx)(F.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:j.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(r.Z,{selectedKeys:[d],onClick:wt,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[d],mode:"inline",items:gt})})]}),(0,e.jsx)(Oe.Z,{spinning:ht,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px] ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsx)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:(l=(0,ue.Go)("GET"))!==null&&l!==void 0&&l.app_id?j.formatMessage({id:"skill.Editingskill"}):j.formatMessage({id:"skill.Creatingskill"})}),(p==null?void 0:p.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:j.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE]  text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:j.formatMessage({id:"skill.unpublish"})})]})}),(0,e.jsx)("div",{style:{display:d==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(We,{FirstValue:kt,Skillinfo:p,setSkillInfo:ee,FirstSkillref:v,Operationbentate:S,firstjudgingcondition:He,pageKeyfun:M,skillmenudisabled:me,setskillmenudisabled:ve})}),(0,e.jsx)("div",{style:{display:d==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Xe,{SecondValue:bt,handleBack:Pe,Skillinfo:p,setSkillInfo:ee,SkillRelyOn:w,setSkillRelyOn:C,Secondref:q,setskillcodestate:ut,setNewcode:ct,pageKeyfun:M,skillmenudisabled:me,setskillmenudisabled:ve})}),(0,e.jsx)("div",{style:{display:d==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(qe,{ThirdlyValue:jt,handleBack:Pe,Thirdlyref:o,Skillinfo:p,setSkillInfo:ee,Operationbentate:S,firstjudgingcondition:He,pageKeyfun:M,skillmenudisabled:me,setskillmenudisabled:ve,skillupdata:Nt})}),(0,e.jsx)("div",{style:{display:d==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(nt,{FourthlyValue:St,handleBack:Pe,Fourthlyref:A,Skillinfo:p,skillid:pt,app_id:je,Operationbentate:S})})]})})})]})},it=rt},49677:function(Q){function V(t){if(t==null)throw new TypeError("Cannot destructure "+t)}Q.exports=V,Q.exports.__esModule=!0,Q.exports.default=Q.exports}}]);
