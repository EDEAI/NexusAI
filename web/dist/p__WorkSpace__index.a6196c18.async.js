"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[316],{11475:function(Be,de,l){l.d(de,{Z:function(){return ue}});var N=l(1413),ee=l(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},te=i,I=l(91146),x=function(Z,K){return ee.createElement(I.Z,(0,N.Z)((0,N.Z)({},Z),{},{ref:K,icon:te}))},ae=ee.forwardRef(x),ue=ae},35790:function(Be,de,l){var N=l(1413),ee=l(67294),i=l(19369),te=l(91146),I=function(ue,L){return ee.createElement(te.Z,(0,N.Z)((0,N.Z)({},ue),{},{ref:L,icon:i.Z}))},x=ee.forwardRef(I);de.Z=x},88864:function(Be,de,l){var N=l(32332),ee=l(67294),i=l(85893);de.Z=(0,ee.memo)(function(te){var I=te.agentList,x=te.size,ae=x===void 0?"sm":x,ue=te.rounded,L=ue===void 0?!1:ue,Z=I==null?void 0:I.map(function(we){return we.avatar?we.avatar:(0,N.s9)("single",we.icon)}),K={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},Ce={sm:"w-[47%] h-[47%]",md:"w-[47%] h-[47%]",lg:"w-[47%] h-[47%]"},le=function(){var re=(Z==null?void 0:Z.length)||0;if(!re||!Z)return(0,i.jsx)("div",{className:"bg-gray-200 w-full h-full ".concat(L?"rounded-full":"")});if(re===1)return(0,i.jsx)("div",{className:"w-full h-full overflow-hidden ".concat(L?"rounded-full":""),children:(0,i.jsx)("img",{src:Z[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})});if(re===2)return(0,i.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,i.jsx)("div",{className:"w-1/2 h-full pr-[2%]",children:(0,i.jsx)("img",{src:Z[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(L?"rounded-l-full":"")})}),(0,i.jsx)("div",{className:"w-1/2 h-full pl-[2%]",children:(0,i.jsx)("img",{src:Z[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(L?"rounded-r-full":"")})})]});if(re===3)return(0,i.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,i.jsx)("div",{className:"w-1/2 h-full pr-[2%] flex items-center justify-center",children:(0,i.jsx)("img",{src:Z[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(L?"rounded-l-full":"")})}),(0,i.jsxs)("div",{className:"w-1/2 h-full pl-[2%] flex flex-col",children:[(0,i.jsx)("div",{className:"h-1/2 pb-[2%]",children:(0,i.jsx)("img",{src:Z[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(L?"rounded-tr-full":"")})}),(0,i.jsx)("div",{className:"h-1/2 pt-[2%]",children:(0,i.jsx)("img",{src:Z[2],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(L?"rounded-br-full":"")})})]})]});if(re===4)return(0,i.jsx)("div",{className:"w-full h-full flex flex-wrap",children:Z.slice(0,4).map(function(G,Y){return(0,i.jsx)("div",{className:"".concat(Ce[ae]," p-[3%] ").concat(Y===0?"pl-0 pt-0":Y===1?"pr-0 pt-0":Y===2?"pl-0 pb-0":"pr-0 pb-0"),children:(0,i.jsx)("img",{src:G,alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(L?Y===0?"rounded-tl-full":Y===1?"rounded-tr-full":Y===2?"rounded-bl-full":"rounded-br-full":"")})},Y)})});for(var Pe=Z.slice(0,9),ne=[],se=0;se<Math.min(9,Pe.length);se++)ne.push((0,i.jsx)("div",{className:"w-1/3 h-1/3",style:{padding:"1.5%"},children:(0,i.jsx)("img",{src:Pe[se],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})},se));return(0,i.jsx)("div",{className:"w-full h-full flex flex-wrap",children:ne})};return(0,i.jsx)("div",{className:"".concat(K[ae]," overflow-hidden bg-white ").concat(L?"rounded-full":""),children:le()})})},85422:function(Be,de,l){var N=l(15009),ee=l.n(N),i=l(99289),te=l.n(i),I=l(5574),x=l.n(I),ae=l(11551),ue=l(39873),L=l(28508),Z=l(29933),K=l(35312),Ce=l(3917),le=l(66309),we=l(28036),re=l(71471),Pe=l(74330),ne=l(26412),se=l(12845),G=l(67294),Y=l(22683),ze=l(97807),Le=l(24216),d=l(85893);de.Z=(0,G.memo)(function(Ee){var he,Q,Ne,t=Ee.data,r=Ee.onClose,s=(0,K.useIntl)(),n=(0,G.useState)(500),v=x()(n,2),ce=v[0],e=v[1],V=(0,Ce.Z)(function(){var X=te()(ee()().mark(function T(oe,me){var De;return ee()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,(0,ae.pC)(oe,me);case 2:return De=ge.sent,ge.abrupt("return",De.data);case 4:case"end":return ge.stop()}},T)}));return function(T,oe){return X.apply(this,arguments)}}(),{manual:!0}),j=V.data,xe=V.loading,ie=V.run;(0,G.useEffect)(function(){t!=null&&t.app_id&&t!==null&&t!==void 0&&t.app_run_id&&ie(t.app_id,t.app_run_id)},[t==null?void 0:t.app_id,t==null?void 0:t.app_run_id,ie]);var O=function(T){var oe={1:{color:"processing",text:s.formatMessage({id:"workflow.running"})},2:{color:"success",text:s.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:s.formatMessage({id:"workflow.runF"})}},me=oe[T]||{color:"default",text:"Unknown"};return(0,d.jsx)(le.Z,{color:me.color,children:me.text})},$e=function(T){e(T)};return(0,d.jsx)(ue.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:ce,onChange:$e,children:(0,d.jsx)(Z.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,d.jsx)(we.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:r,icon:(0,d.jsx)(L.Z,{})}),title:(0,d.jsx)(re.Z.Title,{level:5,children:s.formatMessage({id:"agent.log.detail"})}),loading:xe,children:(0,d.jsx)("div",{className:"space-y-6",children:xe?(0,d.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,d.jsx)(Pe.Z,{})}):j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(ne.Z,{column:1,bordered:!0,size:"small",children:[(0,d.jsx)(ne.Z.Item,{label:s.formatMessage({id:"workflow.user"}),children:j.nickname}),(0,d.jsx)(ne.Z.Item,{label:s.formatMessage({id:"workflow.status"}),children:O(j.status)}),(0,d.jsx)(ne.Z.Item,{label:s.formatMessage({id:"workflow.created_time"}),children:j.created_time}),(0,d.jsxs)(ne.Z.Item,{label:s.formatMessage({id:"workflow.elapsed_time"}),children:[j.elapsed_time,"s"]}),(0,d.jsx)(ne.Z.Item,{label:"Tokens",children:j.total_tokens})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(re.Z.Title,{level:5,children:s.formatMessage({id:"agent.log.output"})}),j.outputs?(0,d.jsx)("div",{children:(j==null||(he=j.outputs)===null||he===void 0?void 0:he.type)=="json"?(0,d.jsx)("div",{className:"h-80",children:(0,d.jsx)(Le.Z,{language:"python3",value:JSON.parse((Q=j.outputs)===null||Q===void 0?void 0:Q.value)||"{}",readOnly:!0,isJSONStringifyBeauty:!0,onChange:function(){},title:"JSON"})}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)(Y.U,{rehypePlugins:[ze.Z],children:((Ne=j.outputs)===null||Ne===void 0?void 0:Ne.value)||""})})}):j.error?(0,d.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,d.jsx)("div",{className:"text-red-500 font-medium mb-2",children:s.formatMessage({id:"agent.log.error"})}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:j.error})]}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)("div",{className:"text-sm text-gray-500",children:s.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(j==null?void 0:j.prompt_data)&&j.prompt_data.length>0&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(re.Z.Title,{level:5,children:s.formatMessage({id:"agent.log.conversation"})}),(0,d.jsx)(se.Z,{className:"mt-2",children:j.prompt_data.map(function(X,T){var oe=x()(X,2),me=oe[0],De=oe[1];return(0,d.jsx)(se.Z.Item,{color:me==="human"?"blue":"green",children:(0,d.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:me}),(0,d.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:De.value})]})},T)})})]})]}):null})})})})},57329:function(Be,de,l){l.r(de),l.d(de,{default:function(){return ot}});var N=l(56264),ee=l(64456),i=l(67294),te=l(15009),I=l.n(te),x=l(99289),ae=l.n(x),ue=l(97857),L=l.n(ue),Z=l(5574),K=l.n(Z),Ce=l(42237),le=l(29608),we=l(35790),re=l(11475),Pe=l(8751),ne=l(97578),se=l(77598),G=l(97582),Y=l(22638),ze=l(3917),Le=function(R,f){var D;f===void 0&&(f={});var h=f.defaultPageSize,m=h===void 0?10:h,b=f.defaultCurrent,S=b===void 0?1:b,y=(0,G._T)(f,["defaultPageSize","defaultCurrent"]),A=(0,ze.Z)(R,(0,G.pi)({defaultParams:[{current:S,pageSize:m}],refreshDepsAction:function(){_e(1)}},y)),_=A.params[0]||{},P=_.current,C=P===void 0?1:P,E=_.pageSize,k=E===void 0?m:E,z=((D=A.data)===null||D===void 0?void 0:D.total)||0,Ie=(0,i.useMemo)(function(){return Math.ceil(z/k)},[k,z]),F=function(J,w){var pe=J<=0?1:J,U=w<=0?1:w,be=Math.ceil(z/U);pe>be&&(pe=Math.max(1,be));var Me=(0,G.CR)(A.params||[]),H=Me[0],ye=H===void 0?{}:H,a=Me.slice(1);A.run.apply(A,(0,G.ev)([(0,G.pi)((0,G.pi)({},ye),{current:pe,pageSize:U})],(0,G.CR)(a),!1))},_e=function(J){F(J,k)},W=function(J){F(C,J)};return(0,G.pi)((0,G.pi)({},A),{pagination:{current:C,pageSize:k,total:z,totalPage:Ie,onChange:(0,Y.Z)(F),changeCurrent:(0,Y.Z)(_e),changePageSize:(0,Y.Z)(W)}})},d=Le,Ee=l(78697),he=l(32332),Q=l(35312),Ne=l(74330),t=l(83062),r=l(32983),s=l(88864),n=l(29432),v=l(72252),ce=l(71471),e=l(85893),V=function(f){var D=f.iconSrc,h=f.titleText,m=f.pagination,b=f.showTotal,S=b===void 0?!0:b,y=f.titleAfter,A=y===void 0?null:y,_=(0,Q.useIntl)();return(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)("img",{src:D,alt:""}),(0,e.jsx)("div",{children:h}),(0,e.jsx)("div",{children:(0,e.jsx)(v.Z,{size:"small",simple:!0,showTotal:function(C,E){return S?"".concat(_.formatMessage({id:"app.workflow.title.1"})).concat(E[0],"-").concat(E[1]).concat(_.formatMessage({id:"app.workflow.title.2"})," / ").concat(_.formatMessage({id:"app.workflow.title.3"})).concat(C," ").concat(_.formatMessage({id:"app.workflow.title.2"})):null},current:m.current,pageSize:m.pageSize,onShowSizeChange:null,total:m.total,onChange:m.onChange})}),A]})},j=function(f){var D,h=f.item;console.log(h);var m=(0,Q.useIntl)(),b="/icons/creation/",S="",y="";switch(h.type){case 1:y=m.formatMessage({id:"app.itemHeader.agent"}),S="Agent";break;case 2:y=m.formatMessage({id:"app.itemHeader.chatRoom"}),S="ChatRoom";break;case 3:y=m.formatMessage({id:"app.itemHeader.workFlow"}),S="WorkFlow";break;default:break}return b+=n.Le[S],(0,e.jsxs)("div",{className:"flex gap-5 shrink-0",children:[(0,e.jsx)("div",{className:"shrink-0",children:((D=h.agents_data)===null||D===void 0?void 0:D.length)>0?(0,e.jsx)(s.Z,{agentList:h.agents_data,size:"sm"}):(0,e.jsx)(Ee.Z,{Image:h.type==2?"/icons/chat_room.svg":(0,he.s9)("single",h.icon),avatar:h.avatar,icon:"".concat(b,".svg")})}),(0,e.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,e.jsx)("div",{className:"text-sm text-[#213044]",children:(0,e.jsx)(ce.Z.Paragraph,{ellipsis:{rows:2,tooltip:h.name},className:"!mb-0",children:h.name})}),(0,e.jsx)("div",{className:"text-xs text-[#999999]",children:y})]})]})},xe=function(){var R,f,D=(0,le.Z)(function(g){return g.setDealtWithData}),h=(0,le.Z)(function(g){return g.prevConfirmDealtWith}),m=(0,le.Z)(function(g){return g.dealtWithData}),b=(0,le.Z)(function(g){return g.setRunPanelLogRecord}),S=(0,le.Z)(function(g){return g.submitPromptId}),y=(0,Q.useIntl)(),A=(0,i.useRef)(null),_=(0,i.useState)(null),P=K()(_,2),C=P[0],E=P[1],k=(0,ne.Z)("pageNumber"),z=K()(k,2),Ie=z[0],F=z[1],_e=function(B){console.log(B),D(B)};(0,se.Z)(function(){var g=H.list.map(function(B){return B.exec_id==h.exec_id&&(B.need_human_confirm=0),B});ye(L()(L()({},H),{},{list:g}))},[h]);var W=function(){var g=ae()(I()().mark(function B(Re){var We,c,u;return I()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return We=Re.current,c=Re.pageSize,$.next=3,(0,Ce.VE)({current:We,pageSize:c});case 3:return u=$.sent,$.abrupt("return",{list:u.data.list,success:!0,total:u.data.total_count});case 5:case"end":return $.stop()}},B)}));return function(Re){return g.apply(this,arguments)}}(),J=d(W,{defaultPageSize:10}),w=J.data,pe=J.loading,U=J.pagination,be=(0,i.useState)(w),Me=K()(be,2),H=Me[0],ye=Me[1];(0,i.useEffect)(function(){ye(w)},[w]),(0,se.Z)(function(){A.current&&A.current.reload()},[S]);var a=(0,i.useCallback)(function(g){var B=g.item;return(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:B.app_name})," ",(0,e.jsx)(we.Z,{}),(0,e.jsx)("span",{className:B.need_human_confirm==1?"text-[#1B64F3]":"text-[#808183]",children:B.node_name})]}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate",children:B.app_run_name})]})},[H]);return(0,e.jsx)(Ne.Z,{spinning:pe,children:(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(V,{iconSrc:"/icons/back_log.svg",titleText:y.formatMessage({id:"app.workflow.backlogs.title"}),pagination:U}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-2.5 mt-4 overflow-y-auto h-full",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[H==null||(R=H.list)===null||R===void 0?void 0:R.map(function(g,B){return g.type=3,(0,e.jsxs)("div",{onClick:function(){console.log(g),g.need_human_confirm&&(D(g),E(g),b(!1))},className:"flex items-center gap-5 cursor-pointer duration-200 rounded-lg  p-2.5 hover:bg-[#fafafa]",children:[(0,e.jsx)(Ee.Z,{Image:(0,he.s9)("single",g.icon),avatar:g.avatar}),(0,e.jsx)(a,{item:g}),(0,e.jsx)("div",{children:g.need_human_confirm?(0,e.jsx)(t.Z,{title:y.formatMessage({id:"workflow.needHumanConfirm"}),children:(0,e.jsx)(re.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(t.Z,{title:y.formatMessage({id:"workflow.noHumanConfirm"}),children:(0,e.jsx)(Pe.Z,{className:"text-[#52C41C]"})})})]},g.exec_id)}),!pe&&(H==null||(f=H.list)===null||f===void 0?void 0:f.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(r.Z,{image:"/images/empty.svg",description:y.formatMessage({id:"app.workflow.backlogs.empty"})})})]})]})})},ie=l(29933),O=l(4393),$e=O.Z.Meta,X=function(){var R,f,D=(0,Q.useIntl)(),h=function(P){console.log(P);var C=P.app_id||P.apps_id;switch(P.type){case 1:Q.history.push("/Agents?app_id=".concat(C));break;case 2:Q.history.push("/chat_room/".concat(P.chatroom_id));break;case 3:Q.history.push("/workspace/workflow?app_id=".concat(C));break;default:break}},m=function(){var _=ae()(I()().mark(function P(C){var E,k,z;return I()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return E=C.current,k=C.pageSize,F.next=3,(0,Ce.vu)({current:E,pageSize:k});case 3:return z=F.sent,F.abrupt("return",{list:z.data.list,success:!0,total:z.data.total_count});case 5:case"end":return F.stop()}},P)}));return function(C){return _.apply(this,arguments)}}(),b=d(m,{defaultPageSize:8}),S=b.data,y=b.loading,A=b.pagination;return console.log(y),(0,e.jsxs)("div",{className:"flex-grow-0",children:[(0,e.jsx)(V,{iconSrc:"/icons/recently_active.svg",titleText:D.formatMessage({id:"app.workflow.ra.title"}),pagination:A}),(0,e.jsx)("div",{className:"grid grid-cols-4  gap-4 mt-4",children:S==null||(R=S.list)===null||R===void 0?void 0:R.map(function(_,P){var C=_.type==3?_.process_name:_.last_agent_name;return(0,e.jsx)(ie.Z,{className:"h-[160px] cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",title:(0,e.jsx)(j,{item:_}),onClick:function(){return h(_)},bodyStyle:{padding:"15px 20px"},children:(0,e.jsx)(ce.Z.Paragraph,{ellipsis:{rows:2,tooltip:C},children:C})},_.app_id)})}),!(S!=null&&(f=S.list)!==null&&f!==void 0&&f.length)&&(0,e.jsxs)("div",{className:"h-[400px] w-full flex items-center justify-center",children:[!y&&(0,e.jsx)(r.Z,{imageStyle:{display:"flex",justifyContent:"center"},image:"/images/empty.svg",description:D.formatMessage({id:"app.workflow.ra.empty"})}),(0,e.jsx)(Ne.Z,{spinning:y})]})]})},T=l(37369),oe=l(43722),me=l(39873),De=l(28508),Te=l(66309),ge=l(28036),Oe=l(26412),M=l(22683),je=l(97807),Ae=l(86),Fe=l(38027),Ke=(0,i.memo)(function(R){var f,D,h,m,b,S,y,A,_,P,C,E,k,z,Ie,F,_e,W=R.data,J=R.onClose,w=(0,Q.useIntl)(),pe=(0,i.useState)(500),U=K()(pe,2),be=U[0],Me=U[1],H=(0,le.Z)(function(c){return c.setRunPanelLogRecord}),ye=(0,ze.Z)(function(){var c=ae()(I()().mark(function u(p,$){var o;return I()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,oe.Gh)({chatroom_id:p,app_run_id:$});case 2:return o=q.sent,q.abrupt("return",o.data);case 4:case"end":return q.stop()}},u)}));return function(u,p){return c.apply(this,arguments)}}(),{manual:!0}),a=ye.data,g=ye.loading,B=ye.run;(0,i.useEffect)(function(){W!=null&&W.chatroom_id&&W!==null&&W!==void 0&&W.app_run_id&&B(W.chatroom_id,W.app_run_id)},[W==null?void 0:W.chatroom_id,W==null?void 0:W.app_run_id,B]);var Re=function(u){var p={1:{color:"processing",text:w.formatMessage({id:"workflow.running"})},2:{color:"success",text:w.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:w.formatMessage({id:"workflow.runF"})}},$=p[u]||{color:"default",text:"Unknown"};return(0,e.jsx)(Te.Z,{color:$.color,children:$.text})},We=function(u){Me(u)};return(0,e.jsx)(me.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:be,onChange:We,children:(0,e.jsx)(ie.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,e.jsx)(ge.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:J,icon:(0,e.jsx)(De.Z,{})}),title:(0,e.jsx)(ce.Z.Title,{level:5,children:w.formatMessage({id:"app.chatroom.log.title"})}),loading:g,children:(0,e.jsx)("div",{className:"space-y-6",children:g?(0,e.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,e.jsx)(Ne.Z,{})}):a!=null&&a.source_run?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Oe.Z,{column:1,bordered:!0,size:"small",children:[(0,e.jsx)(Oe.Z.Item,{label:w.formatMessage({id:"app.chatroom.log.name"}),children:a.source_run.name}),(0,e.jsx)(Oe.Z.Item,{label:w.formatMessage({id:"workflow.created_time"}),children:a.source_run.created_time}),(0,e.jsx)(Oe.Z.Item,{label:w.formatMessage({id:"workflow.finished_time"}),children:a.source_run.finished_time}),(0,e.jsxs)(Oe.Z.Item,{label:w.formatMessage({id:"workflow.elapsed_time"}),children:[a.source_run.elapsed_time,"s"]}),(0,e.jsx)(Oe.Z.Item,{label:"Tokens",children:a.source_run.total_tokens})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(ce.Z.Title,{level:5,children:"\u8BA8\u8BBA\u603B\u7ED3"}),(0,e.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:a.source_run.created_time}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"p-[12px]  leading-[22px] bg-gray-50 rounded mt-2",children:(0,e.jsx)(M.U,{rehypePlugins:[je.Z],children:a==null||(f=a.source_run)===null||f===void 0?void 0:f.summary})})})]}),a!=null&&a.source_corrections&&(a==null?void 0:a.source_corrections.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[w.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),a==null?void 0:a.source_corrections.map(function(c,u){return(0,e.jsx)("div",{className:"mb-[16px] last-of-type:mb-0",children:(0,e.jsx)("div",{className:"rounded-[4px]  ".concat((a==null?void 0:a.source_corrections.length)-1!=u?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[w.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",c.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[w.formatMessage({id:"app.summaryhistory.time"}),": ",c.created_time]}),(0,e.jsx)(M.U,{rehypePlugins:[je.Z],children:c==null?void 0:c.corrected_summary})]})})},c.created_time)})]}):(0,e.jsx)(e.Fragment,{}),a!=null&&a.target_run?(0,e.jsxs)("div",{className:"py-[12px]",children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[w.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,e.jsx)("span",{className:"font-[500] ",children:a!=null&&(D=a.target_run)!==null&&D!==void 0&&D.agent_id?"agent":"workflow"}),(0,e.jsx)("span",{className:"px-[6px]",children:":"}),(0,e.jsx)("span",{children:a==null||(h=a.target_run)===null||h===void 0||(h=h.app)===null||h===void 0?void 0:h.name})]})}),(0,e.jsx)("div",{children:a!=null&&(m=a.target_run)!==null&&m!==void 0&&(m=m.inputs)!==null&&m!==void 0&&m.properties?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[w.formatMessage({id:"app.summaryhistory.input"}),":"]}),(0,Fe.vw)(a==null||(b=a.target_run)===null||b===void 0||(b=b.inputs)===null||b===void 0?void 0:b.properties).map(function(c){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:c.display_name||c.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:c.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{children:a!=null&&(S=a.target_run)!==null&&S!==void 0&&S.raw_user_prompt?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[w.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:a==null||(y=a.target_run)===null||y===void 0?void 0:y.raw_user_prompt})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[w.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(a==null||(A=a.target_run)===null||A===void 0?void 0:A.agent_id)!=0?(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(M.U,{rehypePlugins:[je.Z],children:a==null||(_=a.target_run)===null||_===void 0||(_=_.outputs)===null||_===void 0?void 0:_.value})}):(0,e.jsx)(Ae.Z,{status:a==null||(P=a.target_run)===null||P===void 0?void 0:P.status,icon:a==null||(C=a.target_run)===null||C===void 0?void 0:C.icon,title:a==null||(E=a.target_run)===null||E===void 0?void 0:E.name,textDetails:(0,e.jsx)(Fe.p1,{progressObj:{created_time:a==null||(k=a.target_run)===null||k===void 0?void 0:k.created_time,elapsed_time:a==null||(z=a.target_run)===null||z===void 0?void 0:z.elapsed_time,app_name:a==null||(Ie=a.target_run)===null||Ie===void 0?void 0:Ie.app.name,status:a==null||(F=a.target_run)===null||F===void 0?void 0:F.status}}),handleClick:function(){var u,p,$,o,fe,q,Se,Ze,ve,Ue;H({app_id:a==null||(u=a.target_run)===null||u===void 0||(u=u.app)===null||u===void 0?void 0:u.id,app_name:a==null||(p=a.target_run)===null||p===void 0||(p=p.app)===null||p===void 0?void 0:p.name,icon:a==null||($=a.target_run)===null||$===void 0?void 0:$.icon,workflow_id:a==null||(o=a.target_run)===null||o===void 0?void 0:o.workflow_id,type:2,app_run_id:a==null||(fe=a.target_run)===null||fe===void 0?void 0:fe.id,run_name:a==null||(q=a.target_run)===null||q===void 0?void 0:q.name,status:a==null||(Se=a.target_run)===null||Se===void 0?void 0:Se.status,created_time:a==null||(Ze=a.target_run)===null||Ze===void 0?void 0:Ze.created_time,elapsed_time:a==null||(ve=a.target_run)===null||ve===void 0?void 0:ve.elapsed_time,completed_progress:"".concat(a==null||(Ue=a.target_run)===null||Ue===void 0?void 0:Ue.percentage,"%")})},progress:a==null||(_e=a.target_run)===null||_e===void 0?void 0:_e.percentage})})]})]}):(0,e.jsx)(e.Fragment,{})]}):null})})})}),Ge=l(85422),He=l(1413),Xe=l(99011),Je=l(91146),Ye=function(f,D){return i.createElement(Je.Z,(0,He.Z)((0,He.Z)({},f),{},{ref:D,icon:Xe.Z}))},Qe=i.forwardRef(Ye),ke=Qe,qe=l(88284),et=l(28058),tt=l(2068),at=l(44720),lt=l(38703),rt=l(55241),nt=l(34041),st=(0,i.memo)(function(){var R,f,D=(0,le.Z)(function(c){return c.setDealtWithData}),h=(0,le.Z)(function(c){return c.setRunPanelLogRecord}),m=(0,Q.useIntl)(),b=(0,i.useState)(0),S=K()(b,2),y=S[0],A=S[1],_=function(u){var p=u.text;switch(p){case 1:return(0,e.jsx)(ke,{className:"text-blue-500"});case 2:return(0,e.jsx)(qe.Z,{className:"text-green-500"});case 3:return(0,e.jsx)(et.Z,{className:"text-red-500"})}return(0,e.jsx)("span",{children:p})},P=function(){var c=ae()(I()().mark(function u(p){var $,o,fe,q,Se;return I()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return $=p.current,o=p.pageSize,fe=p.showStatus,q=fe===void 0?0:fe,ve.next=3,(0,Ce.PE)({current:$,pageSize:o,showStatus:q});case 3:return Se=ve.sent,ve.abrupt("return",{list:Se.data.list,success:!0,total:Se.data.total_count});case 5:case"end":return ve.stop()}},u)}));return function(p){return c.apply(this,arguments)}}(),C=d(function(c){var u=c.current,p=c.pageSize;return P({current:u,pageSize:p,showStatus:y})},{defaultPageSize:10,refreshDeps:[y]}),E=C.data,k=C.loading,z=C.pagination,Ie=C.run,F=(0,i.useState)(!1),_e=K()(F,2),W=_e[0],J=_e[1],w=(0,i.useState)(null),pe=K()(w,2),U=pe[0],be=pe[1],Me=(0,i.useState)(!1),H=K()(Me,2),ye=H[0],a=H[1],g=function(){J(!1),a(!1)},B=function(u){switch(u.show_status){case 1:be(u),J(!1),a(!0);break;case 2:be(u),a(!1),J(!0);break;case 3:h(u),D(null);break;default:break}},Re=function(u){var p=u.type;switch(p){case 1:return(0,e.jsx)(Te.Z,{color:"blue",children:m.formatMessage({id:"app.workflow.log.type.roundtable"})});case 2:return(0,e.jsx)(Te.Z,{color:"green",children:m.formatMessage({id:"app.workflow.log.type.agent"})});case 3:return(0,e.jsx)(Te.Z,{color:"purple",children:m.formatMessage({id:"app.workflow.log.type.workflow"})})}},We=(0,i.memo)(function(c){var u,p,$,o=c.item,fe=o.status==1?"#1B64F3":o.status==2?"#22C55F":"#F04444",q=o.status==1?"#f9fafe":o.status==2?"#f6fcf3":"#fafafa",Se=(0,i.useRef)(null),Ze=(0,at.Z)(Se),ve=function(){return o.show_status==1?o.chat_room_name:o.show_status==2?o.app_runs_name:o.show_status==3?o.associated_chat_room_name!=""?m.formatMessage({id:"app.workflow.log.roundtable.guidance"},{name:o.associated_chat_room_name}):o.app_runs_name:o.apps_name},Ue=function(){return o.show_status==1&&o.apps_name?m.formatMessage({id:"app.workflow.log.guidance.execution"},{type:o.model==1?m.formatMessage({id:"app.workflow.log.type.agent.simple"}):m.formatMessage({id:"app.workflow.log.type.workflow.simple"}),name:o.apps_name}):o.apps_name};return(0,e.jsxs)("div",{onClick:function(){B(o)},ref:Se,className:"flex relative rounded truncate gap-5  items-center shrink-0 cursor-pointer duration-200  box-border py-2.5 pr-5 ",children:[(0,e.jsx)("div",{style:{backgroundColor:Ze?q:"",width:Ze?"".concat(o.completed_steps/o.total_steps*100,"%"):"0%",transition:"0.5s"},className:"w-full h-full absolute left-0 duration-500"}),(0,e.jsx)("div",{style:{backgroundColor:fe},className:"w-[4px] h-full z-10 mr-[10px] absolute"}),(0,e.jsx)("div",{className:"ml-5",children:((u=o.agents_data)===null||u===void 0?void 0:u.length)>0?(0,e.jsx)("div",{className:"ml-2",children:(0,e.jsx)(s.Z,{agentList:o.agents_data,size:"sm"})}):(0,e.jsx)(Ee.Z,{Image:(0,he.s9)("single",o.icon),avatar:o.avatar})}),(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1  z-10",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("span",{children:[(0,e.jsx)(Re,{type:o.show_status}),(0,e.jsx)(ve,{})]})}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate  max-w-7/8",children:(0,e.jsxs)("div",{className:"flex items-center truncate",children:[(0,e.jsxs)("span",{children:[" ",o.created_time," "]}),(0,e.jsx)("span",{style:{maxWidth:"calc(100% - 200px)"},className:"truncate ml-2 ",children:(0,e.jsx)(Ue,{})}),(o.show_status==3||o.show_status==2)&&(0,e.jsxs)("span",{className:"inline-flex items-center ml-2 gap-2",children:[(0,e.jsx)("span",{style:{backgroundColor:fe},className:"inline-block w-1 h-1 rounded-sm"}),(p=o.elapsed_time)===null||p===void 0?void 0:p.toFixed(6),"S"]})]})})]}),o.total_steps!=o.completed_steps&&(0,e.jsx)("div",{className:"flex items-center justify-center",children:(0,e.jsx)(lt.Z,{type:"circle",size:30,percent:parseInt(o.completed_steps/o.total_steps*100)})}),o.show_status==3&&(o==null||($=o.file_list)===null||$===void 0?void 0:$.length)>0&&(0,e.jsx)("div",{className:"flex items-center justify-center z-20",children:(0,e.jsx)(rt.Z,{content:(0,e.jsx)(T.Z,{files:o==null?void 0:o.file_list}),placement:"leftTop",title:m.formatMessage({id:"app.workflow.log.output.files"}),children:(0,e.jsx)(tt.Z,{className:"text-[22px] text-green-600"})})})]},o.app_run_id)});return(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(V,{iconSrc:"/icons/workflows.svg",titleText:m.formatMessage({id:"app.workflow.log.title"}),pagination:z,showTotal:!1,titleAfter:(0,e.jsx)("div",{className:"flex-1 flex justify-end",children:(0,e.jsx)(nt.Z,{defaultValue:0,className:"w-full max-w-[120px]",allowClear:!0,style:{maxWidth:"120px"},onChange:function(u){var p;A(u),(p=z.onChange)===null||p===void 0||p.call(z,1,z.pageSize)},size:"small",options:[{label:m.formatMessage({id:"app.workflow.log.filter.all"}),value:0},{label:m.formatMessage({id:"app.workflow.log.filter.roundtable"}),value:1},{label:m.formatMessage({id:"app.workflow.log.filter.agent"}),value:2},{label:m.formatMessage({id:"app.workflow.log.filter.workflow"}),value:3}]})})}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-4 h-full mt-4 overflow-y-auto box-border relative flex flex-col gap-5",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[E==null||(R=E.list)===null||R===void 0?void 0:R.map(function(c,u){return(0,e.jsx)(We,{item:c})}),!k&&(E==null||(f=E.list)===null||f===void 0?void 0:f.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(r.Z,{image:"/images/empty.svg",description:m.formatMessage({id:"app.workflow.log.empty"})})})]}),W&&(U==null?void 0:U.app_run_id)&&(0,e.jsx)(Ge.Z,{data:U,onClose:g}),ye&&(0,e.jsx)(Ke,{data:{chatroom_id:U==null?void 0:U.chatroom_id,app_run_id:U==null?void 0:U.app_run_id},onClose:g})]})}),it=function(){return(0,e.jsxs)("div",{style:{height:"calc(100vh - 56px)"},className:"w-full p-[30px] flex flex-col gap-6 overflow-x-auto box-border",children:[(0,e.jsx)(X,{}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-6 flex-1",children:[(0,e.jsx)(xe,{}),(0,e.jsx)(st,{})]}),(0,e.jsx)(N.$_,{}),(0,e.jsx)(ee.Z,{})]})},ot=it},12845:function(Be,de,l){l.d(de,{Z:function(){return Ne}});var N=l(67294),ee=l(93967),i=l.n(ee),te=l(53124),I=l(35792),x=l(861),ae=l(14747),ue=l(83559),L=l(83262);const Z=t=>{const{componentCls:r,calc:s}=t;return{[r]:Object.assign(Object.assign({},(0,ae.Wf)(t)),{margin:0,padding:0,listStyle:"none",[`${r}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:s(s(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,x.unit)(t.itemHeadSize)})`,borderInlineStart:`${(0,x.unit)(t.tailWidth)} ${t.lineType} ${t.tailColor}`},"&-pending":{[`${r}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${r}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${(0,x.unit)(t.dotBorderWidth)} ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:s(t.itemHeadSize).div(2).equal(),insetInlineStart:s(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:s(s(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:s(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${r}-item-tail`]:{display:"none"},[`> ${r}-item-content`]:{minHeight:s(t.controlHeightLG).mul(1.2).equal()}}},[`&${r}-alternate,
        &${r}-right,
        &${r}-label`]:{[`${r}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:s(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:s(t.tailWidth).div(2).equal()}},"&-left":{[`${r}-item-content`]:{insetInlineStart:`calc(50% - ${(0,x.unit)(t.marginXXS)})`,width:`calc(50% - ${(0,x.unit)(t.marginSM)})`,textAlign:"start"}},"&-right":{[`${r}-item-content`]:{width:`calc(50% - ${(0,x.unit)(t.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${r}-right`]:{[`${r}-item-right`]:{[`${r}-item-tail,
            ${r}-item-head,
            ${r}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,x.unit)(s(s(t.itemHeadSize).add(t.tailWidth)).div(2).equal())})`},[`${r}-item-content`]:{width:`calc(100% - ${(0,x.unit)(s(t.itemHeadSize).add(t.marginXS).equal())})`}}},[`&${r}-pending
        ${r}-item-last
        ${r}-item-tail`]:{display:"block",height:`calc(100% - ${(0,x.unit)(t.margin)})`,borderInlineStart:`${(0,x.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`&${r}-reverse
        ${r}-item-last
        ${r}-item-tail`]:{display:"none"},[`&${r}-reverse ${r}-item-pending`]:{[`${r}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${(0,x.unit)(t.margin)})`,borderInlineStart:`${(0,x.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`${r}-item-content`]:{minHeight:s(t.controlHeightLG).mul(1.2).equal()}},[`&${r}-label`]:{[`${r}-item-label`]:{position:"absolute",insetBlockStart:s(s(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:`calc(50% - ${(0,x.unit)(t.marginSM)})`,textAlign:"end"},[`${r}-item-right`]:{[`${r}-item-label`]:{insetInlineStart:`calc(50% + ${(0,x.unit)(t.marginSM)})`,width:`calc(50% - ${(0,x.unit)(t.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${r}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},K=t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25});var Ce=(0,ue.I$)("Timeline",t=>{const r=(0,L.mergeToken)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[Z(r)]},K),le=function(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,n=Object.getOwnPropertySymbols(t);v<n.length;v++)r.indexOf(n[v])<0&&Object.prototype.propertyIsEnumerable.call(t,n[v])&&(s[n[v]]=t[n[v]]);return s},re=t=>{var{prefixCls:r,className:s,color:n="blue",dot:v,pending:ce=!1,position:e,label:V,children:j}=t,xe=le(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:ie}=N.useContext(te.E_),O=ie("timeline",r),$e=i()(`${O}-item`,{[`${O}-item-pending`]:ce},s),X=/blue|red|green|gray/.test(n||"")?void 0:n,T=i()(`${O}-item-head`,{[`${O}-item-head-custom`]:!!v,[`${O}-item-head-${n}`]:!X});return N.createElement("li",Object.assign({},xe,{className:$e}),V&&N.createElement("div",{className:`${O}-item-label`},V),N.createElement("div",{className:`${O}-item-tail`}),N.createElement("div",{className:T,style:{borderColor:X,color:X}},v),N.createElement("div",{className:`${O}-item-content`},j))},Pe=l(74902),ne=l(19267),se=function(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,n=Object.getOwnPropertySymbols(t);v<n.length;v++)r.indexOf(n[v])<0&&Object.prototype.propertyIsEnumerable.call(t,n[v])&&(s[n[v]]=t[n[v]]);return s},Y=t=>{var{prefixCls:r,className:s,pending:n=!1,children:v,items:ce,rootClassName:e,reverse:V=!1,direction:j,hashId:xe,pendingDot:ie,mode:O=""}=t,$e=se(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const X=(M,je)=>O==="alternate"?M==="right"?`${r}-item-right`:M==="left"?`${r}-item-left`:je%2===0?`${r}-item-left`:`${r}-item-right`:O==="left"?`${r}-item-left`:O==="right"?`${r}-item-right`:M==="right"?`${r}-item-right`:"",T=(0,Pe.Z)(ce||[]),oe=typeof n=="boolean"?null:n;n&&T.push({pending:!!n,dot:ie||N.createElement(ne.Z,null),children:oe}),V&&T.reverse();const me=T.length,De=`${r}-item-last`,Te=T.filter(M=>!!M).map((M,je)=>{var Ae;const Fe=je===me-2?De:"",Ke=je===me-1?De:"",{className:Ge}=M,He=se(M,["className"]);return N.createElement(re,Object.assign({},He,{className:i()([Ge,!V&&n?Fe:Ke,X((Ae=M==null?void 0:M.position)!==null&&Ae!==void 0?Ae:"",je)]),key:(M==null?void 0:M.key)||je}))}),ge=T.some(M=>!!(M!=null&&M.label)),Oe=i()(r,{[`${r}-pending`]:!!n,[`${r}-reverse`]:!!V,[`${r}-${O}`]:!!O&&!ge,[`${r}-label`]:ge,[`${r}-rtl`]:j==="rtl"},s,e,xe);return N.createElement("ul",Object.assign({},$e,{className:Oe}),Te)},ze=l(50344);function Le(t,r){return t&&Array.isArray(t)?t:(0,ze.Z)(r).map(s=>{var n,v;return Object.assign({children:(v=(n=s==null?void 0:s.props)===null||n===void 0?void 0:n.children)!==null&&v!==void 0?v:""},s.props)})}var d=Le,Ee=function(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,n=Object.getOwnPropertySymbols(t);v<n.length;v++)r.indexOf(n[v])<0&&Object.prototype.propertyIsEnumerable.call(t,n[v])&&(s[n[v]]=t[n[v]]);return s};const he=t=>{const{getPrefixCls:r,direction:s,timeline:n}=N.useContext(te.E_),{prefixCls:v,children:ce,items:e,className:V,style:j}=t,xe=Ee(t,["prefixCls","children","items","className","style"]),ie=r("timeline",v),O=(0,I.Z)(ie),[$e,X,T]=Ce(ie,O),oe=d(e,ce);return $e(N.createElement(Y,Object.assign({},xe,{className:i()(n==null?void 0:n.className,V,T,O),style:Object.assign(Object.assign({},n==null?void 0:n.style),j),prefixCls:ie,direction:s,items:oe,hashId:X})))};he.Item=re;var Q=he,Ne=Q}}]);
