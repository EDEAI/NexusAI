"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2266],{44685:function(w,g){var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};g.Z=t},24266:function(w,g,t){t.r(g);var B=t(97857),d=t.n(B),C=t(9783),b=t.n(C),S=t(15009),o=t.n(S),R=t(99289),m=t.n(R),y=t(5574),f=t.n(y),W=t(11551),I=t(32332),K=t(32060),N=t(45585),D=t(35312),H=t(45360),G=t(74330),c=t(67294),z=t(89310),k=t(43722),v=t(85893),x="915279714@qq.com",F="Wc915279714",$=function(){var Z=(0,D.useIntl)(),J=(0,c.useState)(null),O=f()(J,2),Q=O[0],p=O[1],V=(0,c.useState)(null),P=f()(V,2),X=P[0],ve=P[1],Y=(0,c.useState)(null),M=f()(Y,2),q=M[0],ee=M[1],ae=(0,c.useState)(!0),L=f()(ae,2),te=L[0],A=L[1],ne=(0,c.useState)("".concat(window.innerHeight,"px")),U=f()(ne,2),T=U[0],se=U[1];(0,c.useEffect)(function(){re()},[]),(0,c.useEffect)(function(){var _=function(){se("".concat(window.innerHeight,"px"))};return window.addEventListener("resize",_),function(){return window.removeEventListener("resize",_)}},[]);var re=function(){var _=m()(o()().mark(function s(){var a;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie({password:F,username:x});case 2:return e.next=4,ce();case 4:return a=e.sent,e.next=7,le(a.agent.agent_id);case 7:document.body.style.overflow="hidden";case 8:case"end":return e.stop()}},s)}));return function(){return _.apply(this,arguments)}}(),_e=function(){var _=m()(o()().mark(function s(a,n){var e,l,i;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=localStorage.getItem("agent_chat_quickly_chatroom_ids"),l=b()({},a,n),e&&(i=JSON.parse(e),l=d()(d()({},i),{},b()({},a,n))),localStorage.setItem("agent_chat_quickly_chatroom_ids",JSON.stringify(l));case 4:case"end":return u.stop()}},s)}));return function(a,n){return _.apply(this,arguments)}}(),ue=function(s){var a=localStorage.getItem("agent_chat_quickly_chatroom_ids");if(a){var n=JSON.parse(a);return n[s]}},le=function(){var _=m()(o()().mark(function s(a){var n,e;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=ue(a),!n){i.next=5;break}return p(function(r){return d()(d()({},r),{},{agent_chatroom_id:n})}),setTimeout(function(){A(!1)},400),i.abrupt("return");case 5:return i.next=7,(0,k.dB)({description:"hhhhhhhhhhhhhhhhhhhhh",name:"\u8FD9\u662F\u7531agent[".concat(a,"]\u521B\u5EFA\u7684\u4E34\u65F6\u804A\u5929\u5BA4"),max_round:10,agent:[{agent_id:a,active:1}]});case 7:e=i.sent,e.code==0&&(_e(a,e.data.chatroom_id),p(function(r){return d()(d()({},r),{},{agent_chatroom_id:e.data.chatroom_id})})),setTimeout(function(){A(!1)},400);case 10:case"end":return i.stop()}},s)}));return function(a){return _.apply(this,arguments)}}(),ie=function(){var _=m()(o()().mark(function s(a){var n,e,l;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=a.password,e=a.username,r.next=4,(0,K.x4)({password:n,username:e});case 4:if(l=r.sent,!(l!=null&&l.access_token)){r.next=9;break}return r.next=8,de();case 8:return r.abrupt("return",!0);case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",!1);case 15:case"end":return r.stop()}},s,null,[[0,11]])}));return function(a){return _.apply(this,arguments)}}(),j=(0,N.ZP)(),oe=j.refreshUserInfo,E=j.userInfo,de=function(){var _=m()(o()().mark(function s(){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oe();case 2:(0,I.f1)("SET",6,!1,""),setTimeout(function(){(0,D.setLocale)((E==null?void 0:E.language)=="en"?"en-US":"zh-CN")},100);case 4:case"end":return n.stop()}},s)}));return function(){return _.apply(this,arguments)}}(),ce=function(){var _=m()(o()().mark(function s(a){var n,e,l,i;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=new URLSearchParams(window.location.search),e=null,!(n.get("app_id")||a)){u.next=8;break}return u.next=5,(0,W.ek)(a||n.get("app_id"),n.get("type"));case 5:e=u.sent,u.next=11;break;case 8:return u.next=10,(0,I.cI)();case 10:e=u.sent;case 11:return l=e.data,e.data.callable_items&&(e.data.agent.selected_skills=[],e.data.agent.selected_workflows=[],e.data.callable_items.forEach(function(h){h.item_type==1?e.data.agent.selected_skills.push(d()(d()({},h),{},{mode:4})):e.data.agent.selected_workflows.push(d()(d()({},h),{},{mode:2}))})),p(e.data),ee(e.data.agent.publish_status===0&&e.data.is_creator===1?"false":"true"),e.data.agent.publish_status===1&&H.ZP.warning(Z.formatMessage({id:"agent.message.listwarning"}),5),i=l.agent_abilities_list.filter(function(h,Ee){return h.status===1}),u.abrupt("return",l);case 18:case"end":return u.stop()}},s)}));return function(a){return _.apply(this,arguments)}}(),pe=function(s){return s.map(function(a){return{value:a.agent_ability_id,label:a.name}})},me=function(){return!1},fe=function(){return!1},he=function(){};return(0,v.jsx)("div",{className:" flex bg-white absolute w-full h-full top-0 left-0",style:{height:T},children:te?(0,v.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,v.jsx)(G.Z,{size:"large"})}):(0,v.jsx)(z.Z,{saveInfo:{firstjudgingcondition:me,secondjudgingcondition:fe,agentupdata:he},operationbentate:q,iframe:{height:T},data:{abilitiesList:X,detailList:Q}})})};g.default=$}}]);
