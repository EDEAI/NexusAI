"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[734],{82826:function(Ze,ye,n){n.d(ye,{Z:function(){return d}});var ce=n(1413),f=n(67294),we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},se=we,L=n(91146),Y=function(x,b){return f.createElement(L.Z,(0,ce.Z)((0,ce.Z)({},x),{},{ref:b,icon:se}))},ke=f.forwardRef(Y),d=ke},83510:function(Ze,ye,n){n.d(ye,{LK:function(){return o},bs:function(){return A},go:function(){return t},uy:function(){return m}});var ce=n(15009),f=n.n(ce),we=n(99289),se=n.n(we),L=n(47520),Y="/v1/apps/apps_list",ke="/v1/agent/agent_delete/",d="/v1/workflow/workflow_app_delete/",Fe="/v1/vector/delete_dataset/",x="/v1/skill/delete_skill_by_app_id/",b="/v1/apps/apps_create",a="/v1/apps/app_update/",t=function(){var ne=se()(f()().mark(function z(y){var G;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.ZP)("".concat(Y),{method:"GET",data:y});case 2:return G=e.sent,e.abrupt("return",G);case 4:case"end":return e.stop()}},z)}));return function(y){return ne.apply(this,arguments)}}(),o=function(){var ne=se()(f()().mark(function z(y){var G;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(y),e.next=3,y.mode;case 3:if(e.t0=e.sent,e.t0!=1){e.next=8;break}e.t1=(0,L.ZP)("".concat(ke).concat(y.app_id),{method:"DELETE"}),e.next=9;break;case 8:e.t1=y.mode==2?(0,L.ZP)("".concat(d).concat(y.app_id),{method:"DELETE"}):y.mode==3?(0,L.ZP)("".concat(Fe).concat(y.app_id),{method:"DELETE"}):(0,L.ZP)("".concat(x).concat(y.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return G=e.t1,e.abrupt("return",G);case 11:case"end":return e.stop()}},z)}));return function(y){return ne.apply(this,arguments)}}(),m=function(){var ne=se()(f()().mark(function z(y){var G;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.ZP)("".concat(b),{method:"POST",data:y});case 2:return G=e.sent,e.abrupt("return",G);case 4:case"end":return e.stop()}},z)}));return function(y){return ne.apply(this,arguments)}}(),A=function(){var ne=se()(f()().mark(function z(y){var G;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,L.ZP)("".concat(a).concat(y.app_id),{method:"PUT",data:y});case 2:return G=e.sent,e.abrupt("return",G);case 4:case"end":return e.stop()}},z)}));return function(y){return ne.apply(this,arguments)}}()},77638:function(Ze,ye,n){n.r(ye),n.d(ye,{default:function(){return Qt}});var ce=n(5574),f=n.n(ce),we=n(32332),se=n(82826),L=n(35312),Y=n(28036),ke=n(50136),d=n(67294),Fe=n(97857),x=n.n(Fe),b=n(15009),a=n.n(b),t=n(99289),o=n.n(t),m=n(83065),A=n(45360),ne=n(71230),z=n(15746),y=n(4393),G=n(26915),be=n(86842),e=n(85893),Le=1,Re=function(c){var l=c.createkbInfo,s=(0,L.useIntl)(),i=[{title:s.formatMessage({id:"createkb.text",defaultMessage:""}),dataIndex:"input",ellipsis:!0},{title:s.formatMessage({id:"createkb.recallParagraph",defaultMessage:""}),dataIndex:"document_segment_num",width:"15%"},{title:s.formatMessage({id:"createkb.time",defaultMessage:""}),dataIndex:"created_time",width:"25%"}],r=(0,d.useState)([]),k=f()(r,2),E=k[0],C=k[1],te=(0,d.useState)(null),H=f()(te,2),$=H[0],F=H[1],W=(0,d.useState)(null),_=f()(W,2),w=_[0],de=_[1],V=(0,d.useState)([]),ue=f()(V,2),me=ue[0],re=ue[1],fe=(0,d.useState)(!1),ge=f()(fe,2),J=ge[0],Q=ge[1],O=(0,d.useState)(""),v=f()(O,2),X=v[0],M=v[1],le=(0,d.useRef)(null),Me=(0,d.useState)(0),K=f()(Me,2),xe=K[0],Ne=K[1],Ie=(0,d.useState)(1),De=f()(Ie,2),Ee=De[0],Ce=De[1],je=function(){var j=o()(a()().mark(function g(){var P;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(X==""){T.next=11;break}return Q(!0),re([]),T.next=5,(0,m.I9)({user_input:X},l.app_id);case 5:P=T.sent,P.code==0?(P.data.data.length<=0&&A.ZP.error(s.formatMessage({id:"createkb.saveSuccess",defaultMessage:""})),re(P.data.data)):A.ZP.error(P.detail),Q(!1),D(),T.next=14;break;case 11:Q(!1),re([]),A.ZP.error(s.formatMessage({id:"createkb.testInput",defaultMessage:""}));case 14:case"end":return T.stop()}},g)}));return function(){return j.apply(this,arguments)}}(),q=function(){var j=o()(a()().mark(function g(P){return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:M(P.target.value);case 1:case"end":return T.stop()}},g)}));return function(P){return j.apply(this,arguments)}}(),ee=function(g){Le=g,D()},oe=function(){var j=o()(a()().mark(function g(P){var Z;return a()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return Q(!0),he.next=3,(0,m.gk)(P.id);case 3:Z=he.sent,Z.code==0?re(Z.data.data):A.ZP.error(Z.detail),Q(!1),M(P.input);case 7:case"end":return he.stop()}},g)}));return function(P){return j.apply(this,arguments)}}(),D=function(){var j=o()(a()().mark(function g(){var P,Z,T=arguments;return a()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return P=T.length>0&&T[0]!==void 0?T[0]:Le,ae.next=3,(0,m.yC)({page:P},l.app_id);case 3:Z=ae.sent,Z.code==0&&(C(Z.data.data),de(Z.data));case 5:case"end":return ae.stop()}},g)}));return function(){return j.apply(this,arguments)}}(),pe=function(){var j=o()(a()().mark(function g(){var P,Z,T,he,ae=arguments;return a()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return P=ae.length>0&&ae[0]!==void 0?ae[0]:1,Z={app_id:l.app_id},Te.next=4,(0,m.SH)(Z);case 4:T=Te.sent,T.code==0&&(he=T.data.data.map(function(Pe,ot){return x()(x()({},Pe),{},{statusText:Pe.status==1?s.formatMessage({id:"createkb.normal",defaultMessage:""}):Pe.status==2?s.formatMessage({id:"createkb.disabled",defaultMessage:""}):s.formatMessage({id:"createkb.deleted",defaultMessage:""})})}),console.log(T),F(T.data));case 6:case"end":return Te.stop()}},g)}));return function(){return j.apply(this,arguments)}}();return(0,d.useEffect)(function(){D(),pe(),setTimeout(function(){le.current&&Ne(le.current.offsetHeight-55-82)},200),l.app_id&&Ce(l.type?2:1)},[]),(0,e.jsx)(e.Fragment,{children:w!=null?(0,e.jsxs)("div",{className:"h-full pb-[30px]",children:[(0,e.jsxs)("div",{className:"w-full py-[30px] flex items-center ",children:[(0,e.jsx)("img",{src:"/icons/flag.svg",className:"w-4 h-4"}),(0,e.jsx)("span",{className:"ml-[10px] text-[#213044] text-[18px] leading-[25px] font-medium",children:Ee==2?(0,L.getLocale)()=="zh-CN"?$?$.dataset_detail.nickname+s.formatMessage({id:"createkb.knowledge.base.of"}):s.formatMessage({id:"createkb.knowledge.base.of"}):$?s.formatMessage({id:"createkb.knowledge.base.of"})+$.dataset_detail.nickname:s.formatMessage({id:"createkb.knowledge.base.of"}):Ee==1?s.formatMessage({id:"createkb.editKB"}):s.formatMessage({id:"createkb.createKnowledgeBase"})})]}),(0,e.jsx)("div",{className:"flex w-full",style:{height:"calc(100% - 84px)"},children:(0,e.jsxs)(ne.Z,{gutter:0,style:{marginRight:"0px",marginLeft:"0px"},children:[(0,e.jsx)(z.Z,{className:"pb-[30px] h-2/4",span:24,children:(0,e.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,e.jsx)("div",{className:"mb-5 text-[#555555] text-sm font-medium",children:s.formatMessage({id:"createkb.recallTest",defaultMessage:""})}),(0,e.jsxs)("div",{className:"w-full px-[15px] py-[15px] border-[#EEEEEE] rounded-lg bg-[#F7F7F7] flex-1 min-h-0",children:[(0,e.jsx)("div",{className:" overflow-y-auto",style:{height:"calc(100% - 65px)"},children:(0,e.jsx)(ne.Z,{gutter:[15,15],className:"w-full",children:me.map(function(j,g){var P=(j.score*1).toFixed(4),Z=j.reranking_score>0?(j.reranking_score*1).toFixed(4):0;return(0,e.jsx)(z.Z,{className:"gutter-row w-full",span:24,children:(0,e.jsx)(y.Z,{activeTabKey:j.id,size:"small",children:(0,e.jsxs)("div",{className:"w-full bg-white  font-normal text-[12px] rounded-lg",children:[(0,e.jsx)("div",{className:"break-all text-[#213044] leading-[17px]",children:j.content}),(0,e.jsxs)("div",{className:"text-[#BBBBBB] mt-[15px] leading-[17px]",children:[" ",s.formatMessage({id:"createkb.source",defaultMessage:""}),"\uFF1A ",j.name]}),(0,e.jsxs)("div",{className:"text-[#BBBBBB] mt-[15px]  leading-[17px]",children:[" ",s.formatMessage({id:"createkb.matchScore"}),"\uFF1A ",P]}),Z==0?"":(0,e.jsxs)("div",{className:"text-[#BBBBBB] mt-[15px] leading-[17px]",children:[" ",s.formatMessage({id:"createkb.sortScore"}),"\uFF1A ",Z]})]})})},j.id)})})}),(0,e.jsxs)("div",{className:"bg-white flex items-center rounded-lg mt-[15px] p-[10px]",children:[(0,e.jsx)(G.Z,{className:" custom-textarea",onChange:q,variant:"borderless",placeholder:s.formatMessage({id:"createkb.briefText"}),maxLength:200,showCount:!0,value:X,onPressEnter:je}),(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)(Y.ZP,{type:"primary",loading:J,onClick:je,style:{background:"rgba(27,100,243,.1)"},className:"w-[30px] h-[30px] rounded-md flex justify-center items-center p-0",children:J?"":(0,e.jsx)("img",{src:"/icons/fs.svg",className:"w-4 h-4"})})})]})]})]})}),(0,e.jsx)("div",{className:"h-2/4",ref:le,children:(0,e.jsx)(z.Z,{span:24,children:(0,e.jsxs)("div",{className:"w-full h-full",children:[(0,e.jsx)("div",{className:" mb-[20px] text-[#555555] text-sm font-medium",children:s.formatMessage({id:"createkb.recentQuery"})}),(0,e.jsx)("div",{className:"w-[900px] rounded-md border-[#eeeeee] border rounded-lg",children:(0,e.jsx)(be.Z,{rowKey:"id",columns:i,dataSource:E,locale:{emptyText:(0,e.jsx)("div",{className:"text-[#666666] text-[14px] leading-[20px] font-normal",children:(0,e.jsx)("span",{children:s.formatMessage({id:"createkb.no.data.available"})})})},pagination:{pageSize:w.paging_information.page_size,total:w.paging_information.total_count,onChange:ee,style:{margin:"0px",marginTop:"10px"},hideOnSinglePage:!0},onRow:function(g,P){return{onClick:function(){return oe(g)},style:{cursor:"pointer"}}},scroll:xe!=0?{y:xe}:{}})})]})})})]})})]}):""})},ct=Re,dt=n(83510),ut=n(40741),Ae=n(72269),ft=n(74330),pt=function(c){var l=c.createkbInfo,s=c.fun,i=(0,L.useIntl)(),r=(0,d.useState)(null),k=f()(r,2),E=k[0],C=k[1],te=(0,d.useState)(!1),H=f()(te,2),$=H[0],F=H[1],W=(0,d.useState)(1),_=f()(W,2),w=_[0],de=_[1],V=(0,d.useState)(1),ue=f()(V,2),me=ue[0],re=ue[1],fe=(0,d.useState)(null),ge=f()(fe,2),J=ge[0],Q=ge[1],O=(0,d.useState)(null),v=f()(O,2),X=v[0],M=v[1],le=(0,d.useState)(1),Me=f()(le,2),K=Me[0],xe=Me[1],Ne=function(ee){l.type||de(ee)},Ie=function(ee){re(ee==!0?1:0)},De=function(){s({type:"return"})},Ee=function(){var q=o()(a()().mark(function ee(){var oe,D,pe;return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(F(!0),l.app_id){g.next=11;break}return g.next=4,(0,dt.uy)((0,we.Go)("GET"));case 4:if(oe=g.sent,oe.code!=0){g.next=9;break}s({type:"set",data:oe.data.app_id}),g.next=11;break;case 9:return A.ZP.error(i.formatMessage({id:"createkb.creationFailed",defaultMessage:""})),g.abrupt("return");case 11:return D={app_id:l.app_id,name:E.name,description:E.description,public:me,mode:w},g.next=14,(0,m._W)(D);case 14:pe=g.sent,pe.code==0?(A.ZP.success(i.formatMessage({id:"createkb.setupSuccess",defaultMessage:""})),setTimeout(function(){s({type:"next",data:"2"}),F(!1)},1e3)):(A.ZP.error(i.formatMessage({id:"createkb.settingFailed",defaultMessage:""})),F(!1));case 16:case"end":return g.stop()}},ee)}));return function(){return q.apply(this,arguments)}}(),Ce=function(){var q=o()(a()().mark(function ee(){var oe,D,pe=arguments;return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return oe=pe.length>0&&pe[0]!==void 0?pe[0]:1,g.next=3,(0,m.SH)({app_id:l.app_id,page:oe,page_size:10,name:""});case 3:D=g.sent,D.code==0&&(re(D.data.dataset_detail.is_public),de(D.data.dataset_detail.mode),M(D.data.dataset_detail.embedding_model_config_id),C({name:D.data.dataset_detail.name,description:D.data.dataset_detail.description,nickname:D.data.dataset_detail.nickname}),je(D.data.dataset_detail.embedding_model_config_id));case 5:case"end":return g.stop()}},ee)}));return function(){return q.apply(this,arguments)}}(),je=function(){var q=o()(a()().mark(function ee(oe){var D;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,m.Ue)(oe);case 2:D=j.sent,D.code==0&&Q(D.data.data);case 4:case"end":return j.stop()}},ee)}));return function(oe){return q.apply(this,arguments)}}();return(0,d.useEffect)(function(){l.app_id?(xe(l.type?2:1),Ce()):(je(0),C({name:l.name,description:l.description}),xe(3))},[]),(0,e.jsx)(e.Fragment,{children:E!=null?(0,e.jsxs)("div",{className:"bg-white h-full flex flex-col w-full relative",children:[(0,e.jsxs)("div",{className:"w-full py-[30px] flex items-center ",children:[(0,e.jsx)("img",{src:"/icons/flag.svg",className:"w-4 h-4"}),(0,e.jsx)("span",{className:"ml-[10px] text-[#213044] text-[18px] leading-[25px] font-medium",children:K==2?(0,L.getLocale)()=="zh-CN"?E.nickname+i.formatMessage({id:"createkb.knowledge.base.of"}):i.formatMessage({id:"createkb.knowledge.base.of"})+E.nickname:K==1?i.formatMessage({id:"createkb.editKB",defaultMessage:""}):i.formatMessage({id:"createkb.createKnowledgeBase",defaultMessage:""})})]}),(0,e.jsx)("div",{className:" pb-[30px] bg-white flex-1",children:(0,e.jsx)(ne.Z,{className:"h-full",children:(0,e.jsxs)(z.Z,{span:24,className:"flex flex-col justify-between",children:[(0,e.jsx)("div",{className:"text-[#333333] text-[16px] leading-[22px] font-medium",children:i.formatMessage({id:"createkb.settings",defaultMessage:""})}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)(ut.Z,{layout:"vertical",children:[(0,e.jsxs)("div",{className:"pt-[30px] flex items-start text-[12px]",children:[(0,e.jsx)("span",{className:"mr-[2px] text-[#E80000] leading-[17px] font-medium",children:"*"}),(0,e.jsx)("span",{className:"text-[#555555] font-medium",children:i.formatMessage({id:"createkb.name",defaultMessage:""})})]}),(0,e.jsx)("div",{className:"w-full mt-[15px] p-[15px] bg-[#F7F7F7] border border-[#EEEEEE] rounded-lg text-[12px] text-[#213044] font-normal leading-[17px]",children:E.name}),(0,e.jsxs)("div",{className:"pt-[30px] flex items-start text-[12px]",children:[(0,e.jsx)("span",{className:"mr-[2px] text-[#E80000] leading-[17px] font-medium",children:"*"}),(0,e.jsx)("span",{className:"text-[#555555] font-medium",children:i.formatMessage({id:"createkb.desc",defaultMessage:""})})]}),(0,e.jsx)("div",{className:"w-full mt-[15px] p-[15px] bg-[#F7F7F7] border border-[#EEEEEE] rounded-lg text-[12px] text-[#213044] font-normal leading-[17px]",children:E.description}),(0,e.jsxs)("div",{className:"pt-[30px] flex items-start text-[12px]",children:[(0,e.jsx)("span",{className:"mr-[2px] text-[#E80000] leading-[17px] font-medium",children:"*"}),(0,e.jsx)("span",{className:"text-[#555555] font-medium",children:i.formatMessage({id:"createkb.teamVisible",defaultMessage:""})})]}),(0,e.jsx)("div",{className:"w-full mt-[15px]",children:(0,e.jsx)(Ae.Z,{onChange:Ie,checked:me===1,size:"small",disabled:l.type})}),(0,e.jsxs)("div",{className:"pt-[30px] flex items-start text-[12px]",children:[(0,e.jsx)("span",{className:"mr-[2px] text-[#E80000] leading-[17px] font-medium",children:"*"}),(0,e.jsx)("span",{className:"text-[#555555] font-medium",children:i.formatMessage({id:"createkb.modelSelect"})})]}),(0,e.jsx)("div",{className:"flex items-center mt-[15px]",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)(y.Z,{onClick:function(){Ne(1)},size:"small",className:w==1?"bg-[#FFFFFF]":"bg-[#F7F7F7]",style:{minWidth:"440px",cursor:l.type?"not-allowed":"pointer",borderColor:w==1?"#1B64F3":""},styles:{body:{padding:"15px"}},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{className:"pb-[15px] border-b border-[#EEEEEE] flex items-center",children:[(0,e.jsx)("img",{src:w==1?"/icons/online_select.svg":"/icons/online.svg",className:"w-4 h-4 "}),(0,e.jsx)("span",{className:w==1?"text-[#1B64F3] text-xs ml-[10px]":"text-[#213044] text-xs ml-[10px]",children:i.formatMessage({id:"createkb.apiEmbed"})})]}),(0,e.jsxs)("p",{className:"text-[#999999] mb-[10px]",children:[i.formatMessage({id:"createkb.vendor"}),": ",J==null?void 0:J.online.suppliers_name]}),(0,e.jsxs)("p",{className:"mb-0 text-[#999999]",children:[i.formatMessage({id:"createkb.modelName"}),": ",J==null?void 0:J.online.name]})]})}),(0,e.jsx)(y.Z,{onClick:function(){Ne(2)},size:"small",className:w==2?"bg-[#FFFFFF] ml-5":"bg-[#F7F7F7] ml-5",style:{minWidth:"440px",cursor:l.type?"not-allowed":"pointer",borderColor:w==2?"#1B64F3":""},styles:{body:{padding:"15px"}},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{className:"pb-[15px] border-b border-[#EEEEEE] flex items-center",children:[(0,e.jsx)("img",{src:w==2?"/icons/local_select.svg":"/icons/local.svg",className:"w-4 h-4 "}),(0,e.jsx)("span",{className:w==2?"text-[#1B64F3] text-xs ml-[10px]":"text-[#213044] text-xs ml-[10px]",children:i.formatMessage({id:"createkb.localEmbed"})})]}),(0,e.jsxs)("p",{className:"text-[#999999] mb-[10px]",children:[i.formatMessage({id:"createkb.vendor"}),"\uFF1A -"]}),(0,e.jsxs)("p",{className:"mb-0 text-[#999999]",children:[i.formatMessage({id:"createkb.modelName"}),": ",J==null?void 0:J.local.name]})]})})]})})]}),(0,e.jsxs)("div",{className:"flex items-center mt-[60px]",children:[(0,e.jsx)(Y.ZP,{type:"primary",onClick:Ee,className:"py-[10px] h-[40px] px-[15px] bg-[#1B64F3] text-white text-[14px] leading-[20px] font-medium",disabled:l.type,style:{cursor:l.type?"not-allowed":""},children:i.formatMessage({id:"createkb.save.and.upload.document"})}),(0,e.jsx)(Y.ZP,{type:"primary",onClick:De,className:"ml-[20px] py-[10px] h-[40px] px-[15px] bg-[#ffffff] text-[#213044] text-[14px] leading-[20px] font-medium border border-[#979797]",children:i.formatMessage({id:"createkb.cancel"})})]})]})]})})}),$?(0,e.jsx)("div",{className:" absolute w-full h-full t-0 l-0 z-10 flex justify-center items-center",children:(0,e.jsx)(ft.Z,{size:"large"})}):""]}):""})},mt=pt,gt=n(19632),Oe=n.n(gt),xt=n(82061),Ke=n(40110),ht=n(85576),vt=n(78367),bt=vt.Z.Dragger,jt=(0,d.forwardRef)(function(u,c){var l=u.fun,s=u.createkbInfo,i=(0,L.useIntl)(),r=(0,d.useRef)(null),k=function(){r.current&&(r.current.fileList=[])};(0,d.useImperativeHandle)(c,function(){return{reset:k}});var E={action:m.M$,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},onChange:function(H){l(H),(H.file.status==="done"||H.file.status==="error")&&k()},beforeUpload:function(H){var $=H.size/1024/1024<15;return $||(A.ZP.error(i.formatMessage({id:"createkb.fileLimit",defaultMessage:"15M"})),!1)}},C=x()(x()({},E),{},{name:"file",multiple:!0,className:"h-[200px]",showUploadList:!1});return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(bt,x()(x()({},C),{},{ref:r,listType:"picture",className:"flex flex-col items-center justify-center custom-dragger mt-[15px]",accept:".txt,.md,.pdf,.html,.xlsx,.xls,.docx,.csv",disabled:s.type,children:(0,e.jsxs)("div",{className:"update p-[4px]",children:[(0,e.jsxs)("div",{className:"flex items-center w-full justify-center",children:[(0,e.jsx)("img",{src:"/icons/word.svg",className:"w-[42px] h-[42px] mx-3"}),(0,e.jsx)("img",{src:"/icons/txt.svg",className:"w-[42px] h-[42px] mx-3"}),(0,e.jsx)("img",{src:"/icons/pdf.svg",className:"w-[42px] h-[42px] mx-3"}),(0,e.jsx)("img",{src:"/icons/xlsx.svg",className:"w-[42px] h-[42px] mx-3"}),(0,e.jsx)("img",{src:"/icons/md.svg",className:"w-[42px] h-[42px] mx-3"})]}),(0,e.jsx)("div",{className:"mt-[10px] text-[#213044] text-sm",children:i.formatMessage({id:"createkb.dragOrClick",defaultMessage:"\uFF0C"})}),(0,e.jsx)("div",{className:"mt-[10px] text-[#999999] text-sm",children:i.formatMessage({id:"createkb.uploadLimit",defaultMessage:"10\uFF0C 15MB"})})]})}))})}),yt=jt,$e=n(34994),wt=n(52688),kt=n(86615),Ye=n(31199),Mt=n(93967),We=n.n(Mt),St=n(98423),Je=n(98065),Nt=n(53124),Et=n(83559),Ct=n(83262);const Qe=["wrap","nowrap","wrap-reverse"],Xe=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],qe=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Tt=(u,c)=>{const l=c.wrap===!0?"wrap":c.wrap;return{[`${u}-wrap-${l}`]:l&&Qe.includes(l)}},Ft=(u,c)=>{const l={};return qe.forEach(s=>{l[`${u}-align-${s}`]=c.align===s}),l[`${u}-align-stretch`]=!c.align&&!!c.vertical,l},Lt=(u,c)=>{const l={};return Xe.forEach(s=>{l[`${u}-justify-${s}`]=c.justify===s}),l};function _t(u,c){return We()(Object.assign(Object.assign(Object.assign({},Tt(u,c)),Ft(u,c)),Lt(u,c)))}var Dt=_t;const Pt=u=>{const{componentCls:c}=u;return{[c]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},It=u=>{const{componentCls:c}=u;return{[c]:{"&-gap-small":{gap:u.flexGapSM},"&-gap-middle":{gap:u.flexGap},"&-gap-large":{gap:u.flexGapLG}}}},Bt=u=>{const{componentCls:c}=u,l={};return Qe.forEach(s=>{l[`${c}-wrap-${s}`]={flexWrap:s}}),l},Ot=u=>{const{componentCls:c}=u,l={};return qe.forEach(s=>{l[`${c}-align-${s}`]={alignItems:s}}),l},Zt=u=>{const{componentCls:c}=u,l={};return Xe.forEach(s=>{l[`${c}-justify-${s}`]={justifyContent:s}}),l},Rt=()=>({});var At=(0,Et.I$)("Flex",u=>{const{paddingXS:c,padding:l,paddingLG:s}=u,i=(0,Ct.mergeToken)(u,{flexGapSM:c,flexGap:l,flexGapLG:s});return[Pt(i),It(i),Bt(i),Ot(i),Zt(i)]},Rt,{resetStyle:!1}),$t=function(u,c){var l={};for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&c.indexOf(s)<0&&(l[s]=u[s]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(u);i<s.length;i++)c.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(u,s[i])&&(l[s[i]]=u[s[i]]);return l},Ut=d.forwardRef((u,c)=>{const{prefixCls:l,rootClassName:s,className:i,style:r,flex:k,gap:E,children:C,vertical:te=!1,component:H="div"}=u,$=$t(u,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:F,direction:W,getPrefixCls:_}=d.useContext(Nt.E_),w=_("flex",l),[de,V,ue]=At(w),me=te!=null?te:F==null?void 0:F.vertical,re=We()(i,s,F==null?void 0:F.className,w,V,ue,Dt(w,u),{[`${w}-rtl`]:W==="rtl",[`${w}-gap-${E}`]:(0,Je.n)(E),[`${w}-vertical`]:me}),fe=Object.assign(Object.assign({},F==null?void 0:F.style),r);return k&&(fe.flex=k),E&&!(0,Je.n)(E)&&(fe.gap=E),de(d.createElement(H,Object.assign({ref:c,className:re,style:fe},(0,St.Z)($,["justify","wrap","align"])),C))}),zt=n(34041),Ue=n(78045),Ht=n(96074),et=n(2487),Gt=n(58533),ze="0",He="hit_count asc",Ge=1,tt="",at,st,Vt=function(c){var l=c.item,s=c.fun,i=c.createkbInfo,r=(0,L.useIntl)(),k=[{title:r.formatMessage({id:"createkb.splitMode",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.charLimit",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.chunkOverlap",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.avgChar",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.sectionNum",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.totalRecall",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.embedTime",defaultMessage:""})+"\uFF1A",value:""},{title:r.formatMessage({id:"createkb.embedCost",defaultMessage:""})+"\uFF1A",value:""}],E=(0,d.useState)(!1),C=f()(E,2),te=C[0],H=C[1],$=(0,d.useState)([]),F=f()($,2),W=F[0],_=F[1],w=(0,d.useState)(null),de=f()(w,2),V=de[0],ue=de[1],me=function(){s("return")};function re(){return k.filter(function(O){return O.value!=null}).map(function(O){return(0,e.jsx)("div",{className:"mr-[40px]",children:(0,e.jsxs)("div",{className:"flex items-center grow shrink-0",children:[(0,e.jsx)("div",{className:"text-[#666666] text-[12px] leading-[17px] font-normal",children:O.title}),(0,e.jsx)("div",{className:"text-[#213044] text-[12px] leading-[17px] font-medium",children:O.value})]})},"".concat(O.title))})}var fe=function(v){var X=v.target.value;clearTimeout(at),at=setTimeout(function(){_([]),tt=X,Q(1)},500)},ge=function(){Ge+=1,Q(Ge)},J=function(){var O=o()(a()().mark(function v(X,M){var le;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:X?le=(0,m.Rc)(M.id):le=(0,m.U4)(M.id);case 1:case"end":return K.stop()}},v)}));return function(X,M){return O.apply(this,arguments)}}(),Q=function(){var O=o()(a()().mark(function v(){var X,M,le=arguments;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return X=le.length>0&&le[0]!==void 0?le[0]:1,Ge=X,K.next=4,(0,m.gD)({document_id:l.id,page:X,page_size:10,hit_count:He,content:tt,status:ze});case 4:M=K.sent,ue(M.data),V==null&&(k[0].value=M.data.seg_set.seg_Mode,k[1].value=M.data.seg_set.seg_Len,k[2].value=M.data.seg_set.seg_Overlap,k[3].value=M.data.seg_set.seg_Avg,k[4].value=M.data.seg_set.seg_Num,k[5].value=M.data.seg_set.hit_Num,k[6].value=M.data.seg_set.Embedding_Time,k[7].value=M.data.seg_set.Embedding_Token,st=re()),_(function(xe){return[].concat(Oe()(xe),Oe()(M.data.data))});case 8:case"end":return K.stop()}},v)}));return function(){return O.apply(this,arguments)}}();return(0,d.useEffect)(function(){Q()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"py-[30px] bg-white overflow-hidden w-full h-full flex flex-col",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"border-b  flex items-center pb-[30px]",children:[(0,e.jsx)("div",{className:"border-r mr-[10px] pr-[10px] cursor-pointer",onClick:me,children:(0,e.jsx)("img",{src:"/icons/return.svg",className:"w-4 h-4"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("img",{src:"/icons/textIcon.svg",className:"w-4 h-4"}),(0,e.jsx)("span",{className:"text-[#213044] leading-[25px] text-[18px] font-medium ml-[5px]",children:l.name})]})]}),(0,e.jsx)("div",{className:"pt-[20px] pb-[15px] text-[#555555]  text-[14px] leading-[20px] font-medium",children:r.formatMessage({id:"createkb.docParams",defaultMessage:""})}),(0,e.jsx)("div",{className:"w-full border border-[#EEEEEE] rounded-lg p-[15px] bg-[#F7F7F7]",children:(0,e.jsx)(Ut,{wrap:!0,gap:"middle",align:"center",children:st})}),(0,e.jsxs)("div",{className:"pt-[20px] pb-[15px] text-[#555555] text-[14px] leading-[20px] font-medium",children:[r.formatMessage({id:"createkb.docPara",defaultMessage:""})," ",V!=null?V.paging_information.total_count:""]}),(0,e.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,e.jsxs)("div",{className:"sticky-0 flex items-center",children:[(0,e.jsx)(zt.Z,{defaultValue:"".concat(ze),style:{width:114,height:32,background:"#F7F7F7"},onSelect:function(v){ze=v,_([]),Q(1)},options:[{value:"0",label:r.formatMessage({id:"createkb.all",defaultMessage:""})},{value:"1",label:r.formatMessage({id:"createkb.enabled",defaultMessage:""})},{value:"2",label:r.formatMessage({id:"createkb.disabled",defaultMessage:""})}]}),(0,e.jsx)(G.Z,{size:"large",placeholder:r.formatMessage({id:"createkb.search",defaultMessage:""}),prefix:(0,e.jsx)(Ke.Z,{className:"text-[#213044] opacity-30"}),onChange:fe,className:"w-[300px] text-sm h-8 ml-5"})]}),(0,e.jsx)("div",{className:"flex-1 justify-end flex items-center",children:(0,e.jsxs)("div",{className:"flex items-center text-[#555555] text-[14px] leading-[20px] font-normal",children:[(0,e.jsxs)("span",{children:[r.formatMessage({id:"createkb.recallSort"}),"\uFF1A"]}),(0,e.jsxs)(Ue.ZP.Group,{defaultValue:He,onChange:function(v){He=v.target.value,_([]),Q(1)},size:"small",children:[(0,e.jsx)(Ue.ZP,{value:"hit_count asc",children:r.formatMessage({id:"createkb.highToLow"})}),(0,e.jsx)(Ue.ZP,{value:"hit_count desc",children:r.formatMessage({id:"createkb.lowToHigh"})})]})]})})]})]}),V!=null?(0,e.jsx)("div",{className:"overflow-y-auto flex-1 mt-4",id:"lists",children:(0,e.jsx)(Gt.Z,{dataLength:W.length,next:ge,hasMore:W.length<V.paging_information.total_count,loader:!1,endMessage:W.length<=0?"":(0,e.jsx)(Ht.Z,{plain:!0,children:r.formatMessage({id:"createkb.bottom"})}),scrollableTarget:"lists",children:(0,e.jsx)(et.Z,{dataSource:W,split:!1,renderItem:function(v){return(0,e.jsx)(et.Z.Item,{style:{padding:"0px"},children:(0,e.jsxs)("div",{className:"w-full rounded-lg bg-[#F7F7F7] p-[15px] mb-[15px]",children:[(0,e.jsxs)("div",{className:"w-full flex items-center",children:[(0,e.jsxs)("div",{className:"py-1 rounded-md px-2 border border-[#D8D8D8] flex items-center justify-center text-[#213044] text-sm",children:["#",v.segnum<=9?"00"+v.segnum:v.segnum<=99?"0"+v.segnum:v.segnum]}),(0,e.jsxs)("div",{className:"flex items-center ml-8",children:[(0,e.jsx)("img",{src:"/icons/zishu.svg",className:"w-4 h-4"}),(0,e.jsx)("div",{className:"ml-[5px] text-[#213044] text-sm",children:v.word_count})]}),(0,e.jsxs)("div",{className:"flex items-center ml-8",children:[(0,e.jsx)("img",{src:"/icons/zh.svg",className:"w-4 h-4"}),(0,e.jsx)("div",{className:"ml-[5px] text-[#213044] text-sm",children:v.hit_count})]}),(0,e.jsx)("div",{className:"ml-8 ",children:(0,e.jsx)(Ae.Z,{defaultChecked:v.status!=2,onChange:function(M){return J(M,v)},disabled:i.type,size:"small"},v.id)})]}),(0,e.jsx)("div",{className:"pt-5",children:(0,e.jsx)("span",{className:"text-[#213044] text-sm",children:v.content})})]})},v.id)}})})}):""]})})},Kt=Vt,_e=1,nt,rt="",Ve=null,Yt=function(c){var l=c.fun,s=c.createkbInfo,i=ht.Z.confirm,r=(0,L.useIntl)(),k=function(p,h,N,U,I,B){return(0,e.jsx)("div",{className:"mt-[10px] border border-[#EEEEEE] rounded-lg",children:(0,e.jsx)(be.Z,{columns:p,loading:h,dataSource:N,size:"middle",pagination:U,locale:{emptyText:(0,e.jsx)("div",{className:"text-[#666666] text-[14px] leading-[20px] font-normal",children:(0,e.jsx)("span",{children:r.formatMessage({id:"createkb.no.data.available",defaultMessage:""})})})},onRow:function(Be,R){return{onClick:function(){return I(Be,R)},style:{cursor:"pointer"}}},onChange:B,rowKey:"id"})})},E=(0,d.useState)([]),C=f()(E,2),te=C[0],H=C[1],$=(0,d.useState)([]),F=f()($,2),W=F[0],_=F[1],w=(0,d.useState)(null),de=f()(w,2),V=de[0],ue=de[1],me=(0,d.useState)(!0),re=f()(me,2),fe=re[0],ge=re[1],J=(0,d.useState)(!0),Q=f()(J,2),O=Q[0],v=Q[1],X=(0,d.useState)(null),M=f()(X,2),le=M[0],Me=M[1],K=(0,d.useState)(1),xe=f()(K,2),Ne=xe[0],Ie=xe[1],De=(0,d.useState)([]),Ee=f()(De,2),Ce=Ee[0],je=Ee[1],q=(0,d.useRef)(null),ee=function(){l({type:"next",data:"3"})},oe=function(p){v(!0)},D=function(p){var h=Oe()(te);h[p]=!h[p],H(h)},pe=function(){var S=o()(a()().mark(function p(h,N,U,I){var B,ie;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(B=null,h){R.next=7;break}return R.next=4,(0,m.LV)(U.id);case 4:B=R.sent,R.next=10;break;case 7:return R.next=9,(0,m.OK)(U.id);case 9:B=R.sent;case 10:B.code==0&&(ie=W.map(function(ve,Se){return I==Se&&(ve.status=h?1:2),x()(x()({},ve),{},{statusText:ve.status==1?r.formatMessage({id:"createkb.normal",defaultMessage:""}):ve.status==2?r.formatMessage({id:"createkb.disabled",defaultMessage:""}):r.formatMessage({id:"createkb.deleted",defaultMessage:""})})}),_(ie));case 11:case"end":return R.stop()}},p)}));return function(h,N,U,I){return S.apply(this,arguments)}}(),j=function(){var S=o()(a()().mark(function p(h,N){return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:i({title:r.formatMessage({id:"createkb.deleteOperation",defaultMessage:""}),content:r.formatMessage({id:"createkb.confirmDelete",defaultMessage:"?"}),onOk:function(){var B=o()(a()().mark(function Be(){var R;return a()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,(0,m.iH)(h);case 2:R=Se.sent,R.code==0&&(ae(_e),D(N));case 4:case"end":return Se.stop()}},Be)}));function ie(){return B.apply(this,arguments)}return ie}(),onCancel:function(){}});case 1:case"end":return I.stop()}},p)}));return function(h,N){return S.apply(this,arguments)}}(),g=function(p){var h=p.target.value;clearTimeout(nt),nt=setTimeout(function(){rt=h,_e=1,ae()},500)},P=function(p,h){Me(p),v(!1)},Z=function(p){p&&p.stopPropagation&&p.stopPropagation()},T=[{title:r.formatMessage({id:"createkb.filename",defaultMessage:""}),dataIndex:"name",key:"name",ellipsis:!0,className:"max-w-48 text-[#213044] text-xs py-[15px]"},{title:r.formatMessage({id:"createkb.charCount",defaultMessage:""}),dataIndex:"word_count",key:"word_count",className:"max-w-48 w-24 text-[#213044] text-xs py-[15px]"},{title:r.formatMessage({id:"createkb.recallNum",defaultMessage:""}),dataIndex:"hit_count",key:"hit_count",className:"max-w-48 w-20 text-[#213044] text-xs py-[15px]"},{title:r.formatMessage({id:"createkb.uploadTime",defaultMessage:""}),dataIndex:"created_time",key:"created_time",className:"max-w-48 w-44 text-[#213044] text-xs py-[15px]",sorter:!0},{title:r.formatMessage({id:"createkb.status",defaultMessage:""}),dataIndex:"statusText",key:"statusText",className:"max-w-48 w-28 text-[#213044] text-xs py-[15px]",render:function(p,h,N){return(0,e.jsx)("div",{onClick:Z,children:(0,e.jsx)(Ae.Z,{className:h.status==2?"":"bg-[#1B64F3]",defaultChecked:h.status!=2,onChange:function(I){return pe(I,p,h,N)},size:"small"},p)})}},{title:r.formatMessage({id:"createkb.action"}),dataIndex:"id",key:"id",className:"max-w-48 w-20 text-[#213044] text-xs py-[15px]",render:function(p,h,N){return(0,e.jsx)("div",{onClick:Z,children:(0,e.jsx)("img",{src:"/icons/delete.svg",className:"w-4 h-4",onClick:function(){j(p,N)}})})}}],he=function(){var S=o()(a()().mark(function p(h){var N;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:h.file.status=="done"&&(je(function(B){return[].concat(Oe()(B),[h.file])}),(N=q.current)===null||N===void 0||N.reset());case 1:case"end":return I.stop()}},p)}));return function(h){return S.apply(this,arguments)}}(),ae=function(){var S=o()(a()().mark(function p(){var h,N,U,I,B,ie=arguments;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return h=ie.length>0&&ie[0]!==void 0?ie[0]:1,N=ie.length>1&&ie[1]!==void 0?ie[1]:Ve,ge(!0),U={app_id:s.app_id,page:h,page_size:10,name:rt},R.next=6,(0,m.SH)(U);case 6:I=R.sent,I.code==0&&(B=I.data.data.map(function(ve,Se){return x()(x()({},ve),{},{statusText:ve.status==1?r.formatMessage({id:"createkb.normal"}):ve.status==2?r.formatMessage({id:"createkb.disabled"}):r.formatMessage({id:"createkb.deleted"})})}),_(B),ue(I.data)),ge(!1);case 9:case"end":return R.stop()}},p)}));return function(){return S.apply(this,arguments)}}(),it=function(p,h,N){Ve=N.order=="ascend"?"asc":N.order=="descend"?"desc":null,_e=p.current,ae(_e,Ve)},Te={total:V!=null?V.paging_information.total_count:0,current:_e,hideOnSinglePage:!0};(0,d.useEffect)(function(){s.app_id&&(Ie(s.type?2:1),ae())},[]);var Pe={split:!0,split_mode:"text",chunk_size:4e3,chunk_overlap:200},ot=function(){var S=o()(a()().mark(function p(h){var N,U;return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,m.H_)({app_id:s.app_id*1,file_ids:Ce.map(function(ie){return ie.response.data.file_id*1}),process_rule_id:1,data_source_type:1,text_split_config:x()(x()({},Pe),h)});case 2:N=B.sent,N.code==0&&(je([]),ae(_e),(U=q.current)===null||U===void 0||U.reset());case 4:case"end":return B.stop()}},p)}));return function(h){return S.apply(this,arguments)}}(),Xt=function(){return(0,e.jsxs)($e.A,{submitter:{resetButtonProps:!1,searchConfig:{submitText:r.formatMessage({id:"createkb.uploadToKnowledgeBase",defaultMessage:""})}},onFinish:ot,layout:"horizontal",initialValues:Pe,children:[(0,e.jsx)(wt.Z,{name:"split",label:r.formatMessage({id:"createkb.splitContent",defaultMessage:""}),initialValue:!0}),(0,e.jsx)($e.A.Item,{noStyle:!0,dependencies:["split"],children:function(h){var N=h.getFieldValue;return N("split")?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(kt.Z.Group,{label:r.formatMessage({id:"createkb.splitType",defaultMessage:""}),name:"split_mode",initialValue:"text",radioType:"button",fieldProps:{options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"}]}}),(0,e.jsx)($e.A.Item,{noStyle:!0,dependencies:["split_mode"],children:function(I){var B=I.getFieldValue;return B("split_mode")==="text"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ye.Z,{label:r.formatMessage({id:"createkb.chunkSize",defaultMessage:""}),name:"chunk_size",min:200,max:8e3,initialValue:4e3}),(0,e.jsx)(Ye.Z,{label:r.formatMessage({id:"createkb.chunkOverlap",defaultMessage:""}),name:"chunk_overlap",min:0,max:8e3,initialValue:200})]}):null}})]}):null}})]})},qt=function(p){je(function(h){return h.filter(function(N,U){return U!==p})})};return(0,e.jsx)(e.Fragment,{children:O?V!=null?(0,e.jsxs)("div",{className:"h-full bg-white w-full",children:[(0,e.jsxs)("div",{className:"w-full py-[30px] flex items-center ",children:[(0,e.jsx)("img",{src:"/icons/flag.svg",className:"w-4 h-4"}),(0,e.jsx)("span",{className:"ml-[10px] text-[#213044] text-[18px] leading-[25px] font-medium",children:Ne==2?(0,L.getLocale)()=="zh-CN"?V.dataset_detail.nickname+r.formatMessage({id:"createkb.knowledge.base.of"}):r.formatMessage({id:"createkb.knowledge.base.of"})+V.dataset_detail.nickname:Ne==1?r.formatMessage({id:"createkb.editKB"}):r.formatMessage({id:"createkb.createKnowledgeBase"})})]}),(0,e.jsx)("div",{className:"text-[#333333] text-[16px] leading-[22px] font-medium",children:r.formatMessage({id:"createkb.documentSettings"})}),(0,e.jsx)("div",{className:"text-[#555555] text-[12px] leading-[17px] font-medium pt-[30px]",children:r.formatMessage({id:"createkb.uploadDoc"})}),(0,e.jsx)(yt,{ref:q,fun:he,createkbInfo:s}),Ce.length>0&&(0,e.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg ",children:[(0,e.jsx)("h4",{className:"text-base font-medium mb-2 text-gray-700",children:r.formatMessage({id:"createkb.fileList",defaultMessage:""})}),(0,e.jsx)("ul",{className:"space-y-1",children:Ce.map(function(S,p){return(0,e.jsxs)("li",{className:"flex items-center justify-between text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[(0,e.jsx)("span",{className:"truncate mr-2",children:S.name}),(0,e.jsx)("button",{onClick:function(){return qt(p)},className:"text-red-500 hover:text-red-700 transition-colors","aria-label":"".concat(r.formatMessage({id:"createkb.deleteFile",defaultMessage:""})," ").concat(S.name),title:"".concat(r.formatMessage({id:"createkb.deleteFile",defaultMessage:""})," ").concat(S.name),children:(0,e.jsx)(xt.Z,{})})]},p)})}),(0,e.jsx)(Xt,{})]}),(0,e.jsx)("div",{className:"flex justify-between pt-[30px]",children:(0,e.jsx)("span",{className:"text-[#213044] text-xs font-medium",children:r.formatMessage({id:"createkb.documentList"})})}),(0,e.jsx)("div",{className:"flex items-center w-full pt-[10px]",children:(0,e.jsx)(G.Z,{placeholder:r.formatMessage({id:"createkb.searchDoc"}),onChange:g,className:"w-[782px] h-10 mr-5",prefix:(0,e.jsx)(Ke.Z,{})})}),k(T,fe,W,Te,P,it),(0,e.jsx)("div",{className:"mt-[30px]",children:(0,e.jsx)(Y.ZP,{type:"primary",className:"py-[10px] h-[40px] px-[15px] bg-[#1B64F3] text-white text-[14px] leading-[20px] font-medium",onClick:ee,children:r.formatMessage({id:"createkb.enterRecallTest"})})})]}):"":(0,e.jsx)(Kt,{fun:oe,item:le,createkbInfo:s})})},Wt=Yt,lt=function(){L.history.back()},Jt=function(){var c=(0,L.useIntl)(),l=(0,d.useState)("1"),s=f()(l,2),i=s[0],r=s[1],k=(0,d.useState)((0,we.Go)("GET")),E=f()(k,2),C=E[0],te=E[1],H=[{key:"1",icon:(0,e.jsx)(e.Fragment,{children:i=="1"?(0,e.jsx)("img",{src:"/icons/kb_setting_select.svg",className:"w-4 h-4 mr-[10px]"}):(0,e.jsx)("img",{src:"/icons/kb_setting.svg",className:"w-4 h-4 mr-[10px]"})}),label:c.formatMessage({id:"createkb.settings",defaultMessage:""}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:i=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(e.Fragment,{children:i=="2"?(0,e.jsx)("img",{src:"/icons/uptxt_select.svg",className:"w-4 h-4 mr-[10px]"}):(0,e.jsx)("img",{src:"/icons/uptxt.svg",className:"w-4 h-4 mr-[10px]",style:{opacity:C.app_id?"1":"0.4"}})}),label:c.formatMessage({id:"createkb.documentSettings",defaultMessage:""}),disabled:!C.app_id,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:i=="2"?"#1B64F3":"#213044"}},{key:"3",icon:(0,e.jsx)(e.Fragment,{children:i=="3"?(0,e.jsx)("img",{src:"/icons/recall_test_select.svg",className:"w-4 h-4 mr-[10px]"}):(0,e.jsx)("img",{src:"/icons/recall_test.svg",className:"w-4 h-4 mr-[10px]",style:{opacity:C.app_id?"1":"0.4"}})}),label:c.formatMessage({id:"createkb.recallTest",defaultMessage:""}),disabled:!C.app_id,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:i=="3"?"#1B64F3":"#213044"}}],$=function(_){_.type=="set"&&(C.app_id=_.data,te(C)),_.type=="return"&&lt(),_.type=="next"&&r(_.data)};function F(){var W=function(w){r(w.key)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"flex flex-col bg-white h-full",children:[(0,e.jsx)("div",{className:" bg-white pl-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)("div",{className:"w-full flex  justify-start",children:(0,e.jsxs)("div",{className:"cursor-pointer flex items-center",onClick:lt,children:[(0,e.jsx)(Y.ZP,{type:"link",danger:!0,className:"p-0",children:(0,e.jsx)(se.Z,{className:"text-[#1B64F3] w-4 h-4"})}),(0,e.jsx)("span",{className:"ml-[5px] text-[#213044] text-sm",children:c.formatMessage({id:"createkb.back",defaultMessage:""})})]})})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(ke.Z,{onClick:W,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[i],mode:"inline",items:H})})]})})}return(0,e.jsxs)("div",{className:"w-full flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"w-[300px] shrink-0",children:(0,e.jsx)(F,{})}),(0,e.jsx)("div",{className:"shrink-0 h-full overflow-y-auto bg-white overflow-x-auto",style:{width:"calc(100% - 300px)"},children:(0,e.jsx)("div",{className:"w-full h-full flex xl:justify-center justify-start flex-1",children:(0,e.jsx)("div",{className:"w-[900px] xl:px-0 px-[30px]",children:i=="1"?(0,e.jsx)(mt,{createkbInfo:C,fun:$}):i=="2"?(0,e.jsx)(Wt,{createkbInfo:C,fun:$}):(0,e.jsx)(ct,{createkbInfo:C,fun:$})})})})]})},Qt=Jt},58533:function(Ze,ye,n){var ce=n(67294);var f=function(x,b){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var o in t)t.hasOwnProperty(o)&&(a[o]=t[o])},f(x,b)};function we(x,b){f(x,b);function a(){this.constructor=x}x.prototype=b===null?Object.create(b):(a.prototype=b.prototype,new a)}var se=function(){return se=Object.assign||function(b){for(var a,t=1,o=arguments.length;t<o;t++){a=arguments[t];for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(b[m]=a[m])}return b},se.apply(this,arguments)};function L(x,b,a,t){var o,m=!1,A=0;function ne(){o&&clearTimeout(o)}function z(){ne(),m=!0}typeof b!="boolean"&&(t=a,a=b,b=void 0);function y(){var G=this,be=Date.now()-A,e=arguments;if(m)return;function Le(){A=Date.now(),a.apply(G,e)}function Re(){o=void 0}t&&!o&&Le(),ne(),t===void 0&&be>x?Le():b!==!0&&(o=setTimeout(t?Re:Le,t===void 0?x-be:x))}return y.cancel=z,y}var Y={Pixel:"Pixel",Percent:"Percent"},ke={unit:Y.Percent,value:.8};function d(x){return typeof x=="number"?{unit:Y.Percent,value:x*100}:typeof x=="string"?x.match(/^(\d*(\.\d+)?)px$/)?{unit:Y.Pixel,value:parseFloat(x)}:x.match(/^(\d*(\.\d+)?)%$/)?{unit:Y.Percent,value:parseFloat(x)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),ke):(console.warn("scrollThreshold should be string or number"),ke)}var Fe=function(x){we(b,x);function b(a){var t=x.call(this,a)||this;return t.lastScrollTop=0,t.actionTriggered=!1,t.startY=0,t.currentY=0,t.dragging=!1,t.maxPullDownDistance=0,t.getScrollableTarget=function(){return t.props.scrollableTarget instanceof HTMLElement?t.props.scrollableTarget:typeof t.props.scrollableTarget=="string"?document.getElementById(t.props.scrollableTarget):(t.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},t.onStart=function(o){t.lastScrollTop||(t.dragging=!0,o instanceof MouseEvent?t.startY=o.pageY:o instanceof TouchEvent&&(t.startY=o.touches[0].pageY),t.currentY=t.startY,t._infScroll&&(t._infScroll.style.willChange="transform",t._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},t.onMove=function(o){t.dragging&&(o instanceof MouseEvent?t.currentY=o.pageY:o instanceof TouchEvent&&(t.currentY=o.touches[0].pageY),!(t.currentY<t.startY)&&(t.currentY-t.startY>=Number(t.props.pullDownToRefreshThreshold)&&t.setState({pullToRefreshThresholdBreached:!0}),!(t.currentY-t.startY>t.maxPullDownDistance*1.5)&&t._infScroll&&(t._infScroll.style.overflow="visible",t._infScroll.style.transform="translate3d(0px, "+(t.currentY-t.startY)+"px, 0px)")))},t.onEnd=function(){t.startY=0,t.currentY=0,t.dragging=!1,t.state.pullToRefreshThresholdBreached&&(t.props.refreshFunction&&t.props.refreshFunction(),t.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){t._infScroll&&(t._infScroll.style.overflow="auto",t._infScroll.style.transform="none",t._infScroll.style.willChange="unset")})},t.onScrollListener=function(o){typeof t.props.onScroll=="function"&&setTimeout(function(){return t.props.onScroll&&t.props.onScroll(o)},0);var m=t.props.height||t._scrollableNode?o.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!t.actionTriggered){var A=t.props.inverse?t.isElementAtTop(m,t.props.scrollThreshold):t.isElementAtBottom(m,t.props.scrollThreshold);A&&t.props.hasMore&&(t.actionTriggered=!0,t.setState({showLoader:!0}),t.props.next&&t.props.next()),t.lastScrollTop=m.scrollTop}},t.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:a.dataLength},t.throttledOnScrollListener=L(150,t.onScrollListener).bind(t),t.onStart=t.onStart.bind(t),t.onMove=t.onMove.bind(t),t.onEnd=t.onEnd.bind(t),t}return b.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},b.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},b.prototype.componentDidUpdate=function(a){this.props.dataLength!==a.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},b.getDerivedStateFromProps=function(a,t){var o=a.dataLength!==t.prevDataLength;return o?se(se({},t),{prevDataLength:a.dataLength}):null},b.prototype.isElementAtTop=function(a,t){t===void 0&&(t=.8);var o=a===document.body||a===document.documentElement?window.screen.availHeight:a.clientHeight,m=d(t);return m.unit===Y.Pixel?a.scrollTop<=m.value+o-a.scrollHeight+1:a.scrollTop<=m.value/100+o-a.scrollHeight+1},b.prototype.isElementAtBottom=function(a,t){t===void 0&&(t=.8);var o=a===document.body||a===document.documentElement?window.screen.availHeight:a.clientHeight,m=d(t);return m.unit===Y.Pixel?a.scrollTop+o>=a.scrollHeight-m.value:a.scrollTop+o>=m.value/100*a.scrollHeight},b.prototype.render=function(){var a=this,t=se({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),o=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),m=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return ce.createElement("div",{style:m,className:"infinite-scroll-component__outerdiv"},ce.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(A){return a._infScroll=A},style:t},this.props.pullDownToRefresh&&ce.createElement("div",{style:{position:"relative"},ref:function(A){return a._pullDown=A}},ce.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!o&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},b}(ce.Component);ye.Z=Fe}}]);
