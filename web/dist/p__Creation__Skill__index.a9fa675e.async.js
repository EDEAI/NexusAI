(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{82826:function(Y,R,t){"use strict";t.d(R,{Z:function(){return u}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},o=H,g=t(91146),M=function(T,S){return s.createElement(g.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:S,icon:o}))},U=s.forwardRef(M),u=U},89035:function(Y,R,t){"use strict";t.d(R,{Z:function(){return u}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},o=H,g=t(91146),M=function(T,S){return s.createElement(g.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:S,icon:o}))},U=s.forwardRef(M),u=U},81644:function(Y,R,t){"use strict";t.d(R,{Z:function(){return u}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},o=H,g=t(91146),M=function(T,S){return s.createElement(g.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:S,icon:o}))},U=s.forwardRef(M),u=U},2068:function(Y,R,t){"use strict";t.d(R,{Z:function(){return u}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},o=H,g=t(91146),M=function(T,S){return s.createElement(g.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:S,icon:o}))},U=s.forwardRef(M),u=U},15360:function(Y,R,t){"use strict";t.d(R,{Z:function(){return u}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},o=H,g=t(91146),M=function(T,S){return s.createElement(g.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:S,icon:o}))},U=s.forwardRef(M),u=U},83510:function(Y,R,t){"use strict";t.d(R,{LK:function(){return te},bs:function(){return L},go:function(){return ye},uy:function(){return z}});var N=t(15009),s=t.n(N),H=t(99289),o=t.n(H),g=t(47520),M="/v1/apps/apps_list",U="/v1/agent/agent_delete/",u="/v1/workflow/workflow_app_delete/",se="/v1/vector/delete_dataset/",T="/v1/skill/delete_skill_by_app_id/",S="/v1/apps/apps_create",ue="/v1/apps/app_update/",ye=function(){var w=o()(s()().mark(function b(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,g.ZP)("".concat(M),{method:"GET",data:a});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},b)}));return function(a){return w.apply(this,arguments)}}(),te=function(){var w=o()(s()().mark(function b(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(a),i.next=3,a.mode;case 3:if(i.t0=i.sent,i.t0!=1){i.next=8;break}i.t1=(0,g.ZP)("".concat(U).concat(a.app_id),{method:"DELETE"}),i.next=9;break;case 8:i.t1=a.mode==2?(0,g.ZP)("".concat(u).concat(a.app_id),{method:"DELETE"}):a.mode==3?(0,g.ZP)("".concat(se).concat(a.app_id),{method:"DELETE"}):(0,g.ZP)("".concat(T).concat(a.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return m=i.t1,i.abrupt("return",m);case 11:case"end":return i.stop()}},b)}));return function(a){return w.apply(this,arguments)}}(),z=function(){var w=o()(s()().mark(function b(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,g.ZP)("".concat(S),{method:"POST",data:a});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},b)}));return function(a){return w.apply(this,arguments)}}(),L=function(){var w=o()(s()().mark(function b(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,g.ZP)("".concat(ue).concat(a.app_id),{method:"PUT",data:a});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},b)}));return function(a){return w.apply(this,arguments)}}()},24805:function(Y,R,t){"use strict";t.d(R,{Hb:function(){return T},Ur:function(){return ye},cN:function(){return ue},ej:function(){return S}});var N=t(15009),s=t.n(N),H=t(99289),o=t.n(H),g=t(47520),M="/v1/skill/skill_info/",U="/v1/skill/skill_update/",u="/v1/skill/skill_publish/",se="/v1/skill/skill_run",T=function(){var te=o()(s()().mark(function z(L,w){var b;return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,g.ZP)("".concat(M).concat(L),{method:"GET",data:{publish_status:w=="true"?1:0}});case 2:return b=m.sent,m.abrupt("return",b);case 4:case"end":return m.stop()}},z)}));return function(L,w){return te.apply(this,arguments)}}(),S=function(){var te=o()(s()().mark(function z(L){var w;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("".concat(U).concat(L.app_id),{method:"PUT",data:L.data});case 2:return w=a.sent,a.abrupt("return",w);case 4:case"end":return a.stop()}},z)}));return function(L){return te.apply(this,arguments)}}(),ue=function(){var te=o()(s()().mark(function z(L){var w;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("".concat(u).concat(L),{method:"PUT"});case 2:return w=a.sent,a.abrupt("return",w);case 4:case"end":return a.stop()}},z)}));return function(L){return te.apply(this,arguments)}}(),ye=function(){var te=o()(s()().mark(function z(L){var w;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("".concat(se),{method:"POST",data:L});case 2:return w=a.sent,a.abrupt("return",w);case 4:case"end":return a.stop()}},z)}));return function(L){return te.apply(this,arguments)}}()},31664:function(Y,R,t){"use strict";t.r(R),t.d(R,{default:function(){return lt}});var N=t(97857),s=t.n(N),H=t(15009),o=t.n(H),g=t(99289),M=t.n(g),U=t(5574),u=t.n(U),se=t(83510),T=t(24805),S=t(10759),ue=t(32332),ye=t(2068),te=t(89035),z=t(81644),L=t(15360),w=t(82826),b=t(35312),a=t(40741),m=t(45360),W=t(28036),i=t(50136),Me=t(74330),C=t(67294),ve=t(92939),Ce=t(5608),fe=t(26915),Pe=t(72269),e=t(85893),Ft=fe.Z.TextArea,Ge=function(l){var y=l.FirstValue,G=l.FirstSkillref,f=l.Skillinfo,r=l.setSkillInfo,le=l.Operationbentate,de=l.firstjudgingcondition,Q=l.pageKeyfun,p=l.skillmenudisabled,me=l.setskillmenudisabled,F=(0,b.useIntl)();(0,C.useEffect)(function(){},[]);var ae=function(P){r(s()(s()({},f),{},{is_public:P?1:0}))},E=function(P){r(s()(s()({},f),{},{attrs_are_visible:P?1:0}))},h=function(P){r(s()(s()({},f),{},{input_variables:P.free}))},ne=function(P,$){var I=new S.Kr("output","","");P.users.forEach(function(k){var J=new S._w(k.name,k.type?k.type:"string","",k.content,k.status);I.addProperty(k.name,J)});var O={input_variables:I,is_public:f.is_public,attrs_are_visible:f.attrs_are_visible};y(O)},oe=function(){de(G.getFieldsValue().users,1)||G.validateFields().then(function(P){Q("2"),me(s()(s()({},p),{},{second:!1}))}).catch(function(P){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:F.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:function(P){y(P)},style:{width:900},autoComplete:"off",form:G,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(P,$){var I,O=$.add,k=$.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:F.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[f&&f.name,"\xA0"]})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:F.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:f&&f.description})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(ve.Z,{className:"font-medium text-xs text-[#555555]",name:F.formatMessage({id:"skill.teamvisibility"}),title:F.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(Pe.Z,{size:"small",onChange:ae,checked:!!(f&&f.is_public==1)})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",name:F.formatMessage({id:"agent.attrVisible"}),title:F.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(Pe.Z,{size:"small",onChange:E,checked:!!(f&&f.attrs_are_visible==1)})]}),(f==null?void 0:f.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Ce.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",required:!0,name:F.formatMessage({id:"skill.inputvariable"}),title:F.formatMessage({id:"skill.Callword.inputvariable"})})}),variableTypes:["string","number","json"],variables:Object.values((f==null||(I=f.input_variables)===null||I===void 0?void 0:I.properties)||{}),onChange:h})})]})}}),(0,e.jsxs)("div",{className:"mt-[20px]",children:[(0,e.jsx)(W.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){oe()},children:F.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(W.ZP,{onClick:function(){history.back()},children:F.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},He=Ge,Oe=t(92485),Ue=t(34041),ze=function(l){var y=l.SecondValue,G=l.handleBack,f=l.Skillinfo,r=l.setSkillInfo,le=l.SkillRelyOn,de=l.setSkillRelyOn,Q=l.Secondref,p=l.setskillcodestate,me=l.setNewcode,F=l.pageKeyfun,ae=l.skillmenudisabled,E=l.setskillmenudisabled,h=(0,b.useIntl)();(0,C.useEffect)(function(){},[]);var ne=function(I){de(I)},oe=function(I){p(I===""),me(JSON.stringify({python3:I}))},K=function(I){var O={dependencies:{python3:le?le.split(","):[]},code:f.code?f.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})};y(O)},P=function(){F("3"),E(s()(s()({},ae),{},{thirdly:!1}))};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:h.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:Q,children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(ve.Z,{className:"font-medium",name:h.formatMessage({id:"skill.dependency"}),title:h.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Ue.Z,{mode:"tags",style:{width:"100%"},value:le,onChange:ne,tokenSeparators:[","]})]}),(0,e.jsx)("div",{className:"text-xs text-gray-500 p-3 whitespace-pre-line border-l-4 mb-2 border-gray-300 bg-gray-50",children:"".concat(h.formatMessage({id:"customcode.notice.title"}),`:

`).concat(h.formatMessage({id:"customcode.notice.file.write"}),`\uFF1A
`).concat(h.formatMessage({id:"customcode.notice.file.write.desc"}),`
`).concat(h.formatMessage({id:"customcode.notice.file.write.example"}),`

`).concat(h.formatMessage({id:"customcode.notice.file.return"}),`\uFF1A
`).concat(h.formatMessage({id:"customcode.notice.file.return.desc"}),`
`).concat(h.formatMessage({id:"customcode.notice.file.return.example"}))}),(0,e.jsxs)(a.Z.Item,{children:[(0,e.jsx)("div",{className:"",children:h.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-[345px]",children:(0,e.jsx)(Oe.Z,{language:"python3",value:f&&f.code?JSON.parse(f.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,onChange:oe,title:"python3"})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(W.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){P()},children:h.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(W.ZP,{onClick:function(){history.back()},children:h.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Ke=ze,ke=t(78045),wt=fe.Z.TextArea,Zt=fe.Z.Search,$e=function(l){var y=l.ThirdlyValue,G=l.Thirdlyref,f=l.handleBack,r=l.Skillinfo,le=l.setSkillInfo,de=l.Operationbentate,Q=l.firstjudgingcondition,p=l.pageKeyfun,me=l.skillmenudisabled,F=l.setskillmenudisabled,ae=l.skillupdata,E=(0,b.useIntl)(),h=(0,C.useState)(null),ne=u()(h,2),oe=ne[0],K=ne[1];(0,C.useEffect)(function(){},[]);var P=function(J){le(s()(s()({},r),{},{output_type:J.target.value}))},$=function(J){le(s()(s()({},r),{},{output_variables:J.free}))},I=function(J){var ie=new S.Kr("output","","");J.users.forEach(function(q){var X=new S._w(q.name,q.type?q.type:"string","",q.content,!1);ie.addProperty(q.name,X)});var d={output_type:r.output_type,output_variables:ie};y(d)},O=function(){Q(G.getFieldsValue().users,2)||G.validateFields().then(function(J){ae()}).catch(function(J){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsxs)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:[" ",E.formatMessage({id:"skill.menu.output"})]})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:I,style:{width:900},autoComplete:"off",form:G,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(J,ie){var d,q=ie.add,X=ie.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(ve.Z,{name:E.formatMessage({id:"skill.outputvariable"}),title:E.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(ke.ZP.Group,{onChange:P,value:r&&r.output_type,children:[(0,e.jsx)(ke.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:E.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(ke.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:E.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(ke.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:E.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(ke.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:E.formatMessage({id:"skill.radio.file"})})})]})]}),(r==null?void 0:r.output_variables)&&(0,e.jsx)("div",{className:"",children:(0,e.jsx)(Ce.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",required:!0,name:E.formatMessage({id:"skill.outputv"}),title:E.formatMessage({id:"skill.Callword.outputv"})})}),variableTypes:["string","number","json","file"],variables:Object.values((r==null||(d=r.output_variables)===null||d===void 0?void 0:d.properties)||{}),onChange:$})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(W.ZP,{type:"primary",className:"mr-[20px] mt-[30px]",onClick:function(){O()},children:[" ",E.formatMessage({id:"skill.btn.savedebug"})]}),(0,e.jsx)(W.ZP,{onClick:function(){history.back()},children:E.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},We=$e,Je=t(13769),Xe=t.n(Je),Ye=t(49677),Qe=t.n(Ye),qe=t(68672),et=["key","name"],Nt=fe.Z.TextArea,Mt=fe.Z.Search,tt=function(l){var y=l.FourthlyValue,G=l.Fourthlyref,f=l.handleBack,r=l.Skillinfo,le=l.Operationbentate,de=l.skillid,Q=l.app_id,p=(0,b.useIntl)(),me=(0,C.useState)(null),F=u()(me,2),ae=F[0],E=F[1],h=(0,C.useState)(!1),ne=u()(h,2),oe=ne[0],K=ne[1];(0,C.useEffect)(function(){},[]);var P=function(){var X=M()(o()().mark(function V(){var D;return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,T.cN)(Q||r.app_id);case 2:D=A.sent,D.code==0?m.ZP.success(p.formatMessage({id:"skill.publishsuccess"})):m.ZP.error(p.formatMessage({id:"skill.select.value"}));case 4:case"end":return A.stop()}},V)}));return function(){return X.apply(this,arguments)}}(),$=function(V){var D=V.users.filter(function(x,j){return x.type=="number"&&!Number(x.value)&&!!x.value});if(D.length>0)m.ZP.warning(p.formatMessage({id:"skill.message.warning.vlaue"}));else{K(!0);var _=new S.Kr("output","","");V.users.forEach(function(x){var j=new S._w(x.name,x.type,x.type=="string"?x.value:Number(x.value),x.content,x.status);_.addProperty(x.name,j)});var A={skill_id:de||r.id,input_dict:_};ie(A)}},I=(0,C.useState)([]),O=u()(I,2),k=O[0],J=O[1],ie=function(){var X=M()(o()().mark(function V(D){return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:(0,T.Ur)(D).then(function(x){m.ZP.success(p.formatMessage({id:"skill.run.success"})),E(x.data.outputs),J(x.data.file_list||[]),K(!1)}).catch(function(x){K(!1),x.code==="ERR_NETWORK"&&m.ZP.error(p.formatMessage({id:"skill.run.error"})),console.log(x,"err-===>")});case 1:case"end":return A.stop()}},V)}));return function(D){return X.apply(this,arguments)}}(),d=function(){var X=M()(o()().mark(function V(){return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:b.history.push("/Skill?app_id=".concat(Q||(r==null?void 0:r.app_id),"&type=false")),location.reload();case 2:case"end":return _.stop()}},V)}));return function(){return X.apply(this,arguments)}}(),q=function(){var X=M()(o()().mark(function V(D){var _,A;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,fetch("/api/novel/".concat(novelId,"/outline"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});case 3:if(_=j.sent,_.ok){j.next=6;break}throw new Error("HTTP error! status: ".concat(_.status));case 6:return j.next=8,_.json();case 8:A=j.sent,m.ZP.success("\u4FDD\u5B58\u6210\u529F"),j.next=16;break;case 12:j.prev=12,j.t0=j.catch(0),console.error("Error saving outline:",j.t0),m.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 16:case"end":return j.stop()}},V,null,[[0,12]])}));return function(D){return X.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:p.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:$,style:{width:900},autoComplete:"off",form:G,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsxs)("div",{children:[" ",p.formatMessage({id:"skill.inputvariable"})]})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:p.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:p.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(a.Z.List,{name:"users",children:function(V,D){return Qe()(D),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:V.map(function(_){var A=_.key,x=_.name,j=Xe()(_,et);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,s()(s()({},j),{},{name:[x,"content"],children:(0,e.jsx)(fe.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless"})})),(0,e.jsx)(a.Z.Item,s()(s()({},j),{},{name:[x,"value"],rules:[{required:!!(G.getFieldsValue()&&G.getFieldsValue().users[A].status==!0),message:p.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(fe.Z,{placeholder:G.getFieldsValue()&&G.getFieldsValue().users[A].status==!0?p.formatMessage({id:"skill.variantcontent.required"}):p.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(a.Z.Item,{rules:[{required:!0,message:p.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:p.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Me.Z,{spinning:oe,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:ae?(0,e.jsx)(Oe.Z,{language:"python3",value:ae&&JSON.stringify(ae)}):null}),k.length>0&&(0,e.jsx)(qe.Z,{files:k,title:p.formatMessage({id:"agent.file.output"}),className:"mb-4"}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(W.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:p.formatMessage({id:"skill.run"})})})})]})})]})]}),(0,e.jsx)("div",{className:"w-28",children:(r==null?void 0:r.publish_status)===1&&(r==null?void 0:r.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsxs)(W.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:d,children:[" ",p.formatMessage({id:"skill.amend"})]})}):(0,e.jsx)("div",{children:(0,e.jsxs)(W.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:P,children:[" ",p.formatMessage({id:"skill.publish"})]})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},at=tt,st=function(){var l,y=(0,b.useIntl)(),G=a.Z.useForm(),f=u()(G,1),r=f[0],le=a.Z.useForm(),de=u()(le,1),Q=de[0],p=a.Z.useForm(),me=u()(p,1),F=me[0],ae=a.Z.useForm(),E=u()(ae,1),h=E[0],ne=(0,C.useState)(0),oe=u()(ne,2),K=oe[0],P=oe[1],$=(0,C.useState)("1"),I=u()($,2),O=I[0],k=I[1],J=(0,C.useState)(null),ie=u()(J,2),d=ie[0],q=ie[1],X=(0,C.useState)(null),V=u()(X,2),D=V[0],_=V[1],A=(0,C.useState)(!0),x=u()(A,2),j=x[0],Ct=x[1],nt=(0,C.useState)(!1),_e=u()(nt,2),Pt=_e[0],it=_e[1],rt=(0,C.useState)(null),Te=u()(rt,2),Ze=Te[0],ut=Te[1],dt=(0,C.useState)(null),Ee=u()(dt,2),je=Ee[0],Ie=Ee[1],ot=(0,C.useState)(null),Ve=u()(ot,2),ct=Ve[0],De=Ve[1],mt=(0,C.useState)(!1),Re=u()(mt,2),ft=Re[0],Se=Re[1],pt=(0,C.useState)({first:!1,second:!1,thirdly:!1,fourthly:!1}),Ae=u()(pt,2),ce=Ae[0],he=Ae[1],vt=[{key:"1",disabled:ce.first,icon:(0,e.jsx)(ye.Z,{}),label:y.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:O=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:ce.second,icon:(0,e.jsx)(te.Z,{}),label:y.formatMessage({id:"skill.menu.code"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:O=="2"?"#1B64F3":"#213044"}},{key:"3",disabled:ce.thirdly,icon:(0,e.jsx)(z.Z,{}),label:y.formatMessage({id:"skill.menu.output"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:O=="3"?"#1B64F3":"#213044"}},{key:"4",disabled:ce.fourthly,icon:(0,e.jsx)(L.Z,{}),label:y.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:O=="4"?"#1B64F3":"#213044"}}];(0,C.useEffect)(function(){Se(!0);var B=new URLSearchParams(window.location.search);B.get("app_id")||he({first:!1,second:!0,thirdly:!0,fourthly:!0}),Be()},[]);var Be=function(){var B=M()(o()().mark(function c(Z){var n,v,ee,Fe,re;return o()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(n=new URLSearchParams(window.location.search),v=null,!(n.get("app_id")||Z)){pe.next=10;break}return pe.next=5,(0,T.Hb)(Z||n.get("app_id"),n.get("type"));case 5:v=pe.sent,Ie(v.data.app_id),De(v.data.id),pe.next=11;break;case 10:v=(0,ue.iJ)();case 11:Se(!1),v.code==0?(q(v.data),ee=xe(v.data.input_variables),r.setFieldsValue(ee),_(v.data.dependencies?v.data.dependencies.python3:[]),Fe=xe(v.data.output_variables),F.setFieldsValue(Fe),re=xe(v.data.input_variables),h.setFieldsValue(re)):m.ZP.error(y.formatMessage({id:"skill.message.listerror"}));case 13:case"end":return pe.stop()}},c)}));return function(Z){return B.apply(this,arguments)}}(),xe=function(c){var Z={users:c&&c.properties?Object.values(c.properties).map(function(n){return{name:n.name,type:n.type,content:n.display_name,status:n.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return Z},ge=function(){var B=M()(o()().mark(function c(Z,n){var v,ee;return o()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return v={app_id:n||je,data:Z},re.next=3,(0,T.ej)(v);case 3:ee=re.sent,Se(!1),ee.code===0&&(m.ZP.success(y.formatMessage({id:"skill.conserve.success"})),Be(n||je),Se(!1));case 6:case"end":return re.stop()}},c)}));return function(Z,n){return B.apply(this,arguments)}}(),ht=function(){history.back()},xt=function(c,Z){debugger;ge(c,Z);debugger;var n=xe(c.input_variables);debugger;h.setFieldsValue(n)},gt=function(c){ge(c)},bt=function(c){ge(c)},yt=function(c){ge(c)},Ne=function(c){P(c)},kt=function(c){k(c.key)},jt=function(){if(Se(!0),!je)(0,se.uy)((0,ue.Go)("GET")).then(function(n){Ie(n.data.app_id),(0,T.Hb)(n.data.app_id,!1).then(function(v){De(v.data.id);var ee={};ee={input_variables:d.input_variables?d.input_variables:be(r.getFieldsValue()),is_public:d.is_public,attrs_are_visible:d.attrs_are_visible,dependencies:{python3:D||[]},code:Ze||(d.code?d.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:d.output_type,output_variables:d.output_variables?d.output_variables:be(F.getFieldsValue())};var Fe=xe(be(r.getFieldsValue()));h.setFieldsValue(Fe),ge(ee,n.data.app_id);var re=s()(s()({},(0,ue.Go)("GET")),{},{app_id:n.data.app_id});(0,ue.Go)("SET",re),k("4"),he(s()(s()({},ce),{},{fourthly:!1}))}).catch(function(v){})}).catch(function(n){});else{var c={input_variables:d.input_variables?d.input_variables:be(r.getFieldsValue()),is_public:d.is_public,attrs_are_visible:d.attrs_are_visible,dependencies:{python3:D||[]},code:Ze||(d.code?d.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:d.output_type,output_variables:d.output_variables?d.output_variables:be(F.getFieldsValue())},Z=xe(be(r.getFieldsValue()));h.setFieldsValue(Z),ge(c,je),k("4"),he(s()(s()({},ce),{},{fourthly:!1}))}},Le=function(c,Z){var n=c.filter(function(v){return!v||!v.name||!v.content});if(c[0]){if(n.length!==0)return m.ZP.warning("".concat(Z===1?y.formatMessage({id:"skill.message.inputerror3"}):y.formatMessage({id:"skill.message.inputerror4"}))),!0}else return m.ZP.warning("".concat(Z===1?y.formatMessage({id:"skill.message.inputerror1"}):y.formatMessage({id:"skill.message.inputerror2"}))),!0;return St(c,"name")?(m.ZP.warning(y.formatMessage({id:"skill.message.inputerror5"})),!0):!1},St=function(c,Z){var n=new Set;return c.some(function(v){var ee=v[Z];return n.has(ee)?n.add(ee):n.add(ee)&&!1})},be=function(c){var Z=new S.Kr("output","","");return c.users.forEach(function(n){var v=new S._w(n.name,n.type?n.type:"string",n.value?n.value:"",n.content,n.status?n.status:!1);Z.addProperty(n.name,v)}),Z};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(W.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:ht,children:[(0,e.jsx)(w.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:y.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(i.Z,{selectedKeys:[O],onClick:kt,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[O],mode:"inline",items:vt})})]}),(0,e.jsx)(Me.Z,{spinning:ft,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px] ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsx)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:(l=(0,ue.Go)("GET"))!==null&&l!==void 0&&l.app_id?y.formatMessage({id:"skill.Editingskill"}):y.formatMessage({id:"skill.Creatingskill"})}),(d==null?void 0:d.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:y.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE]  text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:y.formatMessage({id:"skill.unpublish"})})]})}),(0,e.jsx)("div",{style:{display:O==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(He,{FirstValue:xt,Skillinfo:d,setSkillInfo:q,FirstSkillref:r,Operationbentate:j,firstjudgingcondition:Le,pageKeyfun:k,skillmenudisabled:ce,setskillmenudisabled:he})}),(0,e.jsx)("div",{style:{display:O==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ke,{SecondValue:gt,handleBack:Ne,Skillinfo:d,setSkillInfo:q,SkillRelyOn:D,setSkillRelyOn:_,Secondref:Q,setskillcodestate:it,setNewcode:ut,pageKeyfun:k,skillmenudisabled:ce,setskillmenudisabled:he})}),(0,e.jsx)("div",{style:{display:O==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(We,{ThirdlyValue:bt,handleBack:Ne,Thirdlyref:F,Skillinfo:d,setSkillInfo:q,Operationbentate:j,firstjudgingcondition:Le,pageKeyfun:k,skillmenudisabled:ce,setskillmenudisabled:he,skillupdata:jt})}),(0,e.jsx)("div",{style:{display:O==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(at,{FourthlyValue:yt,handleBack:Ne,Fourthlyref:h,Skillinfo:d,skillid:ct,app_id:je,Operationbentate:j})})]})})})]})},lt=st},49677:function(Y){function R(t){if(t==null)throw new TypeError("Cannot destructure "+t)}Y.exports=R,Y.exports.__esModule=!0,Y.exports.default=Y.exports}}]);
