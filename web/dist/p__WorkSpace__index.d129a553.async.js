"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[316],{11475:function(Te,ne,a){a.d(ne,{Z:function(){return O}});var P=a(1413),u=a(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},y=f,m=a(91146),b=function(ce,Y){return u.createElement(m.Z,(0,P.Z)((0,P.Z)({},ce),{},{ref:Y,icon:y}))},se=u.forwardRef(b),O=se},35790:function(Te,ne,a){var P=a(1413),u=a(67294),f=a(19369),y=a(91146),m=function(O,oe){return u.createElement(y.Z,(0,P.Z)((0,P.Z)({},O),{},{ref:oe,icon:f.Z}))},b=u.forwardRef(m);ne.Z=b},11551:function(Te,ne,a){a.d(ne,{CU:function(){return D},CY:function(){return ve},Ce:function(){return de},Dh:function(){return d},Iw:function(){return le},LH:function(){return xe},My:function(){return pe},Nj:function(){return z},XB:function(){return ye},ek:function(){return Ce},pC:function(){return I},zl:function(){return ge}});var P=a(15009),u=a.n(P),f=a(99289),y=a.n(f),m=a(47520),b="/v1/agent/agent_info/",se="/v1/vector/dataset_list/2",O="/v1/agent/agent_base_update/",oe="/v1/agent/agent_abilities_set/",ce="/v1/agent/agent_output_set/",Y="/v1/agent/agent_engine_set/",me="/v1/agent/agent_publish/",N="/v1/agent/agent_run",Ce=function(){var v=y()(u()().mark(function t(r,i){var s;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("".concat(b).concat(r),{method:"GET",data:{publish_status:i=="true"?1:0}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},t)}));return function(r,i){return v.apply(this,arguments)}}(),ge=function(){var v=y()(u()().mark(function t(){var r;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,m.ZP)("".concat(se),{method:"GET"});case 2:return r=s.sent,s.abrupt("return",r);case 4:case"end":return s.stop()}},t)}));return function(){return v.apply(this,arguments)}}(),ye=function(){var v=y()(u()().mark(function t(r){var i;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("".concat(O).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return i=l.sent,l.abrupt("return",i);case 4:case"end":return l.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),le=function(){var v=y()(u()().mark(function t(r){var i;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("".concat(oe).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return i=l.sent,l.abrupt("return",i);case 4:case"end":return l.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),de=function(){var v=y()(u()().mark(function t(r){var i;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("".concat(ce).concat(r.agent_id),{method:"PUT",data:r});case 2:return i=l.sent,l.abrupt("return",i);case 4:case"end":return l.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),J=null,d=function(){var v=y()(u()().mark(function t(r){var i;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("".concat(me).concat(r),{method:"PUT"});case 2:return i=l.sent,l.abrupt("return",i);case 4:case"end":return l.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),xe=function(){var v=y()(u()().mark(function t(r){var i;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("".concat(N),{method:"POST",data:r});case 2:return i=l.sent,l.abrupt("return",i);case 4:case"end":return l.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),ve=function(){var v=y()(u()().mark(function t(r){var i;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("/v1/agent/agent_chat_message",{method:"POST",data:r});case 2:return i=l.sent,l.abrupt("return",i);case 4:case"end":return l.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),D=function(){var v=y()(u()().mark(function t(r,i){var s;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_message_list"),{method:"GET",data:{page:i,page_size:20}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},t)}));return function(r,i){return v.apply(this,arguments)}}(),pe=function(){var v=y()(u()().mark(function t(r,i){var s;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_log_list"),{method:"GET",data:i});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},t)}));return function(r,i){return v.apply(this,arguments)}}(),I=function(){var v=y()(u()().mark(function t(r,i){var s;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_log_details"),{method:"GET",data:{app_run_id:i}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},t)}));return function(r,i){return v.apply(this,arguments)}}(),z=function(){var v=y()(u()().mark(function t(r,i){var s;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/clear_agent_chat_memory"),{method:"POST",data:{message_id:i,agent_id:r}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},t)}));return function(r,i){return v.apply(this,arguments)}}()},85422:function(Te,ne,a){var P=a(15009),u=a.n(P),f=a(99289),y=a.n(f),m=a(5574),b=a.n(m),se=a(11551),O=a(39873),oe=a(28508),ce=a(29933),Y=a(35312),me=a(3917),N=a(66309),Ce=a(28036),ge=a(71471),ye=a(74330),le=a(26412),de=a(12845),J=a(67294),d=a(85893);ne.Z=(0,J.memo)(function(xe){var ve,D=xe.data,pe=xe.onClose,I=(0,Y.useIntl)(),z=(0,J.useState)(500),v=b()(z,2),t=v[0],r=v[1],i=(0,me.Z)(function(){var q=y()(u()().mark(function T(G,j){var ee;return u()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,se.pC)(G,j);case 2:return ee=V.sent,V.abrupt("return",ee.data);case 4:case"end":return V.stop()}},T)}));return function(T,G){return q.apply(this,arguments)}}(),{manual:!0}),s=i.data,l=i.loading,e=i.run;(0,J.useEffect)(function(){D!=null&&D.app_id&&D!==null&&D!==void 0&&D.app_run_id&&e(D.app_id,D.app_run_id)},[D==null?void 0:D.app_id,D==null?void 0:D.app_run_id,e]);var ue=function(T){var G={1:{color:"processing",text:I.formatMessage({id:"workflow.running"})},2:{color:"success",text:I.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:I.formatMessage({id:"workflow.runF"})}},j=G[T]||{color:"default",text:"Unknown"};return(0,d.jsx)(N.Z,{color:j.color,children:j.text})},ie=function(T){r(T)};return(0,d.jsx)(O.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:t,onChange:ie,children:(0,d.jsx)(ce.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,d.jsx)(Ce.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:pe,icon:(0,d.jsx)(oe.Z,{})}),title:(0,d.jsx)(ge.Z.Title,{level:5,children:I.formatMessage({id:"agent.log.detail"})}),loading:l,children:(0,d.jsx)("div",{className:"space-y-6",children:l?(0,d.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,d.jsx)(ye.Z,{})}):s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(le.Z,{column:1,bordered:!0,size:"small",children:[(0,d.jsx)(le.Z.Item,{label:I.formatMessage({id:"workflow.user"}),children:s.nickname}),(0,d.jsx)(le.Z.Item,{label:I.formatMessage({id:"workflow.status"}),children:ue(s.status)}),(0,d.jsx)(le.Z.Item,{label:I.formatMessage({id:"workflow.created_time"}),children:s.created_time}),(0,d.jsxs)(le.Z.Item,{label:I.formatMessage({id:"workflow.elapsed_time"}),children:[s.elapsed_time,"s"]}),(0,d.jsx)(le.Z.Item,{label:"Tokens",children:s.total_tokens})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(ge.Z.Title,{level:5,children:I.formatMessage({id:"agent.log.output"})}),s.outputs?(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:((ve=s.outputs)===null||ve===void 0?void 0:ve.value)||""})}):s.error?(0,d.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,d.jsx)("div",{className:"text-red-500 font-medium mb-2",children:I.formatMessage({id:"agent.log.error"})}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:s.error})]}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)("div",{className:"text-sm text-gray-500",children:I.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(s==null?void 0:s.prompt_data)&&s.prompt_data.length>0&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(ge.Z.Title,{level:5,children:I.formatMessage({id:"agent.log.conversation"})}),(0,d.jsx)(de.Z,{className:"mt-2",children:s.prompt_data.map(function(q,T){var G=b()(q,2),j=G[0],ee=G[1];return(0,d.jsx)(de.Z.Item,{color:j==="human"?"blue":"green",children:(0,d.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:j}),(0,d.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:ee.value})]})},T)})})]})]}):null})})})})},39873:function(Te,ne,a){var P=a(5574),u=a.n(P),f=a(42881),y=a(67294),m=a(85893),b=function(O){var oe=O.children,ce=O.className,Y=ce===void 0?"":ce,me=O.dragDirection,N=me===void 0?"left":me,Ce=O.minWidth,ge=Ce===void 0?415:Ce,ye=O.maxWidth,le=ye===void 0?820:ye,de=O.minHeight,J=de===void 0?200:de,d=O.maxHeight,xe=d===void 0?800:d,ve=O.defaultWidth,D=ve===void 0?415:ve,pe=O.defaultHeight,I=pe===void 0?300:pe,z=O.onChange,v=(0,y.useState)(D),t=u()(v,2),r=t[0],i=t[1],s=(0,y.useState)(I),l=u()(s,2),e=l[0],ue=l[1],ie=(0,y.useCallback)(function(j,ee){i(j),ee&&ue(ee),z==null||z(j,ee)},[i,ue,z]),q=(0,f.W)({direction:["left","right"].includes(N)?"horizontal":"vertical",triggerDirection:N,minWidth:ge,maxWidth:le,minHeight:J,maxHeight:xe,onResize:ie}),T=q.triggerRef,G=q.containerRef;return(0,m.jsxs)("div",{ref:G,style:{width:["left","right"].includes(N)?"".concat(r,"px"):void 0,height:["top","bottom"].includes(N)?"".concat(e,"px"):void 0},className:"flex flex-col p-4 shadow-lg rounded-md border border-blue-300 bg-white z-10 wrapPanel ".concat(Y),children:[N==="left"&&(0,m.jsx)("div",{ref:T,className:"absolute top-1/2 -translate-y-1/2 -left-2 w-3 h-6 cursor-col-resize resize-x",children:(0,m.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),N==="right"&&(0,m.jsx)("div",{ref:T,className:"absolute top-1/2 -translate-y-1/2 -right-2 flex justify-end w-3 h-6 cursor-col-resize resize-x",children:(0,m.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),N==="top"&&(0,m.jsx)("div",{ref:T,className:"absolute left-1/2 -translate-x-1/2 -top-2 h-3 w-6 cursor-row-resize resize-y",children:(0,m.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),N==="bottom"&&(0,m.jsx)("div",{ref:T,className:"absolute left-1/2 -translate-x-1/2 -bottom-2 h-3 w-6 cursor-row-resize resize-y",children:(0,m.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),oe]})};ne.Z=(0,y.memo)(b)},57329:function(Te,ne,a){a.r(ne),a.d(ne,{default:function(){return lt}});var P=a(56264),u=a(64456),f=a(67294),y=a(15009),m=a.n(y),b=a(99289),se=a.n(b),O=a(97857),oe=a.n(O),ce=a(5574),Y=a.n(ce),me=a(42237),N=a(29608),Ce=a(35790),ge=a(11475),ye=a(8751),le=a(97578),de=a(77598),J=a(97582),d=a(22638),xe=a(3917),ve=function(B,_){var S;_===void 0&&(_={});var R=_.defaultPageSize,p=R===void 0?10:R,C=_.defaultCurrent,M=C===void 0?1:C,L=(0,J._T)(_,["defaultPageSize","defaultCurrent"]),F=(0,xe.Z)(B,(0,J.pi)({defaultParams:[{current:M,pageSize:p}],refreshDepsAction:function(){we(1)}},L)),w=F.params[0]||{},W=w.current,E=W===void 0?1:W,A=w.pageSize,re=A===void 0?p:A,U=((S=F.data)===null||S===void 0?void 0:S.total)||0,Ne=(0,f.useMemo)(function(){return Math.ceil(U/re)},[re,U]),Q=function(te,$){var _e=te<=0?1:te,X=$<=0?1:$,Me=Math.ceil(U/X);_e>Me&&(_e=Math.max(1,Me));var Ee=(0,J.CR)(F.params||[]),k=Ee[0],Se=k===void 0?{}:k,n=Ee.slice(1);F.run.apply(F,(0,J.ev)([(0,J.pi)((0,J.pi)({},Se),{current:_e,pageSize:X})],(0,J.CR)(n),!1))},we=function(te){Q(te,re)},H=function(te){Q(E,te)};return(0,J.pi)((0,J.pi)({},F),{pagination:{current:E,pageSize:re,total:U,totalPage:Ne,onChange:(0,d.Z)(Q),changeCurrent:(0,d.Z)(we),changePageSize:(0,d.Z)(H)}})},D=ve,pe=a(78697),I=a(32332),z=a(35312),v=a(74330),t=a(83062),r=a(32983),i=a(29432),s=a(72252),l=a(71471),e=a(85893),ue=function(_){var S=_.iconSrc,R=_.titleText,p=_.pagination,C=_.showTotal,M=C===void 0?!0:C,L=_.titleAfter,F=L===void 0?null:L,w=(0,z.useIntl)();return(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)("img",{src:S,alt:""}),(0,e.jsx)("div",{children:R}),(0,e.jsx)("div",{children:(0,e.jsx)(s.Z,{size:"small",simple:!0,showTotal:function(E,A){return M?"".concat(w.formatMessage({id:"app.workflow.title.1"})).concat(A[0],"-").concat(A[1]).concat(w.formatMessage({id:"app.workflow.title.2"})," / ").concat(w.formatMessage({id:"app.workflow.title.3"})).concat(E," ").concat(w.formatMessage({id:"app.workflow.title.2"})):null},current:p.current,pageSize:p.pageSize,onShowSizeChange:null,total:p.total,onChange:p.onChange})}),F]})},ie=function(_){var S=_.item;console.log(S);var R=(0,z.useIntl)(),p="/icons/creation/",C="",M="";switch(S.type){case 1:M=R.formatMessage({id:"app.itemHeader.agent"}),C="Agent";break;case 2:M=R.formatMessage({id:"app.itemHeader.chatRoom"}),C="ChatRoom";break;case 3:M=R.formatMessage({id:"app.itemHeader.workFlow"}),C="WorkFlow";break;default:break}return p+=i.Le[C],(0,e.jsxs)("div",{className:"flex gap-5 shrink-0",children:[(0,e.jsx)("div",{className:"shrink-0",children:(0,e.jsx)(pe.Z,{Image:S.type==2?"/icons/chat_room.svg":(0,I.s9)("single",S.icon),icon:"".concat(p,".svg")})}),(0,e.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,e.jsx)("div",{className:"text-sm text-[#213044]",children:(0,e.jsx)(l.Z.Paragraph,{ellipsis:{rows:2,tooltip:S.name},className:"!mb-0",children:S.name})}),(0,e.jsx)("div",{className:"text-xs text-[#999999]",children:M})]})]})},q=function(){var B,_,S=(0,N.Z)(function(h){return h.setDealtWithData}),R=(0,N.Z)(function(h){return h.prevConfirmDealtWith}),p=(0,N.Z)(function(h){return h.dealtWithData}),C=(0,N.Z)(function(h){return h.setRunPanelLogRecord}),M=(0,N.Z)(function(h){return h.submitPromptId}),L=(0,z.useIntl)(),F=(0,f.useRef)(null),w=(0,f.useState)(null),W=Y()(w,2),E=W[0],A=W[1],re=(0,le.Z)("pageNumber"),U=Y()(re,2),Ne=U[0],Q=U[1],we=function(K){console.log(K),S(K)};(0,de.Z)(function(){var h=k.list.map(function(K){return K.exec_id==R.exec_id&&(K.need_human_confirm=0),K});Se(oe()(oe()({},k),{},{list:h}))},[R]);var H=function(){var h=se()(m()().mark(function K(Oe){var Re,g,c;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Re=Oe.current,g=Oe.pageSize,o.next=3,(0,me.VE)({current:Re,pageSize:g});case 3:return c=o.sent,o.abrupt("return",{list:c.data.list,success:!0,total:c.data.total_count});case 5:case"end":return o.stop()}},K)}));return function(Oe){return h.apply(this,arguments)}}(),te=D(H,{defaultPageSize:10}),$=te.data,_e=te.loading,X=te.pagination,Me=(0,f.useState)($),Ee=Y()(Me,2),k=Ee[0],Se=Ee[1];(0,f.useEffect)(function(){Se($)},[$]),(0,de.Z)(function(){F.current&&F.current.reload()},[M]);var n=(0,f.useCallback)(function(h){var K=h.item;return(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:K.app_name})," ",(0,e.jsx)(Ce.Z,{}),(0,e.jsx)("span",{className:K.need_human_confirm==1?"text-[#1B64F3]":"text-[#808183]",children:K.node_name})]}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate",children:K.app_run_name})]})},[k]);return(0,e.jsx)(v.Z,{spinning:_e,children:(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(ue,{iconSrc:"/icons/back_log.svg",titleText:L.formatMessage({id:"app.workflow.backlogs.title"}),pagination:X}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-2.5 mt-4 overflow-y-auto h-full",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[k==null||(B=k.list)===null||B===void 0?void 0:B.map(function(h,K){return h.type=3,(0,e.jsxs)("div",{onClick:function(){console.log(h),h.need_human_confirm&&(S(h),A(h),C(!1))},className:"flex items-center gap-5 cursor-pointer duration-200 rounded-lg  p-2.5 hover:bg-[#fafafa]",children:[(0,e.jsx)(pe.Z,{Image:(0,I.s9)("single",h.icon)}),(0,e.jsx)(n,{item:h}),(0,e.jsx)("div",{children:h.need_human_confirm?(0,e.jsx)(t.Z,{title:L.formatMessage({id:"workflow.needHumanConfirm"}),children:(0,e.jsx)(ge.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(t.Z,{title:L.formatMessage({id:"workflow.noHumanConfirm"}),children:(0,e.jsx)(ye.Z,{className:"text-[#52C41C]"})})})]},h.exec_id)}),!_e&&(k==null||(_=k.list)===null||_===void 0?void 0:_.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(r.Z,{image:"/images/empty.svg",description:L.formatMessage({id:"app.workflow.backlogs.empty"})})})]})]})})},T=a(29933),G=a(4393),j=G.Z.Meta,ee=function(){var B,_,S=(0,z.useIntl)(),R=function(W){console.log(W);var E=W.app_id||W.apps_id;switch(W.type){case 1:z.history.push("/Agents?app_id=".concat(E));break;case 2:z.history.push("/chat_room/".concat(W.chatroom_id));break;case 3:z.history.push("/workspace/workflow?app_id=".concat(E));break;default:break}},p=function(){var w=se()(m()().mark(function W(E){var A,re,U;return m()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return A=E.current,re=E.pageSize,Q.next=3,(0,me.vu)({current:A,pageSize:re});case 3:return U=Q.sent,Q.abrupt("return",{list:U.data.list,success:!0,total:U.data.total_count});case 5:case"end":return Q.stop()}},W)}));return function(E){return w.apply(this,arguments)}}(),C=D(p,{defaultPageSize:8}),M=C.data,L=C.loading,F=C.pagination;return console.log(L),(0,e.jsxs)("div",{className:"flex-grow-0",children:[(0,e.jsx)(ue,{iconSrc:"/icons/recently_active.svg",titleText:S.formatMessage({id:"app.workflow.ra.title"}),pagination:F}),(0,e.jsx)("div",{className:"grid grid-cols-4  gap-4 mt-4",children:M==null||(B=M.list)===null||B===void 0?void 0:B.map(function(w,W){var E=w.type==3?w.process_name:w.last_agent_name;return(0,e.jsx)(T.Z,{className:"h-[160px] cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",title:(0,e.jsx)(ie,{item:w}),onClick:function(){return R(w)},bodyStyle:{padding:"15px 20px"},children:(0,e.jsx)(l.Z.Paragraph,{ellipsis:{rows:2,tooltip:E},children:E})},w.app_id)})}),!(M!=null&&(_=M.list)!==null&&_!==void 0&&_.length)&&(0,e.jsxs)("div",{className:"h-[400px] w-full flex items-center justify-center",children:[!L&&(0,e.jsx)(r.Z,{imageStyle:{display:"flex",justifyContent:"center"},image:"/images/empty.svg",description:S.formatMessage({id:"app.workflow.ra.empty"})}),(0,e.jsx)(v.Z,{spinning:L})]})]})},be=a(68672),V=a(43722),ze=a(39873),Le=a(28508),Ie=a(66309),He=a(28036),De=a(26412),Be=a(22683),Z=a(97807),$e=a(86),Ze=a(38027),Ke=(0,f.memo)(function(B){var _,S,R,p,C,M,L,F,w,W,E,A,re,U,Ne,Q,we,H=B.data,te=B.onClose,$=(0,z.useIntl)(),_e=(0,f.useState)(500),X=Y()(_e,2),Me=X[0],Ee=X[1],k=(0,N.Z)(function(g){return g.setRunPanelLogRecord}),Se=(0,xe.Z)(function(){var g=se()(m()().mark(function c(x,o){var fe;return m()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,V.Gh)({chatroom_id:x,app_run_id:o});case 2:return fe=ae.sent,ae.abrupt("return",fe.data);case 4:case"end":return ae.stop()}},c)}));return function(c,x){return g.apply(this,arguments)}}(),{manual:!0}),n=Se.data,h=Se.loading,K=Se.run;(0,f.useEffect)(function(){H!=null&&H.chatroom_id&&H!==null&&H!==void 0&&H.app_run_id&&K(H.chatroom_id,H.app_run_id)},[H==null?void 0:H.chatroom_id,H==null?void 0:H.app_run_id,K]);var Oe=function(c){var x={1:{color:"processing",text:$.formatMessage({id:"workflow.running"})},2:{color:"success",text:$.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:$.formatMessage({id:"workflow.runF"})}},o=x[c]||{color:"default",text:"Unknown"};return(0,e.jsx)(Ie.Z,{color:o.color,children:o.text})},Re=function(c){Ee(c)};return(0,e.jsx)(ze.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:Me,onChange:Re,children:(0,e.jsx)(T.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,e.jsx)(He.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:te,icon:(0,e.jsx)(Le.Z,{})}),title:(0,e.jsx)(l.Z.Title,{level:5,children:$.formatMessage({id:"app.chatroom.log.title"})}),loading:h,children:(0,e.jsx)("div",{className:"space-y-6",children:h?(0,e.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,e.jsx)(v.Z,{})}):n!=null&&n.source_run?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(De.Z,{column:1,bordered:!0,size:"small",children:[(0,e.jsx)(De.Z.Item,{label:$.formatMessage({id:"app.chatroom.log.name"}),children:n.source_run.name}),(0,e.jsx)(De.Z.Item,{label:$.formatMessage({id:"workflow.created_time"}),children:n.source_run.created_time}),(0,e.jsx)(De.Z.Item,{label:$.formatMessage({id:"workflow.finished_time"}),children:n.source_run.finished_time}),(0,e.jsxs)(De.Z.Item,{label:$.formatMessage({id:"workflow.elapsed_time"}),children:[n.source_run.elapsed_time,"s"]}),(0,e.jsx)(De.Z.Item,{label:"Tokens",children:n.source_run.total_tokens})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(l.Z.Title,{level:5,children:"\u8BA8\u8BBA\u603B\u7ED3"}),(0,e.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:n.source_run.created_time}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"p-[12px]  leading-[22px] bg-gray-50 rounded mt-2",children:(0,e.jsx)(Be.U,{rehypePlugins:[Z.Z],children:n==null||(_=n.source_run)===null||_===void 0?void 0:_.summary})})})]}),n!=null&&n.source_corrections&&(n==null?void 0:n.source_corrections.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[$.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),n==null?void 0:n.source_corrections.map(function(g,c){return(0,e.jsx)("div",{className:"mb-[16px] last-of-type:mb-0",children:(0,e.jsx)("div",{className:"rounded-[4px]  ".concat((n==null?void 0:n.source_corrections.length)-1!=c?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[$.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",g.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[$.formatMessage({id:"app.summaryhistory.time"}),": ",g.created_time]}),(0,e.jsx)(Be.U,{rehypePlugins:[Z.Z],children:g==null?void 0:g.corrected_summary})]})})},g.created_time)})]}):(0,e.jsx)(e.Fragment,{}),n!=null&&n.target_run?(0,e.jsxs)("div",{className:"py-[12px]",children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[$.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,e.jsx)("span",{className:"font-[500] ",children:n!=null&&(S=n.target_run)!==null&&S!==void 0&&S.agent_id?"agent":"workflow"}),(0,e.jsx)("span",{className:"px-[6px]",children:":"}),(0,e.jsx)("span",{children:n==null||(R=n.target_run)===null||R===void 0||(R=R.app)===null||R===void 0?void 0:R.name})]})}),(0,e.jsx)("div",{children:n!=null&&(p=n.target_run)!==null&&p!==void 0&&(p=p.inputs)!==null&&p!==void 0&&p.properties?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[$.formatMessage({id:"app.summaryhistory.input"}),":"]}),(0,Ze.vw)(n==null||(C=n.target_run)===null||C===void 0||(C=C.inputs)===null||C===void 0?void 0:C.properties).map(function(g){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:g.display_name||g.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:g.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{children:n!=null&&(M=n.target_run)!==null&&M!==void 0&&M.raw_user_prompt?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[$.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:n==null||(L=n.target_run)===null||L===void 0?void 0:L.raw_user_prompt})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[$.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(n==null||(F=n.target_run)===null||F===void 0?void 0:F.agent_id)!=0?(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(Be.U,{rehypePlugins:[Z.Z],children:n==null||(w=n.target_run)===null||w===void 0||(w=w.outputs)===null||w===void 0?void 0:w.value})}):(0,e.jsx)($e.Z,{status:n==null||(W=n.target_run)===null||W===void 0?void 0:W.status,icon:n==null||(E=n.target_run)===null||E===void 0?void 0:E.icon,title:n==null||(A=n.target_run)===null||A===void 0?void 0:A.name,textDetails:(0,e.jsx)(Ze.p1,{progressObj:{created_time:n==null||(re=n.target_run)===null||re===void 0?void 0:re.created_time,elapsed_time:n==null||(U=n.target_run)===null||U===void 0?void 0:U.elapsed_time,app_name:n==null||(Ne=n.target_run)===null||Ne===void 0?void 0:Ne.app.name,status:n==null||(Q=n.target_run)===null||Q===void 0?void 0:Q.status}}),handleClick:function(){var c,x,o,fe,Pe,ae,je,We,he,Ae;k({app_id:n==null||(c=n.target_run)===null||c===void 0||(c=c.app)===null||c===void 0?void 0:c.id,app_name:n==null||(x=n.target_run)===null||x===void 0||(x=x.app)===null||x===void 0?void 0:x.name,icon:n==null||(o=n.target_run)===null||o===void 0?void 0:o.icon,workflow_id:n==null||(fe=n.target_run)===null||fe===void 0?void 0:fe.workflow_id,type:2,app_run_id:n==null||(Pe=n.target_run)===null||Pe===void 0?void 0:Pe.id,run_name:n==null||(ae=n.target_run)===null||ae===void 0?void 0:ae.name,status:n==null||(je=n.target_run)===null||je===void 0?void 0:je.status,created_time:n==null||(We=n.target_run)===null||We===void 0?void 0:We.created_time,elapsed_time:n==null||(he=n.target_run)===null||he===void 0?void 0:he.elapsed_time,completed_progress:"".concat(n==null||(Ae=n.target_run)===null||Ae===void 0?void 0:Ae.percentage,"%")})},progress:n==null||(we=n.target_run)===null||we===void 0?void 0:we.percentage})})]})]}):(0,e.jsx)(e.Fragment,{})]}):null})})})}),Ge=a(85422),Ue=a(1413),Fe=a(99011),Ve=a(91146),Xe=function(_,S){return f.createElement(Ve.Z,(0,Ue.Z)((0,Ue.Z)({},_),{},{ref:S,icon:Fe.Z}))},Ye=f.forwardRef(Xe),Je=Ye,Qe=a(88284),ke=a(28058),qe=a(2068),et=a(44720),tt=a(38703),at=a(55241),rt=a(34041),nt=(0,f.memo)(function(){var B,_,S=(0,N.Z)(function(g){return g.setDealtWithData}),R=(0,N.Z)(function(g){return g.setRunPanelLogRecord}),p=(0,z.useIntl)(),C=(0,f.useState)(0),M=Y()(C,2),L=M[0],F=M[1],w=function(c){var x=c.text;switch(x){case 1:return(0,e.jsx)(Je,{className:"text-blue-500"});case 2:return(0,e.jsx)(Qe.Z,{className:"text-green-500"});case 3:return(0,e.jsx)(ke.Z,{className:"text-red-500"})}return(0,e.jsx)("span",{children:x})},W=function(){var g=se()(m()().mark(function c(x){var o,fe,Pe,ae,je;return m()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return o=x.current,fe=x.pageSize,Pe=x.showStatus,ae=Pe===void 0?0:Pe,he.next=3,(0,me.PE)({current:o,pageSize:fe,showStatus:ae});case 3:return je=he.sent,he.abrupt("return",{list:je.data.list,success:!0,total:je.data.total_count});case 5:case"end":return he.stop()}},c)}));return function(x){return g.apply(this,arguments)}}(),E=D(function(g){var c=g.current,x=g.pageSize;return W({current:c,pageSize:x,showStatus:L})},{defaultPageSize:10,refreshDeps:[L]}),A=E.data,re=E.loading,U=E.pagination,Ne=E.run,Q=(0,f.useState)(!1),we=Y()(Q,2),H=we[0],te=we[1],$=(0,f.useState)(null),_e=Y()($,2),X=_e[0],Me=_e[1],Ee=(0,f.useState)(!1),k=Y()(Ee,2),Se=k[0],n=k[1],h=function(){te(!1),n(!1)},K=function(c){switch(c.show_status){case 1:Me(c),te(!1),n(!0);break;case 2:Me(c),n(!1),te(!0);break;case 3:R(c),S(null);break;default:break}},Oe=function(c){var x=c.type;switch(x){case 1:return(0,e.jsx)(Ie.Z,{color:"blue",children:p.formatMessage({id:"app.workflow.log.type.roundtable"})});case 2:return(0,e.jsx)(Ie.Z,{color:"green",children:p.formatMessage({id:"app.workflow.log.type.agent"})});case 3:return(0,e.jsx)(Ie.Z,{color:"purple",children:p.formatMessage({id:"app.workflow.log.type.workflow"})})}},Re=(0,f.memo)(function(g){var c,x,o=g.item,fe=o.status==1?"#1B64F3":o.status==2?"#22C55F":"#F04444",Pe=o.status==1?"#f9fafe":o.status==2?"#f6fcf3":"#fafafa",ae=(0,f.useRef)(null),je=(0,et.Z)(ae),We=function(){return o.show_status==1?o.chat_room_name:o.show_status==2?o.app_runs_name:o.show_status==3?p.formatMessage({id:"app.workflow.log.roundtable.guidance"},{name:o.associated_chat_room_name}):o.apps_name},he=function(){return o.show_status==1&&o.apps_name?p.formatMessage({id:"app.workflow.log.guidance.execution"},{type:o.model==1?p.formatMessage({id:"app.workflow.log.type.agent.simple"}):p.formatMessage({id:"app.workflow.log.type.workflow.simple"}),name:o.apps_name}):o.apps_name};return(0,e.jsxs)("div",{onClick:function(){K(o)},ref:ae,className:"flex relative rounded truncate gap-5  items-center shrink-0 cursor-pointer duration-200  box-border py-2.5 pr-5 ",children:[(0,e.jsx)("div",{style:{backgroundColor:je?Pe:"",width:je?"".concat(o.completed_steps/o.total_steps*100,"%"):"0%",transition:"0.5s"},className:"w-full h-full absolute left-0 duration-500"}),(0,e.jsx)("div",{style:{backgroundColor:fe},className:"w-[4px] h-full z-10 mr-[10px] absolute"}),(0,e.jsx)("div",{className:"ml-5",children:(0,e.jsx)(pe.Z,{Image:(0,I.s9)("single",o.icon)})}),(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1  z-10",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("span",{children:[(0,e.jsx)(Oe,{type:o.show_status}),(0,e.jsx)(We,{})]})}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate  max-w-7/8",children:(0,e.jsxs)("div",{className:"flex items-center truncate",children:[(0,e.jsxs)("span",{children:[" ",o.created_time," "]}),(0,e.jsx)("span",{style:{maxWidth:"calc(100% - 200px)"},className:"truncate ml-2 ",children:(0,e.jsx)(he,{})}),(o.show_status==3||o.show_status==2)&&(0,e.jsxs)("span",{className:"inline-flex items-center ml-2 gap-2",children:[(0,e.jsx)("span",{style:{backgroundColor:fe},className:"inline-block w-1 h-1 rounded-sm"}),(c=o.elapsed_time)===null||c===void 0?void 0:c.toFixed(6),"S"]})]})})]}),o.total_steps!=o.completed_steps&&(0,e.jsx)("div",{className:"flex items-center justify-center",children:(0,e.jsx)(tt.Z,{type:"circle",size:30,percent:parseInt(o.completed_steps/o.total_steps*100)})}),o.show_status==3&&(o==null||(x=o.file_list)===null||x===void 0?void 0:x.length)>0&&(0,e.jsx)("div",{className:"flex items-center justify-center z-20",children:(0,e.jsx)(at.Z,{content:(0,e.jsx)(be.Z,{files:o==null?void 0:o.file_list}),placement:"leftTop",title:p.formatMessage({id:"app.workflow.log.output.files"}),children:(0,e.jsx)(qe.Z,{className:"text-[22px] text-green-600"})})})]},o.app_run_id)});return(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(ue,{iconSrc:"/icons/workflows.svg",titleText:p.formatMessage({id:"app.workflow.log.title"}),pagination:U,showTotal:!1,titleAfter:(0,e.jsx)("div",{className:"flex-1 flex justify-end",children:(0,e.jsx)(rt.Z,{defaultValue:0,className:"w-full max-w-[120px]",allowClear:!0,style:{maxWidth:"120px"},onChange:function(c){var x;F(c),(x=U.onChange)===null||x===void 0||x.call(U,1,U.pageSize)},size:"small",options:[{label:p.formatMessage({id:"app.workflow.log.filter.all"}),value:0},{label:p.formatMessage({id:"app.workflow.log.filter.roundtable"}),value:1},{label:p.formatMessage({id:"app.workflow.log.filter.agent"}),value:2},{label:p.formatMessage({id:"app.workflow.log.filter.workflow"}),value:3}]})})}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-4 h-full mt-4 overflow-y-auto box-border relative flex flex-col gap-5",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[A==null||(B=A.list)===null||B===void 0?void 0:B.map(function(g,c){return(0,e.jsx)(Re,{item:g})}),!re&&(A==null||(_=A.list)===null||_===void 0?void 0:_.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(r.Z,{image:"/images/empty.svg",description:p.formatMessage({id:"app.workflow.log.empty"})})})]}),H&&(X==null?void 0:X.app_run_id)&&(0,e.jsx)(Ge.Z,{data:X,onClose:h}),Se&&(0,e.jsx)(Ke,{data:{chatroom_id:X==null?void 0:X.chatroom_id,app_run_id:X==null?void 0:X.app_run_id},onClose:h})]})}),st=function(){return(0,e.jsxs)("div",{style:{height:"calc(100vh - 56px)"},className:"w-full p-[30px] flex flex-col gap-6 overflow-x-auto box-border",children:[(0,e.jsx)(ee,{}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-6 flex-1",children:[(0,e.jsx)(q,{}),(0,e.jsx)(nt,{})]}),(0,e.jsx)(P.$_,{}),(0,e.jsx)(u.Z,{})]})},lt=st},12845:function(Te,ne,a){a.d(ne,{Z:function(){return v}});var P=a(67294),u=a(93967),f=a.n(u),y=a(53124),m=a(35792),b=a(861),se=a(14747),O=a(83559),oe=a(83262);const ce=t=>{const{componentCls:r,calc:i}=t;return{[r]:Object.assign(Object.assign({},(0,se.Wf)(t)),{margin:0,padding:0,listStyle:"none",[`${r}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:i(i(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,b.unit)(t.itemHeadSize)})`,borderInlineStart:`${(0,b.unit)(t.tailWidth)} ${t.lineType} ${t.tailColor}`},"&-pending":{[`${r}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${r}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${(0,b.unit)(t.dotBorderWidth)} ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:i(t.itemHeadSize).div(2).equal(),insetInlineStart:i(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:i(i(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:i(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${r}-item-tail`]:{display:"none"},[`> ${r}-item-content`]:{minHeight:i(t.controlHeightLG).mul(1.2).equal()}}},[`&${r}-alternate,
        &${r}-right,
        &${r}-label`]:{[`${r}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:i(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:i(t.tailWidth).div(2).equal()}},"&-left":{[`${r}-item-content`]:{insetInlineStart:`calc(50% - ${(0,b.unit)(t.marginXXS)})`,width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,textAlign:"start"}},"&-right":{[`${r}-item-content`]:{width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${r}-right`]:{[`${r}-item-right`]:{[`${r}-item-tail,
            ${r}-item-head,
            ${r}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,b.unit)(i(i(t.itemHeadSize).add(t.tailWidth)).div(2).equal())})`},[`${r}-item-content`]:{width:`calc(100% - ${(0,b.unit)(i(t.itemHeadSize).add(t.marginXS).equal())})`}}},[`&${r}-pending
        ${r}-item-last
        ${r}-item-tail`]:{display:"block",height:`calc(100% - ${(0,b.unit)(t.margin)})`,borderInlineStart:`${(0,b.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`&${r}-reverse
        ${r}-item-last
        ${r}-item-tail`]:{display:"none"},[`&${r}-reverse ${r}-item-pending`]:{[`${r}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${(0,b.unit)(t.margin)})`,borderInlineStart:`${(0,b.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`${r}-item-content`]:{minHeight:i(t.controlHeightLG).mul(1.2).equal()}},[`&${r}-label`]:{[`${r}-item-label`]:{position:"absolute",insetBlockStart:i(i(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,textAlign:"end"},[`${r}-item-right`]:{[`${r}-item-label`]:{insetInlineStart:`calc(50% + ${(0,b.unit)(t.marginSM)})`,width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${r}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},Y=t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25});var me=(0,O.I$)("Timeline",t=>{const r=(0,oe.mergeToken)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[ce(r)]},Y),N=function(t,r){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)r.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(i[s[l]]=t[s[l]]);return i},ge=t=>{var{prefixCls:r,className:i,color:s="blue",dot:l,pending:e=!1,position:ue,label:ie,children:q}=t,T=N(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:G}=P.useContext(y.E_),j=G("timeline",r),ee=f()(`${j}-item`,{[`${j}-item-pending`]:e},i),be=/blue|red|green|gray/.test(s||"")?void 0:s,V=f()(`${j}-item-head`,{[`${j}-item-head-custom`]:!!l,[`${j}-item-head-${s}`]:!be});return P.createElement("li",Object.assign({},T,{className:ee}),ie&&P.createElement("div",{className:`${j}-item-label`},ie),P.createElement("div",{className:`${j}-item-tail`}),P.createElement("div",{className:V,style:{borderColor:be,color:be}},l),P.createElement("div",{className:`${j}-item-content`},q))},ye=a(74902),le=a(19267),de=function(t,r){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)r.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(i[s[l]]=t[s[l]]);return i},d=t=>{var{prefixCls:r,className:i,pending:s=!1,children:l,items:e,rootClassName:ue,reverse:ie=!1,direction:q,hashId:T,pendingDot:G,mode:j=""}=t,ee=de(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const be=(Z,$e)=>j==="alternate"?Z==="right"?`${r}-item-right`:Z==="left"?`${r}-item-left`:$e%2===0?`${r}-item-left`:`${r}-item-right`:j==="left"?`${r}-item-left`:j==="right"?`${r}-item-right`:Z==="right"?`${r}-item-right`:"",V=(0,ye.Z)(e||[]),ze=typeof s=="boolean"?null:s;s&&V.push({pending:!!s,dot:G||P.createElement(le.Z,null),children:ze}),ie&&V.reverse();const Le=V.length,Ie=`${r}-item-last`,He=V.filter(Z=>!!Z).map((Z,$e)=>{var Ze;const Ke=$e===Le-2?Ie:"",Ge=$e===Le-1?Ie:"",{className:Ue}=Z,Fe=de(Z,["className"]);return P.createElement(ge,Object.assign({},Fe,{className:f()([Ue,!ie&&s?Ke:Ge,be((Ze=Z==null?void 0:Z.position)!==null&&Ze!==void 0?Ze:"",$e)]),key:(Z==null?void 0:Z.key)||$e}))}),De=V.some(Z=>!!(Z!=null&&Z.label)),Be=f()(r,{[`${r}-pending`]:!!s,[`${r}-reverse`]:!!ie,[`${r}-${j}`]:!!j&&!De,[`${r}-label`]:De,[`${r}-rtl`]:q==="rtl"},i,ue,T);return P.createElement("ul",Object.assign({},ee,{className:Be}),He)},xe=a(50344);function ve(t,r){return t&&Array.isArray(t)?t:(0,xe.Z)(r).map(i=>{var s,l;return Object.assign({children:(l=(s=i==null?void 0:i.props)===null||s===void 0?void 0:s.children)!==null&&l!==void 0?l:""},i.props)})}var D=ve,pe=function(t,r){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)r.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(i[s[l]]=t[s[l]]);return i};const I=t=>{const{getPrefixCls:r,direction:i,timeline:s}=P.useContext(y.E_),{prefixCls:l,children:e,items:ue,className:ie,style:q}=t,T=pe(t,["prefixCls","children","items","className","style"]),G=r("timeline",l),j=(0,m.Z)(G),[ee,be,V]=me(G,j),ze=D(ue,e);return ee(P.createElement(d,Object.assign({},T,{className:f()(s==null?void 0:s.className,ie,V,j),style:Object.assign(Object.assign({},s==null?void 0:s.style),q),prefixCls:G,direction:i,items:ze,hashId:be})))};I.Item=ge;var z=I,v=z}}]);
