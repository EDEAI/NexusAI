"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[57],{88872:function(ea,Oe,o){o.r(Oe),o.d(Oe,{default:function(){return Qt}});var Ve=o(15009),y=o.n(Ve),Ue=o(99289),V=o.n(Ue),Ge=o(5574),j=o.n(Ge),ne=o(43722),he=o(32983),ta=o(55026),a=o(67294),q=o(35312),Je=o(19632),ge=o.n(Je),Ye=o(97857),E=o.n(Ye),Ee=o(80459),Qe=o(82114),Xe=o(82826),Ke=o(63783),qe=o(3471),et=o(45360),tt=o(85576),we=o(28036),at=o(83062),Le=o(72269),Ne=o(74330),nt=o(96486),He=o(44010),ie=o(39e3),e=o(85893),rt=function(c){var u=(0,q.useIntl)(),R=c.roomDetail,Z=c.setAgent,N=et.ZP.useMessage(),l=j()(N,2),A=l[0],b=l[1],D=(0,q.useParams)(),S=D.id,m=(0,ie.Z)(function(r){return r.disableInput}),P=(0,ie.Z)(function(r){return r.truncatable}),O=(0,ie.Z)(function(r){return r.setClearMemory}),z=(0,a.useState)([]),G=j()(z,2),T=G[0],J=G[1],I=(0,a.useState)(E()({},R)),M=j()(I,2),L=M[0],Y=M[1],Q=(0,a.useState)([]),X=j()(Q,2),H=X[0],C=X[1],B=(0,a.useRef)(!1),le=(0,a.useRef)(!1),oe=(0,a.useState)(!1),K=j()(oe,2),_=K[0],ee=K[1],ce=function(){var s=tt.Z.confirm;s({title:u.formatMessage({id:"app.chatroom.clear.title"}),icon:(0,e.jsx)(Qe.Z,{}),content:u.formatMessage({id:"app.chatroom.clear.tips"}),okText:u.formatMessage({id:"app.chatroom.clear.confirm"}),okType:"danger",cancelText:u.formatMessage({id:"app.chatroom.clear.cancel"}),onOk:function(){O(["TRUNCATE","0"])}})},w=function(){var r=V()(y()().mark(function s(){var t;return y()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!S){i.next=5;break}return i.next=3,(0,ne.cH)({id:S});case 3:if(t=i.sent,t.code==0)try{Y(function(){return E()(E()({},t.data.chat_info),{},{max_round:t.data.max_round,smart_selection:t.data.smart_selection})}),J(t.data.agent_list),B.current=!0}catch(f){}case 5:case"end":return i.stop()}},s)}));return function(){return r.apply(this,arguments)}}(),re=function(){var r=V()(y()().mark(function s(){var t;return y()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ne.j2)({id:S});case 2:t=i.sent,t.code==0&&(C(t.data.list),le.current=!0);case 4:case"end":return i.stop()}},s)}));return function(){return r.apply(this,arguments)}}(),se=function(){var r=V()(y()().mark(function s(t){var n,i,f;return y()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!S){d.next=11;break}if(n=t.active==1?0:1,n!=0){d.next=7;break}if(i=T.filter(function(x){return x.active==1}),i.length-1!=0){d.next=7;break}return A.open({type:"error",content:u.formatMessage({id:"app.chatroom.sidebar.agent_tips"}),duration:2}),d.abrupt("return",!1);case 7:return d.next=9,(0,ne.sT)({active:n},S,t.agent_id);case 9:f=d.sent,f.code==0&&J(function(x){return x.map(function(F){return E()(E()({},F),{},{active:F.agent_id==t.agent_id?n:F.active})})});case 11:case"end":return d.stop()}},s)}));return function(t){return r.apply(this,arguments)}}(),ue=function(s){return s.length>6?s.length=6:s.lenth,s},de=function(s){s.type=="my_agent"?q.history.push("/Agents?app_id=".concat(s.app_id,"&type=false&from=chat_room")):q.history.push("/ReadOnlyAgent?app_id=".concat(s.app_id,"&type=true&from=chat_room"))},$=function(s){q.history.replace("/chat_room/".concat(s.chatroom_id)),window.location.reload()},h=function(){ee(!0)},g=function(){ee(!1)},k=function(){var r=V()(y()().mark(function s(t){var n,i,f;return y()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(t.checkItem&&t.checkItem.length==0)){d.next=3;break}return A.open({type:"error",content:u.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2}),d.abrupt("return");case 3:return n=ge()(t.checkItem).map(function(x){var F=x.agent_id,fe=x.active,W=fe===void 0?1:fe;return{agent_id:F,active:W}}),i={description:L.description,name:L.name,max_round:L.max_round},d.next=7,(0,ne.sI)(E()(E()({},i),{},{agent:n}),S);case 7:f=d.sent,f.code==0?(t.checkItem.map(function(x){x.active=x.active==null?1:x.active}),J(ge()(t.checkItem)),Z.current=ge()(t.checkItem),A.open({type:"success",content:u.formatMessage({id:"app.chatroom.content.addAgentTips"}),duration:2})):A.open({type:"error",content:u.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2});case 9:case"end":return d.stop()}},s)}));return function(t){return r.apply(this,arguments)}}(),p=function(){var r=V()(y()().mark(function s(){var t;return y()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=L.smart_selection==1?0:1,i.next=3,(0,ne.r5)({smart_selection:t},S);case 3:Y(function(f){return E()(E()({},f),{},{smart_selection:t})});case 4:case"end":return i.stop()}},s)}));return function(){return r.apply(this,arguments)}}();return(0,a.useEffect)(function(){w(),re()},[]),(0,e.jsxs)(e.Fragment,{children:[b,(0,e.jsxs)("div",{className:"h-full w-[320px] bg-[#fff] shrink-0",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.1)"},id:"sider",children:[(0,e.jsxs)("div",{className:"flex flex-col  h-full",children:[(0,e.jsx)("div",{className:"w-full flex  justify-start px-[30px]",children:(0,e.jsxs)("div",{className:"py-[20px] text-[14px] text-[#213044] font-[500] flex gap-x-[10px] items-center w-full",children:[(0,e.jsxs)("div",{className:"cursor-pointer flex items-center shrink-0",onClick:function(){q.history.go(-1)},children:[(0,e.jsx)(we.ZP,{type:"link",danger:!0,className:"p-0",children:(0,e.jsx)(Xe.Z,{className:"text-[#1B64F3] w-[16px] h-[16px]"})}),(0,e.jsx)("span",{className:"ml-[5px] text-[#213044] text-sm",children:u.formatMessage({id:"app.chatroom.sidebar.return"})})]}),(0,e.jsx)("div",{className:"h-full flex items-center shrink-0",children:(0,e.jsx)("div",{className:"w-[1px] h-[13px] bg-[#ebebeb]"})}),(0,e.jsx)("div",{className:"flex-1 min-w-0 truncate",children:L.name})]})}),(0,e.jsx)("div",{className:"h-[360px]",children:(0,e.jsxs)("div",{className:"pb-[20px] border-b-[1px] px-[10px]",children:[(0,e.jsxs)("div",{className:"flex items-center cursor-pointer px-[20px]",children:[(0,e.jsx)("div",{className:"flex gap-x-[5px] flex-1",children:(0,e.jsx)("span",{className:"text-[#666] text-[14px]",children:u.formatMessage({id:"app.chatroom.sidebar.agent_title"})})}),(0,e.jsxs)("div",{className:"shrink-0 flex items-center",children:[(0,e.jsx)(at.Z,{className:"pr-[2px]",overlayStyle:{fontSize:"12px"},title:u.formatMessage({id:"app.chatroom.sidebar.chatroom_switch_tips"}),children:(0,e.jsx)(Ke.Z,{className:"cursor-pointer text-[#666] text-[12px]"})}),(0,e.jsx)("span",{className:"text-[12px] text-[#666] pr-[5px]",children:u.formatHTMLMessage({id:"app.chatroom_list.switch"})}),(0,e.jsx)(Le.Z,{size:"small",defaultChecked:!0,className:"w-[28px]",checked:L.smart_selection==1,onChange:p,disabled:m})]})]}),(0,e.jsx)("div",{className:"py-[20px] pt-[10px]",children:(0,e.jsx)("div",{className:"h-[220px] overflow-y-auto px-[10px]",children:B.current?(0,e.jsx)("div",{className:"flex flex-col",children:T&&T.length>0?T.map(function(r){return(0,e.jsxs)("div",{className:"flex items-center gap-x-[5px] hover:bg-[#FAFAFA] transition p-[10px] slider_agent_box",children:[(0,e.jsxs)("div",{className:"flex gap-x-[15px] flex-1 min-w-[0]",children:[(0,e.jsx)(Ee.Z,{data:r}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("span",{className:"text-[#213044] text-[12px] font-[500] truncate w-full",children:r.name}),(0,e.jsx)("span",{className:"text-[#999999] text-[12px] truncate",children:r.description})]})]}),(0,e.jsxs)("div",{className:"shrink-0 flex gap-x-[15px] items-center",children:[(0,e.jsx)("div",{className:"edit cursor-pointer w-[20px] h-[20px] flex justify-center items-center opacity-0 transition",onClick:function(){de(r)},children:(0,e.jsx)("img",{className:"w-[16px] h-[16px]",src:"/icons/edit_icon_1.svg"})}),(0,e.jsx)(Le.Z,{size:"small",disabled:m,defaultChecked:!0,className:"w-[28px]",checked:r.active==1,onChange:function(){se(r)}})]})]},r.agent_id)}):(0,e.jsx)("div",{className:"w-full min-h-[220px] flex items-center justify-center",children:(0,e.jsx)(he.Z,{image:he.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(Ne.Z,{})})})}),(0,e.jsx)("div",{className:"px-[20px] ",children:(0,e.jsx)("div",{style:{border:"1px solid #1B64F3"},onClick:h,className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:u.formatMessage({id:"app.chatroom.add.agent"})})})}),(0,e.jsx)("div",{className:"px-[20px] pt-[15px]",children:(0,e.jsx)("div",{style:P&&!m?{border:"1px solid #1B64F3"}:{background:"#d9d9d9",color:"rgba(0,0,0,0.25)",cursor:"not-allowed"},onClick:(0,nt.throttle)(function(){P&&!m&&ce()}),className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:u.formatMessage({id:"app.chatroom.sidebar.agent_button"})})})})]})}),(0,e.jsxs)("div",{className:"flex-1 min-h-[0] flex flex-col",children:[(0,e.jsx)("div",{className:"pt-[30px] px-[30px] text-[#666] text-[14px] shrink-0",children:u.formatMessage({id:"app.chatroom.sidebar.othe_title"})}),(0,e.jsx)("div",{className:"px-[10px] flex-1 min-h-[0] py-[10px]",children:(0,e.jsx)("div",{style:{height:"calc(100% - 20px)"},className:"px-[10px]  overflow-y-auto",children:le.current?(0,e.jsx)("div",{className:"h-full flex flex-col",children:H&&H.length>0?H.map(function(r){return(0,e.jsxs)("div",{className:"w-full transition hover:bg-[#FAFAFA] p-[10px] cursor-pointer",onClick:function(){$(r)},children:[(0,e.jsxs)("div",{className:"flex pb-[10px]",children:[(0,e.jsx)("div",{className:"flex-1 min-w-[0] truncate text-[#333] text-[14px]",children:r.name}),r.active==0?(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c2.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:u.formatMessage({id:"app.chatroom.sidebar.othe_status"})})]}):(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c1.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:u.formatMessage({id:"app.chatroom.sidebar.othe_status_succeed"})})]})]}),(0,e.jsx)("div",{className:"flex gap-x-[10px]",children:r.agent_list&&r.agent_list.length>0?(0,e.jsxs)(e.Fragment,{children:[ue(r.agent_list).map(function(s,t){return(0,e.jsx)("div",{className:"flex",children:(0,e.jsx)(Ee.Z,{data:s,width:"30px"})},t)}),r.agent_list.length>=6?(0,e.jsx)(qe.Z,{}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})]},r.chatroom_id)}):(0,e.jsx)("div",{className:"w-full h-full",children:(0,e.jsx)(he.Z,{image:he.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(Ne.Z,{})})})})]})]}),(0,e.jsx)(He.Z,{show:_,popupClose:g,popupSave:k,checkList:T,zIndex:99})]})]})},st=(0,a.memo)(rt),it=o(80279),lt=o(39873),me=o(1413),ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},ct=ot,Me=o(91146),ut=function(c,u){return a.createElement(Me.Z,(0,me.Z)((0,me.Z)({},c),{},{ref:u,icon:ct}))},dt=a.forwardRef(ut),pt=dt,ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},vt=ft,mt=function(c,u){return a.createElement(Me.Z,(0,me.Z)((0,me.Z)({},c),{},{ref:u,icon:vt}))},xt=a.forwardRef(mt),ht=xt,gt=o(83159),jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},yt=jt,St=function(c,u){return a.createElement(Me.Z,(0,me.Z)((0,me.Z)({},c),{},{ref:u,icon:yt}))},wt=a.forwardRef(St),Nt=wt,Ce=o(86),Pe=o(34994),ze=o(2216),kt=o(85877),Rt=o(29432),Mt=o(39944),Ct=o(11551),Fe=o(55927),Ae=o(22683),be=o(97807),Ft=function(c){var u,R,Z,N,l=c.selectApp,A=c.runid,b=c.setBoxLoading,D=c.setinputShow,S=c.appId,m=c.id,P=c.setisRun,O=(0,q.useIntl)(),z=(0,a.useRef)(""),G=(0,a.useRef)(""),T=(0,a.useRef)(null),J=(0,a.useState)(""),I=j()(J,2),M=I[0],L=I[1],Y=(0,a.useState)(null),Q=j()(Y,2),X=Q[0],H=Q[1],C=(0,a.useState)([]),B=j()(C,2),le=B[0],oe=B[1],K=(0,a.useState)(""),_=j()(K,2),ee=_[0],ce=_[1],w=(0,Fe.Z)(function($){return $.flowMessage}),re=function(h){G.current=se(h);var g={user:{value:se(h)}};ce(new Mt.z(g))},se=function $(h){return h.map(function(g){return g.type==="mention"?g.id:g.children?$(g.children):g.text}).join("")},ue=function(){var $=V()(y()().mark(function h(g){var k,p;return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return b(!0),k=Object.keys(g),k.forEach(function(t){T.current.properties[t]&&(T.current.properties[t].value=g[t])}),s.next=5,(0,Ct.LH)({agent_id:l.checkItem[0].agent_id,ability_id:0,input_dict:T.current,prompt:ee,data_source_run_id:z.current});case 5:p=s.sent,p.code==0&&(L(p.data.outputs_md),b(!1),P(!1));case 7:case"end":return s.stop()}},h)}));return function(g){return $.apply(this,arguments)}}(),de=function(){var $=V()(y()().mark(function h(g,k){var p,r;return y()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ne.xT)(g,k);case 2:p=t.sent,(p==null?void 0:p.code)==0&&(z.current=p==null||(r=p.data)===null||r===void 0?void 0:r.app_run_id);case 4:case"end":return t.stop()}},h)}));return function(g,k){return $.apply(this,arguments)}}();return(0,a.useEffect)(function(){l&&l.checkItem.length&&(P(!0),de(m,{app_id:S,app_run_id:A,status:1,corrected_parameter:""}))},[l]),(0,a.useEffect)(function(){var $=w.filter(function(s){return s.data.app_run_id==A&&s.type.indexOf("generate_meeting_action_items")!==-1});if($.length!=0){var h,g=(h=$[$.length-1])===null||h===void 0||(h=h.data)===null||h===void 0||(h=h.exec_data)===null||h===void 0||(h=h.outputs)===null||h===void 0?void 0:h.value;if(g){var k=JSON.parse(g);T.current=k;var p=Object.keys(k.properties);if(p.length){H(k.properties);var r=p.map(function(s){return{value:"<<".concat(Rt.qX,".inputs.").concat(s,">>"),label:s}});oe(r)}D(!1),b(!1)}}},[w]),console.log(l),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ce.Z,{icon:l==null||(u=l.checkItem[0])===null||u===void 0?void 0:u.icon,title:l==null||(R=l.checkItem[0])===null||R===void 0?void 0:R.name,textDetails:l==null||(Z=l.checkItem[0])===null||Z===void 0?void 0:Z.description,iconType:"robot_icon",avatar:l==null||(N=l.checkItem[0])===null||N===void 0?void 0:N.avatar,handleClick:function(){}})}),X!=null?(0,e.jsxs)(Pe.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full",disabled:!G.current},searchConfig:{submitText:O.formatMessage({id:"workflow.button.run"})}},onFinish:function(h){ue(h)},children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(ze._,{data:X})}),(0,e.jsx)("div",{className:"h-[150px] overflow-y-auto border border-color-[#eee] py-[4px] px-[11px] mb-[8px]",children:(0,e.jsx)(kt.Z,{onChange:function(h){re(h)},options:le,placeholder:"\u8BF7\u8F93\u5165\u8FD0\u884C\u6307\u4EE4\uFF0C\u8F93\u5165@\u63D2\u5165\u53D8\u91CF"})})]}):(0,e.jsx)(e.Fragment,{}),M?(0,e.jsx)("div",{className:"max-h-[400px] overflow-y-auto mt-[16px]",children:(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(Ae.U,{rehypePlugins:[be.Z],children:M})})}):(0,e.jsx)(e.Fragment,{})]})},At=(0,a.memo)(Ft),bt=o(66309),Te=o(42237),It=o(93696),Zt=function(c,u){return a.createElement(Me.Z,(0,me.Z)((0,me.Z)({},c),{},{ref:u,icon:It.Z}))},Dt=a.forwardRef(Zt),$t=Dt,Ot=o(4981),Be=o(29608),Et=(0,a.memo)(function(U){var c=U.progressObj,u=function(){return parseFloat(c.elapsed_time).toFixed(6)},R=function(N){var l=new Date(N),A=l.getFullYear(),b=(l.getMonth()+1).toString().padStart(2,"0"),D=l.getDate().toString().padStart(2,"0"),S=l.getHours().toString().padStart(2,"0"),m=l.getMinutes().toString().padStart(2,"0"),P=l.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(A,".").concat(b,".").concat(D," ").concat(S,":").concat(m,":").concat(P)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:c.created_time&&R(c.created_time)}),(0,e.jsx)("div",{className:"truncate",children:c.apps_name||c.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(c.status==1?"bg-blue-600":c.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[u(),"S"]})]})]})})}),Lt=function(c){var u,R,Z,N,l=c.selectApp,A=c.runid,b=c.setBoxLoading,D=c.setinputShow,S=c.appId,m=c.id,P=c.setisRun,O=(0,q.useIntl)(),z=(0,a.useRef)(""),G=(0,a.useRef)(null),T=(0,a.useState)(null),J=j()(T,2),I=J[0],M=J[1],L=(0,a.useState)(!1),Y=j()(L,2),Q=Y[0],X=Y[1],H=(0,a.useState)(null),C=j()(H,2),B=C[0],le=C[1],oe=(0,a.useState)(null),K=j()(oe,2),_=K[0],ee=K[1],ce=(0,a.useState)(null),w=j()(ce,2),re=w[0],se=w[1],ue=(0,Be.Z)(function(t){return t.setDealtWithData}),de=(0,Be.Z)(function(t){return t.setRunPanelLogRecord}),$=function(){var t=V()(y()().mark(function n(i){var f,v,d,x,F;return y()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return b(!0),f=Object.keys(i),v={},f.forEach(function(pe){G.current.properties[pe]&&(G.current.properties[pe].value=i[pe]),_&&_.forEach(function(je){je.node_id==pe&&(v[pe]=i[pe])})}),d={inputs:G.current,node_confirm_users:v,run_name:"chatroom-".concat(m,"-run-").concat(z.current,"-driven"),run_type:1,data_source_run_id:z.current},W.next=7,(0,Te.UE)(S,d);case 7:x=W.sent,x.code==0&&(z.current=x==null||(F=x.data)===null||F===void 0?void 0:F.app_run_id,X(!0),P(!1));case 9:case"end":return W.stop()}},n)}));return function(i){return t.apply(this,arguments)}}(),h=function(){var t=V()(y()().mark(function n(){var i,f;return y()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:i=s==null?void 0:s.filter(function(x){return x.type=="workflow_run_progress"&&x.data.app_run_id==z.current}).map(function(x){var F=x.data;return F}),i&&i.length&&(f=i[i.length-1],M(f),b(!1));case 2:case"end":return d.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),g=function(){var t=V()(y()().mark(function n(){var i,f,v,d,x;return y()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:f=s==null?void 0:s.filter(function(W){return W.type=="workflow_need_human_confirm"&&W.data.app_run_id==z.current}),v=(i=f.map(function(W){var pe=W.data,je=W.need_human_confirm;return{data:pe,need_human_confirm:je}}))===null||i===void 0?void 0:i.filter(function(W){return W.data.type!==1}),v&&v.length&&(x=v[v.length-1].data,x.exec_id=x==null||(d=x.node_exec_data)===null||d===void 0?void 0:d.node_exec_id,se(v[v.length-1]),b(!1));case 3:case"end":return fe.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),k=function(n){return n.completed_progress?parseInt(n.completed_progress.slice(0,-1)):!1},p=function(){var t=V()(y()().mark(function n(i,f){var v,d;return y()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,ne.xT)(i,f);case 2:v=F.sent,(v==null?void 0:v.code)==0&&(z.current=v==null||(d=v.data)===null||d===void 0?void 0:d.app_run_id);case 4:case"end":return F.stop()}},n)}));return function(i,f){return t.apply(this,arguments)}}(),r=function(){var t=V()(y()().mark(function n(){var i,f;return y()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log(S),d.next=3,(0,Te.zO)(S);case 3:i=d.sent,i.code==0&&ee(i==null||(f=i.data)===null||f===void 0?void 0:f.need_confirm_nodes),p(m,{app_id:S,app_run_id:A,status:1,corrected_parameter:""});case 6:case"end":return d.stop()}},n)}));return function(){return t.apply(this,arguments)}}();(0,a.useEffect)(function(){l&&l.checkItem.length&&(P(!0),r())},[l]);var s=(0,Fe.Z)(function(t){return t.flowMessage});return(0,a.useEffect)(function(){h(),g();var t=s.filter(function(d){return d.data.app_run_id==A&&d.type.indexOf("generate_meeting_action_items")!==-1});if(t.length!=0){var n,i=(n=t[t.length-1])===null||n===void 0||(n=n.data)===null||n===void 0||(n=n.exec_data)===null||n===void 0||(n=n.outputs)===null||n===void 0?void 0:n.value;if(i){var f=JSON.parse(i);G.current=f;var v=Object.keys(f.properties);v.length&&(console.log(f.properties),le(f.properties)),D(!1),b(!1)}}},[s]),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ce.Z,{icon:l==null||(u=l.checkItem[0])===null||u===void 0?void 0:u.icon,title:l==null||(R=l.checkItem[0])===null||R===void 0?void 0:R.name,textDetails:l==null||(Z=l.checkItem[0])===null||Z===void 0?void 0:Z.description,iconType:"workflow_icon",avatar:l==null||(N=l.checkItem[0])===null||N===void 0?void 0:N.avatar,handleClick:function(){}})}),!Q&&B!=null?(0,e.jsxs)(Pe.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full"},searchConfig:{submitText:O.formatMessage({id:"workflow.button.run"})}},onFinish:$,children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(ze._,{data:B})}),(0,e.jsx)(Ot.e,{data:_})]}):(0,e.jsx)(e.Fragment,{children:B!=null?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[O.formatMessage({id:"app.summaryhistory.input"}),":"]}),Object.values(B).map(function(t){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:t.display_name||t.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:t.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),re&&re.need_human_confirm!=0?(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[6px] items-center h-[20px] cursor-pointer",onClick:function(){ue(re.data)},children:[(0,e.jsx)("div",{children:(0,e.jsx)($t,{className:"text-[#1B64F3] text-[16px]"})}),(0,e.jsx)("span",{children:O.formatMessage({id:"app.summary.backlogTips"})})]})}):(0,e.jsx)(e.Fragment,{}),I?(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(Ce.Z,{status:I.status,icon:I.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:I.run_name}),I.need_human_confirm==1?(0,e.jsx)(bt.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:O.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)(Et,{progressObj:I}),handleClick:function(){de(I)},progress:k(I)})}):(0,e.jsx)(e.Fragment,{})]})},Ht=(0,a.memo)(Lt),Pt=function(c){var u,R,Z,N=(0,q.useIntl)(),l=c.runid,A=c.id,b=c.setBoxLoading,D=c.scrollDom,S=c.setinputShow,m=(0,a.useRef)("agent"),P=(0,a.useRef)(""),O=(0,a.useState)(!1),z=j()(O,2),G=z[0],T=z[1],J=(0,a.useState)({type:"agent",checkItem:[],show:!1}),I=j()(J,2),M=I[0],L=I[1],Y=[{key:"1",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){L(function(C){return E()(E()({},C),{},{type:"agent",show:!0})})},children:N.formatMessage({id:"app.summary.SelectAgent"})})},{key:"2",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){L(function(C){return E()(E()({},C),{},{type:"workflow",show:!0})})},children:N.formatMessage({id:"app.summary.SelectWorkflow"})})}],Q=function(){L(function(C){return E()(E()({},C),{},{show:!1})})},X=function(C){b(!0),L(function(B){return E()(E()({},B),{},{checkItem:C.checkItem})}),m.current=M.type,P.current=C.checkItem[0].app_id};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"pt-[24px]  border-[#ddd]",style:{minHeight:M!=null&&(u=M.checkItem)!==null&&u!==void 0&&u.length?D==null||(R=D.current)===null||R===void 0?void 0:R.offsetHeight:"100%"},children:[(0,e.jsxs)("div",{className:"text-[14px] font-[500] flex item-center",children:[(0,e.jsx)("div",{className:"flex-1",children:N.formatMessage({id:"app.summary.Runapp"})}),(0,e.jsx)("div",{className:"px-[10px]",children:G?(0,e.jsx)(gt.Z,{menu:{items:Y},children:(0,e.jsx)(Nt,{className:"transition cursor-pointer text-[#999] text-[18px] hover:text-[#1B64F3]"})}):(0,e.jsx)(e.Fragment,{})})]}),(0,e.jsx)("div",{children:M!=null&&(Z=M.checkItem)!==null&&Z!==void 0&&Z.length?(0,e.jsx)(e.Fragment,{children:m.current=="agent"?(0,e.jsx)(At,{id:A,appId:P.current,selectApp:M,runid:l,setBoxLoading:b,scrollDom:D,setinputShow:S,setisRun:T}):(0,e.jsx)(Ht,{id:A,appId:P.current,selectApp:M,runid:l,setBoxLoading:b,scrollDom:D,setinputShow:S,setisRun:T})}):(0,e.jsxs)("div",{className:"flex gap-x-[20px] min-h-[70px] items-center px-[20px]",children:[(0,e.jsxs)(we.ZP,{className:"flex-1 text-[14px]",onClick:function(){L(function(C){return E()(E()({},C),{},{type:"agent",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/robot_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),N.formatMessage({id:"app.summary.SelectAgent"})]}),(0,e.jsxs)(we.ZP,{className:"flex-1 text-[14px]",onClick:function(){L(function(C){return E()(E()({},C),{},{type:"workflow",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/workflow_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),N.formatMessage({id:"app.summary.SelectWorkflow"})]})]})})]}),(0,e.jsx)(He.Z,{show:M.show,nodetype:M.type,popupClose:Q,popupSave:X,checkList:m.current==M.type?M.checkItem:[],zIndex:99,radio:!0})]})},zt=(0,a.memo)(Pt),Tt=o(26915),Bt=o(87740),_e=(0,a.memo)(function(U){var c=U.id,u=U.message,R=(0,q.useIntl)(),Z=(0,ie.Z)(function(m){return m.setSummaryClick}),N=(0,a.useState)(!0),l=j()(N,2),A=l[0],b=l[1],D=(0,ie.Z)(function(m){return m.summaryClick}),S=(0,ie.Z)(function(m){return m.setSummaryParams});return(0,a.useEffect)(function(){b(D)},[D]),(0,e.jsx)("div",{className:"flex flex-row-reverse",children:(0,e.jsxs)(we.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(P){A&&(S({id:c,message:u}),Z(!1))},children:[(0,e.jsx)("span",{className:"text-[12px]",children:R.formatMessage({id:"app.summaryhistory.submitText"})}),(0,e.jsx)(Bt.Z,{className:"text-[14px]"})]})})}),_t=function(c){var u,R,Z,N,l=c.setShow,A=c.inputShow,b=c.setBoxLoading,D=c.setAppRunId,S=c.scrollDom,m=(0,q.useIntl)(),P=(0,a.useState)(!1),O=j()(P,2),z=O[0],G=O[1],T=(0,a.useState)(""),J=j()(T,2),I=J[0],M=J[1],L=(0,a.useState)(""),Y=j()(L,2),Q=Y[0],X=Y[1],H=(0,a.useRef)(""),C=(0,a.useRef)(""),B=(0,a.useRef)(!1),le=(0,a.useState)(!1),oe=j()(le,2),K=oe[0],_=oe[1],ee=(0,a.useState)(null),ce=j()(ee,2),w=ce[0],re=ce[1],se=(0,ie.Z)(function(p){return p.setSummaryClick}),ue=function(){var p=V()(y()().mark(function r(s){var t,n,i,f,v=arguments;return y()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return t=v.length>1&&v[1]!==void 0?v[1]:{app_run_id:"",corrected_parameter:""},x.next=3,(0,ne.Rp)(s,t);case 3:n=x.sent,(n==null?void 0:n.code)==0&&(D(n==null||(i=n.data)===null||i===void 0?void 0:i.app_run_id),C.current=n==null||(f=n.data)===null||f===void 0?void 0:f.app_run_id,t.app_run_id&&(B.current=!0));case 5:case"end":return x.stop()}},r)}));return function(s){return p.apply(this,arguments)}}(),de=function(){var p=V()(y()().mark(function r(s,t){var n,i,f,v,d;return y()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,ne.xM)(s,{message:t});case 2:n=F.sent,(n==null?void 0:n.code)==0&&(C.current=n==null||(i=n.data)===null||i===void 0?void 0:i.app_run_id,D(n==null||(f=n.data)===null||f===void 0?void 0:f.app_run_id),n!=null&&(v=n.data)!==null&&v!==void 0&&(v=v.outputs)!==null&&v!==void 0&&v.value&&(M(n==null||(d=n.data)===null||d===void 0||(d=d.outputs)===null||d===void 0?void 0:d.value),l(!0),b(!1),se(!0),S.current.scrollTo({top:0})));case 4:case"end":return F.stop()}},r)}));return function(s,t){return p.apply(this,arguments)}}(),$=function(){var p=V()(y()().mark(function r(){var s;return y()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,ne.Gh)({chatroom_id:H.current,app_run_id:C.current});case 2:s=n.sent,s&&s!==null&&s!==void 0&&s.data&&re(s.data);case 4:case"end":return n.stop()}},r)}));return function(){return p.apply(this,arguments)}}(),h=function(r){var s=new Date(r),t=s.getMonth()+1,n=s.getDate(),i=s.getHours(),f=s.getMinutes(),v=s.getSeconds();return s.getFullYear()+"-"+(t<10?"0"+t:t)+"-"+(n<10?"0"+n:n)+" "+(i<10?"0"+i:i)+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},g=(0,Fe.Z)(function(p){return p.flowMessage});(0,a.useEffect)(function(){var p=g.filter(function(t){return t.data.app_run_id==C.current&&t.type.indexOf("generate_meeting_summary")!==-1});if(p.length!=0){var r,s=(r=p[p.length-1])===null||r===void 0||(r=r.data)===null||r===void 0||(r=r.exec_data)===null||r===void 0||(r=r.outputs)===null||r===void 0?void 0:r.value;s&&(B.current&&$(),M(s),_(!1),l(!0),se(!0),b(!1),S.current.scrollTo({top:0}))}},[g]);var k=(0,ie.Z)(function(p){return p.summaryParams});return(0,a.useEffect)(function(){k&&k.id&&(H.current=k.id,w&&re(null),K&&_(!1),I&&M(""),G(!0),k.message?(b(!0),de(k.id,k.message)):ue(k.id))},[k]),(0,e.jsx)(e.Fragment,{children:z?(0,e.jsxs)("div",{className:"pb-[16px]",children:[(0,e.jsx)("div",{className:"text-[16px] font-[600] pt-[12px]",children:m.formatMessage({id:"app.summary.title"})}),(0,e.jsx)("div",{className:"text-[14px] pt-[12px] leading-[23px] px-[8px]",children:I?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:" ".concat("max-h-[400px]"," p-[12px]  bg-[#F7F7F7]  relative overflow-y-auto"),children:(0,e.jsx)(Ae.U,{rehypePlugins:[be.Z],children:w?w==null||(u=w.source_run)===null||u===void 0?void 0:u.summary:I})}),w&&(w==null||(R=w.source_corrections)===null||R===void 0?void 0:R.length)>0||!A?(0,e.jsx)(_e,{id:H.current,message:w?w==null||(Z=w.source_run)===null||Z===void 0?void 0:Z.summary:I}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)("div",{className:"min-h-[120px] flex items-center justify-center",children:(0,e.jsx)(Ne.Z,{size:"large"})})}),w&&(w==null||(N=w.source_corrections)===null||N===void 0?void 0:N.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[m.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),w.source_corrections.map(function(p,r){return(0,e.jsxs)("div",{className:"mb-[16px]",children:[(0,e.jsx)("div",{className:"rounded-[4px]  ".concat(w.source_corrections.length-1==r?"bg-blue-100":"bg-[#F7F7F7]"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[m.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",p.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[m.formatMessage({id:"app.summaryhistory.time"}),": ",h(p.created_time)]}),(0,e.jsx)(Ae.U,{rehypePlugins:[be.Z],children:p==null?void 0:p.corrected_summary})]})},p.created_time),!A||w.source_corrections.length-1!=r?(0,e.jsx)(_e,{id:H.current,message:p==null?void 0:p.corrected_summary}):(0,e.jsx)(e.Fragment,{})]},p.created_time)})]}):(0,e.jsx)(e.Fragment,{}),A?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsx)(Tt.Z.TextArea,{onChange:function(r){X(r.target.value)},value:Q,disabled:!I||K,rows:4,placeholder:m.formatMessage({id:"app.summary.placeholder"})})}),(0,e.jsx)("div",{className:"flex pt-[12px] gap-x-[4px]",children:(0,e.jsx)(we.ZP,{type:"primary",disabled:!I||!Q,loading:K,className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px] flex-1",onClick:function(){ue(H.current,{app_run_id:String(C.current),corrected_parameter:Q}),_(!0),X(""),l("")},children:m.formatMessage({id:"app.summary.submitText"})})})]}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})},Wt=(0,a.memo)(_t),Vt=o(38027),Ut=function(c){var u,R=c.id,Z=(0,a.useState)(""),N=j()(Z,2),l=N[0],A=N[1],b=(0,a.useState)(!1),D=j()(b,2),S=D[0],m=D[1],P=(0,a.useState)([]),O=j()(P,2),z=O[0],G=O[1],T=(0,a.useState)(!1),J=j()(T,2),I=J[0],M=J[1],L=(0,a.useState)(!1),Y=j()(L,2),Q=Y[0],X=Y[1],H=(0,a.useState)(""),C=j()(H,2),B=C[0],le=C[1],oe=(0,a.useState)(!1),K=j()(oe,2),_=K[0],ee=K[1],ce=(0,a.useState)(!1),w=j()(ce,2),re=w[0],se=w[1],ue=(0,a.useState)(!0),de=j()(ue,2),$=de[0],h=de[1],g=(0,a.useRef)(null),k=(0,a.useRef)(1),p=(0,a.useRef)(!1),r=(0,a.useRef)(!0),s=(0,a.useRef)(0),t=(0,a.useState)(!1),n=j()(t,2),i=n[0],f=n[1],v=(0,a.useState)(800),d=j()(v,2),x=d[0],F=d[1],fe=(0,a.useState)(!1),W=j()(fe,2),pe=W[0],je=W[1],ke=(0,ie.Z)(function(te){return te.summaryParams}),Xt=(0,ie.Z)(function(te){return te.setSummaryParams}),Ie=function(){var te=V()(y()().mark(function ve(){var We,Ze,ae,De,ye,$e,Se=arguments;return y()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(We=Se.length>0&&Se[0]!==void 0?Se[0]:!0,Ze=Se.length>1&&Se[1]!==void 0?Se[1]:!0,!(s.current!=0&&s.current<k.current)){xe.next=5;break}return f(!1),xe.abrupt("return");case 5:return xe.next=8,(0,ne.sh)({chatroom_id:R,page:k.current,page_size:10});case 8:ae=xe.sent,ae.code==0&&(ae!=null&&(De=ae.data)!==null&&De!==void 0&&De.list&&ae!==null&&ae!==void 0&&(ye=ae.data)!==null&&ye!==void 0&&(ye=ye.list)!==null&&ye!==void 0&&ye.length&&(s.current=ae==null||($e=ae.data)===null||$e===void 0?void 0:$e.total_pages,G(function(Re){return Ze?ge()(ae.data.list.reverse()):[].concat(ge()(ae.data.list.reverse()),ge()(Re))}),r.current=!0,m(!0),f(!0)),Ze&&setTimeout(function(){var Re;g==null||(Re=g.current)===null||Re===void 0||Re.scrollTo({top:0})},200),We||(A(ke.id),Xt({})));case 10:case"end":return xe.stop()}},ve)}));return function(){return te.apply(this,arguments)}}(),Kt=function(ve){ve.target.scrollHeight+(ve.target.scrollTop-ve.target.clientHeight)<400&&r.current&&(r.current=!1,f(!0),k.current=k.current+=1,Ie(!0,!1))};(0,a.useEffect)(function(){k.current=1,Ie()},[R]),(0,a.useEffect)(function(){console.log(ke),ke&&ke.id&&(m(!0),$||h(!0),I&&M(!1),_&&ee(!1),k.current=1,X(!0),Ie(!1),p.current=!0)},[ke]);var qt=(0,ie.Z)(function(te){return te.setOrientationShow});return(0,a.useEffect)(function(){S&&qt(!0)},[S]),(0,a.useEffect)(function(){console.log(i);var te=function(){window.innerWidth<1280?(F(400),je(!0),console.log(g),setTimeout(function(){ee(!0)},200)):(F((window.innerWidth-320)/2),je(!1),ee(!1))};return te(),window.addEventListener("resize",te),function(){window.removeEventListener("resize",te)}},[]),(0,e.jsx)(e.Fragment,{children:S?(0,e.jsxs)("div",{style:{overflow:_?"hidden":"initial"},className:"pl-[32px] box-border ".concat(pe?"fixed  right-0 bottom-0 top-[56px]":"relative"),children:[(0,e.jsx)("div",{onClick:function(){ee(function(ve){return!ve})},className:`
                                `.concat(_?"absolute left-[2px]  top-[60px]":"absolute left-[2px] top-[60px]",`
                                history_packup
                                hover:text-[#1B64F3]
                                w-[30px] h-[60px] bg-[rgba(255,255,255,1)] shadow-md flex justify-center items-center cursor-pointer z-[99]
                            `),children:_?(0,e.jsx)(ht,{className:"text-[18px]"}):(0,e.jsx)(pt,{className:"text-[18px]"})}),(0,e.jsxs)(lt.Z,{minWidth:400,maxWidth:x,className:"relative h-full right-0 border-0 returned-0 px-[0] ".concat(_?"hidden flex-[0]":"block"),children:[re?(0,e.jsx)("div",{className:"h-full w-full absolute top-0 left-0 flex justify-center items-center z-[100] bg-[rgba(255,255,255,0.5)]",children:(0,e.jsx)(Ne.Z,{size:"large"})}):(0,e.jsx)(e.Fragment,{}),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"h-full min-h-full overflow-y-auto flex flex-col-reverse scroll-smooth relative",onScroll:Kt,ref:g,children:[(0,e.jsxs)("div",{children:[z.length?(0,e.jsx)(Vt.ZP,{id:R,runid:B,scrollDom:g,list:z,historyHeight:p.current}):(0,e.jsx)(e.Fragment,{}),(0,e.jsxs)("div",{className:"w-full px-4 h-full",style:{minHeight:Q?g==null||(u=g.current)===null||u===void 0?void 0:u.offsetHeight:""},children:[(0,e.jsx)(Wt,{setShow:M,inputShow:$,setBoxLoading:se,setAppRunId:le,scrollDom:g}),I?(0,e.jsx)(zt,{id:l,runid:B,setBoxLoading:se,scrollDom:g,setinputShow:h}):(0,e.jsx)(e.Fragment,{})]})]}),i?(0,e.jsx)("div",{className:"text-center justify-center items-center flex",children:(0,e.jsx)(Ne.Z,{})}):(0,e.jsx)(e.Fragment,{})]})})]})]}):(0,e.jsx)(e.Fragment,{})})},Gt=(0,a.memo)(Ut),Jt=function(c){return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(he.Z,{image:he.Z.PRESENTED_IMAGE_SIMPLE})})},Yt=(0,a.memo)(function(){var U=(0,q.useParams)(),c=U.id,u=(0,a.useRef)([]),R=(0,a.useRef)(null),Z=(0,a.useState)(!1),N=j()(Z,2),l=N[0],A=N[1],b=function(){var D=V()(y()().mark(function S(){var m;return y()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!c){O.next=5;break}return O.next=3,(0,ne.cH)({id:c});case 3:m=O.sent,m.code==0?(A(!0),R.current=m.data,u.current=m.data.agent_list):q.history.replace("/meeting");case 5:case"end":return O.stop()}},S)}));return function(){return D.apply(this,arguments)}}();return(0,a.useEffect)(function(){b()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex bg-[#fff] overflow-hidden overflow-x-auto",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)(st,{roomDetail:R.current,setAgent:u}),(0,e.jsx)("div",{className:"flex-1 min-h-0 h-full",children:l?(0,e.jsx)(it.F,{agentList:u}):(0,e.jsx)(Jt,{})}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Gt,{id:c})})]})})}),Qt=Yt}}]);
