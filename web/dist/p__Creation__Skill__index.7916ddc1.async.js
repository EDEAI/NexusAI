(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{82826:function(J,_,t){"use strict";t.d(_,{Z:function(){return o}});var w=t(1413),s=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},m=L,h=t(91146),C=function(P,b){return s.createElement(h.Z,(0,w.Z)((0,w.Z)({},P),{},{ref:b,icon:m}))},G=s.forwardRef(C),o=G},89035:function(J,_,t){"use strict";t.d(_,{Z:function(){return o}});var w=t(1413),s=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},m=L,h=t(91146),C=function(P,b){return s.createElement(h.Z,(0,w.Z)((0,w.Z)({},P),{},{ref:b,icon:m}))},G=s.forwardRef(C),o=G},81644:function(J,_,t){"use strict";t.d(_,{Z:function(){return o}});var w=t(1413),s=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},m=L,h=t(91146),C=function(P,b){return s.createElement(h.Z,(0,w.Z)((0,w.Z)({},P),{},{ref:b,icon:m}))},G=s.forwardRef(C),o=G},2068:function(J,_,t){"use strict";t.d(_,{Z:function(){return o}});var w=t(1413),s=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},m=L,h=t(91146),C=function(P,b){return s.createElement(h.Z,(0,w.Z)((0,w.Z)({},P),{},{ref:b,icon:m}))},G=s.forwardRef(C),o=G},15360:function(J,_,t){"use strict";t.d(_,{Z:function(){return o}});var w=t(1413),s=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},m=L,h=t(91146),C=function(P,b){return s.createElement(h.Z,(0,w.Z)((0,w.Z)({},P),{},{ref:b,icon:m}))},G=s.forwardRef(C),o=G},83510:function(J,_,t){"use strict";t.d(_,{LK:function(){return Q},bs:function(){return A},go:function(){return ye},uy:function(){return U}});var w=t(15009),s=t.n(w),L=t(99289),m=t.n(L),h=t(47520),C="/v1/apps/apps_list",G="/v1/agent/agent_delete/",o="/v1/workflow/workflow_app_delete/",ee="/v1/vector/delete_dataset/",P="/v1/skill/delete_skill_by_app_id/",b="/v1/apps/apps_create",ie="/v1/apps/app_update/",ye=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,h.ZP)("".concat(C),{method:"GET",data:a});case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}(),Q=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log(a),u.next=3,a.mode;case 3:if(u.t0=u.sent,u.t0!=1){u.next=8;break}u.t1=(0,h.ZP)("".concat(G).concat(a.app_id),{method:"DELETE"}),u.next=9;break;case 8:u.t1=a.mode==2?(0,h.ZP)("".concat(o).concat(a.app_id),{method:"DELETE"}):a.mode==3?(0,h.ZP)("".concat(ee).concat(a.app_id),{method:"DELETE"}):(0,h.ZP)("".concat(P).concat(a.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return c=u.t1,u.abrupt("return",c);case 11:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}(),U=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,h.ZP)("".concat(b),{method:"POST",data:a});case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}(),A=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,h.ZP)("".concat(ie).concat(a.app_id),{method:"PUT",data:a});case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}()},24805:function(J,_,t){"use strict";t.d(_,{Hb:function(){return P},Ur:function(){return ye},cN:function(){return ie},ej:function(){return b}});var w=t(15009),s=t.n(w),L=t(99289),m=t.n(L),h=t(47520),C="/v1/skill/skill_info/",G="/v1/skill/skill_update/",o="/v1/skill/skill_publish/",ee="/v1/skill/skill_run",P=function(){var Q=m()(s()().mark(function U(A,Z){var x;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,h.ZP)("".concat(C).concat(A),{method:"GET",data:{publish_status:Z=="true"?1:0}});case 2:return x=c.sent,c.abrupt("return",x);case 4:case"end":return c.stop()}},U)}));return function(A,Z){return Q.apply(this,arguments)}}(),b=function(){var Q=m()(s()().mark(function U(A){var Z;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.ZP)("".concat(G).concat(A.app_id),{method:"PUT",data:A.data});case 2:return Z=a.sent,a.abrupt("return",Z);case 4:case"end":return a.stop()}},U)}));return function(A){return Q.apply(this,arguments)}}(),ie=function(){var Q=m()(s()().mark(function U(A){var Z;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.ZP)("".concat(o).concat(A),{method:"PUT"});case 2:return Z=a.sent,a.abrupt("return",Z);case 4:case"end":return a.stop()}},U)}));return function(A){return Q.apply(this,arguments)}}(),ye=function(){var Q=m()(s()().mark(function U(A){var Z;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.ZP)("".concat(ee),{method:"POST",data:A});case 2:return Z=a.sent,a.abrupt("return",Z);case 4:case"end":return a.stop()}},U)}));return function(A){return Q.apply(this,arguments)}}()},77471:function(J,_,t){"use strict";t.r(_),t.d(_,{default:function(){return rt}});var w=t(97857),s=t.n(w),L=t(15009),m=t.n(L),h=t(99289),C=t.n(h),G=t(5574),o=t.n(G),ee=t(83510),P=t(24805),b=t(10759),ie=t(32332),ye=t(2068),Q=t(89035),U=t(81644),A=t(15360),Z=t(82826),x=t(35312),a=t(40741),c=t(45360),H=t(28036),u=t(50136),Ce=t(74330),ze=t(96486),Pe=t.n(ze),M=t(67294),ve=t(92939),_e=t(5608),fe=t(26915),Oe=t(72269),e=t(85893),wt=fe.Z.TextArea,He=function(l){var y=l.loading,W=l.FirstValue,K=l.FirstSkillref,n=l.Skillinfo,V=l.setSkillInfo,te=l.Operationbentate,q=l.firstjudgingcondition,p=l.pageKeyfun,oe=l.skillmenudisabled,X=l.setskillmenudisabled,N=(0,x.useIntl)();(0,M.useEffect)(function(){},[]);var re=function(g){V(s()(s()({},n),{},{is_public:g?1:0}))},d=function(g){V(s()(s()({},n),{},{attrs_are_visible:g?1:0}))},ae=function(g){V(s()(s()({},n),{},{input_variables:g.free}))},se=function(g,le){var k=new b.Kr("output","","");g.users.forEach(function(T){var z=new b._w(T.name,T.type?T.type:"string","",T.content,T.status);k.addProperty(T.name,z)});var $={input_variables:k,is_public:n.is_public,attrs_are_visible:n.attrs_are_visible};W($)},ue=function(){q(K.getFieldsValue().users,1)||K.validateFields().then(function(g){p("2"),X(s()(s()({},oe),{},{second:!1}))}).catch(function(g){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:N.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:function(g){W(g)},style:{width:900},autoComplete:"off",form:K,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(g,le){var k,$=le.add,T=le.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:N.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[n&&n.name,"\xA0"]})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:N.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:n&&n.description})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(ve.Z,{className:"font-medium text-xs text-[#555555]",name:N.formatMessage({id:"skill.teamvisibility"}),title:N.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(Oe.Z,{size:"small",onChange:re,checked:!!(n&&n.is_public==1)})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",name:N.formatMessage({id:"agent.attrVisible"}),title:N.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(Oe.Z,{size:"small",onChange:d,checked:!!(n&&n.attrs_are_visible==1)})]}),!y&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(_e.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",required:!0,name:N.formatMessage({id:"skill.inputvariable"}),title:N.formatMessage({id:"skill.Callword.inputvariable"})})}),variableTypes:["string","number","json"],variables:Object.values((n==null||(k=n.input_variables)===null||k===void 0?void 0:k.properties)||{}),onChange:ae})})]})}}),(0,e.jsxs)("div",{className:"mt-[20px]",children:[(0,e.jsx)(H.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ue()},children:N.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(H.ZP,{onClick:function(){history.back()},children:N.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Ke=He,Te=t(92485),$e=t(34041),We=function(l){var y=l.SecondValue,W=l.handleBack,K=l.Skillinfo,n=l.setSkillInfo,V=l.SkillRelyOn,te=l.setSkillRelyOn,q=l.Secondref,p=l.setskillcodestate,oe=l.setNewcode,X=l.pageKeyfun,N=l.skillmenudisabled,re=l.setskillmenudisabled,d=(0,x.useIntl)();(0,M.useEffect)(function(){},[]);var ae=function(g){te(g)},se=function(g){p(g===""),oe(JSON.stringify({python3:g}))},ue=function(){X("3"),re(s()(s()({},N),{},{thirdly:!1}))};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:d.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:q,children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(ve.Z,{className:"font-medium",name:d.formatMessage({id:"skill.dependency"}),title:d.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)($e.Z,{mode:"tags",style:{width:"100%"},value:V,onChange:ae,tokenSeparators:[","]})]}),(0,e.jsx)("div",{className:"text-xs text-gray-500 p-3 whitespace-pre-line border-l-4 mb-2 border-gray-300 bg-gray-50",children:"".concat(d.formatMessage({id:"customcode.notice.title"}),`:

`).concat(d.formatMessage({id:"customcode.notice.file.write"}),`\uFF1A
`).concat(d.formatMessage({id:"customcode.notice.file.write.desc"}),`
`).concat(d.formatMessage({id:"customcode.notice.file.write.example"}),`

`).concat(d.formatMessage({id:"customcode.notice.file.return"}),`\uFF1A
`).concat(d.formatMessage({id:"customcode.notice.file.return.desc"}),`
`).concat(d.formatMessage({id:"customcode.notice.file.return.example"}))}),(0,e.jsxs)(a.Z.Item,{children:[(0,e.jsx)("div",{className:"",children:d.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-[345px]",children:(0,e.jsx)(Te.Z,{language:"python3",value:K&&K.code?JSON.parse(K.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,onChange:se,title:"python3"})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(H.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ue()},children:d.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(H.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Je=We,ke=t(78045),Mt=fe.Z.TextArea,Nt=fe.Z.Search,Xe=function(l){var y=l.loading,W=l.ThirdlyValue,K=l.Thirdlyref,n=l.handleBack,V=l.Skillinfo,te=l.setSkillInfo,q=l.Operationbentate,p=l.firstjudgingcondition,oe=l.pageKeyfun,X=l.skillmenudisabled,N=l.setskillmenudisabled,re=l.skillupdata,d=(0,x.useIntl)(),ae=(0,M.useState)(null),se=o()(ae,2),ue=se[0],O=se[1];(0,M.useEffect)(function(){},[]);var g=function(z){te(s()(s()({},V),{},{output_type:z.target.value}))},le=function(z){te(s()(s()({},V),{},{output_variables:z.free}))},k=function(z){var i=new b.Kr("output","","");z.users.forEach(function(j){var B=new b._w(j.name,j.type?j.type:"string","",j.content,!1);i.addProperty(j.name,B)});var E={output_type:V.output_type,output_variables:i};W(E)},$=function(){p(K.getFieldsValue().users,2)||K.validateFields().then(function(z){re()}).catch(function(z){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsxs)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:[" ",d.formatMessage({id:"skill.menu.output"})]})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:k,style:{width:900},autoComplete:"off",form:K,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(z,i){var E,j=i.add,B=i.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(ve.Z,{name:d.formatMessage({id:"skill.outputvariable"}),title:d.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(ke.ZP.Group,{onChange:g,value:V&&V.output_type,children:[(0,e.jsx)(ke.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(ke.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(ke.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(ke.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.file"})})})]})]}),!y&&(0,e.jsx)("div",{className:"",children:(0,e.jsx)(_e.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",required:!0,name:d.formatMessage({id:"skill.outputv"}),title:d.formatMessage({id:"skill.Callword.outputv"})})}),variableTypes:["string","number","json","file"],variables:Object.values((V==null||(E=V.output_variables)===null||E===void 0?void 0:E.properties)||{}),onChange:le})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(H.ZP,{type:"primary",className:"mr-[20px] mt-[30px]",onClick:function(){$()},children:[" ",d.formatMessage({id:"skill.btn.savedebug"})]}),(0,e.jsx)(H.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Ye=Xe,Qe=t(13769),qe=t.n(Qe),et=t(49677),tt=t.n(et),at=t(37369),st=["key","name"],Ct=fe.Z.TextArea,Pt=fe.Z.Search,lt=function(l){var y=l.FourthlyValue,W=l.Fourthlyref,K=l.handleBack,n=l.Skillinfo,V=l.Operationbentate,te=l.skillid,q=l.app_id,p=(0,x.useIntl)(),oe=(0,M.useState)(null),X=o()(oe,2),N=X[0],re=X[1],d=(0,M.useState)(!1),ae=o()(d,2),se=ae[0],ue=ae[1];(0,M.useEffect)(function(){},[]);var O=function(){var E=C()(m()().mark(function j(){var B;return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,P.cN)(q||n.app_id);case 2:B=D.sent,B.code==0?c.ZP.success(p.formatMessage({id:"skill.publishsuccess"})):c.ZP.error(p.formatMessage({id:"skill.select.value"}));case 4:case"end":return D.stop()}},j)}));return function(){return E.apply(this,arguments)}}(),g=function(j){var B=j.users.filter(function(v,ce){return v.type=="number"&&!Number(v.value)&&!!v.value});if(B.length>0)c.ZP.warning(p.formatMessage({id:"skill.message.warning.vlaue"}));else{ue(!0);var I=new b.Kr("output","","");j.users.forEach(function(v){var ce=new b._w(v.name,v.type,v.type=="string"?v.value:v.type=="number"?Number(v.value):v.value,v.content,v.status);I.addProperty(v.name,ce)});var D={skill_id:te||n.id,input_dict:I};z(D)}},le=(0,M.useState)([]),k=o()(le,2),$=k[0],T=k[1],z=function(){var E=C()(m()().mark(function j(B){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:(0,P.Ur)(B).then(function(v){c.ZP.success(p.formatMessage({id:"skill.run.success"})),re(v.data.outputs),T(v.data.file_list||[]),ue(!1)}).catch(function(v){ue(!1),v.code==="ERR_NETWORK"&&c.ZP.error(p.formatMessage({id:"skill.run.error"})),console.log(v,"err-===>")});case 1:case"end":return D.stop()}},j)}));return function(B){return E.apply(this,arguments)}}(),i=function(){var E=C()(m()().mark(function j(){return m()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:x.history.push("/Skill?app_id=".concat(q||(n==null?void 0:n.app_id),"&type=false")),location.reload();case 2:case"end":return I.stop()}},j)}));return function(){return E.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:p.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:g,style:{width:900},autoComplete:"off",form:W,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsxs)("div",{children:[" ",p.formatMessage({id:"skill.inputvariable"})]})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:p.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:p.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(a.Z.List,{name:"users",children:function(j,B){return tt()(B),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:j.map(function(I){var D=I.key,v=I.name,ce=qe()(I,st);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,s()(s()({},ce),{},{name:[v,"content"],children:(0,e.jsx)(fe.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless"})})),(0,e.jsx)(a.Z.Item,s()(s()({},ce),{},{name:[v,"value"],rules:[{required:!!(W.getFieldsValue()&&W.getFieldsValue().users[D].status==!0),message:p.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(fe.Z,{placeholder:W.getFieldsValue()&&W.getFieldsValue().users[D].status==!0?p.formatMessage({id:"skill.variantcontent.required"}):p.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(a.Z.Item,{rules:[{required:!0,message:p.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:p.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Ce.Z,{spinning:se,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:N?(0,e.jsx)(Te.Z,{language:"python3",value:N&&JSON.stringify(N)}):null}),$.length>0&&(0,e.jsx)(at.Z,{files:$,title:p.formatMessage({id:"agent.file.output"}),className:"mb-4"}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(H.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:p.formatMessage({id:"skill.run"})})})})]})})]})]}),(0,e.jsx)("div",{className:"w-28",children:(n==null?void 0:n.publish_status)===1&&(n==null?void 0:n.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsxs)(H.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:i,children:[" ",p.formatMessage({id:"skill.amend"})]})}):(0,e.jsx)("div",{children:(0,e.jsxs)(H.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:O,children:[" ",p.formatMessage({id:"skill.publish"})]})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},nt=lt,it=function(){var l,y=(0,x.useIntl)(),W=a.Z.useForm(),K=o()(W,1),n=K[0],V=a.Z.useForm(),te=o()(V,1),q=te[0],p=a.Z.useForm(),oe=o()(p,1),X=oe[0],N=a.Z.useForm(),re=o()(N,1),d=re[0],ae=(0,M.useState)(0),se=o()(ae,2),ue=se[0],O=se[1],g=(0,M.useState)("1"),le=o()(g,2),k=le[0],$=le[1],T=(0,M.useState)(null),z=o()(T,2),i=z[0],E=z[1],j=(0,M.useState)(null),B=o()(j,2),I=B[0],D=B[1],v=(0,M.useState)(!0),ce=o()(v,2),Me=ce[0],_t=ce[1],ut=(0,M.useState)(!1),Ee=o()(ut,2),Ot=Ee[0],dt=Ee[1],ot=(0,M.useState)(null),Ie=o()(ot,2),we=Ie[0],ct=Ie[1],mt=(0,M.useState)(null),Ve=o()(mt,2),je=Ve[0],De=Ve[1],ft=(0,M.useState)(null),Re=o()(ft,2),pt=Re[0],Ae=Re[1],vt=(0,M.useState)(!0),Be=o()(vt,2),Se=Be[0],me=Be[1],ht=(0,M.useState)({first:!1,second:!1,thirdly:!1,fourthly:!1}),Le=o()(ht,2),de=Le[0],he=Le[1],xt=[{key:"1",disabled:de.first,icon:(0,e.jsx)(ye.Z,{}),label:y.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:k=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:de.second,icon:(0,e.jsx)(Q.Z,{}),label:y.formatMessage({id:"skill.menu.code"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:k=="2"?"#1B64F3":"#213044"}},{key:"3",disabled:de.thirdly,icon:(0,e.jsx)(U.Z,{}),label:y.formatMessage({id:"skill.menu.output"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:k=="3"?"#1B64F3":"#213044"}},{key:"4",disabled:de.fourthly,icon:(0,e.jsx)(A.Z,{}),label:y.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:k=="4"?"#1B64F3":"#213044"}}];(0,M.useEffect)(function(){me(!0);var R=new URLSearchParams(window.location.search);R.get("app_id")||he({first:!1,second:!0,thirdly:!0,fourthly:!0}),Ge()},[]);var Ge=function(){var R=C()(m()().mark(function f(S){var r,F,Y,Fe,ne;return m()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(r=new URLSearchParams(window.location.search),me(!0),F=null,!(r.get("app_id")||S)){pe.next=11;break}return pe.next=6,(0,P.Hb)(S||r.get("app_id"),r.get("type"));case 6:F=pe.sent,De(F.data.app_id),Ae(F.data.id),pe.next=12;break;case 11:F=(0,ie.iJ)();case 12:me(!1),F.code==0?(E(F.data),Y=xe(F.data.input_variables),n.setFieldsValue(Y),D(F.data.dependencies?F.data.dependencies.python3:[]),Fe=xe(F.data.output_variables),X.setFieldsValue(Fe),ne=xe(F.data.input_variables),d.setFieldsValue(ne)):c.ZP.error(y.formatMessage({id:"skill.message.listerror"}));case 14:case"end":return pe.stop()}},f)}));return function(S){return R.apply(this,arguments)}}(),xe=function(f){var S={users:f&&f.properties?Object.values(f.properties).map(function(r){return{name:r.name,type:r.type,content:r.display_name,status:r.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return S},ge=function(){var R=C()(m()().mark(function f(S,r){var F,Y;return m()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return F={app_id:r||je,data:S},ne.next=3,(0,P.ej)(F);case 3:Y=ne.sent,me(!1),Y.code===0&&(c.ZP.success(y.formatMessage({id:"skill.conserve.success"})),Ge(r||je),me(!1));case 6:case"end":return ne.stop()}},f)}));return function(S,r){return R.apply(this,arguments)}}(),gt=function(){history.back()},bt=function(f,S){ge(f,S);var r=xe(f.input_variables);d.setFieldsValue(r)},yt=function(f){ge(f)},kt=function(f){ge(f)},jt=function(f){ge(f)},Ne=function(f){O(f)},St=function(f){$(f.key)},Ft=function(){if(!je)(0,ee.uy)((0,ie.Go)("GET")).then(function(r){De(r.data.app_id),(0,P.Hb)(r.data.app_id,!1).then(function(F){Ae(F.data.id);var Y={};Y={input_variables:i.input_variables?i.input_variables:be(n.getFieldsValue()),is_public:i.is_public,attrs_are_visible:i.attrs_are_visible,dependencies:{python3:I||[]},code:we||(i.code?i.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:i.output_type,output_variables:i.output_variables?i.output_variables:be(X.getFieldsValue())};var Fe=xe(be(n.getFieldsValue()));d.setFieldsValue(Fe),ge(Y,r.data.app_id);var ne=s()(s()({},(0,ie.Go)("GET")),{},{app_id:r.data.app_id});(0,ie.Go)("SET",ne),$("4"),he(s()(s()({},de),{},{fourthly:!1}))}).catch(function(F){me(!1)})}).catch(function(r){me(!1)});else{var f={input_variables:i.input_variables?i.input_variables:be(n.getFieldsValue()),is_public:i.is_public,attrs_are_visible:i.attrs_are_visible,dependencies:{python3:I||[]},code:we||(i.code?i.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:i.output_type,output_variables:i.output_variables?i.output_variables:be(X.getFieldsValue())},S=xe(be(n.getFieldsValue()));d.setFieldsValue(S),ge(f,je),me(!1),$("4"),he(s()(s()({},de),{},{fourthly:!1}))}},Ue=function(f,S){if(console.log(S),S==1){if(!i.input_variables)return c.ZP.warning(y.formatMessage({id:"skill.message.inputerror1"})),!0;if(Pe().isEmpty(i.input_variables.properties))return c.ZP.warning(y.formatMessage({id:"skill.message.inputerror1"})),!0}if(S==2){if(!i.output_variables)return c.ZP.warning(y.formatMessage({id:"skill.message.inputerror2"})),!0;if(Pe().isEmpty(i.output_variables.properties))return c.ZP.warning(y.formatMessage({id:"skill.message.inputerror2"})),!0}return Zt(f,"name")?(c.ZP.warning(y.formatMessage({id:"skill.message.inputerror5"})),!0):!1},Zt=function(f,S){var r=new Set;return f.some(function(F){var Y=F[S];return r.has(Y)?r.add(Y):r.add(Y)&&!1})},be=function(f){var S=new b.Kr("output","","");return f.users.forEach(function(r){var F=new b._w(r.name,r.type?r.type:"string",r.value?r.value:"",r.content,r.status?r.status:!1);S.addProperty(r.name,F)}),S};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(H.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:gt,children:[(0,e.jsx)(Z.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:y.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(u.Z,{selectedKeys:[k],onClick:St,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[k],mode:"inline",items:xt})})]}),(0,e.jsx)(Ce.Z,{spinning:Se,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px] ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsx)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:(l=(0,ie.Go)("GET"))!==null&&l!==void 0&&l.app_id?y.formatMessage({id:"skill.Editingskill"}):y.formatMessage({id:"skill.Creatingskill"})}),(i==null?void 0:i.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:y.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE]  text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:y.formatMessage({id:"skill.unpublish"})})]})}),(0,e.jsx)("div",{style:{display:k==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Se&&(0,e.jsx)(Ke,{loading:Se,FirstValue:bt,Skillinfo:i,setSkillInfo:E,FirstSkillref:n,Operationbentate:Me,firstjudgingcondition:Ue,pageKeyfun:$,skillmenudisabled:de,setskillmenudisabled:he})}),(0,e.jsx)("div",{style:{display:k==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Je,{SecondValue:yt,handleBack:Ne,Skillinfo:i,setSkillInfo:E,SkillRelyOn:I,setSkillRelyOn:D,Secondref:q,setskillcodestate:dt,setNewcode:ct,pageKeyfun:$,skillmenudisabled:de,setskillmenudisabled:he})}),(0,e.jsx)("div",{style:{display:k==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Se&&(0,e.jsx)(Ye,{loading:Se,ThirdlyValue:kt,handleBack:Ne,Thirdlyref:X,Skillinfo:i,setSkillInfo:E,Operationbentate:Me,firstjudgingcondition:Ue,pageKeyfun:$,skillmenudisabled:de,setskillmenudisabled:he,skillupdata:Ft})}),(0,e.jsx)("div",{style:{display:k==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(nt,{FourthlyValue:jt,handleBack:Ne,Fourthlyref:d,Skillinfo:i,skillid:pt,app_id:je,Operationbentate:Me})})]})})})]})},rt=it},49677:function(J){function _(t){if(t==null)throw new TypeError("Cannot destructure "+t)}J.exports=_,J.exports.__esModule=!0,J.exports.default=J.exports}}]);
