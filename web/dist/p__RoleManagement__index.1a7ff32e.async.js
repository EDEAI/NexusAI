"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[891],{14694:function(X,v,e){e.r(v);var C=e(97857),P=e.n(C),T=e(15009),u=e.n(T),A=e(99289),p=e.n(A),I=e(5574),g=e.n(I),R=e(47389),y=e(82061),L=e(51042),K=e(85576),S=e(45360),B=e(83062),f=e(28036),U=e(86842),m=e(67294),c=e(76772),w=e(32060),s=e(85893),W=function(){var n=(0,c.useIntl)(),k=(0,m.useState)(!1),D=g()(k,2),x=D[0],O=D[1],N=(0,m.useState)([]),j=g()(N,2),Z=j[0],z=j[1],F=(0,m.useState)({current:1,pageSize:10,total:0}),b=g()(F,2),h=b[0],G=b[1],M=function(){var l=p()(u()().mark(function a(){var r,i,d,o=arguments;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&o[0]!==void 0?o[0]:1,i=o.length>1&&o[1]!==void 0?o[1]:10,O(!0),t.prev=3,t.next=6,(0,w.Sd)({page:r,page_size:i});case 6:d=t.sent,d.code===0&&(z(d.data.list),G({current:r,pageSize:i,total:d.data.total_count})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Failed to fetch roles list:",t.t0);case 13:return t.prev=13,O(!1),t.finish(13);case 16:case"end":return t.stop()}},a,null,[[3,10,13,16]])}));return function(){return l.apply(this,arguments)}}(),$=function(a,r){K.Z.confirm({title:n.formatMessage({id:"workflow.roleManagement.deleteConfirmTitle"}),content:n.formatMessage({id:"workflow.roleManagement.deleteConfirmContent"},{name:r}),okText:n.formatMessage({id:"workflow.roleManagement.confirm"}),cancelText:n.formatMessage({id:"workflow.roleManagement.cancel"}),okType:"danger",onOk:function(){var i=p()(u()().mark(function o(){var E;return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,w.Rd)(a);case 3:E=_.sent,E.code===0&&(S.ZP.success(n.formatMessage({id:"workflow.roleManagement.deleteSuccess"})),M(h.current,h.pageSize)),_.next=10;break;case 7:_.prev=7,_.t0=_.catch(0),console.error("Failed to delete role:",_.t0);case 10:case"end":return _.stop()}},o,null,[[0,7]])}));function d(){return i.apply(this,arguments)}return d}()})},J=function(a){c.history.push("/role-management/edit/".concat(a))},Q=function(){c.history.push("/role-management/create")},H=function(a){M(a.current,a.pageSize)},V=[{title:n.formatMessage({id:"workflow.roleManagement.roleName"}),dataIndex:"name",key:"name",width:200},{title:n.formatMessage({id:"workflow.roleManagement.description"}),dataIndex:"description",key:"description",ellipsis:{showTitle:!1},render:function(a){return(0,s.jsx)(B.Z,{placement:"topLeft",title:a,children:a})}},{title:n.formatMessage({id:"workflow.roleManagement.createdAt"}),dataIndex:"created_at",key:"created_at",width:180,render:function(a){return new Date(a).toLocaleString()}},{title:n.formatMessage({id:"workflow.roleManagement.actions"}),key:"actions",width:120,render:function(a,r){return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(f.ZP,{type:"text",size:"small",icon:(0,s.jsx)(R.Z,{}),onClick:function(){return J(r.id)},title:n.formatMessage({id:"workflow.roleManagement.edit"})}),(0,s.jsx)(f.ZP,{type:"text",size:"small",danger:!0,icon:(0,s.jsx)(y.Z,{}),onClick:function(){return $(r.id,r.name)},title:n.formatMessage({id:"workflow.roleManagement.delete"})})]})}}];return(0,m.useEffect)(function(){M()},[]),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:n.formatMessage({id:"workflow.roleManagement.title"})}),(0,s.jsx)(f.ZP,{type:"primary",icon:(0,s.jsx)(L.Z,{}),onClick:Q,children:n.formatMessage({id:"workflow.roleManagement.createRole"})})]}),(0,s.jsx)(U.Z,{columns:V,dataSource:Z,loading:x,rowKey:"id",pagination:P()(P()({},h),{},{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(a,r){return n.formatMessage({id:"workflow.roleManagement.pagination"},{start:r[0],end:r[1],total:a})}}),onChange:H})]})};v.default=W}}]);
