"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1391],{89035:function(Oe,ee,a){a.d(ee,{Z:function(){return m}});var te=a(1413),F=a(67294),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},s=oe,ce=a(91146),T=function(ue,xe){return F.createElement(ce.Z,(0,te.Z)((0,te.Z)({},ue),{},{ref:xe,icon:s}))},me=F.forwardRef(T),m=me},14955:function(Oe,ee,a){a.r(ee),a.d(ee,{default:function(){return rt}});var te=a(15009),F=a.n(te),oe=a(97857),s=a.n(oe),ce=a(99289),T=a.n(ce),me=a(5574),m=a.n(me),K=a(11551),ue=a(47520),xe=a(29432),ze=a(2068),Ve=a(89035),Ee=a(15360),Te=a(82826),Le=a(69243),H=a(76772),i=a(40741),L=a(45360),ae=a(28036),Re=a(33456),Ze=a(74330),p=a(67294),I=a(92939),$e=a(5608),R=a(26915),X=a(72269),fe=a(34041),D=a(78045),we=a(80459),e=a(85893),Be=R.Z.TextArea,ke=function(n){var t=n.Detaillist,O=n.repository,u=n.Operationbentate,w=n.Ffromref,U=n.Fourthly_config_id,z=n.Fourthly_select_list,l=(0,H.useIntl)(),Y=(0,p.useState)([]),$=m()(Y,2),o=$[0],Q=$[1];(0,p.useEffect)(function(){W()},[]);var W=function(){var x=T()(F()().mark(function C(){var N;return F()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,K.zl)();case 2:N=v.sent,Q(N.data.data.map(function(f){return{value:f.dataset_id,label:f.name}}));case 4:case"end":return v.stop()}},C)}));return function(){return x.apply(this,arguments)}}(),_={readOnly:!0},M={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:l.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:w,children:[t&&t.app.attrs_are_visible===0?(0,e.jsx)(i.Z.List,{name:"users",children:function(C,N){var V=N.add,v=N.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[t&&t.app&&t.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:u==="true"?l.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:t&&t.app&&t.app.description})]})})]})}}):(0,e.jsx)(i.Z.List,{name:"users",children:function(C,N){var V,v,f=N.add,B=N.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[t&&t.app&&t.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:u==="true"?l.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:t&&t.app&&t.app.description})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(I.Z,{className:"font-medium",name:l.formatMessage({id:"agent.teamvisibility"}),title:l.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(X.Z,s()(s()({},M),{},{size:"small",checked:!!(t&&t.app.is_public===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(I.Z,{className:"font-medium",name:l.formatMessage({id:"agent.attrVisible"}),title:l.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(X.Z,s()(s()({},M),{},{size:"small",checked:!!(t&&t.app.attrs_are_visible===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:l.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(X.Z,s()(s()({},M),{},{size:"small",checked:!!(t&&t.app.enable_api===1)}))]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:l.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(X.Z,s()(s()({},M),{},{size:"small",checked:!!(t&&t.agent.allow_upload_file==1)}))]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:l.formatMessage({id:"agent.LLMmodel"})}),(0,e.jsx)(fe.Z,s()(s()({},M),{},{"aria-readonly":"true",style:{width:270},variant:"filled",value:U,options:z}))]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(I.Z,{name:l.formatMessage({id:"agent.functiondescription"}),title:l.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(Be,s()(s()({},M),{},{value:t&&t.agent&&t.agent.obligations,variant:"filled",autoSize:{minRows:8,maxRows:10}}))]})}),(t==null||(V=t.agent)===null||V===void 0?void 0:V.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)($e.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(I.Z,{className:"font-medium",required:!0,name:l.formatMessage({id:"agent.inputvariable"}),title:l.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((t==null||(v=t.agent)===null||v===void 0||(v=v.input_variables)===null||v===void 0?void 0:v.properties)||{})})}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(I.Z,{className:"font-medium",name:l.formatMessage({id:"agent.associatedknowledgebase"}),title:l.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(fe.Z,s()(s()({},M),{},{size:"large",mode:"tags",style:{width:"100%"},placeholder:l.formatMessage({id:"agent.pleaseselect"}),value:O,variant:"filled",options:o}))]}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",l.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsx)(D.ZP.Group,s()(s()({},M),{},{value:t&&t.agent.default_output_format,options:[{value:1,label:"text"},{value:2,label:"json"},{value:3,label:"code"}]}))]})})]})}}),t&&t.app.attrs_are_visible===1&&t.agent.selected_skills&&(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:l.formatMessage({id:"agent.mcp.resources"})}),(0,e.jsxs)("div",{className:"pl-4",children:[t.agent.selected_skills&&t.agent.selected_skills.length>0&&(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(I.Z,{className:"font-medium",name:l.formatMessage({id:"agent.selectSkills"}),title:l.formatMessage({id:"agent.explain.selectSkills"})})})}),(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:t.agent.selected_skills.map(function(x){return(0,e.jsxs)("div",{className:"flex items-center w-full p-2 bg-white rounded-lg shadow-sm",children:[(0,e.jsx)(we.Z,{rounded:"6px",data:x,bg:x.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:x.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:x.description})]})]},x.app_id)})})]}),t.agent.selected_workflows&&t.agent.selected_workflows.length>0&&(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(I.Z,{className:"font-medium",name:l.formatMessage({id:"agent.selectWorkflows"}),title:l.formatMessage({id:"agent.explain.selectWorkflows"})})})}),(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:t.agent.selected_workflows.map(function(x){return(0,e.jsxs)("div",{className:"flex items-center w-full p-2 bg-white rounded-lg shadow-sm",children:[(0,e.jsx)(we.Z,{rounded:"6px",data:x,bg:x.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:x.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:x.description})]})]},x.app_id)})})]}),!t.agent.selected_skills&&!t.agent.selected_workflows&&(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:l.formatMessage({id:"agent.noResources"})})]})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},We=ke,Ge=a(13769),Ke=a.n(Ge),He=a(49677),Xe=a.n(He),Je=a(620),Ue=a(85877),Ye=a(39944),Me=a(10759),Qe=a(71471),_e=["key","name"],ht=Qe.Z.Title,vt=R.Z.TextArea,jt=R.Z.Search,qe=function(n){var t=n.Detaillist,O=n.setDetaillist,u=n.Fourthly_select_list,w=n.setFourthly_config_id,U=n.Fourthly_config_id,z=n.Fourthlyref,l=n.Fourthly_abilities_list,Y=n.Operationbentate,$=n.callwordlist,o=(0,H.useIntl)(),Q=(0,p.useState)(0),W=m()(Q,2),_=W[0],M=W[1],x=(0,p.useState)(""),C=m()(x,2),N=C[0],V=C[1],v=(0,p.useState)(""),f=m()(v,2),B=f[0],pe=f[1],se=(0,p.useState)(!1),le=m()(se,2),he=le[0],q=le[1],ve={readOnly:!0},je={disabled:!0},be=function(d){var g={user:{value:ne(d)}};V(new Ye.z(g))},ye=function(d){M(d)},ie=function(d){var g=d.users.filter(function(c,k){return c.type=="number"&&!Number(c.value)&&!!c.value});if(!N.user)L.ZP.warning(o.formatMessage({id:"agent.message.warning.callword"}));else if(g.length>0)L.ZP.warning(o.formatMessage({id:"agent.message.warning.datatype"}));else{q(!0);var y=new Me.Kr("input","","");d.users.forEach(function(c){var k=new Me._w(c.name,c.type?c.type:"string",c.type=="string"?c.value:Number(c.value),c.content,c.status);y.addProperty(c.name,k)});var j={agent_id:t.agent.agent_id,ability_id:_,input_dict:y,prompt:N};re(j)}},ne=function b(d){return d.map(function(g){return g.type==="mention"?g.id:g.children?b(g.children):g.text}).join("")},re=function(){var b=T()(F()().mark(function d(g){return F()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:(0,K.LH)(g).then(function(c){L.ZP.success(o.formatMessage({id:"agent.message.success.runpublish"})),pe(c.data.outputs.text),q(!1)}).catch(function(c){q(!1)});case 1:case"end":return j.stop()}},d)}));return function(g){return b.apply(this,arguments)}}(),Ne=function(){var b=T()(F()().mark(function d(){var g;return F()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,K.Dh)(t.agent.agent_id);case 2:g=j.sent,g.code==0?L.ZP.success("success"):L.ZP.error("error");case 4:case"end":return j.stop()}},d)}));return function(){return b.apply(this,arguments)}}(),de=function(){var b=T()(F()().mark(function d(){return F()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:H.history.push("/Agents?app_id=".concat(t.app.app_id,"&type=false")),location.reload();case 2:case"end":return y.stop()}},d)}));return function(){return b.apply(this,arguments)}}();return(0,p.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:o.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(fe.Z,{placeholder:o.formatMessage({id:"agent.pleaseselect"}),defaultValue:o.formatMessage({id:"agent.allability"}),variant:"filled",style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:ye,options:l})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",onFinish:ie,style:{width:900},autoComplete:"off",form:z,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(i.Z.List,{name:"users",children:function(d,g){return Xe()(g),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:o.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52",children:o.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:d.map(function(y){var j=y.key,c=y.name,k=Ke()(y,_e);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(i.Z.Item,s()(s()({},k),{},{name:[c,"content"],children:(0,e.jsx)(R.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(i.Z.Item,s()(s()({},k),{},{name:[c,"value"],rules:[{required:!!(z.getFieldsValue()&&z.getFieldsValue().users[j].status==!0),message:o.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(R.Z,{style:{width:"660px"},placeholder:z.getFieldsValue()&&z.getFieldsValue().users[j].status==!0?o.formatMessage({id:"agent.variable.required.value"}):o.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(i.Z.Item,{rules:[{required:!0,message:o.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.runpreview"})}),(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)(Ze.Z,{spinning:he,children:(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:B?(0,e.jsx)(Je.Z,{language:"python3",value:B&&JSON.stringify(B)}):null})}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Ue.Z,{onChange:function(d){console.log($),be(d)},options:$})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ae.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})]}),(0,e.jsx)(i.Z.Item,{children:(0,e.jsx)("div",{className:"w-28",children:(t==null?void 0:t.agent.publish_status)===1&&(t==null?void 0:t.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ae.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:de,children:o.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ae.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:Y!="false",onClick:Ne,children:o.formatMessage({id:"agent.publish"})})})})})]})}),(0,e.jsx)("div",{className:"h-10 w-1"})]})},et=qe,tt=R.Z.TextArea,bt={readOnly:!0},J={disabled:!0},at=function(n){var t=n.Detaillist,O=n.Sformref,u=(0,H.useIntl)();return(0,p.useEffect)(function(){}),(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:u.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(I.Z,{name:u.formatMessage({id:"agent.automatch"}),title:u.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(X.Z,s()(s()({},J),{},{size:"small",checked:!!(t&&t.agent.auto_match_ability==1)}))]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:O,children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:u.formatMessage({id:"agent.capability"})})}),O&&O.getFieldValue("users")&&O.getFieldValue("users").map(function(w,U){return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(i.Z.Item,{className:"mb-0",children:(0,e.jsx)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:u.formatMessage({id:"agent.capabilityname"})})})}),(0,e.jsx)(i.Z.Item,{className:"mb-[20px]",children:(0,e.jsx)(R.Z,s()(s()({},J),{},{placeholder:u.formatMessage({id:"agent.capabilityname"}),value:w.name,className:"w-full"}))}),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(I.Z,{className:"text-[#555555] text-xs font-medium",name:u.formatMessage({id:"agent.capabilitydescription"}),title:u.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(i.Z.Item,{className:"w-full mb-[20px]",children:(0,e.jsx)(tt,s()(s()({value:w.content},J),{},{placeholder:u.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},style:{width:"100%"}}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:u.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(i.Z.Item,{className:"mb-[20px]",children:(0,e.jsxs)(D.ZP.Group,s()(s()({value:w.status,optionType:"button",buttonStyle:"solid"},J),{},{defaultValue:!0,children:[(0,e.jsx)(D.ZP,{value:!0,children:u.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(D.ZP,{value:!1,children:u.formatMessage({id:"agent.capabilitystatus.disable"})})]}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:u.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(i.Z.Item,{className:"mb-0",children:(0,e.jsxs)(D.ZP.Group,s()(s()({defaultValue:0,value:w.output_format},J),{},{children:[(0,e.jsx)(D.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:u.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(D.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(D.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(D.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))})]})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},st=at,lt=a(43319),it=a(27842),nt=function(){var n=(0,H.useIntl)(),t=(0,p.useRef)(null),O=i.Z.useForm(),u=m()(O,1),w=u[0],U=i.Z.useForm(),z=m()(U,1),l=z[0],Y=i.Z.useForm(),$=m()(Y,1),o=$[0],Q=i.Z.useForm(),W=m()(Q,1),_=W[0],M=(0,p.useState)(!1),x=m()(M,2),C=x[0],N=x[1],V=(0,p.useState)(null),v=m()(V,2),f=v[0],B=v[1],pe=(0,p.useState)(null),se=m()(pe,2),le=se[0],he=se[1],q=(0,p.useState)(null),ve=m()(q,2),je=ve[0],be=ve[1],ye=(0,p.useState)(null),ie=m()(ye,2),ne=ie[0],re=ie[1],Ne=(0,p.useState)(null),de=m()(Ne,2),b=de[0],d=de[1],g=(0,p.useState)(null),y=m()(g,2),j=y[0],c=y[1],k=(0,p.useState)("1"),Se=m()(k,2),A=Se[0],dt=Se[1],ot=(0,p.useState)(null),Ae=m()(ot,2),ct=Ae[0],mt=Ae[1],ut=[{key:"1",icon:(0,e.jsx)(ze.Z,{}),label:n.formatMessage({id:"agent.menu.basicsetup"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:A=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(Ve.Z,{}),label:n.formatMessage({id:"agent.menu.Capacityoutput"}),disabled:f&&f.app.attrs_are_visible===0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:A=="2"?"#1B64F3":"#213044"}},{key:"5",icon:(0,e.jsx)(Ee.Z,{}),label:n.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:A=="5"?"#1B64F3":"#213044"}}];(0,p.useEffect)(function(){xt()},[]);var xt=function(){var G=T()(F()().mark(function S(){var P,r,E,Pe,Fe,Ie,De;return F()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return N(!0),Z.prev=1,P=new URLSearchParams(window.location.search),Z.next=5,(0,K.ek)(P.get("app_id"),P.get("type"));case 5:r=Z.sent,E=r.data,r.data.agent_dataset_relation_list&&r.data.agent_dataset_relation_list.length&&(Pe=r.data.agent_dataset_relation_list.map(function(h){return h.dataset_id}),he(Pe)),r.data.callable_items&&(r.data.agent.selected_skills=[],r.data.agent.selected_workflows=[],r.data.callable_items.forEach(function(h){h.item_type==1?r.data.agent.selected_skills.push(s()(s()({},h),{},{mode:4})):r.data.agent.selected_workflows.push(s()(s()({},h),{},{mode:2}))})),B(r.data),c(r.data.agent.publish_status===0&&r.data.is_creator===1?"false":"true"),r.data.agent.publish_status===1&&L.ZP.warning(n.formatMessage({id:"agent.message.listwarning"}),5),w.setFieldsValue(ft(E.agent.input_variables)),r.data.agent_abilities_list&&(Fe=r.data.agent_abilities_list.map(function(h){return h.status==1?s()(s()({},h),{},{status:!0}):s()(s()({},h),{},{status:!1})}),o.setFieldsValue({users:Fe[0]?Fe:[{agent_ability_id:0,name:"",content:"",status:!0}]}),Ie=E.agent_abilities_list.filter(function(h){return h.output_format!==0}),l.setFieldsValue({users:Ie.map(function(h){return{agent_ability_id:h.agent_ability_id,output_format:h.output_format}})})),E.m_configurations_list&&be(E.m_configurations_list.map(function(h){return{value:h.m_config_id,label:h.m_name}})),re(E.agent.m_config_id),E.agent_abilities_list&&(De=E.agent_abilities_list.filter(function(h,Nt){return h.status===1}),d(gt(De).concat([{value:0,label:n.formatMessage({id:"agent.allability"})}]))),Z.next=23;break;case 19:Z.prev=19,Z.t0=Z.catch(1),console.error("Failed to fetch agent details:",Z.t0),L.ZP.error(n.formatMessage({id:"agent.message.error"}));case 23:return Z.prev=23,N(!1),Z.finish(23);case 26:case"end":return Z.stop()}},S,null,[[1,19,23,26]])}));return function(){return G.apply(this,arguments)}}(),ft=function(S){console.log(!!S&&!!S.properties,"obj");var P={users:S&&S.properties?Object.values(S.properties).map(function(r){return{name:r.name,type:r.type,content:r.display_name,status:r.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return P},gt=function(S){return S.map(function(P){return{value:P.agent_ability_id,label:P.name}})},pt=function(){Ce({key:A,keyPath:[],item:void 0,domEvent:void 0}),history.back()},Ce=function(S){try{if(A=="1"){var P=w.getFieldsValue().users.map(function(r){return{value:"<<".concat(xe.qX,".inputs.").concat(r.name,">>"),label:r.name}});_.setFieldsValue(w.getFieldsValue()),mt(P)}dt(S.key)}catch(r){console.log(r,"error")}};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ae.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:pt,children:[(0,e.jsx)(Te.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:n.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Re.Z,{selectedKeys:[A],onClick:Ce,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[A],mode:"inline",items:ut}),f&&f.app.enable_api===1&&f.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:function(){window.open(ue._n+f.app.api_url)},children:(0,e.jsxs)("div",{className:"mr-[20px]",children:[(0,e.jsx)(Le.Z,{className:"mr-2"}),n.formatMessage({id:"agent.visit"}),"API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)(Ze.Z,{spinning:C,className:"h-full",children:(0,e.jsx)("div",{className:"flex flex-col  ",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[f?f.creator_nickname:""," ",n.formatMessage({id:"agent.agents"})]})]})}),(0,e.jsx)("div",{style:{display:A==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(We,{Ffromref:w,loading:C,Detaillist:f,repository:le,Operationbentate:j,Fourthly_config_id:ne,Fourthly_select_list:je})}),(0,e.jsx)("div",{style:{display:A==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(st,{Detaillist:f,Sformref:o})}),(0,e.jsx)("div",{style:{display:A==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(et,{Detaillist:f,setDetaillist:B,Fourthly_select_list:je,Fourthly_config_id:ne,setFourthly_config_id:re,Fourthlyref:_,Fourthly_abilities_list:b,Operationbentate:j,callwordlist:ct})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(lt.Z,{operationbentate:j,data:{abilitiesList:b,detailList:f}})}),A=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(it.ZP,{agent_id:f.agent.agent_id})})]})]})},rt=nt}}]);
