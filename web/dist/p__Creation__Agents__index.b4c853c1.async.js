"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[178],{83510:function(ma,Ee,n){n.d(Ee,{LK:function(){return je},bs:function(){return Re},go:function(){return me},uy:function(){return Ue}});var He=n(15009),h=n.n(He),Ve=n(99289),L=n.n(Ve),re=n(47520),t="/v1/apps/apps_list",Ye="/v1/agent/agent_delete/",u="/v1/workflow/workflow_app_delete/",Q="/v1/vector/delete_dataset/",Le="/v1/skill/delete_skill_by_app_id/",We="/v1/apps/apps_create",Ae="/v1/apps/app_update/",me=function(){var be=L()(h()().mark(function ue(K){var O;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,re.ZP)("".concat(t),{method:"GET",data:K});case 2:return O=d.sent,d.abrupt("return",O);case 4:case"end":return d.stop()}},ue)}));return function(K){return be.apply(this,arguments)}}(),je=function(){var be=L()(h()().mark(function ue(K){var O;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log(K),d.next=3,K.mode;case 3:if(d.t0=d.sent,d.t0!=1){d.next=8;break}d.t1=(0,re.ZP)("".concat(Ye).concat(K.app_id),{method:"DELETE"}),d.next=9;break;case 8:d.t1=K.mode==2?(0,re.ZP)("".concat(u).concat(K.app_id),{method:"DELETE"}):K.mode==3?(0,re.ZP)("".concat(Q).concat(K.app_id),{method:"DELETE"}):(0,re.ZP)("".concat(Le).concat(K.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return O=d.t1,d.abrupt("return",O);case 11:case"end":return d.stop()}},ue)}));return function(K){return be.apply(this,arguments)}}(),Ue=function(){var be=L()(h()().mark(function ue(K){var O;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,re.ZP)("".concat(We),{method:"POST",data:K});case 2:return O=d.sent,d.abrupt("return",O);case 4:case"end":return d.stop()}},ue)}));return function(K){return be.apply(this,arguments)}}(),Re=function(){var be=L()(h()().mark(function ue(K){var O;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,re.ZP)("".concat(Ae).concat(K.app_id),{method:"PUT",data:K});case 2:return O=d.sent,d.abrupt("return",O);case 4:case"end":return d.stop()}},ue)}));return function(K){return be.apply(this,arguments)}}()},39873:function(ma,Ee,n){var He=n(5574),h=n.n(He),Ve=n(42881),L=n(67294),re=n(85893),t=function(u){var Q=u.children,Le=u.className,We=Le===void 0?"":Le,Ae=u.dragDirection,me=Ae===void 0?"left":Ae,je=u.minWidth,Ue=je===void 0?415:je,Re=u.maxWidth,be=Re===void 0?820:Re,ue=u.minHeight,K=ue===void 0?200:ue,O=u.maxHeight,P=O===void 0?800:O,d=u.defaultWidth,ge=d===void 0?415:d,Je=u.defaultHeight,Ze=Je===void 0?300:Je,l=u.onChange,ra=(0,L.useState)(ge),$e=h()(ra,2),Pe=$e[0],Qe=$e[1],na=(0,L.useState)(Ze),qe=h()(na,2),ia=qe[0],Te=qe[1],la=(0,L.useCallback)(function(_e,Ce){Qe(_e),Ce&&Te(Ce),l==null||l(_e,Ce)},[Qe,Te,l]),ze=(0,Ve.W)({direction:["left","right"].includes(me)?"horizontal":"vertical",triggerDirection:me,minWidth:Ue,maxWidth:be,minHeight:K,maxHeight:P,onResize:la}),De=ze.triggerRef,ye=ze.containerRef;return(0,re.jsxs)("div",{ref:ye,style:{width:["left","right"].includes(me)?"".concat(Pe,"px"):void 0,height:["top","bottom"].includes(me)?"".concat(ia,"px"):void 0},className:"flex flex-col p-4 shadow-lg rounded-md border border-blue-300 bg-white z-10 wrapPanel ".concat(We),children:[me==="left"&&(0,re.jsx)("div",{ref:De,className:"absolute top-1/2 -translate-y-1/2 -left-2 w-3 h-6 cursor-col-resize resize-x",children:(0,re.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),me==="right"&&(0,re.jsx)("div",{ref:De,className:"absolute top-1/2 -translate-y-1/2 -right-2 flex justify-end w-3 h-6 cursor-col-resize resize-x",children:(0,re.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),me==="top"&&(0,re.jsx)("div",{ref:De,className:"absolute left-1/2 -translate-x-1/2 -top-2 h-3 w-6 cursor-row-resize resize-y",children:(0,re.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),me==="bottom"&&(0,re.jsx)("div",{ref:De,className:"absolute left-1/2 -translate-x-1/2 -bottom-2 h-3 w-6 cursor-row-resize resize-y",children:(0,re.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),Q]})};Ee.Z=(0,L.memo)(t)},67862:function(ma,Ee,n){n.r(Ee),n.d(Ee,{default:function(){return Nt}});var He=n(15009),h=n.n(He),Ve=n(99289),L=n.n(Ve),re=n(97857),t=n.n(re),Ye=n(5574),u=n.n(Ye),Q=n(11551),Le=n(83510),We=n(47520),Ae=n(29432),me=n(10759),je=n(32332),Ue=n(2068),Re=n(89035),be=n(15360),ue=n(82826),K=n(69243),O=n(35312),P=n(40741),d=n(45360),ge=n(28036),Je=n(50136),Ze=n(74330),l=n(67294),ra=n(13769),$e=n.n(ra),Pe=n(92939),Qe=n(64599),na=n.n(Qe),qe=n(73445),ia=n(42237),Te=(0,qe.Ue)(function(M){return{models:[],loading:!1,error:null,initialized:!1,fetchModels:function(){var r=L()(h()().mark(function s(){var p;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,M({loading:!0}),f.next=4,(0,ia.fZ)();case 4:if(p=f.sent,p.code!==0){f.next=9;break}M({models:Array.isArray(p.data.data)?p.data.data:[],initialized:!0}),f.next=10;break;case 9:throw new Error(p.message||"Failed to fetch models");case 10:f.next=16;break;case 12:f.prev=12,f.t0=f.catch(0),M({error:f.t0.message}),d.ZP.error("Failed to fetch models");case 16:return f.prev=16,M({loading:!1}),f.finish(16);case 19:case"end":return f.stop()}},s,null,[[0,12,16,19]])}));function m(){return r.apply(this,arguments)}return m}()}}),la=function(){var r=Te(function(f){return f.models}),m=Te(function(f){return f.loading}),s=Te(function(f){return f.initialized}),p=Te(function(f){return f.fetchModels});(0,l.useEffect)(function(){s||p()},[s,p]);var R=(0,l.useMemo)(function(){var f=Array.isArray(r)?r:[],I=f.map(function(w){return{label:w.supplier_name,options:Array.isArray(w.model_list)?w.model_list.map(function(ae){return{label:ae.model_name,value:ae.model_config_id}}):[]}}),H,T=na()(f),C;try{for(T.s();!(C=T.n()).done;){var le=C.value;if(Array.isArray(le.model_list)){var _=le.model_list.find(function(w){return w.model_default_used===1});if(_){H=_.model_config_id;break}}}}catch(w){T.e(w)}finally{T.f()}return{options:I,defaultValue:H}},[r]);return t()(t()({},R),{},{loading:m})},ze=n(82061),De=n(51042),ye=n(26915),_e=n(72269),Ce=n(34041),he=n(78045),e=n(85893),Ra=["key","name"],$a=ye.Z.TextArea,za=function(r){var m=r.FirstValue,s=r.Detaillist,p=r.setDetaillist,R=r.repository,f=r.setRepository,I=r.Operationbentate,H=r.Ffromref,T=r.setFourthly_config_id,C=r.Fourthly_config_id,le=r.Fourthly_select_list,_=r.Newproperties,w=r.setNewproperties,ae=r.pageKeyfun,te=r.firstjudgingcondition,W=r.setAgentmunudisabled,q=r.agentmenudisabled,c=(0,O.useIntl)(),S=(0,l.useState)([]),X=u()(S,2),$=X[0],z=X[1],pe=(0,l.useState)({agent_id:0,data:{is_public:1,enable_api:0,obligations:null,input_variables:{},dataset_ids:[],attrs_are_visible:1}}),Y=u()(pe,2),y=Y[0],J=Y[1];(0,l.useEffect)(function(){xe()},[]);var E=function(a){T(a)},ne=function(a){J(t()(t()({},y),{},{data:t()(t()({},y.data),{},{obligations:a.target.value})})),p(t()(t()({},s),{},{agent:t()(t()({},s.agent),{},{obligations:a.target.value})}))},oe=function(a,g){var x=new Set;return a.some(function(F){var k=F[g];return x.has(k)?x.add(k):x.add(k)&&!1})},U=function(a){p(t()(t()({},s),{},{app:t()(t()({},s.app),{},{is_public:a?1:0})})),J(t()(t()({},y),{},{data:t()(t()({},y.data),{},{is_public:a?1:0})}))},fe=function(a){p(t()(t()({},s),{},{app:t()(t()({},s.app),{},{enable_api:a?1:0})})),J(t()(t()({},y),{},{data:t()(t()({},y.data),{},{enable_api:a?1:0})}))},ce=function(a){p(t()(t()({},s),{},{app:t()(t()({},s.app),{},{attrs_are_visible:a?1:0})})),J(t()(t()({},y),{},{data:t()(t()({},y.data),{},{attrs_are_visible:a?1:0})}))},ve=function(a){p(t()(t()({},s),{},{agent:t()(t()({},s.agent),{},{allow_upload_file:a?1:0})}))},Ne=function(a){J(t()(t()({},y),{},{data:t()(t()({},y.data),{},{dataset_ids:a})})),f(a)},xe=function(){var i=L()(h()().mark(function a(){var g;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,Q.zl)();case 2:g=F.sent,z(g.data.data.map(function(k){return{value:k.dataset_id,label:k.name}}));case 4:case"end":return F.stop()}},a)}));return function(){return i.apply(this,arguments)}}(),we=function(){var i=L()(h()().mark(function a(){return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:te()||(ae("2"),W(t()(t()({},q),{},{first:!1,second:!1})));case 1:case"end":return x.stop()}},a)}));return function(){return i.apply(this,arguments)}}(),ke=function(a){p(t()(t()({},s),{},{agent:t()(t()({},s.agent),{},{default_output_format:a.target.value})}))},ee=la(),N=ee.options,o=ee.defaultValue;return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:c.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(P.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:H,children:[(0,e.jsx)(P.Z.List,{name:"users",children:function(a,g){var x,F=g.add,k=g.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:c.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.app&&s.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:I==="true"?c.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(P.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:c.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:s&&s.app&&s.app.description})]})}),(0,e.jsx)(P.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(Pe.Z,{className:"font-medium",name:c.formatMessage({id:"agent.teamvisibility"}),title:c.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(_e.Z,{size:"small",onChange:U,checked:!!(s&&s.app.is_public===1)})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:c.formatMessage({id:"agent.attrVisible"})}),(0,e.jsx)(_e.Z,{size:"small",onChange:ce,checked:s&&s.app.attrs_are_visible===1})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:c.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(_e.Z,{size:"small",onChange:fe,checked:s&&s.app.enable_api===1,disabled:(s==null||(x=s.app)===null||x===void 0?void 0:x.publish_status)!==1})]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:c.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(_e.Z,{size:"small",onChange:ve,checked:!!(s&&s.agent.allow_upload_file==1)})]})]})}),(0,e.jsx)(P.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:[(0,e.jsx)("span",{className:"text-[#E80000]",children:"* "}),c.formatMessage({id:"agent.LLMmodel"})]}),(0,e.jsx)(Ce.Z,{placeholder:c.formatMessage({id:"agent.pleaseselect"}),style:{width:270},value:C==0?c.formatMessage({id:"agent.pleaseselect"}):C,variant:"filled",onChange:E,options:N})]})}),(0,e.jsx)(P.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(Pe.Z,{className:"font-medium",required:!0,name:c.formatMessage({id:"agent.functiondescription"}),title:c.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)($a,{onChange:ne,value:s&&s.agent&&s.agent.obligations,placeholder:"Agent".concat(c.formatMessage({id:"agent.functiondescription"})),autoSize:{minRows:8,maxRows:10}})]})}),(0,e.jsx)("div",{className:"mb-[11px] text-xs font-bold flex justify-between items-center",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(Pe.Z,{className:"font-medium",required:!0,name:c.formatMessage({id:"agent.inputvariable"}),title:c.formatMessage({id:"agent.explain.inputvariable"})})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-[10px]",children:c.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:c.formatMessage({id:"agent.variable.display"})}),(0,e.jsx)("div",{className:"w-36 mr-[100px]",children:c.formatMessage({id:"agent.variable.type"})}),(0,e.jsx)("div",{className:"w-14 mr-[90px]",children:c.formatMessage({id:"agent.variable.required"})}),(0,e.jsx)("div",{children:c.formatMessage({id:"agent.variable.operation"})})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[a.map(function(A){var de=A.key,G=A.name,V=$e()(A,Ra);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(P.Z.Item,t()(t()({className:"m-0"},V),{},{name:[G,"name"],rules:[{required:!0,message:c.formatMessage({id:"agent.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:c.formatMessage({id:"agent.rules.verifydescription"})}],children:(0,e.jsx)(ye.Z,{placeholder:c.formatMessage({id:"agent.variable.name"}),className:"mr-5"})})),(0,e.jsx)(P.Z.Item,t()(t()({className:"m-0"},V),{},{name:[G,"content"],rules:[{required:!0,message:c.formatMessage({id:"agent.rules.displayname"})}],children:(0,e.jsx)(ye.Z,{placeholder:c.formatMessage({id:"agent.variable.display"}),className:"mr-5"})})),(0,e.jsx)(P.Z.Item,t()(t()({className:"w-36 mr-[110px] m-0"},V),{},{name:[G,"type"],children:(0,e.jsx)(Ce.Z,{defaultValue:"string",options:[{value:"string",label:"string"},{value:"number",label:"number"}]})})),(0,e.jsx)(P.Z.Item,t()(t()({className:"w-12 mr-[100px] m-0"},V),{},{name:[G,"status"],children:(0,e.jsx)(_e.Z,{size:"small"})})),H&&H.getFieldsValue().users.length>1?(0,e.jsx)(P.Z.Item,{className:"m-0",children:(0,e.jsx)(ze.Z,{onClick:function(){return k(G)}})}):null]})}),(0,e.jsxs)("div",{onClick:function(){return F()},className:"w-full p-2 mt-4  flex items-center gap-1 justify-center border  border-transparent  hover:border-dashed  hover:border-[#1B64F3] hover:text-[#1B64F3] cursor-pointer bg-[#F7F7F7] rounded-lg mb-4",children:[(0,e.jsx)(De.Z,{})," ",c.formatMessage({id:"agent.add"})]})]}),(0,e.jsxs)(P.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(Pe.Z,{className:"font-medium",name:c.formatMessage({id:"agent.associatedknowledgebase"}),title:c.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(Ce.Z,{size:"large",mode:"tags",style:{width:"100%"},placeholder:c.formatMessage({id:"agent.pleaseselect"}),value:R,onChange:Ne,options:$})]}),(0,e.jsx)(P.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",c.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(he.ZP.Group,{value:s&&s.agent.default_output_format,onChange:function(de){ke(de)},children:[(0,e.jsx)(he.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(he.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(he.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})]})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ge.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){we()},children:c.formatMessage({id:"agent.btn.nextstep"})}),(0,e.jsxs)(ge.ZP,{onClick:function(){history.back()},children:[" ",c.formatMessage({id:"agent.btn.back"})]})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ba=za,Oa=n(49677),Ha=n.n(Oa),Va=n(92485),Wa=n(85877),oa=n(39944),ea=n(71471),Ua=["key","name"],Xt=ea.Z.Title,Yt=ye.Z.TextArea,Jt=ye.Z.Search,Ga=function(r){var m=r.handleBack,s=r.Detaillist,p=r.setDetaillist,R=r.Fourthly_select_list,f=r.setFourthly_config_id,I=r.Fourthly_config_id,H=r.Fourthlyref,T=r.Fourthly_abilities_list,C=r.Operationbentate,le=r.callwordlist,_=r.newagentid,w=(0,O.useIntl)(),ae=(0,l.useState)(0),te=u()(ae,2),W=te[0],q=te[1],c=(0,l.useState)(""),S=u()(c,2),X=S[0],$=S[1],z=(0,l.useState)(""),pe=u()(z,2),Y=pe[0],y=pe[1],J=(0,l.useState)(!1),E=u()(J,2),ne=E[0],oe=E[1],U=function(N){var o={user:{value:Ne(N)}};$(new oa.z(o))},fe=function(N){var o={user:{value:N.target.value}};$(new oa.z(o))},ce=function(N){q(N)},ve=function(N){var o=N.users.filter(function(g,x){return g.type=="number"&&!Number(g.value)&&!!g.value});if(!X.user)d.ZP.warning(w.formatMessage({id:"agent.message.warning.callword"}));else if(o.length>0)d.ZP.warning(w.formatMessage({id:"agent.message.warning.datatype"}));else{oe(!0);var i=new me.Kr("input","","");N.users.forEach(function(g){var x=new me._w(g.name,g.type?g.type:"string",g.type=="string"?g.value:Number(g.value),g.content,g.status);i.addProperty(g.name,x)});var a={agent_id:_||s.agent.agent_id,ability_id:W,input_dict:i,prompt:X};xe(a)}},Ne=function ee(N){return N.map(function(o){return o.type==="mention"?o.id:o.children?ee(o.children):o.text}).join("")},xe=function(N){(0,Q.LH)(N).then(function(o){d.ZP.success(w.formatMessage({id:"agent.message.success.runpublish"})),y(o.data.outputs.text),oe(!1)}).catch(function(o){oe(!1)})},we=function(){var ee=L()(h()().mark(function N(){var o;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Q.Dh)(_||s.agent.agent_id);case 2:o=a.sent,o.code==0?d.ZP.success(w.formatMessage({id:"agent.message.success.publish"})):d.ZP.error(w.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return a.stop()}},N)}));return function(){return ee.apply(this,arguments)}}(),ke=function(){var ee=L()(h()().mark(function N(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:O.history.push("/Agents?app_id=".concat(s.app.app_id,"&type=false")),location.reload();case 2:case"end":return i.stop()}},N)}));return function(){return ee.apply(this,arguments)}}();return(0,l.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:w.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:w.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(Ce.Z,{placeholder:w.formatMessage({id:"agent.pleaseselect"}),defaultValue:w.formatMessage({id:"agent.allability"}),style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:ce,options:T})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(P.Z,{name:"dynamic_form_nest_item",onFinish:ve,style:{width:"100%"},autoComplete:"off",form:H,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:w.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(P.Z.List,{name:"users",children:function(N,o){return Ha()(o),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"mr-5 ml-2.5",children:w.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"",children:w.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:N.map(function(i){var a=i.key,g=i.name,x=$e()(i,Ua);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(P.Z.Item,t()(t()({},x),{},{name:[g,"content"],children:(0,e.jsx)(ye.Z,{className:"mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(P.Z.Item,t()(t()({},x),{},{name:[g,"value"],rules:[{required:!!(H.getFieldsValue()&&H.getFieldsValue().users[a].status==!0),message:w.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(ye.Z,{placeholder:H.getFieldsValue()&&H.getFieldsValue().users[a].status==!0?w.formatMessage({id:"agent.variable.required.value"}):w.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(P.Z.Item,{rules:[{required:!0,message:w.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:w.formatMessage({id:"agent.runpreview"})}),(0,e.jsx)(Ze.Z,{spinning:ne,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:Y?(0,e.jsx)(Va.Z,{language:"python3",value:Y&&JSON.stringify(Y)}):null}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Wa.Z,{onChange:function(N){U(N)},options:le})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ge.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})})]})]})}),(0,e.jsx)("div",{className:"w-28",children:(s==null?void 0:s.agent.publish_status)===1&&(s==null?void 0:s.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ge.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:ke,children:w.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ge.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:C!="false",onClick:we,children:w.formatMessage({id:"agent.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},Ka=Ga,Xa=["key","name"],Ya=ye.Z.TextArea,Ja=function(r){var m=r.SecondValue,s=r.handleBack,p=r.Detaillist,R=r.setDetaillist,f=r.Sformref,I=r.Operationbentate,H=r.pageKeyfun,T=r.secondjudgingcondition,C=r.SkillMenuClick,le=r.agentupdata,_=(0,O.useIntl)(),w=d.ZP.useMessage(),ae=u()(w,2),te=ae[0],W=ae[1],q=(0,l.useState)({auto_match_ability:0,agent_abilities:[{agent_ability_id:0,name:"string",content:"string",status:0}]}),c=u()(q,2),S=c[0],X=c[1];(0,l.useEffect)(function(){});var $=function(y){if(y.users.length==1&&(!y.users[0].content&&y.users[0].name||y.users[0].content&&!y.users[0].name))return d.ZP.warning(_.formatMessage({id:"agent.message.warning.selectknowledgebase"}));var J=y.users.map(function(ne){return t()(t()({},ne),{},{status:ne.status?1:2,agent_ability_id:ne.agent_ability_id?ne.agent_ability_id:0})}),E={agent_id:p.agent.agent_id,data:{auto_match_ability:p.agent.auto_match_ability,agent_abilities:y.users.length==1&&!y.users[0].content&&!y.users[0].name?[]:J}};I=="false"&&z(),m(t()({},S))},z=function(){var Y=L()(h()().mark(function y(){return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:T()||le();case 1:case"end":return E.stop()}},y)}));return function(){return Y.apply(this,arguments)}}(),pe=function(y){R(t()(t()({},p),{},{agent:t()(t()({},p.agent),{},{auto_match_ability:y?1:0})}))};return(0,e.jsxs)("div",{style:{height:"100%"},className:"w-full flex-1",children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:_.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(Pe.Z,{name:_.formatMessage({id:"agent.automatch"}),title:_.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(_e.Z,{size:"small",checked:!!(p&&p.agent.auto_match_ability==1),onChange:pe})]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(P.Z,{name:"dynamic_form_nest_item",onFinish:$,style:{width:"100%"},autoComplete:"off",form:f,children:[(0,e.jsx)(P.Z.List,{name:"users",children:function(y,J){var E=J.add,ne=J.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:" text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.capability"})})}),y.map(function(oe){var U=oe.key,fe=oe.name,ce=$e()(oe,Xa);return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(P.Z.Item,{className:"mb-0",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.capabilityname"})}),(0,e.jsxs)("div",{children:[" ",(0,e.jsx)(ze.Z,{onClick:function(){return ne(fe)}})]})]})}),(0,e.jsx)(P.Z.Item,t()(t()({className:"mb-[20px]"},ce),{},{name:[fe,"name"],rules:[{required:y.length!==1,message:_.formatMessage({id:"agent.capabilityname"})}],children:(0,e.jsx)(ye.Z,{placeholder:_.formatMessage({id:"agent.capabilityname"}),maxLength:50,className:"w-full"})})),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(Pe.Z,{className:"text-[#555555] text-xs font-medium",name:_.formatMessage({id:"agent.capabilitydescription"}),title:_.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(P.Z.Item,t()(t()({className:"w-full mb-[20px]"},ce),{},{name:[fe,"content"],rules:[{required:y.length!==1,message:_.formatMessage({id:"agent.capabilitydescription"})}],children:(0,e.jsx)(Ya,{placeholder:_.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},className:"w-full"})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:_.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(P.Z.Item,t()(t()({className:"mb-[20px]"},ce),{},{name:[fe,"status"],children:(0,e.jsxs)(he.ZP.Group,{optionType:"button",buttonStyle:"solid",defaultValue:!0,children:[(0,e.jsx)(he.ZP,{value:!0,children:_.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(he.ZP,{value:!1,children:_.formatMessage({id:"agent.capabilitystatus.disable"})})]})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:_.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(P.Z.Item,{className:"mb-0",name:[fe,"output_format"],children:(0,e.jsxs)(he.ZP.Group,{defaultValue:0,children:[(0,e.jsx)(he.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:_.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(he.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(he.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(he.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})})]})}),(0,e.jsxs)("div",{onClick:function(){return E()},className:"w-full p-6  flex items-center gap-1 justify-center border  border-transparent  hover:border-dashed  hover:border-[#1B64F3] hover:text-[#1B64F3] cursor-pointer bg-[#F7F7F7] rounded-lg mb-4",children:[(0,e.jsx)(De.Z,{})," ",_.formatMessage({id:"agent.addAbility"})]})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ge.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){z()},children:_.formatMessage({id:"agent.btn.savedebug"})}),(0,e.jsx)(ge.ZP,{onClick:function(){history.back()},children:_.formatMessage({id:"agent.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Qa=Ja,qa=n(19632),aa=n.n(qa),et=function(r){var m=r.children,s=r.onLoadMore,p=r.onLoadPrevious,R=r.hasMore,f=r.hasPrevious,I=f===void 0?!1:f,H=r.threshold,T=H===void 0?100:H,C=r.className,le=C===void 0?"":C,_=r.loadingComponent,w=_===void 0?(0,e.jsx)(Ze.Z,{size:"small"}):_,ae=r.errorComponent,te=r.initialScrollPosition,W=te===void 0?"bottom":te,q=r.preserveScrollPosition,c=q===void 0?!0:q,S=r.scrollBehavior,X=S===void 0?"smooth":S,$=(0,O.useIntl)(),z=(0,l.useRef)(null),pe=(0,l.useState)(!1),Y=u()(pe,2),y=Y[0],J=Y[1],E=(0,l.useState)(!1),ne=u()(E,2),oe=ne[0],U=ne[1],fe=(0,l.useState)(null),ce=u()(fe,2),ve=ce[0],Ne=ce[1],xe=(0,l.useRef)(!1),we=(0,l.useRef)(!0),ke=function(){z.current&&(z.current.scrollTop=z.current.scrollHeight)};(0,l.useEffect)(function(){we.current&&z.current&&(z.current.scrollTop=z.current.scrollHeight,we.current=!1)},[]),(0,l.useEffect)(function(){var N=z.current;if(N){var o=function(){var a=L()(h()().mark(function g(){var x,F,k,A,de;return h()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!xe.current){V.next=2;break}return V.abrupt("return");case 2:if(x=N.scrollTop,F=N.scrollHeight,k=N.clientHeight,!(I&&!oe&&x<T)){V.next=16;break}return V.prev=4,xe.current=!0,U(!0),A=N.scrollHeight,de=N.scrollTop,V.next=11,p==null?void 0:p();case 11:requestAnimationFrame(function(){var Ge=N.scrollHeight,da=Ge-A;N.scrollTop=de+da});case 12:return V.prev=12,xe.current=!1,U(!1),V.finish(12);case 16:if(!(R&&!y&&F-x-k<T)){V.next=27;break}return V.prev=17,xe.current=!0,J(!0),V.next=22,s==null?void 0:s();case 22:N.scrollTop=N.scrollHeight;case 23:return V.prev=23,xe.current=!1,J(!1),V.finish(23);case 27:case"end":return V.stop()}},g,null,[[4,,12,16],[17,,23,27]])}));return function(){return a.apply(this,arguments)}}(),i=ee(o,150);return N.addEventListener("scroll",i),function(){return N.removeEventListener("scroll",i)}}},[R,I,s,p,T,y,oe]);function ee(N,o){var i;return function(){for(var a=this,g=arguments.length,x=new Array(g),F=0;F<g;F++)x[F]=arguments[F];clearTimeout(i),i=setTimeout(function(){return N.apply(a,x)},o)}}return(0,e.jsxs)("div",{ref:z,className:"relative overflow-y-auto ".concat(le),children:[(0,e.jsxs)("div",{className:"flex flex-col-reverse min-h-full",children:[oe&&(0,e.jsx)("div",{className:"sticky top-0 left-0 right-0 flex justify-center py-2 bg-white/80 z-10",children:w}),m,y&&(0,e.jsx)("div",{className:"sticky bottom-0 left-0 right-0 flex justify-center py-2 bg-white/80 z-10",children:w})]}),ve&&(0,e.jsx)("div",{className:"sticky top-0 w-full text-center py-2 text-red-500",children:ae||ve.message})]})},at=et,fa=n(55927),tt=n(82114),st=n(27496),rt=n(34994),nt=n(64317),it=n(90672),lt=n(77598),ot=n(85576),dt=n(22683),ut=n(97807),ct=(0,l.memo)(function(M){var r=M.message;return(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)("div",{className:"max-w-[70%] rounded-lg p-3 bg-blue-100 text-blue-900",children:r.message})})}),mt=(0,l.memo)(function(M){var r,m=M.message,s=M.detailList,p=M.abilitiesList,R=(0,O.useIntl)(),f=p.find(function(I){return I.value===m.ability_id});return(0,e.jsx)("div",{className:"flex justify-start pb-4",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-sm font-bold mb-2",children:[s==null||(r=s.app)===null||r===void 0?void 0:r.name," ",(f==null?void 0:f.label)&&(0,e.jsxs)("span",{className:"text-gray-500 font-normal text-xs",children:["(",f==null?void 0:f.label,")"]})]}),(0,e.jsxs)("div",{className:"max-w-[90%] rounded-lg  relative bg-white text-gray-900 border border-gray-200",children:[m.message&&(0,e.jsx)("div",{className:"p-3",children:(0,e.jsx)(dt.U,{rehypePlugins:[ut.Z],children:m.message})}),m.error&&(0,e.jsxs)("div",{className:"p-3 text-red-500",children:[(0,e.jsx)("div",{children:R.formatMessage({id:"agent.chat.error.message"})}),m.error]}),(0,e.jsx)("div",{className:"absolute w-full mt-1",children:(0,e.jsxs)("div",{className:"text-xs text-gray-500 flex justify-between",children:[(0,e.jsx)("div",{children:m.created_time}),(0,e.jsxs)("div",{children:[R.formatMessage({id:"agent.chat.tokens"}),":"," ",(0,e.jsx)("span",{className:"text-blue-500",children:m.total_tokens||0})]})]})})]})]})})}),ft=(0,l.memo)(function(M){var r,m,s=(0,l.useState)([]),p=u()(s,2),R=p[0],f=p[1],I=(0,l.useState)(!0),H=u()(I,2),T=H[0],C=H[1],le=(0,l.useState)(1),_=u()(le,2),w=_[0],ae=_[1],te=(0,l.useState)(!1),W=u()(te,2),q=W[0],c=W[1],S=(0,l.useState)(!1),X=u()(S,2),$=X[0],z=X[1],pe=(0,l.useState)(!0),Y=u()(pe,2),y=Y[0],J=Y[1],E=(0,l.useRef)(),ne=(0,l.useRef)(null),oe=(0,l.useRef)(null),U=(0,O.useIntl)(),fe=(0,fa.Z)(function(o){return o.getTypedMessages("chat_message_llm_return")}),ce=(0,fa.Z)(function(o){return o.getTypedLastMessage("chat_message_llm_return")}),ve=function(){var i;(i=ne.current)===null||i===void 0||i.scrollIntoView({behavior:"smooth"})};(0,lt.Z)(function(){if(ce){var o=t()(t()({},ce.data),{},{id:ce.data.message_id});fe.length>0&&(f(function(i){return[].concat(aa()(i),[o])}),setTimeout(ve,100))}},[fe]);var Ne=function(){var o=L()(h()().mark(function i(a){var g,x,F,k,A,de,G,V,Ge;return h()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(console.log(a),F=E.current.getFieldsValue(),k=M.data.detailList.agent.agent_id,A=M.data.detailList.agent.input_variables,de=F.ability_id,G=new oa.z({user:{value:F.content}}),(g=a.content)!==null&&g!==void 0&&g.trim()){Me.next=8;break}return Me.abrupt("return");case 8:return V={id:Date.now(),content:a.content,isUser:!0,ability_id:de,agent_id:k,agent_run_id:0,completion_tokens:0,created_time:new Date().toISOString(),message:F.content,prompt_tokens:0,total_tokens:0},Me.next=11,(0,Q.CY)({agent_id:k,input_dict:A,ability_id:de,prompt:G});case 11:Ge=Me.sent,f([].concat(aa()(R),[V])),(x=E.current)===null||x===void 0||x.resetFields(["content"]),setTimeout(ve,100);case 15:case"end":return Me.stop()}},i)}));return function(a){return o.apply(this,arguments)}}(),xe=function(){var o=L()(h()().mark(function i(){var a,g,x;return h()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,J(!0),k.next=4,(0,Q.CU)((a=M.data)===null||a===void 0||(a=a.detailList)===null||a===void 0||(a=a.agent)===null||a===void 0?void 0:a.agent_id,1);case 4:x=k.sent,(g=x.data)!==null&&g!==void 0&&g.list&&(f(x.data.list),C(x.data.total_pages>1),ae(1)),k.next=11;break;case 8:k.prev=8,k.t0=k.catch(0),console.error("Failed to fetch initial messages:",k.t0);case 11:return k.prev=11,J(!1),k.finish(11);case 14:case"end":return k.stop()}},i,null,[[0,8,11,14]])}));return function(){return o.apply(this,arguments)}}(),we=function(){var o=L()(h()().mark(function i(){var a,g,x,F;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!(q||!((a=M.data)!==null&&a!==void 0&&(a=a.detailList)!==null&&a!==void 0&&(a=a.agent)!==null&&a!==void 0&&a.agent_id))){A.next=2;break}return A.abrupt("return");case 2:return A.prev=2,c(!0),x=w+1,A.next=7,(0,Q.CU)(M.data.detailList.agent.agent_id,x);case 7:F=A.sent,((g=F.data)===null||g===void 0||(g=g.list)===null||g===void 0?void 0:g.length)>0?(f(function(de){return[].concat(aa()(F.data.list),aa()(de))}),ae(x),C(x<F.data.total_pages)):C(!1),A.next=15;break;case 11:A.prev=11,A.t0=A.catch(2),console.error("Failed to load more messages:",A.t0),C(!1);case 15:return A.prev=15,c(!1),A.finish(15);case 18:case"end":return A.stop()}},i,null,[[2,11,15,18]])}));return function(){return o.apply(this,arguments)}}(),ke=function(){var o=L()(h()().mark(function i(){var a;return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(!((a=M.data)!==null&&a!==void 0&&(a=a.detailList)!==null&&a!==void 0&&(a=a.agent)!==null&&a!==void 0&&a.agent_id)||$)){x.next=2;break}return x.abrupt("return");case 2:ot.Z.confirm({title:U.formatMessage({id:"agent.chat.clear.memory.confirm.title"}),icon:(0,e.jsx)(tt.Z,{}),content:U.formatMessage({id:"agent.chat.clear.memory.confirm.content"}),okText:U.formatMessage({id:"agent.chat.clear.memory.confirm.ok"}),cancelText:U.formatMessage({id:"agent.chat.clear.memory.confirm.cancel"}),onOk:function(){var F=L()(h()().mark(function A(){return h()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.prev=0,z(!0),G.next=4,(0,Q.Nj)(M.data.detailList.agent.agent_id,R[R.length-1].id);case 4:d.ZP.success(U.formatMessage({id:"agent.chat.clear.memory.success"})),G.next=10;break;case 7:G.prev=7,G.t0=G.catch(0),console.error("Failed to clear context memory:",G.t0);case 10:return G.prev=10,z(!1),G.finish(10);case 13:case"end":return G.stop()}},A,null,[[0,7,10,13]])}));function k(){return F.apply(this,arguments)}return k}()});case 3:case"end":return x.stop()}},i)}));return function(){return o.apply(this,arguments)}}();(0,l.useEffect)(function(){var o;(o=M.data)!==null&&o!==void 0&&(o=o.detailList)!==null&&o!==void 0&&(o=o.agent)!==null&&o!==void 0&&o.agent_id&&xe()},[(r=M.data)===null||r===void 0||(r=r.detailList)===null||r===void 0||(r=r.agent)===null||r===void 0?void 0:r.agent_id]),(0,l.useEffect)(function(){!y&&R.length>0&&ve()},[y]);var ee=function(){return(0,e.jsxs)("div",{className:"flex items-center justify-center py-2 bg-white/80",children:[(0,e.jsx)(Ze.Z,{size:"small"}),(0,e.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:U.formatMessage({id:"agent.chat.loading.more"})})]})};if(y)return(0,e.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,e.jsx)(Ze.Z,{})});var N=function(){var o=L()(h()().mark(function i(){var a,g;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,Q.Dh)((a=M.data)===null||a===void 0||(a=a.detailList)===null||a===void 0||(a=a.agent)===null||a===void 0?void 0:a.agent_id);case 2:g=F.sent,g.code==0?d.ZP.success(U.formatMessage({id:"agent.message.success.publish"})):d.ZP.error(U.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return F.stop()}},i)}));return function(){return o.apply(this,arguments)}}();return(0,e.jsx)("div",{className:"!h-[calc(100vh-65px)] p-4 !pb-0 box-border",children:(0,e.jsxs)(rt.A,{formRef:E,submitter:!1,onFinish:Ne,layout:"horizontal",initialValues:{ability_id:0},style:{height:"calc(100vh - 57px - 16px)"},className:"m-0 flex flex-col overflow-y-auto ",children:[(0,e.jsxs)("div",{className:"pb-4 flex gap-[10px]",style:{paddingBottom:"16px"},children:[(0,e.jsx)(nt.Z,{label:U.formatMessage({id:"agent.selectivepower"}),name:"ability_id",options:(m=M.data)===null||m===void 0?void 0:m.abilitiesList,fieldProps:{placeholder:U.formatMessage({id:"agent.pleaseselect"})},formItemProps:{className:"mb-0 flex-1"}}),(0,e.jsx)(ge.ZP,{type:"primary",disabled:M.operationbentate!="false",onClick:N,className:" min-w-40",children:U.formatMessage({id:"agent.publish"})})]}),(0,e.jsxs)("div",{className:"bg-gray-50 rounded-md border border-[#ccc] flex-1 overflow-y-auto flex flex-col",children:[(0,e.jsx)("div",{className:"flex-1 overflow-y-auto ",ref:oe,children:(0,e.jsx)(at,{className:"h-full",onLoadPrevious:we,hasPrevious:T,hasMore:!1,threshold:50,loadingComponent:(0,e.jsx)(ee,{}),children:(0,e.jsxs)("div",{className:"px-4 py-2 space-y-4",children:[R.map(function(o){var i,a;return o.agent_run_id===0?(0,e.jsx)(ct,{message:o},o.id):(0,e.jsx)(mt,{detailList:M==null||(i=M.data)===null||i===void 0?void 0:i.detailList,abilitiesList:M==null||(a=M.data)===null||a===void 0?void 0:a.abilitiesList,message:o},o.id)}),(0,e.jsx)("div",{ref:ne})]})})}),(0,e.jsxs)("div",{className:"border-t border-gray-200  p-4 relative",children:[(0,e.jsx)("div",{style:{top:"-40px"},className:"flex items-center mb-2 justify-end absolute !-top-10 right-3",children:(0,e.jsx)(ge.ZP,{icon:(0,e.jsx)(ze.Z,{}),loading:$,onClick:ke,children:U.formatMessage({id:"agent.chat.clear.memory"})})}),(0,e.jsxs)("div",{className:"flex items-center p-[12px] gap-[10px] box-border border bg-white rounded-[8px]",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsx)(it.Z,{name:"content",placeholder:U.formatMessage({id:"agent.chat.input.placeholder"}),fieldProps:{autoSize:{minRows:1,maxRows:4},variant:"borderless",onPressEnter:function(i){if(!i.shiftKey){var a;i.preventDefault(),(a=E.current)===null||a===void 0||a.submit()}},className:""},formItemProps:{className:"mb-0"},className:"mb-0"})}),(0,e.jsx)(ge.ZP,{onClick:function(){var i;return(i=E.current)===null||i===void 0?void 0:i.submit()},type:"primary",className:"min-w-[30px] h-[30px] flex items-center justify-center cursor-pointer rounded-[6px]",icon:(0,e.jsx)(st.Z,{})})]})]})]})]})})}),gt=n(29608),pt=n(32592),vt=n(28508),ht=n(29933),xt=n(3917),bt=n(66309),Be=n(26412),ga=n(12845),yt=n(39873),jt=(0,l.memo)(function(M){var r,m=M.data,s=M.onClose,p=(0,O.useIntl)(),R=(0,l.useState)(500),f=u()(R,2),I=f[0],H=f[1],T=(0,xt.Z)(function(){var te=L()(h()().mark(function W(q,c){var S;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,Q.pC)(q,c);case 2:return S=$.sent,$.abrupt("return",S.data);case 4:case"end":return $.stop()}},W)}));return function(W,q){return te.apply(this,arguments)}}(),{manual:!0}),C=T.data,le=T.loading,_=T.run;(0,l.useEffect)(function(){m!=null&&m.app_id&&m!==null&&m!==void 0&&m.app_run_id&&_(m.app_id,m.app_run_id)},[m==null?void 0:m.app_id,m==null?void 0:m.app_run_id,_]);var w=function(W){var q={1:{color:"processing",text:p.formatMessage({id:"workflow.running"})},2:{color:"success",text:p.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:p.formatMessage({id:"workflow.runF"})}},c=q[W]||{color:"default",text:"Unknown"};return(0,e.jsx)(bt.Z,{color:c.color,children:c.text})},ae=function(W){H(W)};return(0,e.jsx)(yt.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:I,onChange:ae,children:(0,e.jsx)(ht.Z,{className:"border-none h-full",style:{height:"calc(100vh - 10px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,e.jsx)(ge.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:s,icon:(0,e.jsx)(vt.Z,{})}),title:(0,e.jsx)(ea.Z.Title,{level:5,children:p.formatMessage({id:"agent.log.detail"})}),loading:le,children:(0,e.jsx)("div",{className:"space-y-6",children:le?(0,e.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,e.jsx)(Ze.Z,{})}):C?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Be.Z,{column:1,bordered:!0,size:"small",children:[(0,e.jsx)(Be.Z.Item,{label:p.formatMessage({id:"workflow.user"}),children:C.nickname}),(0,e.jsx)(Be.Z.Item,{label:p.formatMessage({id:"workflow.status"}),children:w(C.status)}),(0,e.jsx)(Be.Z.Item,{label:p.formatMessage({id:"workflow.created_time"}),children:C.created_time}),(0,e.jsxs)(Be.Z.Item,{label:p.formatMessage({id:"workflow.elapsed_time"}),children:[C.elapsed_time,"s"]}),(0,e.jsx)(Be.Z.Item,{label:"Tokens",children:C.total_tokens})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(ea.Z.Title,{level:5,children:p.formatMessage({id:"agent.log.output"})}),C.outputs?(0,e.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,e.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:((r=C.outputs)===null||r===void 0?void 0:r.value)||""})}):C.error?(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,e.jsx)("div",{className:"text-red-500 font-medium mb-2",children:p.formatMessage({id:"agent.log.error"})}),(0,e.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:C.error})]}):(0,e.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,e.jsx)("div",{className:"text-sm text-gray-500",children:p.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(C==null?void 0:C.prompt_data)&&C.prompt_data.length>0&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(ea.Z.Title,{level:5,children:p.formatMessage({id:"agent.log.conversation"})}),(0,e.jsx)(ga.Z,{className:"mt-2",children:C.prompt_data.map(function(te,W){var q=u()(te,2),c=q[0],S=q[1];return(0,e.jsx)(ga.Z.Item,{color:c==="human"?"blue":"green",children:(0,e.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,e.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:c}),(0,e.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:S.value})]})},W)})})]})]}):null})})})}),Qt=null,qt=null,wt=function(M){var r=M.agent_id,m=(0,O.useIntl)(),s=(0,O.useSearchParams)(),p=u()(s,1),R=p[0],f=(0,l.useRef)(null),I=(0,l.useState)(null),H=u()(I,2),T=H[0],C=H[1],le=(0,l.useState)(!1),_=u()(le,2),w=_[0],ae=_[1],te=R.get("app_id"),W=function(){ae(!1)},q=function($){C({app_id:te,app_run_id:$.id}),ae(!0)},c=[{dataIndex:"index",valueType:"indexBorder",width:48},{disable:!0,title:m.formatMessage({id:"workflow.status",defaultMessage:""}),dataIndex:"status",ellipsis:!0,search:!1,valueEnum:{1:{text:m.formatMessage({id:"workflow.running",defaultMessage:""}),status:"Processing"},2:{text:m.formatMessage({id:"workflow.runSc",defaultMessage:""}),status:"Success"},3:{text:m.formatMessage({id:"workflow.runF",defaultMessage:""}),status:"Error"}}},{title:m.formatMessage({id:"workflow.created_time",defaultMessage:""}),dataIndex:"created_time",ellipsis:!0,tooltip:m.formatMessage({id:"workflow.created_time_des",defaultMessage:m.formatMessage({id:"workflow.created_time_des",defaultMessage:""})}),search:!1},{title:"".concat(m.formatMessage({id:"workflow.elapsed_time",defaultMessage:""}),"S"),dataIndex:"elapsed_time",ellipsis:!0,tooltip:m.formatMessage({id:"workflow.run_time"}),search:!1},{title:"Tokens",key:"showTime",dataIndex:"total_tokens",hideInSearch:!0},{title:m.formatMessage({id:"workflow.user"}),dataIndex:"nickname",search:!1,ellipsis:!0,key:"user"}],S=(0,gt.Z)(function(X){return X.setRunPanelLogRecord});return(0,e.jsxs)("div",{className:"h-full",children:[(0,e.jsx)(pt.Z,{columns:c,formRef:f,form:{submitter:!1},cardBordered:!0,style:{height:"calc(100% - 20px)"},scroll:{y:"calc(100vh - 230px)"},request:function(){var X=L()(h()().mark(function $(z,pe,Y){var y;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log(z,pe,Y),E.next=3,(0,Q.My)(te,{page:z.current,page_size:z.pageSize});case 3:return y=E.sent,console.log(y),E.abrupt("return",{data:y.data.list,success:!0,total:y.data.total_count});case 6:case"end":return E.stop()}},$)}));return function($,z,pe){return X.apply(this,arguments)}}(),onRow:function($){return{onClick:function(){q($)},className:(T==null?void 0:T.app_run_id)===$.id?"bg-blue-50":""}},editable:{type:"multiple"},rowKey:"app_runs_id",search:!1,options:{search:!1,setting:{listsHeight:600}},pagination:{pageSize:20,showSizeChanger:!1},dateFormatter:"string",headerTitle:m.formatMessage({id:"agent.log.list"})}),w&&(T==null?void 0:T.app_id)&&(T==null?void 0:T.app_run_id)&&(0,e.jsx)(jt,{data:T,onClose:W})]})},_t=function(){var r,m,s=(0,O.useIntl)(),p=(0,l.useRef)(null),R=P.Z.useForm(),f=u()(R,1),I=f[0],H=P.Z.useForm(),T=u()(H,1),C=T[0],le=P.Z.useForm(),_=u()(le,1),w=_[0],ae=P.Z.useForm(),te=u()(ae,1),W=te[0],q=(0,l.useState)(null),c=u()(q,2),S=c[0],X=c[1],$=(0,l.useState)(0),z=u()($,2),pe=z[0],Y=z[1],y=(0,l.useState)(null),J=u()(y,2),E=J[0],ne=J[1],oe=(0,l.useState)(null),U=u()(oe,2),fe=U[0],ce=U[1],ve=(0,l.useState)(null),Ne=u()(ve,2),xe=Ne[0],we=Ne[1],ke=(0,l.useState)(null),ee=u()(ke,2),N=ee[0],o=ee[1],i=(0,l.useState)(null),a=u()(i,2),g=a[0],x=a[1],F=(0,l.useState)(null),k=u()(F,2),A=k[0],de=k[1],G=(0,l.useState)(null),V=u()(G,2),Ge=V[0],da=V[1],Me=(0,l.useState)(null),pa=u()(Me,2),va=pa[0],Mt=pa[1],St=(0,l.useState)(null),ha=u()(St,2),Ie=ha[0],Ft=ha[1],Zt=(0,l.useState)("1"),xa=u()(Zt,2),Se=xa[0],Oe=xa[1],Pt=(0,l.useState)(null),ba=u()(Pt,2),Ct=ba[0],ya=ba[1],kt=(0,l.useState)(null),ja=u()(kt,2),At=ja[0],Tt=ja[1],Dt=(0,l.useState)(null),wa=u()(Dt,2),It=wa[0],_a=wa[1],Et=(0,l.useState)(null),Na=u()(Et,2),Ke=Na[0],Ma=Na[1],Lt=(0,l.useState)(!1),Sa=u()(Lt,2),Rt=Sa[0],Fa=Sa[1],$t=(0,l.useState)({first:!1,second:!1,fourthly:!1}),Za=u()($t,2),Xe=Za[0],ta=Za[1],zt=[{key:"1",icon:(0,e.jsx)(Ue.Z,{}),label:s.formatMessage({id:"agent.menu.basicsetup"}),disabled:Xe.first,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",lineHeight:"22px",color:Se=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:Xe.second,icon:(0,e.jsx)(Re.Z,{}),label:s.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:Se=="2"?"#1B64F3":"#213044"}},{key:"5",disabled:Xe.fourthly,icon:(0,e.jsx)(be.Z,{}),label:"\u8FD0\u884C\u65E5\u5FD7",style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:Se=="5"?"#1B64F3":"#213044"}}];(0,l.useEffect)(function(){var se=new URLSearchParams(window.location.search);se.get("app_id")||ta(t()(t()({},Xe),{},{first:!1,second:!0,fourthly:!0})),sa()},[]);var sa=function(){var se=L()(h()().mark(function j(v){var b,B,D,Z,Ia,ca,Ea,La;return h()().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(B=new URLSearchParams(window.location.search),B.get("from")&&Tt(B.get("from")),D=null,!(B.get("app_id")||v)){Fe.next=10;break}return Fe.next=6,(0,Q.ek)(v||B.get("app_id"),B.get("type"));case 6:D=Fe.sent,Ma(D.data.app.app_id),Fe.next=13;break;case 10:return Fe.next=12,(0,je.cI)();case 12:D=Fe.sent;case 13:Z=D.data,Ia=(b=D.data)===null||b===void 0||(b=b.agent_dataset_relation_list)===null||b===void 0?void 0:b.map(function(ie){return ie.dataset_id}),ne(Ia),X(D.data),Ft(D.data.agent.publish_status===0&&D.data.is_creator===1?"false":"true"),D.data.agent.publish_status===1&&d.ZP.warning(s.formatMessage({id:"agent.message.listwarning"}),5),I.setFieldsValue(Pa(Z.agent.input_variables)),ca=D.data.agent_abilities_list.map(function(ie){return ie.status==1?t()(t()({},ie),{},{status:!0}):t()(t()({},ie),{},{status:!1})}),w.setFieldsValue({users:ca[0]?ca:[{agent_ability_id:0,name:"",content:"",status:!0,output_format:0}]}),we(ua(Z.agent_abilities_list)),o(ua(Z.agent_abilities_list)),Ea=Z.agent_abilities_list.filter(function(ie){return ie.output_format!==0}),C.setFieldsValue({users:Ea.map(function(ie){return{agent_ability_id:ie.agent_ability_id,output_format:ie.output_format}})}),W.setFieldsValue(Pa(Z.agent.input_variables)),x(Z.m_configurations_list.map(function(ie){return{value:ie.m_config_id?ie.m_config_id:ie.model_config_id,label:ie.m_name?ie.m_name:ie.model_name}})),Z.agent.m_config_id||Z.agent.model_config_id?de(Z.agent.m_config_id?Z.agent.m_config_id:Z.agent.model_config_id):de(Z.m_configurations_list[0].model_config_id),La=Z.agent_abilities_list.filter(function(ie,as){return ie.status===1}),Mt(ua(La).concat([{value:0,label:s.formatMessage({id:"agent.allability"})}]));case 31:case"end":return Fe.stop()}},j)}));return function(v){return se.apply(this,arguments)}}(),Pa=function(j){var v={users:j&&j.properties?Object.values(j.properties).map(function(b){return{name:b.name,type:b.type,content:b.display_name,status:b.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return v},ua=function(j){return j.map(function(v){return{value:v.agent_ability_id,label:v.name}})},Bt=function(j){Da(j,1),W.setFieldsValue(I.getFieldsValue())},Ot=function(){sa()},Ca=function(j){Y(j)},Ht=function(){history.back()},Vt=function(){var j=I.getFieldsValue().users.filter(function(v){return!v||!v.name||!v.content});if(I.getFieldsValue().users[0])if(A)if(S.agent.obligations){if(j.length!==0)return d.ZP.warning(s.formatMessage({id:"agent.message.warning.completevariable"})),!0;if(Gt(I.getFieldsValue().users,"name"))return d.ZP.warning(s.formatMessage({id:"agent.message.warning.repetition"})),!0}else return d.ZP.warning(s.formatMessage({id:"agent.message.warning.functiondescribe"})),!0;else return d.ZP.warning(s.formatMessage({id:"agent.message.warning.LLM"})),!0;else return d.ZP.warning(s.formatMessage({id:"agent.message.warning.variable"})),!0;return!1},Wt=function(){var j=w.getFieldsValue().users.filter(function(b){return!!b}),v=j.filter(function(b){return!b.name||!b.content});return v.length!==0&&!(v.length==1&&v[0].name==""&&v[0].content=="")?(d.ZP.warning(s.formatMessage({id:"agent.message.warning.integritycapacity"})),!0):!1},ka=function(j){if((j==null?void 0:j.key)=="4"){var v=I.getFieldsValue().users.map(function(b){return{value:"<<".concat(Ae.qX,".inputs.").concat(b.name,">>"),label:b.name}});ya(v)}Oe(j.key)},Ut=function(){Fa(!0);var j=0;Ke?(0,Q.ek)(Ke,!1).then(function(v){j=v.data.agent.agent_id,Aa(j),setTimeout(function(){Ta(j),d.ZP.success(s.formatMessage({id:"skill.conserve.success"}))},500),setTimeout(function(){sa(Ke)},1e3),_a(j)}).catch(function(v){}):(0,Le.uy)((0,je.Go)("GET")).then(function(v){Ma(v.data.app_id),(0,Q.ek)(Ke||v.data.app_id,!1).then(function(b){j=b.data.agent.agent_id,Aa(j),setTimeout(function(){Ta(j),d.ZP.success(s.formatMessage({id:"skill.conserve.success"}))},500),setTimeout(function(){sa(v.data.app_id);var B=t()(t()({},(0,je.Go)("GET")),{},{app_id:v.data.app_id});(0,je.Go)("SET",B)},1e3),_a(j)}).catch(function(b){})}).catch(function(v){})},Aa=function(j,v){I.validateFields().then(function(b){var B={agent_id:j,data:{is_public:S.app.is_public,enable_api:S.app.enable_api,attrs_are_visible:S.app.attrs_are_visible,obligations:S.agent.obligations,input_variables:Kt(I.getFieldsValue()),dataset_ids:E,m_config_id:A,allow_upload_file:S.agent.allow_upload_file,default_output_format:S.agent.default_output_format}};Ie=="false"&&Da(B,1),W.setFieldsValue(I.getFieldsValue());var D=I.getFieldsValue().users.map(function(Z){return{value:"<<".concat(Ae.qX,".inputs.").concat(Z.name,">>"),label:Z.name}});ya(D),v&&Oe(v.key)}).catch(function(b){})},Ta=function(j){var v=w.getFieldsValue().users.filter(function(D){return!!D}),b=v.map(function(D){return t()(t()({},D),{},{status:D.status==!1?2:1,agent_ability_id:D.agent_ability_id?D.agent_ability_id:0,output_format:D.output_format?D.output_format:0})}),B={agent_id:j,data:{auto_match_ability:S.agent.auto_match_ability,agent_abilities:b}};Ie=="false"&&(b.length==1&&b[0].name==""&&b[0].content==""?(ta({first:!1,second:!1,fourthly:!1}),Oe("4")):(0,Q.Iw)(B).then(function(D){D.code==0&&(ta({first:!1,second:!1,fourthly:!1}),Oe("4"))}).catch(function(D){}))},Da=function(){var se=L()(h()().mark(function j(v,b){var B;return h()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(Ie!=="false"){Z.next=19;break}if(b!==1){Z.next=7;break}return Z.next=4,(0,Q.XB)(v);case 4:Z.t0=Z.sent,Z.next=17;break;case 7:if(b!==2){Z.next=13;break}return Z.next=10,(0,Q.Iw)(v);case 10:Z.t1=Z.sent,Z.next=16;break;case 13:return Z.next=15,(0,Q.Ce)(v);case 15:Z.t1=Z.sent;case 16:Z.t0=Z.t1;case 17:B=Z.t0,B&&B.code===0&&Fa(!1);case 19:case"end":return Z.stop()}},j)}));return function(v,b){return se.apply(this,arguments)}}(),Gt=function(j,v){var b=new Set;return j.some(function(B){var D=B[v];return b.has(D)?b.add(D):b.add(D)&&!1})},Kt=function(j){var v=new me.Kr("input","","");return j.users.forEach(function(b){var B=new me._w(b.name,b.type?b.type:"string",b.value?b.value:"",b.content,b.status);v.addProperty(b.name,B)}),v};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ge.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:Ht,children:[(0,e.jsx)(ue.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:At=="chat_room"?s.formatMessage({id:"agent.back_meeting"}):s.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Je.Z,{selectedKeys:[Se],onClick:ka,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[Se],mode:"inline",items:zt}),S&&S.app.enable_api===1&&S.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:L()(h()().mark(function se(){var j,v;return h()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(j=new URLSearchParams(window.location.search),v=null,!j.get("app_id")){B.next=6;break}return B.next=5,(0,Q.ek)(j.get("app_id"),j.get("type"));case 5:v=B.sent;case 6:v!=null&&v.data.app.enable_api===1&&v.data.app.publish_status===1?window.open(We._n+S.app.api_url):d.ZP.warning(s.formatMessage({id:"agent.save.and.click"}),5);case 7:case"end":return B.stop()}},se)})),children:(0,e.jsxs)("div",{className:"mr-[20px] text-base font-medium text-[#213044] -mt-1",children:[(0,e.jsx)(K.Z,{className:"mr-3"}),s.formatMessage({id:"agent.visit"})," API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)(Ze.Z,{spinning:Rt,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[(r=(0,je.Go)("GET"))!==null&&r!==void 0&&r.app_id?s.formatMessage({id:"agent.compile"}):s.formatMessage({id:"agent.created"}),s.formatMessage({id:"agent"})]}),(S==null||(m=S.app)===null||m===void 0?void 0:m.publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] px-[7px] text-[#fff] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:s.formatMessage({id:"agent.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE] px-[7px]  text-[#999] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:s.formatMessage({id:"agent.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:Se==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ba,{FirstValue:Bt,Ffromref:I,Detaillist:S,setDetaillist:X,repository:E,setRepository:ne,Newproperties:fe,setNewproperties:ce,Operationbentate:Ie,Fourthly_config_id:A,setFourthly_config_id:de,Fourthly_select_list:g,pageKeyfun:Oe,firstjudgingcondition:Vt,agentmenudisabled:Xe,setAgentmunudisabled:ta})}),(0,e.jsx)("div",{style:{display:Se==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Qa,{SecondValue:Ot,Detaillist:S,setDetaillist:X,Sformref:w,Operationbentate:Ie,handleBack:Ca,pageKeyfun:Oe,SkillMenuClick:ka,secondjudgingcondition:Wt,agentupdata:Ut})}),(0,e.jsx)("div",{style:{display:Se==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ka,{handleBack:Ca,Detaillist:S,setDetaillist:X,Fourthly_select_list:g,Fourthly_config_id:A,setFourthly_config_id:de,Fourthlyref:W,Fourthly_abilities_list:va,Operationbentate:Ie,callwordlist:Ct,newagentid:It})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(ft,{operationbentate:Ie,data:{abilitiesList:va,detailList:S}})}),Se=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(wt,{agent_id:S.agent.agent_id})})]})]})},Nt=_t}}]);
