"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{11475:function(re,k,t){t.d(k,{Z:function(){return S}});var R=t(1413),i=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},v=L,g=t(91146),E=function(w,W){return i.createElement(g.Z,(0,R.Z)((0,R.Z)({},w),{},{ref:W,icon:v}))},$=i.forwardRef(E),S=$},35790:function(re,k,t){var R=t(1413),i=t(67294),L=t(19369),v=t(91146),g=function(S,U){return i.createElement(v.Z,(0,R.Z)((0,R.Z)({},S),{},{ref:U,icon:L.Z}))},E=i.forwardRef(g);k.Z=E},83510:function(re,k,t){t.d(k,{LK:function(){return G},bs:function(){return _},go:function(){return Q},uy:function(){return K}});var R=t(15009),i=t.n(R),L=t(99289),v=t.n(L),g=t(47520),E="/v1/apps/apps_list",$="/v1/agent/agent_delete/",S="/v1/workflow/workflow_app_delete/",U="/v1/vector/delete_dataset/",w="/v1/skill/delete_skill_by_app_id/",W="/v1/apps/apps_create",Y="/v1/apps/app_update/",Q=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("".concat(E),{method:"GET",data:r});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),G=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(r),a.next=3,r.mode;case 3:if(a.t0=a.sent,a.t0!=1){a.next=8;break}a.t1=(0,g.ZP)("".concat($).concat(r.app_id),{method:"DELETE"}),a.next=9;break;case 8:a.t1=r.mode==2?(0,g.ZP)("".concat(S).concat(r.app_id),{method:"DELETE"}):r.mode==3?(0,g.ZP)("".concat(U).concat(r.app_id),{method:"DELETE"}):(0,g.ZP)("".concat(w).concat(r.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return n=a.t1,a.abrupt("return",n);case 11:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),K=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("".concat(W),{method:"POST",data:r});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),_=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("".concat(Y).concat(r.app_id),{method:"PUT",data:r});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}()},43722:function(re,k,t){t.d(k,{Gn:function(){return U},KH:function(){return _},cH:function(){return W},dB:function(){return w},gp:function(){return $},j2:function(){return Y},r5:function(){return G},rw:function(){return E},sI:function(){return Q},sT:function(){return K},vu:function(){return S}});var R=t(15009),i=t.n(R),L=t(99289),v=t.n(L),g=t(47520),E=function(){var e=v()(i()().mark(function l(){var r;return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,g.ZP)("/v1/index/",{method:"GET"});case 2:return r=m.sent,m.abrupt("return",r);case 4:case"end":return m.stop()}},l)}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=v()(i()().mark(function l(r,n){var m;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,g.ZP)(r,{method:"GET",data:n});case 2:return m=f.sent,f.abrupt("return",m);case 4:case"end":return f.stop()}},l)}));return function(r,n){return e.apply(this,arguments)}}(),S=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("/v1/chatroom/",{method:"GET",data:r});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),U=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("/v1/chatroom/".concat(r.id),{method:"DELETE"});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),w=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("/v1/chatroom/",{method:"POST",data:r});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),W=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("/v1/chatroom/".concat(r.id,"/details"),{method:"GET"});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),Y=function(){var e=v()(i()().mark(function l(r){var n;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:r.id}});case 2:return n=a.sent,a.abrupt("return",n);case 4:case"end":return a.stop()}},l)}));return function(r){return e.apply(this,arguments)}}(),Q=function(){var e=v()(i()().mark(function l(r,n){var m;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,g.ZP)("/v1/chatroom/".concat(n,"/update_chatroom"),{method:"POST",data:r});case 2:return m=f.sent,f.abrupt("return",m);case 4:case"end":return f.stop()}},l)}));return function(r,n){return e.apply(this,arguments)}}(),G=function(){var e=v()(i()().mark(function l(r,n){var m;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,g.ZP)("/v1/chatroom/".concat(n,"/smart_selection"),{method:"POST",data:r});case 2:return m=f.sent,f.abrupt("return",m);case 4:case"end":return f.stop()}},l)}));return function(r,n){return e.apply(this,arguments)}}(),K=function(){var e=v()(i()().mark(function l(r,n,m){var a;return i()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,g.ZP)("/v1/chatroom/".concat(n,"/agents/").concat(m,"/setting"),{method:"PUT",data:r});case 2:return a=M.sent,M.abrupt("return",a);case 4:case"end":return M.stop()}},l)}));return function(r,n,m){return e.apply(this,arguments)}}(),_=function(){var e=v()(i()().mark(function l(r,n){var m;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,g.ZP)("/v1/chatroom/".concat(r,"/chatroom_message"),{method:"GET",data:n});case 2:return m=f.sent,f.abrupt("return",m);case 4:case"end":return f.stop()}},l)}));return function(r,n){return e.apply(this,arguments)}}()},21446:function(re,k,t){var R=t(15009),i=t.n(R),L=t(97857),v=t.n(L),g=t(99289),E=t.n(g),$=t(5574),S=t.n($),U=t(83510),w=t(32332),W=t(35312),Y=t(26915),Q=t(17788),G=t(67294),K=t(94840),_=t(85893),e=Y.Z.TextArea,l=function(n){var m=n.setIsModalOpen,a=n.isModalOpen,f=n.transformData,M=n.CreationType,z=n.setcreationType,_e=n.ModalType,T=(0,W.useIntl)(),ne=(0,G.useState)(""),ae=S()(ne,2),se=ae[0],me=ae[1],fe=(0,G.useState)(""),le=S()(fe,2),ve=le[0],he=le[1],oe=(0,G.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),ue=S()(oe,2),ie=ue[0],ce=ue[1];(0,G.useEffect)(function(){},[]);var xe=function(B){me(B.target.value)},ge=function(B){he(B.target.value)},je=function(){var F=E()(i()().mark(function B(){var b,s;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(b={name:se,mode:M.apps_mode,description:ve,icon:JSON.stringify(ie.id),icon_background:""},M.apps_mode!=2){o.next=8;break}return o.next=4,(0,U.uy)(b);case 4:s=o.sent,s.code===0&&(m(!1),de(s.data.app_id)),o.next=10;break;case 8:(0,w.Go)("SET",v()(v()({},b),{},{type:!1})),de();case 10:case"end":return o.stop()}},B)}));return function(){return F.apply(this,arguments)}}(),be=function(B){f.map(function(b){b.name==B.name&&(console.log(b,"item"),z(b))})},de=function(B){B?W.history.push("/".concat(M.path,"?app_id=").concat(B,"&&type=false")):W.history.push("/".concat(M.path,"?type=false"))};return(0,_.jsx)(Q.Z,{title:T.formatMessage({id:"creation.addnewapp"}),open:a,okText:T.formatMessage({id:"creation"}),onOk:je,onCancel:function(){return m(!1)},okButtonProps:{disabled:se===""},width:820,children:(0,_.jsxs)("div",{className:"pb-1",children:[_e?(0,_.jsxs)("div",{children:[(0,_.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:T.formatMessage({id:"creation.appntype"})}),(0,_.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:f&&f.map(function(F){return(0,_.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:F.apps_mode===M.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){be(F)},children:[(0,_.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,_.jsx)("img",{className:"w-6 h-6",src:F.signicon,alt:""})}),(0,_.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:F.name})]})})})]}):null,(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"mb-5",children:[(0,_.jsxs)("p",{className:"text-xs mt-5",children:[M.apps_mode==1?T.formatMessage({id:"creation.agent"}):M.apps_mode==2?T.formatMessage({id:"creation.workflow"}):M.apps_mode==3?T.formatMessage({id:"creation.repository"}):T.formatMessage({id:"creation.skill"}),T.formatMessage({id:"creation.appiconname"})]}),(0,_.jsxs)("div",{className:"flex items-center justify-around",children:[(0,_.jsx)(K.Z,{CardData:ie,setCardData:ce}),(0,_.jsx)(Y.Z,{showCount:!0,maxLength:20,placeholder:T.formatMessage({id:"creation.placeholder.appname"}),onChange:xe})]})]}),(0,_.jsxs)("div",{className:"mb-5 text-xs",children:[(0,_.jsxs)("p",{children:[M.apps_mode==1?T.formatMessage({id:"creation.agent"}):M.apps_mode==2?T.formatMessage({id:"creation.workflow"}):M.apps_mode==3?T.formatMessage({id:"creation.repository"}):T.formatMessage({id:"creation.skill"}),T.formatMessage({id:"creation.appdescribe"})]}),(0,_.jsx)(e,{showCount:!0,maxLength:100,rows:4,placeholder:T.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:ge})]})]})]})})};k.Z=l},94840:function(re,k,t){var R=t(97857),i=t.n(R),L=t(32332),v=t(55241),g=t(67294),E=t(85893),$=function(U){var w=U.CardData,W=U.setCardData;(0,g.useEffect)(function(){},[]);var Y=function(){return(0,E.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,L.s9)("all").map(function(K){return(0,E.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){Q(K)},children:(0,E.jsx)("img",{src:K.image,alt:""})})})})},Q=function(K){W(i()(i()({},w),{},{icon:K.image,id:K.id}))};return(0,E.jsx)(v.Z,{content:Y,trigger:"click",placement:"bottomLeft",children:(0,E.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,E.jsx)("img",{src:(0,L.s9)("single",w.id?w.id:w.icon),alt:""})})})};k.Z=$},33816:function(re,k,t){t.r(k),t.d(k,{default:function(){return B}});var R=t(97857),i=t.n(R),L=t(15009),v=t.n(L),g=t(99289),E=t.n(g),$=t(19632),S=t.n($),U=t(5574),w=t.n(U),W=t(43722),Y=t(21446),Q=t(99702),G=t(32332),K=t(38703),_=t(67294),e=t(85893),l=function(s){var c=s.subtitle,o=s.handleClick,p=s.lineClamp,D=p===void 0?2:p,h=s.textDetails,d=s.title,I=s.icon,V=s.iconType,X=V===void 0?"":V,J=s.operation,H=J===void 0?"":J,N=s.progress,x=s.status,C=s.backlogTips,u=(0,_.useState)(0),y=w()(u,2),j=y[0],P=y[1],te=function(){P(N)},A=function(){P(0)},O=function(q){return"rounded-[4px] border-l-[4px] ".concat(q==1?"border-[#1B64F3]":q==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,e.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative ".concat(x!==void 0?O(x):"graphicbox"),onClick:o,onMouseEnter:function(){N!=null&&te()},onMouseLeave:function(){N!=null&&A()},children:[x!==void 0&&(0,e.jsx)("div",{style:{width:"".concat(j,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(x==1?"bg-[#1B64F3]/[.03]":x==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,e.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,e.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,e.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,e.jsx)("img",{src:(0,G.s9)("single",I),className:"w-[22px] h-[22px]"}),X&&(0,e.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,e.jsx)("img",{src:"/icons/".concat(X,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,e.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,e.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,e.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,e.jsx)("span",{className:"truncate",children:d}),(0,e.jsx)("span",{className:"flex items-center flex-1",children:c})]}),(0,e.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:h})]})}),C||(0,e.jsx)(e.Fragment,{}),H&&(0,e.jsx)("div",{className:"flex items-center w-[24px]",children:(0,e.jsx)("span",{className:"operation",children:H})}),N!=null&&(0,e.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,e.jsx)(K.Z,{type:"circle",percent:N,size:29})})]})]})},r=l,n=t(29608),m=t(55927),a=t(35790),f=t(11475),M=t(8751),z=t(35312),_e=t(28036),T=t(32983),ne=t(71230),ae=t(15746),se=t(83062),me=t(74330),fe=function(s){var c,o=s.subtitle,p="pl-[10px] text-[#1B64F3] text-[12px] ".concat(o.need_human_confirm==1||o.need_human_confirm==null?"text-[#1B64F3]":"text-[#808183] ");return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:o.app_name}),(0,e.jsx)(a.Z,{}),(0,e.jsx)("span",{className:p,children:o.node_name||((c=o.node_exec_data)===null||c===void 0?void 0:c.node_name)})]})})},le=function(s){var c=s.progressObj,o=function(){return parseFloat(c.elapsed_time).toFixed(6)},p=function(h){var d=new Date(h),I=d.getFullYear(),V=(d.getMonth()+1).toString().padStart(2,"0"),X=d.getDate().toString().padStart(2,"0"),J=d.getHours().toString().padStart(2,"0"),H=d.getMinutes().toString().padStart(2,"0"),N=d.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(I,".").concat(V,".").concat(X," ").concat(J,":").concat(H,":").concat(N)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:c.created_time&&p(c.created_time)}),(0,e.jsx)("div",{className:"truncate",children:c.apps_name||c.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(c.status==1?"bg-blue-600":c.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[o(),"S"]})]})]})})},ve=function(s){var c=s.operationObj,o=(0,n.Z)(function(h){return h.setRunId}),p=(0,n.Z)(function(h){return h.setRunPanelLogRecord}),D=(0,n.Z)(function(h){return h.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(_e.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:c.publish_status==0,icon:(0,e.jsx)("img",{src:c.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"}),onClick:function(d){return d.stopPropagation(),p(!1),D(!1),o(c.app_id),!1}})})})},he=function(s){var c=s.bindAdd,o=s.type;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:c,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:o})]})})})},oe=function(s){var c=(0,z.useIntl)();return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(T.Z,{image:T.Z.PRESENTED_IMAGE_SIMPLE,description:c.formatMessage({id:"app.dashboard.None"})})})},ue=function(s){var c=s.data,o=(0,z.useIntl)(),p=c.map(function(u){return{app_name:u.app_name,app_run_id:u.app_run_id,icon:u.icon,icon_background:u.icon_background,need_human_confirm:u.need_human_confirm,node_exec_data:{node_name:u.node_name,node_id:u.node_execution_id,node_exec_id:u.exec_id},exec_id:u.exec_id,run_name:u.app_run_name,mode:u.mode}}),D=(0,_.useState)(p),h=w()(D,2),d=h[0],I=h[1],V=(0,n.Z)(function(u){return u.setRunPanelLogRecord}),X=(0,n.Z)(function(u){return u.setDealtWithData}),J=(0,n.Z)(function(u){return u.setRunId}),H=(0,n.Z)(function(u){return u.submitPromptId}),N=function(y,j){var P=new Set,te=[].concat(S()(j.reverse()),S()(y)),A=te.filter(function(O){var Z,q,pe=((Z=O.node_exec_data)===null||Z===void 0?void 0:Z.node_exec_id)||O.exec_id;if(!O.exec_id&&(q=O.node_exec_data)!==null&&q!==void 0&&q.node_exec_id){var ee;O.exec_id=(ee=O.node_exec_data)===null||ee===void 0?void 0:ee.node_exec_id}return!pe||P.has(pe)?!1:(P.add(pe),!0)});return console.log(A),A.reverse()},x=function(){var u=E()(v()().mark(function y(){var j,P;return v()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:P=C==null||(j=C.filter(function(O){return O.type=="workflow_need_human_confirm"}).map(function(O){var Z=O.data;return Z}))===null||j===void 0?void 0:j.filter(function(O){return O.type!==1}),console.log(P),P&&P.length&&I(N(P,d));case 3:case"end":return A.stop()}},y)}));return function(){return u.apply(this,arguments)}}(),C=(0,m.Z)(function(u){return u.flowMessage});return(0,_.useEffect)(function(){x()},[C]),(0,_.useEffect)(function(){H&&I(function(u){return u.map(function(y){return i()(i()({},y),{},{need_human_confirm:y.node_exec_data.node_exec_id==H?0:y.need_human_confirm})})})},[H]),(0,e.jsx)(e.Fragment,{children:d&&d.length?(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(ne.Z,{gutter:[30,0],children:d.map(function(u,y){var j;return(0,e.jsx)(ae.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(r,{icon:u.icon,title:((j=u.node_exec_data)===null||j===void 0?void 0:j.node_name)&&(0,e.jsx)(fe,{subtitle:u}),textDetails:u.run_name,handleClick:function(){u.need_human_confirm!=0&&(X(u),J(null),V(!1))},backlogTips:(0,e.jsx)("div",{className:"flex items-center",children:u.need_human_confirm==1||u.need_human_confirm==null?(0,e.jsx)(se.Z,{title:o.formatMessage({id:"app.workflow.needHumanConfirm"}),children:(0,e.jsx)(f.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(se.Z,{title:o.formatMessage({id:"app.workflow.noHumanConfirm"}),children:(0,e.jsx)(M.Z,{className:"text-[#808183]"})})})})},y)})})}):(0,e.jsx)(oe,{})})},ie=function(s){var c=s.data,o=s.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(ne.Z,{gutter:[30,0],children:c.map(function(p,D){return(0,e.jsx)(ae.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(r,{icon:p.icon,title:p.name,textDetails:p.description,handleClick:function(){console.log(o),o=="my_agent"?z.history.push("/Agents?app_id=".concat(p.app_id,"&type=false")):z.history.push("/ReadOnlyAgent?app_id=".concat(p.app_id,"&type=true"))}})},D)})})})},ce=function(s){var c=s.data,o=s.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(ne.Z,{gutter:[30,0],children:c.map(function(p,D){return(0,e.jsx)(ae.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(r,{icon:p.icon,title:p.name,textDetails:p.description,handleClick:function(){o=="my_workflow"?z.history.push("/workspace/workflow?app_id=".concat(p.app_id,"&type=false")):z.history.push("/workspace/workflow?app_id=".concat(p.app_id,"&type=true"))},operation:(0,e.jsx)(ve,{operationObj:p}),iconType:o=="my_workflow"?p.publish_status==0?"play_disable_icon":"play_icon":""})},D)})})})},xe=function(s){var c=s.data,o=(0,n.Z)(function(x){return x.setRunPanelLogRecord}),p=(0,n.Z)(function(x){return x.setDealtWithData}),D=(0,n.Z)(function(x){return x.setRunId}),h=(0,_.useState)(c),d=w()(h,2),I=d[0],V=d[1],X=function(C,u){var y=new Map;return u.reverse().forEach(function(j){y.set(j.app_run_id,j)}),C.forEach(function(j){y.set(j.app_run_id,j)}),Array.from(y.values()).reverse()},J=function(C){return C.completed_progress?parseInt(C.completed_progress.slice(0,-1)):!1},H=function(){var x=E()(v()().mark(function C(){var u;return v()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:u=N==null?void 0:N.filter(function(P){return P.type=="workflow_run_progress"}).map(function(P){var te=P.data;return te}),u&&u.length&&V(X(u,I));case 2:case"end":return j.stop()}},C)}));return function(){return x.apply(this,arguments)}}(),N=(0,m.Z)(function(x){return x.flowMessage});return(0,_.useEffect)(function(){H()},[N]),(0,e.jsx)(e.Fragment,{children:I&&I.length?(0,e.jsx)("div",{className:"cardbox px-[10px]",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(ne.Z,{gutter:[30,20],children:I.map(function(x,C){return(0,e.jsx)(ae.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(r,{status:x.status,icon:x.icon,title:x.app_runs_name||x.run_name,textDetails:(0,e.jsx)(le,{progressObj:x}),handleClick:function(){o(x),D(null),p(!1)},progress:x.percentage||J(x)})},C)})})}):(0,e.jsx)(oe,{})})},ge=function(s){var c=s.item,o=s.data,p=function(d,I){return d&&d.length?I:(0,e.jsx)(oe,{})},D={backlogs:function(d){return(0,e.jsx)(ue,{data:d.data})},my_agent:function(d){return p(o,(0,e.jsx)(ie,{data:d.data,keyName:"my_agent"}))},my_workflow:function(d){return p(o,(0,e.jsx)(ce,{data:d.data,keyName:"my_workflow"}))},workflow_log:function(d){return(0,e.jsx)(xe,{data:d.data})},more_agent:function(d){return p(o,(0,e.jsx)(ie,{data:d.data}))},more_workflow:function(d){return p(o,(0,e.jsx)(ce,{data:d.data}))}};return(0,e.jsx)(e.Fragment,{children:D[c.key]({data:o})})},je=function(s){var c=s.item,o=(0,z.useIntl)(),p=function(){var h=c.key=="my_agent"||c.key=="more_agent"?1:2,d=c.key=="more_agent"||c.key=="more_workflow";(0,G.f1)("SET",h,d),z.history.push("/creation")};return(0,e.jsx)("div",{onClick:p,children:c.key!=="backlogs"&&c.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:o.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},be=function(s){var c=(0,z.useIntl)(),o=s.item,p=s.setIsModalOpen,D=s.setCreationType,h=function(){var V=o.key=="my_agent"?{name:"Agent",path:"Agents",apps_mode:1}:{name:"WorkFlow",path:"workspace/workflow",apps_mode:2};D(function(X){return i()(i()({},X),V)}),p(!0)},d=o.key=="my_agent"?c.formatMessage({id:"app.dashboard.title_button_1.1"}):o.isAdd?c.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[o.isAdd&&(0,e.jsx)(he,{bindAdd:h,type:o.isAdd&&d}),(0,e.jsx)(je,{item:o})]})},de=function(){var s=(0,z.useIntl)(),c=[{title:s.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0},{title:s.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:s.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:s.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:s.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:s.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],o=(0,_.useState)(!1),p=w()(o,2),D=p[0],h=p[1],d=(0,_.useState)({}),I=w()(d,2),V=I[0],X=I[1],J=(0,_.useState)(!0),H=w()(J,2),N=H[0],x=H[1],C=(0,_.useState)({}),u=w()(C,2),y=u[0],j=u[1],P=(0,_.useRef)(!1),te=function(){var A=E()(v()().mark(function O(){var Z,q;return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,W.rw)();case 2:Z=ee.sent,Z.code==0&&(q=Z.data,j(q),P.current=!0,x(!0));case 4:case"end":return ee.stop()}},O)}));return function(){return A.apply(this,arguments)}}();return(0,_.useEffect)(function(){P.current||te()},[]),(0,e.jsxs)(e.Fragment,{children:[N&&c.map(function(A,O){return(0,e.jsx)(ae.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:A.title}),(0,e.jsx)("span",{children:(0,e.jsx)(be,{item:A,setIsModalOpen:h,setCreationType:X})})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:y[A.key]?(0,e.jsx)(ge,{item:A,data:y[A.key]}):(0,e.jsx)(e.Fragment,{})})]})},O)}),!N&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(me.Z,{size:"large"})}),(0,e.jsx)(Y.Z,{setIsModalOpen:h,isModalOpen:D,ModalType:!1,CreationType:V})]})},F=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"px-[30px] pb-[10px] flex flex-col pt-[30px]",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(ne.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(de,{})})})}),(0,e.jsx)(Q.Z,{})]})},B=F}}]);
