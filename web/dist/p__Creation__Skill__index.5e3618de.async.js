(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{82826:function(Y,D,t){"use strict";t.d(D,{Z:function(){return r}});var T=t(1413),s=t(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},o=U,y=t(91146),E=function(V,w){return s.createElement(y.Z,(0,T.Z)((0,T.Z)({},V),{},{ref:w,icon:o}))},K=s.forwardRef(E),r=K},89035:function(Y,D,t){"use strict";t.d(D,{Z:function(){return r}});var T=t(1413),s=t(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},o=U,y=t(91146),E=function(V,w){return s.createElement(y.Z,(0,T.Z)((0,T.Z)({},V),{},{ref:w,icon:o}))},K=s.forwardRef(E),r=K},81644:function(Y,D,t){"use strict";t.d(D,{Z:function(){return r}});var T=t(1413),s=t(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},o=U,y=t(91146),E=function(V,w){return s.createElement(y.Z,(0,T.Z)((0,T.Z)({},V),{},{ref:w,icon:o}))},K=s.forwardRef(E),r=K},2068:function(Y,D,t){"use strict";t.d(D,{Z:function(){return r}});var T=t(1413),s=t(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},o=U,y=t(91146),E=function(V,w){return s.createElement(y.Z,(0,T.Z)((0,T.Z)({},V),{},{ref:w,icon:o}))},K=s.forwardRef(E),r=K},15360:function(Y,D,t){"use strict";t.d(D,{Z:function(){return r}});var T=t(1413),s=t(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},o=U,y=t(91146),E=function(V,w){return s.createElement(y.Z,(0,T.Z)((0,T.Z)({},V),{},{ref:w,icon:o}))},K=s.forwardRef(E),r=K},83510:function(Y,D,t){"use strict";t.d(D,{LK:function(){return ae},bs:function(){return L},go:function(){return ke},uy:function(){return $}});var T=t(15009),s=t.n(T),U=t(99289),o=t.n(U),y=t(47520),E="/v1/apps/apps_list",K="/v1/agent/agent_delete/",r="/v1/workflow/workflow_app_delete/",re="/v1/vector/delete_dataset/",V="/v1/skill/delete_skill_by_app_id/",w="/v1/apps/apps_create",ue="/v1/apps/app_update/",ke=function(){var M=o()(s()().mark(function k(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,y.ZP)("".concat(E),{method:"GET",data:a});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},k)}));return function(a){return M.apply(this,arguments)}}(),ae=function(){var M=o()(s()().mark(function k(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(a),i.next=3,a.mode;case 3:if(i.t0=i.sent,i.t0!=1){i.next=8;break}i.t1=(0,y.ZP)("".concat(K).concat(a.app_id),{method:"DELETE"}),i.next=9;break;case 8:i.t1=a.mode==2?(0,y.ZP)("".concat(r).concat(a.app_id),{method:"DELETE"}):a.mode==3?(0,y.ZP)("".concat(re).concat(a.app_id),{method:"DELETE"}):(0,y.ZP)("".concat(V).concat(a.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return m=i.t1,i.abrupt("return",m);case 11:case"end":return i.stop()}},k)}));return function(a){return M.apply(this,arguments)}}(),$=function(){var M=o()(s()().mark(function k(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,y.ZP)("".concat(w),{method:"POST",data:a});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},k)}));return function(a){return M.apply(this,arguments)}}(),L=function(){var M=o()(s()().mark(function k(a){var m;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,y.ZP)("".concat(ue).concat(a.app_id),{method:"PUT",data:a});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},k)}));return function(a){return M.apply(this,arguments)}}()},24805:function(Y,D,t){"use strict";t.d(D,{Hb:function(){return V},Ur:function(){return ke},cN:function(){return ue},ej:function(){return w}});var T=t(15009),s=t.n(T),U=t(99289),o=t.n(U),y=t(47520),E="/v1/skill/skill_info/",K="/v1/skill/skill_update/",r="/v1/skill/skill_publish/",re="/v1/skill/skill_run",V=function(){var ae=o()(s()().mark(function $(L,M){var k;return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,y.ZP)("".concat(E).concat(L),{method:"GET",data:{publish_status:M=="true"?1:0}});case 2:return k=m.sent,m.abrupt("return",k);case 4:case"end":return m.stop()}},$)}));return function(L,M){return ae.apply(this,arguments)}}(),w=function(){var ae=o()(s()().mark(function $(L){var M;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,y.ZP)("".concat(K).concat(L.app_id),{method:"PUT",data:L.data});case 2:return M=a.sent,a.abrupt("return",M);case 4:case"end":return a.stop()}},$)}));return function(L){return ae.apply(this,arguments)}}(),ue=function(){var ae=o()(s()().mark(function $(L){var M;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,y.ZP)("".concat(r).concat(L),{method:"PUT"});case 2:return M=a.sent,a.abrupt("return",M);case 4:case"end":return a.stop()}},$)}));return function(L){return ae.apply(this,arguments)}}(),ke=function(){var ae=o()(s()().mark(function $(L){var M;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,y.ZP)("".concat(re),{method:"POST",data:L});case 2:return M=a.sent,a.abrupt("return",M);case 4:case"end":return a.stop()}},$)}));return function(L){return ae.apply(this,arguments)}}()},31664:function(Y,D,t){"use strict";t.r(D),t.d(D,{default:function(){return rt}});var T=t(97857),s=t.n(T),U=t(15009),o=t.n(U),y=t(99289),E=t.n(y),K=t(5574),r=t.n(K),re=t(83510),V=t(24805),w=t(10759),ue=t(32332),ke=t(2068),ae=t(89035),$=t(81644),L=t(15360),M=t(82826),k=t(35312),a=t(40741),m=t(45360),z=t(28036),i=t(50136),Oe=t(74330),I=t(67294),Ue=t(13769),Ne=t.n(Ue),ve=t(92939),Te=t(51042),Ee=t(82061),se=t(26915),Me=t(72269),Ce=t(34041),e=t(85893),Ke=["key","name"],Nt=se.Z.TextArea,$e=function(l){var b=l.FirstValue,_=l.FirstSkillref,N=l.Skillinfo,v=l.setSkillInfo,oe=l.Operationbentate,ce=l.firstjudgingcondition,Q=l.pageKeyfun,h=l.skillmenudisabled,fe=l.setskillmenudisabled,d=(0,k.useIntl)();(0,I.useEffect)(function(){},[]);var le=function(R){v(s()(s()({},N),{},{is_public:R?1:0}))},f=function(R){v(s()(s()({},N),{},{attrs_are_visible:R?1:0}))},j=function(R,ie){var G=new w.Kr("output","","");R.users.forEach(function(u){var C=new w._w(u.name,u.type?u.type:"string","",u.content,u.status);G.addProperty(u.name,C)});var H={input_variables:G,is_public:N.is_public,attrs_are_visible:N.attrs_are_visible};b(H)},ne=function(){ce(_.getFieldsValue().users,1)||_.validateFields().then(function(R){Q("2"),fe(s()(s()({},h),{},{second:!1}))}).catch(function(R){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:d.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:function(R){b(R)},style:{width:900},autoComplete:"off",form:_,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(R,ie){var G=ie.add,H=ie.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:d.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[N&&N.name,"\xA0"]})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:d.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:N&&N.description})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(ve.Z,{className:"font-medium text-xs text-[#555555]",name:d.formatMessage({id:"skill.teamvisibility"}),title:d.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(Me.Z,{size:"small",onChange:le,checked:!!(N&&N.is_public==1)})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ve.Z,{className:"font-medium",name:d.formatMessage({id:"agent.attrVisible"}),title:d.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(Me.Z,{size:"small",onChange:f,checked:!!(N&&N.attrs_are_visible==1)})]}),(0,e.jsxs)("div",{className:"mb-[11px] text-xs font-bold flex justify-between items-center",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:(0,e.jsx)(ve.Z,{required:!0,name:d.formatMessage({id:"skill.inputvariable"}),title:d.formatMessage({id:"skill.Callword.inputvariable"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(z.ZP,{type:"link",onClick:function(){return G()},block:!0,icon:(0,e.jsx)(Te.Z,{}),children:d.formatMessage({id:"skill.add"})})})]}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-[10px]",children:d.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:d.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-36 mr-[100px]",children:d.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"w-14 mr-[90px]",children:d.formatMessage({id:"skill.variable.required"})}),(0,e.jsx)("div",{children:d.formatMessage({id:"skill.variable.operation"})})]}),(0,e.jsx)("div",{children:R.map(function(u){var C=u.key,J=u.name,X=Ne()(u,Ke);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,s()(s()({className:"m-0"},X),{},{name:[J,"name"],rules:[{required:!0,message:d.formatMessage({id:"skill.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:d.formatMessage({id:"skill.rules.verifydescription"})}],children:(0,e.jsx)(se.Z,{placeholder:d.formatMessage({id:"skill.variable.name"}),className:"w-48 mr-5"})})),(0,e.jsx)(a.Z.Item,s()(s()({className:"m-0"},X),{},{name:[J,"content"],rules:[{required:!0,message:d.formatMessage({id:"skill.rules.displayname"})}],children:(0,e.jsx)(se.Z,{placeholder:d.formatMessage({id:"skill.variable.display"}),className:"w-52 mr-5"})})),(0,e.jsx)(a.Z.Item,s()(s()({className:"w-36 mr-[110px] m-0"},X),{},{name:[J,"type"],children:(0,e.jsx)(Ce.Z,{defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"}]})})),(0,e.jsx)(a.Z.Item,s()(s()({className:"w-12 mr-[100px] m-0"},X),{},{name:[J,"status"],children:(0,e.jsx)(Me.Z,{size:"small"})})),(0,e.jsx)(a.Z.Item,{children:_&&_.getFieldsValue().users.length>1?(0,e.jsx)(Ee.Z,{onClick:function(){return H(J)}}):null})]},C)})})]})}}),(0,e.jsxs)("div",{className:"mt-[20px]",children:[(0,e.jsx)(z.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ne()},children:d.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(z.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},We=$e,Ie=t(92485),Je=function(l){var b=l.SecondValue,_=l.handleBack,N=l.Skillinfo,v=l.setSkillInfo,oe=l.SkillRelyOn,ce=l.setSkillRelyOn,Q=l.Secondref,h=l.setskillcodestate,fe=l.setNewcode,d=l.pageKeyfun,le=l.skillmenudisabled,f=l.setskillmenudisabled,j=(0,k.useIntl)();(0,I.useEffect)(function(){},[]);var ne=function(H){ce(H)},W=function(H){h(H===""),fe(JSON.stringify({python3:H}))},R=function(H){var u={dependencies:{python3:oe?oe.split(","):[]},code:N.code?N.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})};b(u)},ie=function(){d("3"),f(s()(s()({},le),{},{thirdly:!1}))};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:j.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:Q,children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(ve.Z,{className:"font-medium",name:j.formatMessage({id:"skill.dependency"}),title:j.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Ce.Z,{mode:"tags",style:{width:"100%"},value:oe,onChange:ne,tokenSeparators:[","]})]}),(0,e.jsx)("div",{className:"text-xs text-gray-500 p-3 whitespace-pre-line border-l-4 mb-2 border-gray-300 bg-gray-50",children:"".concat(j.formatMessage({id:"customcode.notice.title"}),`:

`).concat(j.formatMessage({id:"customcode.notice.file.write"}),`\uFF1A
`).concat(j.formatMessage({id:"customcode.notice.file.write.desc"}),`
`).concat(j.formatMessage({id:"customcode.notice.file.write.example"}),`

`).concat(j.formatMessage({id:"customcode.notice.file.return"}),`\uFF1A
`).concat(j.formatMessage({id:"customcode.notice.file.return.desc"}),`
`).concat(j.formatMessage({id:"customcode.notice.file.return.example"}))}),(0,e.jsxs)(a.Z.Item,{children:[(0,e.jsx)("div",{className:"",children:j.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-[345px]",children:(0,e.jsx)(Ie.Z,{language:"python3",value:N&&N.code?JSON.parse(N.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,onChange:W,title:"python3"})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(z.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ie()},children:j.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(z.ZP,{onClick:function(){history.back()},children:j.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Xe=Je,be=t(78045),Ye=["key","name"],Mt=se.Z.TextArea,Ct=se.Z.Search,Qe=function(l){var b=l.ThirdlyValue,_=l.Thirdlyref,N=l.handleBack,v=l.Skillinfo,oe=l.setSkillInfo,ce=l.Operationbentate,Q=l.firstjudgingcondition,h=l.pageKeyfun,fe=l.skillmenudisabled,d=l.setskillmenudisabled,le=l.skillupdata,f=(0,k.useIntl)(),j=(0,I.useState)(null),ne=r()(j,2),W=ne[0],R=ne[1];(0,I.useEffect)(function(){},[]);var ie=function(C){oe(s()(s()({},v),{},{output_type:C.target.value}))},G=function(C){var J=new w.Kr("output","","");C.users.forEach(function(p){var q=new w._w(p.name,p.type?p.type:"string","",p.content,!1);J.addProperty(p.name,q)});var X={output_type:v.output_type,output_variables:J};b(X)},H=function(){Q(_.getFieldsValue().users,2)||_.validateFields().then(function(C){le()}).catch(function(C){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsxs)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:[" ",f.formatMessage({id:"skill.menu.output"})]})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:G,style:{width:900},autoComplete:"off",form:_,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(C,J){var X=J.add,p=J.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(ve.Z,{name:f.formatMessage({id:"skill.outputvariable"}),title:f.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(be.ZP.Group,{onChange:ie,value:v&&v.output_type,children:[(0,e.jsx)(be.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(be.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(be.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(be.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.file"})})})]})]}),(0,e.jsxs)("div",{className:"mb-[11px] text-[#555555] text-xs font-medium flex justify-between items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(ve.Z,{required:!0,name:f.formatMessage({id:"skill.outputv"}),title:f.formatMessage({id:"skill.Callword.outputv"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(z.ZP,{type:"link",onClick:function(){return X()},block:!0,icon:(0,e.jsx)(Te.Z,{}),children:f.formatMessage({id:"skill.add"})})})]}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-[290px] ml-2.5",children:f.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-[290px]",children:f.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-[240px]",children:f.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"",children:f.formatMessage({id:"skill.variable.operation"})})]}),C.map(function(q){var ee=q.key,S=q.name,Z=Ne()(q,Ye);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,s()(s()({},Z),{},{name:[S,"name"],rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:f.formatMessage({id:"skill.rules.verifydescription"})}],className:"m-0",children:(0,e.jsx)(se.Z,{placeholder:f.formatMessage({id:"skill.variable.name"}),className:"w-[270px] mr-[20px]"})})),(0,e.jsx)(a.Z.Item,s()(s()({className:"m-0"},Z),{},{name:[S,"content"],rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})}],children:(0,e.jsx)(se.Z,{placeholder:f.formatMessage({id:"skill.variable.display"}),className:"w-[260px] mr-[20px]"})})),(0,e.jsx)(a.Z.Item,s()(s()({},Z),{},{name:[S,"type"],children:(0,e.jsx)(Ce.Z,{style:{width:"150px",marginRight:"115px"},placeholder:"Please select",defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"},{value:"file",label:"File"}]})})),(0,e.jsx)(a.Z.Item,{children:_&&_.getFieldsValue().users.length>1?(0,e.jsx)(Ee.Z,{onClick:function(){return p(S)}}):null})]})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(z.ZP,{type:"primary",className:"mr-[20px] mt-[30px]",onClick:function(){H()},children:[" ",f.formatMessage({id:"skill.btn.savedebug"})]}),(0,e.jsx)(z.ZP,{onClick:function(){history.back()},children:f.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},qe=Qe,et=t(49677),tt=t.n(et),at=t(68672),st=["key","name"],Pt=se.Z.TextArea,Ot=se.Z.Search,lt=function(l){var b=l.FourthlyValue,_=l.Fourthlyref,N=l.handleBack,v=l.Skillinfo,oe=l.Operationbentate,ce=l.skillid,Q=l.app_id,h=(0,k.useIntl)(),fe=(0,I.useState)(null),d=r()(fe,2),le=d[0],f=d[1],j=(0,I.useState)(!1),ne=r()(j,2),W=ne[0],R=ne[1];(0,I.useEffect)(function(){},[]);var ie=function(){var ee=E()(o()().mark(function S(){var Z;return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,V.cN)(Q||v.app_id);case 2:Z=A.sent,Z.code==0?m.ZP.success(h.formatMessage({id:"skill.publishsuccess"})):m.ZP.error(h.formatMessage({id:"skill.select.value"}));case 4:case"end":return A.stop()}},S)}));return function(){return ee.apply(this,arguments)}}(),G=function(S){var Z=S.users.filter(function(g,F){return g.type=="number"&&!Number(g.value)&&!!g.value});if(Z.length>0)m.ZP.warning(h.formatMessage({id:"skill.message.warning.vlaue"}));else{R(!0);var P=new w.Kr("output","","");S.users.forEach(function(g){var F=new w._w(g.name,g.type,g.type=="string"?g.value:Number(g.value),g.content,g.status);P.addProperty(g.name,F)});var A={skill_id:ce||v.id,input_dict:P};X(A)}},H=(0,I.useState)([]),u=r()(H,2),C=u[0],J=u[1],X=function(){var ee=E()(o()().mark(function S(Z){return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:(0,V.Ur)(Z).then(function(g){m.ZP.success(h.formatMessage({id:"skill.run.success"})),f(g.data.outputs),J(g.data.file_list||[]),R(!1)}).catch(function(g){R(!1),g.code==="ERR_NETWORK"&&m.ZP.error(h.formatMessage({id:"skill.run.error"})),console.log(g,"err-===>")});case 1:case"end":return A.stop()}},S)}));return function(Z){return ee.apply(this,arguments)}}(),p=function(){var ee=E()(o()().mark(function S(){return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:k.history.push("/Skill?app_id=".concat(Q||(v==null?void 0:v.app_id),"&type=false")),location.reload();case 2:case"end":return P.stop()}},S)}));return function(){return ee.apply(this,arguments)}}(),q=function(){var ee=E()(o()().mark(function S(Z){var P,A;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,fetch("/api/novel/".concat(novelId,"/outline"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});case 3:if(P=F.sent,P.ok){F.next=6;break}throw new Error("HTTP error! status: ".concat(P.status));case 6:return F.next=8,P.json();case 8:A=F.sent,m.ZP.success("\u4FDD\u5B58\u6210\u529F"),F.next=16;break;case 12:F.prev=12,F.t0=F.catch(0),console.error("Error saving outline:",F.t0),m.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 16:case"end":return F.stop()}},S,null,[[0,12]])}));return function(Z){return ee.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:h.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:G,style:{width:900},autoComplete:"off",form:_,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsxs)("div",{children:[" ",h.formatMessage({id:"skill.inputvariable"})]})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:h.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:h.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(a.Z.List,{name:"users",children:function(S,Z){return tt()(Z),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:S.map(function(P){var A=P.key,g=P.name,F=Ne()(P,st);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,s()(s()({},F),{},{name:[g,"content"],children:(0,e.jsx)(se.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless"})})),(0,e.jsx)(a.Z.Item,s()(s()({},F),{},{name:[g,"value"],rules:[{required:!!(_.getFieldsValue()&&_.getFieldsValue().users[A].status==!0),message:h.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(se.Z,{placeholder:_.getFieldsValue()&&_.getFieldsValue().users[A].status==!0?h.formatMessage({id:"skill.variantcontent.required"}):h.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(a.Z.Item,{rules:[{required:!0,message:h.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:h.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Oe.Z,{spinning:W,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:le?(0,e.jsx)(Ie.Z,{language:"python3",value:le&&JSON.stringify(le)}):null}),C.length>0&&(0,e.jsx)(at.Z,{files:C,title:h.formatMessage({id:"agent.file.output"}),className:"mb-4"}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(z.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:h.formatMessage({id:"skill.run"})})})})]})})]})]}),(0,e.jsx)("div",{className:"w-28",children:(v==null?void 0:v.publish_status)===1&&(v==null?void 0:v.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsxs)(z.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:p,children:[" ",h.formatMessage({id:"skill.amend"})]})}):(0,e.jsx)("div",{children:(0,e.jsxs)(z.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:ie,children:[" ",h.formatMessage({id:"skill.publish"})]})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},nt=lt,it=function(){var l,b=(0,k.useIntl)(),_=a.Z.useForm(),N=r()(_,1),v=N[0],oe=a.Z.useForm(),ce=r()(oe,1),Q=ce[0],h=a.Z.useForm(),fe=r()(h,1),d=fe[0],le=a.Z.useForm(),f=r()(le,1),j=f[0],ne=(0,I.useState)(0),W=r()(ne,2),R=W[0],ie=W[1],G=(0,I.useState)("1"),H=r()(G,2),u=H[0],C=H[1],J=(0,I.useState)(null),X=r()(J,2),p=X[0],q=X[1],ee=(0,I.useState)(null),S=r()(ee,2),Z=S[0],P=S[1],A=(0,I.useState)(!0),g=r()(A,2),F=g[0],Tt=g[1],dt=(0,I.useState)(!1),_e=r()(dt,2),Et=_e[0],ut=_e[1],ot=(0,I.useState)(null),Ve=r()(ot,2),we=Ve[0],ct=Ve[1],mt=(0,I.useState)(null),De=r()(mt,2),je=De[0],Re=De[1],ft=(0,I.useState)(null),Ae=r()(ft,2),pt=Ae[0],Be=Ae[1],vt=(0,I.useState)(!1),Le=r()(vt,2),ht=Le[0],Se=Le[1],xt=(0,I.useState)({first:!1,second:!1,thirdly:!1,fourthly:!1}),ze=r()(xt,2),me=ze[0],he=ze[1],gt=[{key:"1",disabled:me.first,icon:(0,e.jsx)(ke.Z,{}),label:b.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:u=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:me.second,icon:(0,e.jsx)(ae.Z,{}),label:b.formatMessage({id:"skill.menu.code"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:u=="2"?"#1B64F3":"#213044"}},{key:"3",disabled:me.thirdly,icon:(0,e.jsx)($.Z,{}),label:b.formatMessage({id:"skill.menu.output"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:u=="3"?"#1B64F3":"#213044"}},{key:"4",disabled:me.fourthly,icon:(0,e.jsx)(L.Z,{}),label:b.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:u=="4"?"#1B64F3":"#213044"}}];(0,I.useEffect)(function(){Se(!0);var B=new URLSearchParams(window.location.search);B.get("app_id")||he({first:!1,second:!0,thirdly:!0,fourthly:!0}),Ge()},[]);var Ge=function(){var B=E()(o()().mark(function c(O){var n,x,te,Fe,de;return o()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(n=new URLSearchParams(window.location.search),x=null,!(n.get("app_id")||O)){pe.next=10;break}return pe.next=5,(0,V.Hb)(O||n.get("app_id"),n.get("type"));case 5:x=pe.sent,Re(x.data.app_id),Be(x.data.id),pe.next=11;break;case 10:x=(0,ue.iJ)();case 11:Se(!1),x.code==0?(q(x.data),te=xe(x.data.input_variables),v.setFieldsValue(te),P(x.data.dependencies?x.data.dependencies.python3:[]),Fe=xe(x.data.output_variables),d.setFieldsValue(Fe),de=xe(x.data.input_variables),j.setFieldsValue(de)):m.ZP.error(b.formatMessage({id:"skill.message.listerror"}));case 13:case"end":return pe.stop()}},c)}));return function(O){return B.apply(this,arguments)}}(),xe=function(c){var O={users:c&&c.properties?Object.values(c.properties).map(function(n){return{name:n.name,type:n.type,content:n.display_name,status:n.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return O},ge=function(){var B=E()(o()().mark(function c(O,n){var x,te;return o()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return x={app_id:n||je,data:O},de.next=3,(0,V.ej)(x);case 3:te=de.sent,Se(!1),te.code===0&&(m.ZP.success(b.formatMessage({id:"skill.conserve.success"})),Ge(n||je),Se(!1));case 6:case"end":return de.stop()}},c)}));return function(O,n){return B.apply(this,arguments)}}(),yt=function(){history.back()},kt=function(c,O){ge(c,O);var n=xe(c.input_variables);j.setFieldsValue(n)},bt=function(c){ge(c)},jt=function(c){ge(c)},St=function(c){ge(c)},Pe=function(c){ie(c)},Ft=function(c){C(c.key)},Zt=function(){if(Se(!0),!je)(0,re.uy)((0,ue.Go)("GET")).then(function(n){Re(n.data.app_id),(0,V.Hb)(n.data.app_id,!1).then(function(x){Be(x.data.id);var te={};te={input_variables:ye(v.getFieldsValue()),is_public:p.is_public,attrs_are_visible:p.attrs_are_visible,dependencies:{python3:Z||[]},code:we||(p.code?p.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:p.output_type,output_variables:ye(d.getFieldsValue())};var Fe=xe(ye(v.getFieldsValue()));j.setFieldsValue(Fe),ge(te,n.data.app_id);var de=s()(s()({},(0,ue.Go)("GET")),{},{app_id:n.data.app_id});(0,ue.Go)("SET",de),C("4"),he(s()(s()({},me),{},{fourthly:!1}))}).catch(function(x){})}).catch(function(n){});else{var c={input_variables:ye(v.getFieldsValue()),is_public:p.is_public,attrs_are_visible:p.attrs_are_visible,dependencies:{python3:Z||[]},code:we||(p.code?p.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:p.output_type,output_variables:ye(d.getFieldsValue())},O=xe(ye(v.getFieldsValue()));j.setFieldsValue(O),ge(c,je),C("4"),he(s()(s()({},me),{},{fourthly:!1}))}},He=function(c,O){var n=c.filter(function(x){return!x||!x.name||!x.content});if(c[0]){if(n.length!==0)return m.ZP.warning("".concat(O===1?b.formatMessage({id:"skill.message.inputerror3"}):b.formatMessage({id:"skill.message.inputerror4"}))),!0}else return m.ZP.warning("".concat(O===1?b.formatMessage({id:"skill.message.inputerror1"}):b.formatMessage({id:"skill.message.inputerror2"}))),!0;return wt(c,"name")?(m.ZP.warning(b.formatMessage({id:"skill.message.inputerror5"})),!0):!1},wt=function(c,O){var n=new Set;return c.some(function(x){var te=x[O];return n.has(te)?n.add(te):n.add(te)&&!1})},ye=function(c){var O=new w.Kr("output","","");return c.users.forEach(function(n){var x=new w._w(n.name,n.type?n.type:"string",n.value?n.value:"",n.content,n.status?n.status:!1);O.addProperty(n.name,x)}),O};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(z.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:yt,children:[(0,e.jsx)(M.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:b.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(i.Z,{selectedKeys:[u],onClick:Ft,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[u],mode:"inline",items:gt})})]}),(0,e.jsx)(Oe.Z,{spinning:ht,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px] ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsx)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:(l=(0,ue.Go)("GET"))!==null&&l!==void 0&&l.app_id?b.formatMessage({id:"skill.Editingskill"}):b.formatMessage({id:"skill.Creatingskill"})}),(p==null?void 0:p.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:b.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE]  text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:b.formatMessage({id:"skill.unpublish"})})]})}),(0,e.jsx)("div",{style:{display:u==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(We,{FirstValue:kt,Skillinfo:p,setSkillInfo:q,FirstSkillref:v,Operationbentate:F,firstjudgingcondition:He,pageKeyfun:C,skillmenudisabled:me,setskillmenudisabled:he})}),(0,e.jsx)("div",{style:{display:u==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Xe,{SecondValue:bt,handleBack:Pe,Skillinfo:p,setSkillInfo:q,SkillRelyOn:Z,setSkillRelyOn:P,Secondref:Q,setskillcodestate:ut,setNewcode:ct,pageKeyfun:C,skillmenudisabled:me,setskillmenudisabled:he})}),(0,e.jsx)("div",{style:{display:u==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(qe,{ThirdlyValue:jt,handleBack:Pe,Thirdlyref:d,Skillinfo:p,setSkillInfo:q,Operationbentate:F,firstjudgingcondition:He,pageKeyfun:C,skillmenudisabled:me,setskillmenudisabled:he,skillupdata:Zt})}),(0,e.jsx)("div",{style:{display:u==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(nt,{FourthlyValue:St,handleBack:Pe,Fourthlyref:j,Skillinfo:p,skillid:pt,app_id:je,Operationbentate:F})})]})})})]})},rt=it},49677:function(Y){function D(t){if(t==null)throw new TypeError("Cannot destructure "+t)}Y.exports=D,Y.exports.__esModule=!0,Y.exports.default=Y.exports}}]);
