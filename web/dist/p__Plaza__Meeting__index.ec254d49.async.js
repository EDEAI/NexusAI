"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6979],{82114:function(me,I,s){var L=s(1413),a=s(67294),d=s(83707),c=s(91146),f=function(_,g){return a.createElement(c.Z,(0,L.Z)((0,L.Z)({},_),{},{ref:g,icon:d.Z}))},w=a.forwardRef(f);I.Z=w},43722:function(me,I,s){s.d(I,{Gh:function(){return he},Gn:function(){return C},KH:function(){return W},Rp:function(){return X},cH:function(){return Q},dB:function(){return Y},j2:function(){return E},r5:function(){return R},rw:function(){return $},sI:function(){return O},sT:function(){return F},sh:function(){return Z},vu:function(){return g},xM:function(){return je},xT:function(){return ce}});var L=s(15009),a=s.n(L),d=s(99289),c=s.n(d),f=s(47520),w=s(79574),$=function(){var u=c()(a()().mark(function t(){var l;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.ZP)("/v1/index/",{method:"GET"});case 2:return l=o.sent,o.abrupt("return",l);case 4:case"end":return o.stop()}},t)}));return function(){return u.apply(this,arguments)}}(),_=null,g=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/",{method:"GET",data:l});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),C=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/".concat(l.id),{method:"DELETE"});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),Y=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/",{method:"POST",data:l});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),Q=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/".concat(l.id,"/details"),{method:"GET"});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),E=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:l.id}});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),O=function(){var u=c()(a()().mark(function t(l,i){var o;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.ZP)("/v1/chatroom/".concat(i,"/update_chatroom"),{method:"POST",data:l});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}},t)}));return function(l,i){return u.apply(this,arguments)}}(),R=function(){var u=c()(a()().mark(function t(l,i){var o;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.ZP)("/v1/chatroom/".concat(i,"/smart_selection"),{method:"POST",data:l});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}},t)}));return function(l,i){return u.apply(this,arguments)}}(),F=function(){var u=c()(a()().mark(function t(l,i,o){var r;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,f.ZP)("/v1/chatroom/".concat(i,"/agents/").concat(o,"/setting"),{method:"PUT",data:l});case 2:return r=q.sent,q.abrupt("return",r);case 4:case"end":return q.stop()}},t)}));return function(l,i,o){return u.apply(this,arguments)}}(),W=function(){var u=c()(a()().mark(function t(l,i){var o;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(0,w.Ep)()&&(i.chat_base_url=(0,w.bY)(!0)),n.next=3,(0,f.ZP)("/v1/chatroom/".concat(l,"/chatroom_message"),{method:"GET",data:i});case 3:return o=n.sent,n.abrupt("return",o);case 5:case"end":return n.stop()}},t)}));return function(l,i){return u.apply(this,arguments)}}(),X=function(){var u=c()(a()().mark(function t(l,i){var o;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.ZP)("/v1/chatroom/".concat(l,"/chat_history_message_summary"),{method:"POST",data:i});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}},t)}));return function(l,i){return u.apply(this,arguments)}}(),ce=function(){var u=c()(a()().mark(function t(l,i){var o;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.ZP)("/v1/chatroom/".concat(l,"/chat_history_summary"),{method:"POST",data:i});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}},t)}));return function(l,i){return u.apply(this,arguments)}}(),Z=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:l});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),he=function(){var u=c()(a()().mark(function t(l){var i;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,f.ZP)("/v1/chatroom/chat_room_history_single",{method:"GET",data:l});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},t)}));return function(l){return u.apply(this,arguments)}}(),je=function(){var u=c()(a()().mark(function t(l,i){var o;return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.ZP)("/v1/chatroom/".concat(l,"/chat_single_message_generation"),{method:"POST",data:i});case 2:return o=n.sent,n.abrupt("return",o);case 4:case"end":return n.stop()}},t)}));return function(l,i){return u.apply(this,arguments)}}()},80459:function(me,I,s){var L=s(32332),a=s(67294),d=s(85893),c=function(w){var $=w.width,_=$===void 0?"40px":$,g=w.bg,C=g===void 0?"#F4F8F1":g,Y=w.rounded,Q=Y===void 0?"6px":Y,E=w.data,O=w.imgWidth,R=O===void 0?"18px":O,F=w.background;E!=null&&E.avatar&&(R=_);var W=F||C;return(0,d.jsx)("div",{className:"relative flex items-center justify-center shrink-0",style:{width:_,height:_,backgroundColor:W,borderRadius:Q},children:(0,d.jsx)("img",{src:E!=null&&E.avatar?E.avatar:(0,L.s9)("single",E==null?void 0:E.icon),style:{width:R,height:R,borderRadius:Q},alt:""})})};I.Z=(0,a.memo)(c)},88864:function(me,I,s){var L=s(32332),a=s(67294),d=s(85893);I.Z=(0,a.memo)(function(c){var f=c.agentList,w=c.size,$=w===void 0?"sm":w,_=c.rounded,g=_===void 0?!1:_,C=f==null?void 0:f.map(function(O){return O.avatar?O.avatar:(0,L.s9)("single",O.icon)}),Y={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},Q={sm:"w-[47%] h-[47%]",md:"w-[47%] h-[47%]",lg:"w-[47%] h-[47%]"},E=function(){var R=(C==null?void 0:C.length)||0;if(!R||!C)return(0,d.jsx)("div",{className:"bg-gray-200 w-full h-full ".concat(g?"rounded-full":"")});if(R===1)return(0,d.jsx)("div",{className:"w-full h-full overflow-hidden ".concat(g?"rounded-full":""),children:(0,d.jsx)("img",{src:C[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})});if(R===2)return(0,d.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,d.jsx)("div",{className:"w-1/2 h-full pr-[2%]",children:(0,d.jsx)("img",{src:C[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-l-full":"")})}),(0,d.jsx)("div",{className:"w-1/2 h-full pl-[2%]",children:(0,d.jsx)("img",{src:C[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-r-full":"")})})]});if(R===3)return(0,d.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,d.jsx)("div",{className:"w-1/2 h-full pr-[2%] flex items-center justify-center",children:(0,d.jsx)("img",{src:C[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-l-full":"")})}),(0,d.jsxs)("div",{className:"w-1/2 h-full pl-[2%] flex flex-col",children:[(0,d.jsx)("div",{className:"h-1/2 pb-[2%]",children:(0,d.jsx)("img",{src:C[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-tr-full":"")})}),(0,d.jsx)("div",{className:"h-1/2 pt-[2%]",children:(0,d.jsx)("img",{src:C[2],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?"rounded-br-full":"")})})]})]});if(R===4)return(0,d.jsx)("div",{className:"w-full h-full flex flex-wrap",children:C.slice(0,4).map(function(ce,Z){return(0,d.jsx)("div",{className:"".concat(Q[$]," p-[3%] ").concat(Z===0?"pl-0 pt-0":Z===1?"pr-0 pt-0":Z===2?"pl-0 pb-0":"pr-0 pb-0"),children:(0,d.jsx)("img",{src:ce,alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(g?Z===0?"rounded-tl-full":Z===1?"rounded-tr-full":Z===2?"rounded-bl-full":"rounded-br-full":"")})},Z)})});for(var F=C.slice(0,9),W=[],X=0;X<Math.min(9,F.length);X++)W.push((0,d.jsx)("div",{className:"w-1/3 h-1/3",style:{padding:"1.5%"},children:(0,d.jsx)("img",{src:F[X],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})},X));return(0,d.jsx)("div",{className:"w-full h-full flex flex-wrap",children:W})};return(0,d.jsx)("div",{className:"".concat(Y[$]," overflow-hidden bg-white ").concat(g?"rounded-full":""),children:E()})})},52700:function(me,I,s){s.r(I),s.d(I,{default:function(){return Be}});var L=s(97857),a=s.n(L),d=s(15009),c=s.n(d),f=s(99289),w=s.n(f),$=s(5574),_=s.n($),g=s(43722),C=s(78697),Y=s(72406),Q=s(32332),E=s(82114),O=s(3471),R=s(76772),F=s(15746),W=s(45360),X=s(85576),ce=s(50136),Z=s(71230),he=s(32983),je=s(74330),u=s(28036),t=s(67294),l=s(19632),i=s.n(l),o=s(28508),r=s(26915),n=s(40741),q=s(13457),Se=s(96486),Pe=s(44010),Te=s(80459),e=s(85893),Ze=r.Z.TextArea,De=function(h){var x=(0,R.useIntl)(),ee=h.show,A=h.id,ne=h.close,N=h.save,D=h.isUpdata,ue=n.Z.useForm(),re=_()(ue,1),G=re[0],z=(0,t.useRef)(!1),xe=(0,R.useLocation)(),le=(0,t.useRef)(null),K=W.ZP.useMessage(),ie=_()(K,2),se=ie[0],k=ie[1],B=(0,t.useState)({name:"",description:"",max_round:10,agent:[]}),H=_()(B,2),m=H[0],M=H[1],_e=(0,t.useState)([]),de=_()(_e,2),te=de[0],ae=de[1],U=(0,t.useRef)(!1),we=(0,Se.throttle)(function(){var p=w()(c()().mark(function b(oe){var P,J;return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!U.current){v.next=2;break}return v.abrupt("return");case 2:if(U.current=!0,P=te.map(function(Ee){var We=Ee.agent_id,Re=Ee.active,Ge=Re===void 0?1:Re;return{agent_id:We,active:Ge}}),m.name){v.next=7;break}return U.current=!1,v.abrupt("return");case 7:if(P.length!=0){v.next=11;break}return U.current=!1,se.open({type:"error",content:x.formatMessage({id:"app.create_chatroom.label_4_tips"})}),v.abrupt("return");case 11:if(M(a()(a()({},m),{},{agent:P})),se.open({key:"create",type:"loading",content:"Loading..."}),z.current){v.next=19;break}return v.next=16,(0,g.dB)(a()(a()({},m),{},{agent:P}));case 16:v.t0=v.sent,v.next=22;break;case 19:return v.next=21,(0,g.sI)(a()(a()({},m),{},{agent:P}),A);case 21:v.t0=v.sent;case 22:J=v.t0,J.code==0&&(se.open({key:"create",type:"success",content:z.current?x.formatMessage({id:"app.edit_chatroom.succeed"}):x.formatMessage({id:"app.create_chatroom.succeed"}),duration:2}),N(!0),V()),U.current=!1;case 25:case"end":return v.stop()}},b)}));return function(b){return p.apply(this,arguments)}}(),300),ye=(0,t.useState)(!1),ve=_()(ye,2),Ce=ve[0],ge=ve[1],y=function(b){var oe={};return b.slice(1).split("&").forEach(function(P){var J=P.split("=");oe[J[0]]=J[1]}),oe},T=function(){var p=w()(c()().mark(function b(oe){var P,J;return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,g.cH)({id:oe});case 2:P=v.sent,P.code==0&&(J=P.data.chat_info,M(a()(a()({},m),{},{name:J.name,description:J.description,max_round:P.data.max_round?P.data.max_round:10,agent:P.data.agent_list})),ae(P.data.agent_list));case 4:case"end":return v.stop()}},b)}));return function(oe){return p.apply(this,arguments)}}(),S=function(){ge(!0)},j=function(){ge(!1)},pe=function(b){ae(i()(b.checkItem))},Me=function(){z.current=!1,D&&A!=0&&(z.current=!0,T(A))},V=function(){G.setFieldsValue({Title:"",Description:"",MaxRound:10}),M(a()(a()({},m),{},{name:"",description:"",max_round:10,agent:[]})),ae([]),U.current=!1,ne()};return(0,t.useEffect)(function(){ee&&Me()},[ee]),(0,t.useEffect)(function(){G.setFieldsValue({Title:m.name,Description:m.description,MaxRound:m.max_round})},[m,G]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{ref:le,className:"w-full h-full fixed top-[0] left-[0] bg-[rgba(0,0,0,0.5)] flex items-center justify-center z-20",children:[(0,e.jsxs)("div",{className:"w-[980px] h-[646px] bg-[#fff] rounded-[6px]",children:[k,(0,e.jsx)("div",{className:"w-full flex relative",style:{height:"100%"},children:(0,e.jsx)("div",{className:"w-full relative box-border flex-1",style:{height:"100%"},children:(0,e.jsx)(n.Z,{form:G,className:"h-full",initialValues:{Title:m.name,Description:m.description,MaxRound:m.max_round},children:(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("div",{className:"text-[16px] flex items-center p-[20px]",style:{borderBottom:"1px solid #ebebeb"},children:[(0,e.jsx)("span",{className:"flex-1 text-[14px] font-[500] text-[#213044]",children:z.current?x.formatMessage({id:"app.edit_chatroom.title"}):x.formatMessage({id:"app.create_chatroom.title"})}),(0,e.jsx)(o.Z,{className:"text-[16px] cursor-pointer",onClick:V})]}),(0,e.jsx)("div",{className:"flex-1 min-h-[0] overflow-auto",children:(0,e.jsxs)("div",{className:"pt-[20px] px-[20px]",children:[(0,e.jsxs)("div",{className:"text-[12px] text-[#213044]",children:[(0,e.jsx)("span",{style:{color:"red",paddingRight:"4px"},children:"*"}),x.formatMessage({id:"app.create_chatroom.label_1"})]}),(0,e.jsx)("div",{className:"pt-[15px]",children:(0,e.jsx)(n.Z.Item,{name:"Title",rules:[{required:!0,message:x.formatMessage({id:"app.create_chatroom.label_1_tips"})}],style:{marginBottom:"0px"},children:(0,e.jsx)(r.Z,{placeholder:x.formatMessage({id:"app.create_chatroom.label_1_pl"}),maxLength:50,style:{height:40,background:"#F7F7F7"},className:"placeholder:text-[#bbb] placeholder:text-[12px] h-[40px] border-[#eee] text-[#213044]",onChange:function(b){M(a()(a()({},m),{},{name:b.target.value}))}})})}),(0,e.jsx)("div",{className:"text-[12px] text-[#213044] pt-[20px]",children:x.formatMessage({id:"app.create_chatroom.label_2"})}),(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(n.Z.Item,{name:"Description",style:{marginBottom:"0px"},children:(0,e.jsx)(Ze,{showCount:!0,maxLength:1e3,placeholder:x.formatMessage({id:"app.create_chatroom.label_2_pl"}),value:m.description,style:{height:57,resize:"none",background:"#F7F7F7"},className:"placeholder:text-[#bbb] placeholder:text-[12px] h-[40px] border-[#eee] text-[#213044]",onChange:function(b){M(a()(a()({},m),{},{description:b.target.value}))}})})}),(0,e.jsxs)("div",{className:"text-[12px] text-[#213044] pt-[20px]",children:[(0,e.jsx)("span",{style:{color:"red",paddingRight:"4px"},children:"*"}),x.formatMessage({id:"app.create_chatroom.label_3"})]}),(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(n.Z.Item,{name:"MaxRound",rules:[{required:!0,message:x.formatMessage({id:"app.create_chatroom.label_3_tips"})}],style:{marginBottom:"0px"},children:(0,e.jsx)(q.Z,{min:10,step:1,max:100,size:"large",style:{background:"#F7F7F7"},className:"placeholder:text-[#bbb] placeholder:text-[12px]  border-[#eee] text-[#213044] w-full",onChange:function(b){M(a()(a()({},m),{},{max_round:b}))},formatter:function(b){return b!==void 0?Math.floor(b).toString():m.max_round.toString()}})})}),(0,e.jsxs)("div",{className:"text-[14px]  pt-[20px] flex",children:[(0,e.jsx)("span",{style:{color:"red",paddingRight:"4px"},children:"*"}),(0,e.jsx)("span",{className:"text-[12px] text-[#213044]",children:x.formatMessage({id:"app.create_chatroom.label_4"})})]}),(0,e.jsx)("div",{className:"pt-[15px] pb-[20px] overflow-hidden w-full",children:(0,e.jsxs)(Z.Z,{gutter:[15,15],children:[(0,e.jsx)(F.Z,{span:6,children:(0,e.jsx)("div",{className:"text-[12px] text-[#BBBBBB] h-[62px] rounded-[4px] bg-[#F7F7F7] leading-[62px] text-center cursor-pointer",onClick:S,style:{border:"1px solid #EEEEEE"},children:x.formatMessage({id:"app.create_chatroom.add_button"})})}),te&&te.length?te.map(function(p){return(0,e.jsx)(F.Z,{span:6,children:(0,e.jsxs)("div",{className:"bg-[#fff] flex gap-x-[20px] p-[10px] cursor-pointer border-solid border-[1px] rounded-[4px] border-[#eee]",children:[(0,e.jsx)(Te.Z,{data:p,imgWidth:"20px"}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("div",{className:"text-[#213044] text-[12px] font-[500] w-full truncate",children:p.name}),(0,e.jsx)("div",{className:"text-[#999] text-[12px] w-full truncate",children:p.description})]})]})},p.agent_id)}):(0,e.jsx)(e.Fragment,{})]})})]})}),(0,e.jsxs)("div",{className:"p-[20px] flex gap-x-[20px] justify-end",style:{borderTop:"1px solid #e8e8e8"},children:[(0,e.jsx)(u.ZP,{className:"text-[14px] text-[#213044] w-[88px] h-[40px]",style:{border:"1px solid #D8D8D8"},onClick:V,children:x.formatMessage({id:"app.create_chatroom.cancel"})}),(0,e.jsx)(u.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px]",htmlType:"submit",onClick:we,children:x.formatMessage({id:"app.create_chatroom.save"})})]})]})})})})]}),(0,e.jsx)(Pe.Z,{show:Ce,popupClose:j,popupSave:pe,checkList:te})]})})},Fe=De,Ae=s(88864),Ne=s(54464),be=s(62880),Oe=function(h){var x=(0,Ne.TE)(),ee=x.hasPermission,A=ee(be.Dg.CREATE_MEETING);return(0,e.jsx)(F.Z,{className:"gutter-row",xs:24,sm:24,md:12,lg:8,xl:6,children:(0,e.jsxs)("div",{className:"h-[236px] rounded-[8px] bg-[#EFF0F2] flex flex-col items-center justify-center gap-y-[10px] ".concat(A?"cursor-pointer":"cursor-not-allowed opacity-50"),style:{border:"1px solid #E9E9E9"},onClick:A?function(){h.setCreateShow(!0),h.isUpdataChatRoom.current=!1,h.upDataId.current=0}:void 0,children:[(0,e.jsx)("img",{src:"/icons/plaza_m2_c2.svg",className:"w-[42px] h-[42px] ".concat(A?"":"opacity-50"),alt:""}),(0,e.jsx)("span",{className:"text-[12px] ".concat(A?"text-[#213044]":"text-[#CCCCCC]"),children:h.intl.formatMessage({id:"app.chatroom_list.create"})})]})})},Ie=function(h){var x=h.item,ee=h.resetList,A=h.setCreateShow,ne=h.isUpdataChatRoom,N=h.upDataId,D=h.intl,ue=W.ZP.useMessage(),re=_()(ue,2),G=re[0],z=re[1],xe=X.Z.confirm,le=function(){xe({title:D.formatMessage({id:"app.chatroom.del.title"}),icon:(0,e.jsx)(E.Z,{}),content:D.formatMessage({id:"app.chatroom.del.tips"}),okText:D.formatMessage({id:"app.chatroom.del.confirm"}),okType:"danger",cancelText:D.formatMessage({id:"app.chatroom.del.cancel"}),onOk:function(){K()}})},K=function(){var k=w()(c()().mark(function B(){var H;return c()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,g.Gn)({id:x.chatroom_id});case 2:H=M.sent,H.code==0&&(G.open({key:"del",type:"success",content:D.formatMessage({id:"app.chatroom.del.delsuccess"}),duration:10}),ee(x.chatroom_id));case 4:case"end":return M.stop()}},B)}));return function(){return k.apply(this,arguments)}}(),ie=function(){var k=w()(c()().mark(function B(){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:A(!0),ne.current=!0,N.current=x.chatroom_id;case 3:case"end":return m.stop()}},B)}));return function(){return k.apply(this,arguments)}}(),se=[{key:"1",label:(0,e.jsx)("div",{className:"py-[3px] px-[3px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[5px] text-[12px] text-[#213044] items-center p-y-[8]",onClick:ie,children:[(0,e.jsx)("img",{src:"/icons/edit_icon.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{children:D.formatMessage({id:"app.chatroom_list.fun_button_1"})})]})})},{key:"2",label:(0,e.jsx)("div",{className:"py-[3px] px-[3px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[5px] text-[12px] text-[#E12222] items-center",onClick:le,children:[(0,e.jsx)("img",{src:"/icons/delete_icon.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{children:D.formatMessage({id:"app.chatroom_list.fun_button_2"})})]})})}];return(0,e.jsxs)(e.Fragment,{children:[z,(0,e.jsxs)("div",{className:"flex  items-center",children:[(0,e.jsx)("div",{className:"flex gap-x-[6px] items-center flex-1"}),(0,e.jsx)(ce.Z,{menu:{items:se},placement:"topRight",className:"cursor-pointer",children:(0,e.jsx)("div",{className:"w-[18px] h-[18px] bg-[#ebebeb] rounded-[4px] flex justify-center items-center",children:(0,e.jsx)(O.Z,{className:"hover:text-[#1B64F3]",style:{fontSize:"14px"}})})})]})]})},Le=function(){var h=(0,R.useIntl)(),x=(0,Ne.TE)(),ee=x.hasPermission,A=(0,t.useState)(null),ne=_()(A,2),N=ne[0],D=ne[1],ue=(0,t.useState)(!1),re=_()(ue,2),G=re[0],z=re[1],xe=(0,t.useState)({page:1,page_size:20,name:""}),le=_()(xe,2),K=le[0],ie=le[1],se=(0,t.useState)(!0),k=_()(se,2),B=k[0],H=k[1],m=(0,t.useRef)(!1),M=(0,t.useRef)(0),_e=(0,t.useState)(!1),de=_()(_e,2),te=de[0],ae=de[1],U=function(){var y=w()(c()().mark(function T(){var S,j,pe=arguments;return c()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return S=pe.length>0&&pe[0]!==void 0?pe[0]:!1,V.next=3,(0,g.vu)(K);case 3:j=V.sent,S&&z(!0),j.code==0&&(H(j.data.total_pages>K.page),j.data.total_pages>=K.page&&!S&&(j.data.list=N.list.concat(j.data.list)),j.data.list&&j.data.list.length&&j.data.list.forEach(function(p){p.old_agent_list=JSON.parse(JSON.stringify(p.agent_list||[])),p.agent_list&&p.agent_list.length&&(p.agent_list.length=p.agent_list.length>6?6:p.agent_list.length,p.old_agent_list.length=p.old_agent_list.length>9?9:p.old_agent_list.length)}),D(j.data));case 6:case"end":return V.stop()}},T)}));return function(){return y.apply(this,arguments)}}();(0,t.useEffect)(function(){U(!0),H(!0)},[]);var we=function(T){ie(function(S){return a()(a()({},S),{},{page:K.page++})}),U()},ye=function(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;N&&N.list.length&&(S!=null?D(a()(a()({},N),{},{list:N.list.map(function(j){return a()(a()({},j),{},{smart_selection:j.chatroom_id===T?S:j.smart_selection})})})):D(a()(a()({},N),{},{list:N.list.filter(function(j){return j.chatroom_id!==T})})))},ve=function(T){R.history.push("/chat_room/".concat(T.chatroom_id))},Ce=function(){ae(!1)},ge=function(T){T&&U(!0)};return(0,e.jsx)("div",{className:"pt-0 w-full",id:"Meeting",style:{height:"calc(100vh - 94px)",overflowY:"auto"},children:(0,e.jsx)(Y.Z,{dataLength:N&&N.list.length,elid:"Meeting",ishasMore:B,upSlide:we,isFooter:!0,pageNumber:K.page,children:(0,e.jsx)("div",{className:"px-[30px] pt-[30px]",children:(0,e.jsxs)(Z.Z,{gutter:[20,20],style:{margin:0},children:[N&&N.list.length&&G?(0,e.jsx)(Oe,{setCreateShow:ae,isUpdataChatRoom:m,intl:h,upDataId:M}):(0,e.jsx)(e.Fragment,{}),N&&N.list.length?N.list.map(function(y,T){return(0,e.jsx)(F.Z,{className:"gutter-row",xs:24,sm:24,md:12,lg:8,xl:6,xxl:6,children:(0,e.jsx)("div",{className:"relative h-[236px] rounded-[8px] cursor-pointer shadow-lg shadow-gray-100 hover:shadow-gray-200",onClick:function(){ve(y)},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] h-full",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"flex pt-[20px] pb-[15px] px-[20px] text-[#213044] text-[14px] font-[500] gap-x-[6px]",children:[(0,e.jsx)(Ae.Z,{agentList:y.old_agent_list}),(0,e.jsx)("span",{className:"flex-1 min-w-[0px] truncate",children:y.name}),(0,e.jsxs)("div",{className:"flex gap-x-[5px] items-center",children:[(0,e.jsx)("img",{src:"".concat(y.active==0?"/icons/plaza_m2_c2.svg":"/icons/plaza_m2_c1.svg"),className:"w-[14px] h-[14px]"}),(0,e.jsx)("span",{className:"text-[12px]",children:y.active==0?(0,e.jsx)("span",{className:"text-[#aaa]",children:h.formatMessage({id:"app.chatroom_list.status"})}):(0,e.jsx)("span",{className:"text-[#1B64F3]",children:h.formatMessage({id:"app.chatroom_list.status_succeed"})})})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"px-[20px]",children:(0,e.jsxs)("div",{style:{borderBottom:"1px solid #eee"},children:[(0,e.jsx)("div",{className:"text-[#666666] text-[12px] font-[400] w-full truncate min-h-[14px]",children:y.description?y.description:(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{className:"py-[20px] h-[115px] overflow-hidden",children:y.agent_list&&y.agent_list.length?(0,e.jsx)(Z.Z,{gutter:[20,18],children:y.agent_list.map(function(S,j){return(0,e.jsx)(F.Z,{md:12,lg:12,xl:12,xxl:8,children:(0,e.jsxs)("div",{className:"flex gap-x-[10px] items-center",children:[(0,e.jsx)(C.Z,{Image:(0,Q.s9)("single",S.icon),size:"30",avatar:S.avatar}),(0,e.jsx)("div",{className:"text-[#666] text-[12px] truncate",children:S.name})]})},j)})}):(0,e.jsx)(he.Z,{style:{margin:"0px",fontSize:"12px"},imageStyle:{width:"60px",margin:"0 auto",marginBottom:"2px"},description:h.formatMessage({id:"app.dashboard.None"}),image:he.Z.PRESENTED_IMAGE_SIMPLE})})]})}),(0,e.jsx)("div",{className:"pt-[15px] pb-[16px] px-[20px]",onClick:function(j){return j.stopPropagation(),!1},children:(0,e.jsx)(Ie,{item:y,resetList:ye,setCreateShow:ae,isUpdataChatRoom:m,upDataId:M,intl:h})})]})]})})},T)}):(0,e.jsx)(e.Fragment,{children:G?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex items-center flex-wrap justify-center mt-48",children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-center mb-2.5",children:(0,e.jsx)("img",{src:"/icons/default.svg",alt:""})}),(0,e.jsxs)("div",{className:"w-full text-center mb-3 text-[#666] text-sm",children:[h.formatMessage({id:"creation.margindescribe"})," ","~"]}),(0,e.jsxs)("div",{className:"w-full text-center",children:[" ",(0,e.jsx)(u.ZP,{color:"primary",disabled:!ee(be.Dg.CREATE_MEETING),onClick:function(){ae(!0),m.current=!1,M.current=0},children:h.formatMessage({id:"app.chatroom_list.create"})})," "]})]})}):(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(je.Z,{size:"large"})})}),te?(0,e.jsx)(Fe,{show:te,id:M.current,close:Ce,save:ge,isUpdata:m.current}):(0,e.jsx)(e.Fragment,{})]})})})})},$e=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Le,{})})})},Be=$e}}]);
