"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2630],{54605:function(at,_,l){l.r(_),l.d(_,{default:function(){return $e}});var he=l(15009),E=l.n(he),ge=l(99289),ee=l.n(ge),ye=l(5574),u=l.n(ye),te=l(24805),$=l(10759),je=l(18449),Se=l(2068),ke=l(89035),be=l(81644),Ne=l(82826),O=l(35312),r=l(40741),W=l(45360),Fe=l(28036),Ze=l(50136),G=l(25409),Me=l(74330),c=l(67294),we=l(97857),f=l.n(we),F=l(92939),se=l(5608),H=l(26915),le=l(72269),e=l(85893),it=H.Z.TextArea,Oe=function(t){var j,Z=t.FirstValue,p=t.FirstSkillref,s=t.Skillinfo,M=t.setSkillInfo,b=t.Operationbentate,n=(0,O.useIntl)();(0,c.useEffect)(function(){},[]);var I={readOnly:!0},h={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsx)(r.Z,{name:"dynamic_form_nest_item",onFinish:function(V){Z(V)},style:{width:"100%"},autoComplete:"off",form:p,children:s&&s.attrs_are_visible==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:n.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:b==="true"?n.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:n.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:s&&s.description})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:n.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:b==="true"?n.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:n.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:s&&s.description})]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(F.Z,{className:"font-medium text-xs text-[#555555]",name:n.formatMessage({id:"skill.teamvisibility"}),title:n.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(le.Z,f()(f()({},h),{},{size:"small",checked:!!(s&&s.is_public==1)}))]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(F.Z,{className:"font-medium",name:n.formatMessage({id:"agent.attrVisible"}),title:n.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(le.Z,f()(f()({},h),{},{size:"small",checked:!!(s&&s.attrs_are_visible==1)}))]}),(s==null?void 0:s.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(se.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(F.Z,{className:"font-medium",required:!0,name:n.formatMessage({id:"skill.inputvariable"}),title:n.formatMessage({id:"skill.Callword.inputvariable"})})}),variableTypes:["string","number","json"],variables:Object.values((s==null||(j=s.input_variables)===null||j===void 0?void 0:j.properties)||{})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Te=Oe,Ie=l(34041),Ve=l(620),Ce=function(t){var j=t.SecondValue,Z=t.handleBack,p=t.Skillinfo,s=t.setSkillInfo,M=t.SkillRelyOn,b=t.setSkillRelyOn,n=t.Secondref,I=t.setskillcodestate,h=t.setNewcode,S=(0,O.useIntl)();(0,c.useEffect)(function(){},[]);var V={readOnly:!0},C={disabled:!0},A=function(P){console.log(P),b(P)};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:S.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(r.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:n,children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(F.Z,{name:S.formatMessage({id:"skill.dependency"}),title:S.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Ie.Z,f()(f()({},C),{},{mode:"tags",variant:"filled",style:{width:"100%"},value:M,tokenSeparators:[","]}))]}),(0,e.jsxs)(r.Z.Item,{children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:S.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(Ve.Z,{readOnly:!0,language:"python3",value:p&&p.code?JSON.parse(p.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,title:"python3"})})]})]})]})},Pe=Ce,T=l(78045),nt=H.Z.TextArea,rt=H.Z.Search,Be=function(t){var j=t.ThirdlyValue,Z=t.Thirdlyref,p=t.handleBack,s=t.Skillinfo,M=t.setSkillInfo,b=t.Operationbentate,n=(0,O.useIntl)(),I=(0,c.useState)(null),h=u()(I,2),S=h[0],V=h[1],C={readOnly:!0},A={disabled:!0};(0,c.useEffect)(function(){},[]);var z=function(w){M(f()(f()({},s),{},{output_type:w.target.value}))},P=function(w){var k=new $.Kr("output","","");w.users.forEach(function(g){var L=new $._w(g.name,g.type?g.type:"string","",g.content,!1);k.addProperty(g.name,L)});var d={output_type:s.output_type,output_variables:k};j(d)};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"skill.menu.output"})})}),(0,e.jsx)(r.Z,{name:"dynamic_form_nest_item",onFinish:P,style:{width:"100%"},autoComplete:"off",form:Z,children:(0,e.jsx)(r.Z.List,{name:"users",children:function(w,k){var d,g=k.add,L=k.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(F.Z,{name:n.formatMessage({id:"skill.outputvariable"}),title:n.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(T.ZP.Group,f()(f()({},A),{},{value:s&&s.output_type,children:[(0,e.jsx)(T.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(T.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(T.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(T.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.file"})})})]}))]}),(s==null?void 0:s.output_variables)&&(0,e.jsx)("div",{className:"",children:(0,e.jsx)(se.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(F.Z,{className:"font-medium",required:!0,name:n.formatMessage({id:"skill.outputv"}),title:n.formatMessage({id:"skill.Callword.outputv"})})}),variableTypes:["string","number","json","file"],variables:Object.values((s==null||(d=s.output_variables)===null||d===void 0?void 0:d.properties)||{})})})]})}})})]})},Re=Be,Ee=function(){var t=(0,O.useIntl)(),j=r.Z.useForm(),Z=u()(j,1),p=Z[0],s=r.Z.useForm(),M=u()(s,1),b=M[0],n=r.Z.useForm(),I=u()(n,1),h=I[0],S=r.Z.useForm(),V=u()(S,1),C=V[0],A=(0,c.useState)(0),z=u()(A,2),P=z[0],K=z[1],w=(0,c.useState)("1"),k=u()(w,2),d=k[0],g=k[1],L=(0,c.useState)(null),ae=u()(L,2),x=ae[0],B=ae[1],Ae=(0,c.useState)(null),ie=u()(Ae,2),ne=ie[0],ze=ie[1],Ke=(0,c.useState)(null),re=u()(Ke,2),Le=re[0],De=re[1],We=(0,c.useState)(null),de=u()(We,2),U=de[0],oe=de[1],Ge=(0,c.useState)(null),ue=u()(Ge,2),D=ue[0],He=ue[1],Je=(0,c.useState)(!1),ce=u()(Je,2),dt=ce[0],Ue=ce[1],Xe=(0,c.useState)(null),me=u()(Xe,2),ot=me[0],Ye=me[1],Qe=(0,c.useState)(!0),xe=u()(Qe,2),X=xe[0],ve=xe[1],qe=[{key:"1",icon:(0,e.jsx)(Se.Z,{}),label:t.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(ke.Z,{}),label:t.formatMessage({id:"skill.menu.code"}),disabled:U&&x.attrs_are_visible==0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="2"?"#1B64F3":"#213044"}},{key:"3",icon:(0,e.jsx)(be.Z,{}),label:t.formatMessage({id:"skill.menu.output"}),disabled:U&&x.attrs_are_visible!==1,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="3"?"#1B64F3":"#213044"}}];(0,c.useEffect)(function(){fe()},[]);var fe=function(){var m=ee()(E()().mark(function i(){var o,a,v,N;return E()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return o=new URLSearchParams(window.location.search),ve(!0),ze(o.get("app_id")),R.next=5,(0,te.Hb)(o.get("app_id"),o.get("type"));case 5:a=R.sent,console.log(a,"res-===>"),ve(!1),a.code==0?(B(a.data),De(a.data.id),He(a.data.publish_status===1?"true":"false"),a.data.publish_status==1&&W.ZP.warning(t.formatMessage({id:"skill.message.listwarning"}),5),v=Y(a.data.input_variables),p.setFieldsValue(v),oe(a.data.dependencies?a.data.dependencies.python3:[]),N=Y(a.data.output_variables),h.setFieldsValue(N)):W.ZP.error(t.formatMessage({id:"skill.message.listerror"}));case 9:case"end":return R.stop()}},i)}));return function(){return m.apply(this,arguments)}}(),Y=function(i){console.log(!!i&&!!i.properties,"obj");var o={users:i&&i.properties?Object.values(i.properties).map(function(a){return{name:a.name,type:a.type,content:a.display_name,status:a.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return o},Q=function(){var m=ee()(E()().mark(function i(o){var a,v;return E()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(D!=="false"){y.next=8;break}return a={app_id:ne,data:o},y.next=4,(0,te.ej)(a);case 4:return v=y.sent,console.log(v),v.code===0&&(W.ZP.success(t.formatMessage({id:"skill.conserve.success"})),fe()),y.abrupt("return",v);case 8:return y.abrupt("return",{code:-1,message:"Operation not allowed"});case 9:case"end":return y.stop()}},i)}));return function(o){return m.apply(this,arguments)}}(),_e=function(){pe({key:d,keyPath:[],item:void 0,domEvent:void 0}),O.history.back()},et=function(i){var o=Y(i.input_variables);C.setFieldsValue(o)},tt=function(i){Q(i)},st=function(i){Q(i)},lt=function(i){Q(i)},q=function(i){K(i)},pe=function(i){d=="1"&&g(i.key),g(i.key)},ut=function(i,o){var a=new Set;return i.some(function(v){var N=v[o];return a.has(N)?a.add(N):a.add(N)&&!1})},ct=function(i){var o=new $.Kr("output","","");return i.users.forEach(function(a){var v=new $._w(a.name,a.type?a.type:"string",a.value?a.value:"",a.content,a.status?a.status:!1);o.addProperty(a.name,v)}),o};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(Fe.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:_e,children:[(0,e.jsx)(Ne.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:t.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(Ze.Z,{selectedKeys:[d],onClick:pe,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[d],mode:"inline",items:qe})})]}),(0,e.jsx)("div",{className:"flex-1 relative w-[calc(100%-300px)]",children:(0,e.jsxs)(G.Z,{style:{height:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,e.jsx)(G.Z.Panel,{defaultSize:"50%",min:"40%",max:"70%",children:(0,e.jsx)(Me.Z,{spinning:X,size:"large",className:"mt-[112px] mr-4",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px]",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[x?x.nickname:"",t.formatMessage({id:"skill.skills"}),(0,e.jsxs)("span",{className:"ml-2 text-sm text-gray-500 font-normal",children:["(",t.formatMessage({id:"readonly.mode"}),")"]})]}),(x==null?void 0:x.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:t.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:"bg-[#EEE] text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:t.formatMessage({id:"skill.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:d==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!X&&(0,e.jsx)(Te,{FirstValue:et,Skillinfo:x,setSkillInfo:B,FirstSkillref:p,Operationbentate:D})}),(0,e.jsx)("div",{style:{display:d==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Pe,{SecondValue:tt,handleBack:q,Skillinfo:x,setSkillInfo:B,SkillRelyOn:U,setSkillRelyOn:oe,Secondref:b,setskillcodestate:Ue,setNewcode:Ye})}),(0,e.jsx)("div",{style:{display:d==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!X&&(0,e.jsx)(Re,{ThirdlyValue:st,handleBack:q,Thirdlyref:h,Skillinfo:x,setSkillInfo:B,Operationbentate:D})})]})})})}),(0,e.jsx)(G.Z.Panel,{children:(0,e.jsx)(je.Z,{FourthlyValue:lt,handleBack:q,Fourthlyref:C,Skillinfo:x,skillid:Le,app_id:ne,Operationbentate:D,skillupdata:function(){return Promise.resolve({code:0})},isCreate:!1,setSkillInfo:B,readOnly:!0})})]})})]})},$e=Ee}}]);
