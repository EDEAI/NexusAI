"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[894],{82826:function(F,y,t){t.d(y,{Z:function(){return B}});var O=t(1413),o=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},u=L,E=t(91146),P=function(w,R){return o.createElement(E.Z,(0,O.Z)((0,O.Z)({},w),{},{ref:R,icon:u}))},j=o.forwardRef(P),B=j},2068:function(F,y,t){t.d(y,{Z:function(){return B}});var O=t(1413),o=t(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},u=L,E=t(91146),P=function(w,R){return o.createElement(E.Z,(0,O.Z)((0,O.Z)({},w),{},{ref:R,icon:u}))},j=o.forwardRef(P),B=j},11551:function(F,y,t){t.d(y,{Ce:function(){return A},Dh:function(){return d},Iw:function(){return Y},LH:function(){return k},XB:function(){return c},ek:function(){return p},zl:function(){return $}});var O=t(15009),o=t.n(O),L=t(99289),u=t.n(L),E=t(47520),P="/v1/agent/agent_info/",j="/v1/vector/dataset_list/2",B="/v1/agent/agent_base_update/",Z="/v1/agent/agent_abilities_set/",w="/v1/agent/agent_output_set/",R="/v1/agent/agent_engine_set/",z="/v1/agent/agent_publish/",H="/v1/agent/agent_run",p=function(){var m=u()(o()().mark(function l(r,i){var f;return o()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,E.ZP)("".concat(P).concat(r),{method:"GET",data:{publish_status:i=="true"?1:0}});case 2:return f=T.sent,T.abrupt("return",f);case 4:case"end":return T.stop()}},l)}));return function(r,i){return m.apply(this,arguments)}}(),$=function(){var m=u()(o()().mark(function l(){var r;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,E.ZP)("".concat(j),{method:"GET"});case 2:return r=f.sent,f.abrupt("return",r);case 4:case"end":return f.stop()}},l)}));return function(){return m.apply(this,arguments)}}(),c=function(){var m=u()(o()().mark(function l(r){var i;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.ZP)("".concat(B).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},l)}));return function(r){return m.apply(this,arguments)}}(),Y=function(){var m=u()(o()().mark(function l(r){var i;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.ZP)("".concat(Z).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},l)}));return function(r){return m.apply(this,arguments)}}(),A=function(){var m=u()(o()().mark(function l(r){var i;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.ZP)("".concat(w).concat(r.agent_id),{method:"PUT",data:r});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},l)}));return function(r){return m.apply(this,arguments)}}(),V=null,d=function(){var m=u()(o()().mark(function l(r){var i;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.ZP)("".concat(z).concat(r),{method:"PUT"});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},l)}));return function(r){return m.apply(this,arguments)}}(),k=function(){var m=u()(o()().mark(function l(r){var i;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.ZP)("".concat(H),{method:"POST",data:r});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},l)}));return function(r){return m.apply(this,arguments)}}()},85877:function(F,y,t){var O=t(19632),o=t.n(O),L=t(97857),u=t.n(L),E=t(5574),P=t.n(E),j=t(52677),B=t.n(j),Z=t(35312),w=t(78234),R=t(77598),z=t(96486),H=t.n(z),p=t(67294),$=t(73935),c=t(43413),Y=t(92858),A=t(16845),V=t(15425),d=t(85893),k=function(a){var s=a.children;return(typeof document=="undefined"?"undefined":B()(document))==="object"?$.createPortal(s,document.body):null},m=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent),l=function(a){var s=a.value,g=a.onChange,D=a.id,b=a.placeholder,M=a.options,W=(0,Z.useIntl)(),q=(0,p.useRef)(),ie=(0,p.useState)(),ee=P()(ie,2),x=ee[0],U=ee[1],_e=(0,p.useState)(0),ne=P()(_e,2),C=ne[0],X=ne[1],ce=(0,p.useState)(""),te=P()(ce,2),de=te[0],fe=te[1],ve=(0,p.useCallback)(function(n){return(0,d.jsx)(e,u()({},n))},[]),me=(0,p.useCallback)(function(n){return(0,d.jsx)(f,u()({},n))},[]),v=(0,p.useMemo)(function(){return r((0,A.BU)((0,Y.VC)((0,c.Jh)())))},[]),pe=(0,p.useState)(null),ae=P()(pe,2),he=ae[0],ge=ae[1],Oe=(0,V.Z)(function(n){return n.selectedNode}),Ie=(0,V.Z)(function(n){return n.getOutputVariables}),Ae=(0,V.Z)(function(n){return n.getInputVariables}),be=(0,p.useState)([]),re=P()(be,2),I=re[0],se=re[1];(0,w.Z)(function(){s&&s.length>0&&J(s),M!=null&&M.length&&se(M.map(function(n){return u()(u()({},n),{},{name:n.label,id:n.value})}))}),(0,R.Z)(function(){var n=H().isEqual(he,s);n||(s&&s.length>0?J(s):s&&H().isArray(s)&&s.length==0&&J([{type:"paragraph",children:[]}]))},[s,D]),(0,R.Z)(function(){M.length&&se(M.map(function(n){return u()(u()({},n),{},{name:n.label,id:n.value})})),console.log(M)},[M]);var J=function(_){ge(_),ue(v,{nodes:[{type:"paragraph",children:[]}]}),ue(v,{nodes:_})},Ee=(0,p.useCallback)(function(n){if(x&&I.length>0)switch(n.key){case"ArrowDown":n.preventDefault();var _=C>=I.length-1?0:C+1;X(_);return;case"ArrowUp":n.preventDefault();var h=C<=0?I.length-1:C-1;X(h);return;case"Tab":case"Enter":n.preventDefault(),c.YR.select(v,x),i(v,I[C]),U(null);return;case"Escape":n.preventDefault(),U(null);return}else if(n.key==="@"){setTimeout(function(){return Pe()},10);return}U(null)},[I,v,C,x]),ue=function(_){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=o()(_.children);if(Q.forEach(function(S){return _.apply({type:"remove_node",path:[0],node:S})}),h.nodes){var N=c.NB.isNode(h.nodes)?[h.nodes]:h.nodes;N.forEach(function(S,le){return _.apply({type:"insert_node",path:[le],node:S})})}var G=h.at&&c.E9.isPoint(h.at)?h.at:c.ML.end(_,[]);G&&c.YR.select(_,G)};(0,p.useEffect)(function(){if(x&&I.length>0){var n=q.current,_=A.F3.toDOMRange(v,x),h=_.getBoundingClientRect();n.style.top="".concat(h.top+window.pageYOffset+24,"px"),n.style.left="".concat(h.left+window.pageXOffset,"px")}},[I.length,v,C,de,x]);var Pe=function(){var _=v.selection;if(_&&c.e6.isCollapsed(_)){var h=c.e6.edges(_),Q=P()(h,1),N=Q[0],G=c.ML.before(v,N),S=G&&c.ML.range(v,G,N),le=S&&c.ML.string(v,S),De=c.ML.after(v,N),Me=c.ML.range(v,N,De),Te=c.ML.string(v,Me);U(S),fe(""),X(0);return}U(null)};return(0,d.jsxs)(A.mH,{editor:v,initialValue:oe,onChange:function(_){g==null||g(_),U(null)},children:[(0,d.jsx)(A.CX,{renderElement:ve,renderLeaf:me,onKeyDown:Ee,className:"!outline-none",placeholder:b!=null?b:W.formatMessage({id:"workflow.placeholder.enterContent",defaultMessage:"\uFF0C@"})}),x&&(0,d.jsx)(k,{children:(0,d.jsx)("div",{ref:q,style:{top:"-9999px",left:"-9999px",position:"absolute",zIndex:10,padding:"3px",background:"white",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,.2)"},className:"px-1 pt-1 z-10","data-cy":"mentions-portal",children:I.length?I.map(function(n,_){return(0,d.jsx)("div",{onClick:function(){console.log(n),c.YR.select(v,x),i(v,n),U(null)},className:"hover:bg-blue-100 text-sm mb-1",style:{padding:"1px 3px",borderRadius:"3px",cursor:"pointer",background:_===C?"#B4D5FF":""},children:(0,d.jsx)("span",{children:n.name})},n.name+_)}):(0,d.jsx)(d.Fragment,{children:W.formatMessage({id:"workflow.message.noVariablesFound",defaultMessage:""})})})})]})},r=function(a){var s=a.isInline,g=a.isVoid,D=a.markableVoid;return a.isInline=function(b){return b.type==="mention"?!0:s(b)},a.isVoid=function(b){return b.type==="mention"?!0:g(b)},a.markableVoid=function(b){return b.type==="mention"||D(b)},a},i=function(a,s){var g={type:"mention",id:(s==null?void 0:s.id)||"",character:s.name,base:s,children:[{bold:!0,text:"11111"}]};c.YR.insertNodes(a,g),c.YR.move(a)},f=function(a){var s=a.attributes,g=a.children,D=a.leaf;return(0,d.jsx)("span",u()(u()({},s),{},{children:g}))},e=function(a){var s=a.attributes,g=a.children,D=a.element;switch(D.type){case"mention":return(0,d.jsx)(T,u()({},a));default:return(0,d.jsx)("p",u()(u()({},s),{},{children:g}))}},T=function(a){var s=a.attributes,g=a.children,D=a.element,b=(0,A.vt)(),M=(0,A.UE)(),W={padding:"3px 3px 2px",margin:"0 1px",verticalAlign:"baseline",display:"inline-block",borderRadius:"4px",backgroundColor:"#eee",fontSize:"0.9em",boxShadow:b&&M?"0 0 0 2px #B4D5FF":"none"};return D.children[0].bold&&(W.fontWeight="bold"),D.children[0].italic&&(W.fontStyle="italic"),(0,d.jsx)("span",u()(u()({},s),{},{className:"m-2",contentEditable:!1,"data-cy":"mention-".concat(D.character.replace(" ","-")),style:W,children:m?(0,d.jsxs)(p.Fragment,{children:["1",g,"/",D.character]}):(0,d.jsxs)(p.Fragment,{children:[(0,d.jsx)("span",{children:D.character}),g]})}))},oe=[{type:"paragraph",children:[{text:""}]}];y.Z=l}}]);
