"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[316],{11475:function(We,se,a){a.d(se,{Z:function(){return D}});var S=a(1413),g=a(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},_=o,m=a(91146),y=function(N,J){return g.createElement(m.Z,(0,S.Z)((0,S.Z)({},N),{},{ref:J,icon:_}))},ae=g.forwardRef(y),D=ae},35790:function(We,se,a){var S=a(1413),g=a(67294),o=a(19369),_=a(91146),m=function(D,Z){return g.createElement(_.Z,(0,S.Z)((0,S.Z)({},D),{},{ref:Z,icon:o.Z}))},y=g.forwardRef(m);se.Z=y},11551:function(We,se,a){a.d(se,{CU:function(){return c},CY:function(){return Pe},Ce:function(){return q},Dh:function(){return H},Iw:function(){return re},LH:function(){return Se},My:function(){return he},Nj:function(){return A},XB:function(){return fe},ek:function(){return ve},pC:function(){return pe},zl:function(){return k}});var S=a(15009),g=a.n(S),o=a(99289),_=a.n(o),m=a(47520),y="/v1/agent/agent_info/",ae="/v1/vector/dataset_list/2",D="/v1/agent/agent_base_update/",Z="/v1/agent/agent_abilities_set/",N="/v1/agent/agent_output_set/",J="/v1/agent/agent_engine_set/",ge="/v1/agent/agent_publish/",E="/v1/agent/agent_run",ve=function(){var f=_()(g()().mark(function e(r,l){var s;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.ZP)("".concat(y).concat(r),{method:"GET",data:{publish_status:l=="true"?1:0}});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},e)}));return function(r,l){return f.apply(this,arguments)}}(),k=function(){var f=_()(g()().mark(function e(){var r;return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,m.ZP)("".concat(ae),{method:"GET"});case 2:return r=s.sent,s.abrupt("return",r);case 4:case"end":return s.stop()}},e)}));return function(){return f.apply(this,arguments)}}(),fe=function(){var f=_()(g()().mark(function e(r){var l;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(D).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return l=i.sent,i.abrupt("return",l);case 4:case"end":return i.stop()}},e)}));return function(r){return f.apply(this,arguments)}}(),re=function(){var f=_()(g()().mark(function e(r){var l;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(Z).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return l=i.sent,i.abrupt("return",l);case 4:case"end":return i.stop()}},e)}));return function(r){return f.apply(this,arguments)}}(),q=function(){var f=_()(g()().mark(function e(r){var l;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(N).concat(r.agent_id),{method:"PUT",data:r});case 2:return l=i.sent,i.abrupt("return",l);case 4:case"end":return i.stop()}},e)}));return function(r){return f.apply(this,arguments)}}(),Y=null,H=function(){var f=_()(g()().mark(function e(r){var l;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(ge).concat(r),{method:"PUT"});case 2:return l=i.sent,i.abrupt("return",l);case 4:case"end":return i.stop()}},e)}));return function(r){return f.apply(this,arguments)}}(),Se=function(){var f=_()(g()().mark(function e(r){var l;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(E),{method:"POST",data:r});case 2:return l=i.sent,i.abrupt("return",l);case 4:case"end":return i.stop()}},e)}));return function(r){return f.apply(this,arguments)}}(),Pe=function(){var f=_()(g()().mark(function e(r){var l;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("/v1/agent/agent_chat_message",{method:"POST",data:r});case 2:return l=i.sent,i.abrupt("return",l);case 4:case"end":return i.stop()}},e)}));return function(r){return f.apply(this,arguments)}}(),c=function(){var f=_()(g()().mark(function e(r,l){var s;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_message_list"),{method:"GET",data:{page:l,page_size:20}});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},e)}));return function(r,l){return f.apply(this,arguments)}}(),he=function(){var f=_()(g()().mark(function e(r,l){var s;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_log_list"),{method:"GET",data:l});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},e)}));return function(r,l){return f.apply(this,arguments)}}(),pe=function(){var f=_()(g()().mark(function e(r,l){var s;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_log_details"),{method:"GET",data:{app_run_id:l}});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},e)}));return function(r,l){return f.apply(this,arguments)}}(),A=function(){var f=_()(g()().mark(function e(r,l){var s;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/clear_agent_chat_memory"),{method:"POST",data:{message_id:l,agent_id:r}});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},e)}));return function(r,l){return f.apply(this,arguments)}}()},88864:function(We,se,a){var S=a(32332),g=a(67294),o=a(85893);se.Z=(0,g.memo)(function(_){var m=_.agentList,y=_.size,ae=y===void 0?"sm":y,D=_.rounded,Z=D===void 0?!1:D,N=m==null?void 0:m.map(function(ve){return ve.avatar?ve.avatar:(0,S.s9)("single",ve.icon)}),J={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},ge={sm:"w-[47%] h-[47%]",md:"w-[47%] h-[47%]",lg:"w-[47%] h-[47%]"},E=function(){var k=(N==null?void 0:N.length)||0;if(!k||!N)return(0,o.jsx)("div",{className:"bg-gray-200 w-full h-full ".concat(Z?"rounded-full":"")});if(k===1)return(0,o.jsx)("div",{className:"w-full h-full overflow-hidden ".concat(Z?"rounded-full":""),children:(0,o.jsx)("img",{src:N[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})});if(k===2)return(0,o.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,o.jsx)("div",{className:"w-1/2 h-full pr-[2%]",children:(0,o.jsx)("img",{src:N[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(Z?"rounded-l-full":"")})}),(0,o.jsx)("div",{className:"w-1/2 h-full pl-[2%]",children:(0,o.jsx)("img",{src:N[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(Z?"rounded-r-full":"")})})]});if(k===3)return(0,o.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,o.jsx)("div",{className:"w-1/2 h-full pr-[2%] flex items-center justify-center",children:(0,o.jsx)("img",{src:N[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(Z?"rounded-l-full":"")})}),(0,o.jsxs)("div",{className:"w-1/2 h-full pl-[2%] flex flex-col",children:[(0,o.jsx)("div",{className:"h-1/2 pb-[2%]",children:(0,o.jsx)("img",{src:N[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(Z?"rounded-tr-full":"")})}),(0,o.jsx)("div",{className:"h-1/2 pt-[2%]",children:(0,o.jsx)("img",{src:N[2],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(Z?"rounded-br-full":"")})})]})]});if(k===4)return(0,o.jsx)("div",{className:"w-full h-full flex flex-wrap",children:N.slice(0,4).map(function(Y,H){return(0,o.jsx)("div",{className:"".concat(ge[ae]," p-[3%] ").concat(H===0?"pl-0 pt-0":H===1?"pr-0 pt-0":H===2?"pl-0 pb-0":"pr-0 pb-0"),children:(0,o.jsx)("img",{src:Y,alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(Z?H===0?"rounded-tl-full":H===1?"rounded-tr-full":H===2?"rounded-bl-full":"rounded-br-full":"")})},H)})});for(var fe=N.slice(0,9),re=[],q=0;q<Math.min(9,fe.length);q++)re.push((0,o.jsx)("div",{className:"w-1/3 h-1/3",style:{padding:"1.5%"},children:(0,o.jsx)("img",{src:fe[q],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})},q));return(0,o.jsx)("div",{className:"w-full h-full flex flex-wrap",children:re})};return(0,o.jsx)("div",{className:"".concat(J[ae]," overflow-hidden bg-white ").concat(Z?"rounded-full":""),children:E()})})},85422:function(We,se,a){var S=a(15009),g=a.n(S),o=a(99289),_=a.n(o),m=a(5574),y=a.n(m),ae=a(11551),D=a(39873),Z=a(28508),N=a(29933),J=a(35312),ge=a(3917),E=a(66309),ve=a(28036),k=a(71471),fe=a(74330),re=a(26412),q=a(12845),Y=a(67294),H=a(22683),Se=a(97807),Pe=a(92485),c=a(85893);se.Z=(0,Y.memo)(function(he){var pe,A,f,e=he.data,r=he.onClose,l=(0,J.useIntl)(),s=(0,Y.useState)(500),i=y()(s,2),u=i[0],t=i[1],ee=(0,ge.Z)(function(){var ie=_()(g()().mark(function F(xe,je){var $e;return g()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,(0,ae.pC)(xe,je);case 2:return $e=we.sent,we.abrupt("return",$e.data);case 4:case"end":return we.stop()}},F)}));return function(F,xe){return ie.apply(this,arguments)}}(),{manual:!0}),b=ee.data,de=ee.loading,ue=ee.run;(0,Y.useEffect)(function(){e!=null&&e.app_id&&e!==null&&e!==void 0&&e.app_run_id&&ue(e.app_id,e.app_run_id)},[e==null?void 0:e.app_id,e==null?void 0:e.app_run_id,ue]);var $=function(F){var xe={1:{color:"processing",text:l.formatMessage({id:"workflow.running"})},2:{color:"success",text:l.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:l.formatMessage({id:"workflow.runF"})}},je=xe[F]||{color:"default",text:"Unknown"};return(0,c.jsx)(E.Z,{color:je.color,children:je.text})},_e=function(F){t(F)};return(0,c.jsx)(D.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:u,onChange:_e,children:(0,c.jsx)(N.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,c.jsx)(ve.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:r,icon:(0,c.jsx)(Z.Z,{})}),title:(0,c.jsx)(k.Z.Title,{level:5,children:l.formatMessage({id:"agent.log.detail"})}),loading:de,children:(0,c.jsx)("div",{className:"space-y-6",children:de?(0,c.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,c.jsx)(fe.Z,{})}):b?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(re.Z,{column:1,bordered:!0,size:"small",children:[(0,c.jsx)(re.Z.Item,{label:l.formatMessage({id:"workflow.user"}),children:b.nickname}),(0,c.jsx)(re.Z.Item,{label:l.formatMessage({id:"workflow.status"}),children:$(b.status)}),(0,c.jsx)(re.Z.Item,{label:l.formatMessage({id:"workflow.created_time"}),children:b.created_time}),(0,c.jsxs)(re.Z.Item,{label:l.formatMessage({id:"workflow.elapsed_time"}),children:[b.elapsed_time,"s"]}),(0,c.jsx)(re.Z.Item,{label:"Tokens",children:b.total_tokens})]}),(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)(k.Z.Title,{level:5,children:l.formatMessage({id:"agent.log.output"})}),b.outputs?(0,c.jsx)("div",{children:(b==null||(pe=b.outputs)===null||pe===void 0?void 0:pe.type)=="json"?(0,c.jsx)("div",{className:"h-80",children:(0,c.jsx)(Pe.Z,{language:"python3",value:JSON.parse((A=b.outputs)===null||A===void 0?void 0:A.value)||"{}",readOnly:!0,isJSONStringifyBeauty:!0,onChange:function(){},title:"JSON"})}):(0,c.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,c.jsx)(H.U,{rehypePlugins:[Se.Z],children:((f=b.outputs)===null||f===void 0?void 0:f.value)||""})})}):b.error?(0,c.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,c.jsx)("div",{className:"text-red-500 font-medium mb-2",children:l.formatMessage({id:"agent.log.error"})}),(0,c.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:b.error})]}):(0,c.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,c.jsx)("div",{className:"text-sm text-gray-500",children:l.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(b==null?void 0:b.prompt_data)&&b.prompt_data.length>0&&(0,c.jsxs)("div",{className:"mt-4",children:[(0,c.jsx)(k.Z.Title,{level:5,children:l.formatMessage({id:"agent.log.conversation"})}),(0,c.jsx)(q.Z,{className:"mt-2",children:b.prompt_data.map(function(ie,F){var xe=y()(ie,2),je=xe[0],$e=xe[1];return(0,c.jsx)(q.Z.Item,{color:je==="human"?"blue":"green",children:(0,c.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,c.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:je}),(0,c.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:$e.value})]})},F)})})]})]}):null})})})})},39873:function(We,se,a){var S=a(5574),g=a.n(S),o=a(42881),_=a(67294),m=a(85893),y=function(D){var Z=D.children,N=D.className,J=N===void 0?"":N,ge=D.dragDirection,E=ge===void 0?"left":ge,ve=D.minWidth,k=ve===void 0?415:ve,fe=D.maxWidth,re=fe===void 0?820:fe,q=D.minHeight,Y=q===void 0?200:q,H=D.maxHeight,Se=H===void 0?800:H,Pe=D.defaultWidth,c=Pe===void 0?415:Pe,he=D.defaultHeight,pe=he===void 0?300:he,A=D.onChange,f=(0,_.useState)(c),e=g()(f,2),r=e[0],l=e[1],s=(0,_.useState)(pe),i=g()(s,2),u=i[0],t=i[1],ee=(0,_.useCallback)(function($,_e){l($),_e&&t(_e),A==null||A($,_e)},[l,t,A]),b=(0,o.W)({direction:["left","right"].includes(E)?"horizontal":"vertical",triggerDirection:E,minWidth:k,maxWidth:re,minHeight:Y,maxHeight:Se,onResize:ee}),de=b.triggerRef,ue=b.containerRef;return(0,m.jsxs)("div",{ref:ue,style:{width:["left","right"].includes(E)?"".concat(r,"px"):void 0,height:["top","bottom"].includes(E)?"".concat(u,"px"):void 0},className:"flex flex-col p-4 shadow-lg rounded-md border border-blue-300 bg-white z-10 wrapPanel ".concat(J),children:[E==="left"&&(0,m.jsx)("div",{ref:de,className:"absolute top-1/2 -translate-y-1/2 -left-2 w-3 h-6 cursor-col-resize resize-x",children:(0,m.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),E==="right"&&(0,m.jsx)("div",{ref:de,className:"absolute top-1/2 -translate-y-1/2 -right-2 flex justify-end w-3 h-6 cursor-col-resize resize-x",children:(0,m.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),E==="top"&&(0,m.jsx)("div",{ref:de,className:"absolute left-1/2 -translate-x-1/2 -top-2 h-3 w-6 cursor-row-resize resize-y",children:(0,m.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),E==="bottom"&&(0,m.jsx)("div",{ref:de,className:"absolute left-1/2 -translate-x-1/2 -bottom-2 h-3 w-6 cursor-row-resize resize-y",children:(0,m.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),Z]})};se.Z=(0,_.memo)(y)},57329:function(We,se,a){a.r(se),a.d(se,{default:function(){return ot}});var S=a(56264),g=a(64456),o=a(67294),_=a(15009),m=a.n(_),y=a(99289),ae=a.n(y),D=a(97857),Z=a.n(D),N=a(5574),J=a.n(N),ge=a(42237),E=a(29608),ve=a(35790),k=a(11475),fe=a(8751),re=a(97578),q=a(77598),Y=a(97582),H=a(22638),Se=a(3917),Pe=function(K,w){var R;w===void 0&&(w={});var C=w.defaultPageSize,h=C===void 0?10:C,W=w.defaultCurrent,O=W===void 0?1:W,M=(0,Y._T)(w,["defaultPageSize","defaultCurrent"]),Q=(0,Se.Z)(K,(0,Y.pi)({defaultParams:[{current:O,pageSize:h}],refreshDepsAction:function(){Ne(1)}},M)),P=Q.params[0]||{},B=P.current,I=B===void 0?1:B,L=P.pageSize,ce=L===void 0?h:L,G=((R=Q.data)===null||R===void 0?void 0:R.total)||0,Ze=(0,o.useMemo)(function(){return Math.ceil(G/ce)},[ce,G]),ne=function(oe,T){var be=oe<=0?1:oe,te=T<=0?1:T,Oe=Math.ceil(G/te);be>Oe&&(be=Math.max(1,Oe));var Ie=(0,Y.CR)(Q.params||[]),le=Ie[0],Ee=le===void 0?{}:le,n=Ie.slice(1);Q.run.apply(Q,(0,Y.ev)([(0,Y.pi)((0,Y.pi)({},Ee),{current:be,pageSize:te})],(0,Y.CR)(n),!1))},Ne=function(oe){ne(oe,ce)},V=function(oe){ne(I,oe)};return(0,Y.pi)((0,Y.pi)({},Q),{pagination:{current:I,pageSize:ce,total:G,totalPage:Ze,onChange:(0,H.Z)(ne),changeCurrent:(0,H.Z)(Ne),changePageSize:(0,H.Z)(V)}})},c=Pe,he=a(78697),pe=a(32332),A=a(35312),f=a(74330),e=a(83062),r=a(32983),l=a(88864),s=a(29432),i=a(72252),u=a(71471),t=a(85893),ee=function(w){var R=w.iconSrc,C=w.titleText,h=w.pagination,W=w.showTotal,O=W===void 0?!0:W,M=w.titleAfter,Q=M===void 0?null:M,P=(0,A.useIntl)();return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("img",{src:R,alt:""}),(0,t.jsx)("div",{children:C}),(0,t.jsx)("div",{children:(0,t.jsx)(i.Z,{size:"small",simple:!0,showTotal:function(I,L){return O?"".concat(P.formatMessage({id:"app.workflow.title.1"})).concat(L[0],"-").concat(L[1]).concat(P.formatMessage({id:"app.workflow.title.2"})," / ").concat(P.formatMessage({id:"app.workflow.title.3"})).concat(I," ").concat(P.formatMessage({id:"app.workflow.title.2"})):null},current:h.current,pageSize:h.pageSize,onShowSizeChange:null,total:h.total,onChange:h.onChange})}),Q]})},b=function(w){var R,C=w.item;console.log(C);var h=(0,A.useIntl)(),W="/icons/creation/",O="",M="";switch(C.type){case 1:M=h.formatMessage({id:"app.itemHeader.agent"}),O="Agent";break;case 2:M=h.formatMessage({id:"app.itemHeader.chatRoom"}),O="ChatRoom";break;case 3:M=h.formatMessage({id:"app.itemHeader.workFlow"}),O="WorkFlow";break;default:break}return W+=s.Le[O],(0,t.jsxs)("div",{className:"flex gap-5 shrink-0",children:[(0,t.jsx)("div",{className:"shrink-0",children:((R=C.agents_data)===null||R===void 0?void 0:R.length)>0?(0,t.jsx)(l.Z,{agentList:C.agents_data,size:"sm"}):(0,t.jsx)(he.Z,{Image:C.type==2?"/icons/chat_room.svg":(0,pe.s9)("single",C.icon),avatar:C.avatar,icon:"".concat(W,".svg")})}),(0,t.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,t.jsx)("div",{className:"text-sm text-[#213044]",children:(0,t.jsx)(u.Z.Paragraph,{ellipsis:{rows:2,tooltip:C.name},className:"!mb-0",children:C.name})}),(0,t.jsx)("div",{className:"text-xs text-[#999999]",children:M})]})]})},de=function(){var K,w,R=(0,E.Z)(function(x){return x.setDealtWithData}),C=(0,E.Z)(function(x){return x.prevConfirmDealtWith}),h=(0,E.Z)(function(x){return x.dealtWithData}),W=(0,E.Z)(function(x){return x.setRunPanelLogRecord}),O=(0,E.Z)(function(x){return x.submitPromptId}),M=(0,A.useIntl)(),Q=(0,o.useRef)(null),P=(0,o.useState)(null),B=J()(P,2),I=B[0],L=B[1],ce=(0,re.Z)("pageNumber"),G=J()(ce,2),Ze=G[0],ne=G[1],Ne=function(X){console.log(X),R(X)};(0,q.Z)(function(){var x=le.list.map(function(X){return X.exec_id==C.exec_id&&(X.need_human_confirm=0),X});Ee(Z()(Z()({},le),{},{list:x}))},[C]);var V=function(){var x=ae()(m()().mark(function X(ze){var Be,p,v;return m()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Be=ze.current,p=ze.pageSize,U.next=3,(0,ge.VE)({current:Be,pageSize:p});case 3:return v=U.sent,U.abrupt("return",{list:v.data.list,success:!0,total:v.data.total_count});case 5:case"end":return U.stop()}},X)}));return function(ze){return x.apply(this,arguments)}}(),oe=c(V,{defaultPageSize:10}),T=oe.data,be=oe.loading,te=oe.pagination,Oe=(0,o.useState)(T),Ie=J()(Oe,2),le=Ie[0],Ee=Ie[1];(0,o.useEffect)(function(){Ee(T)},[T]),(0,q.Z)(function(){Q.current&&Q.current.reload()},[O]);var n=(0,o.useCallback)(function(x){var X=x.item;return(0,t.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:X.app_name})," ",(0,t.jsx)(ve.Z,{}),(0,t.jsx)("span",{className:X.need_human_confirm==1?"text-[#1B64F3]":"text-[#808183]",children:X.node_name})]}),(0,t.jsx)("div",{className:"text-[#999999] text-xs truncate",children:X.app_run_name})]})},[le]);return(0,t.jsx)(f.Z,{spinning:be,children:(0,t.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,t.jsx)(ee,{iconSrc:"/icons/back_log.svg",titleText:M.formatMessage({id:"app.workflow.backlogs.title"}),pagination:te}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-2.5 mt-4 overflow-y-auto h-full",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[le==null||(K=le.list)===null||K===void 0?void 0:K.map(function(x,X){return x.type=3,(0,t.jsxs)("div",{onClick:function(){console.log(x),x.need_human_confirm&&(R(x),L(x),W(!1))},className:"flex items-center gap-5 cursor-pointer duration-200 rounded-lg  p-2.5 hover:bg-[#fafafa]",children:[(0,t.jsx)(he.Z,{Image:(0,pe.s9)("single",x.icon),avatar:x.avatar}),(0,t.jsx)(n,{item:x}),(0,t.jsx)("div",{children:x.need_human_confirm?(0,t.jsx)(e.Z,{title:M.formatMessage({id:"workflow.needHumanConfirm"}),children:(0,t.jsx)(k.Z,{className:"text-[#1B64F3]"})}):(0,t.jsx)(e.Z,{title:M.formatMessage({id:"workflow.noHumanConfirm"}),children:(0,t.jsx)(fe.Z,{className:"text-[#52C41C]"})})})]},x.exec_id)}),!be&&(le==null||(w=le.list)===null||w===void 0?void 0:w.length)===0&&(0,t.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,t.jsx)(r.Z,{image:"/images/empty.svg",description:M.formatMessage({id:"app.workflow.backlogs.empty"})})})]})]})})},ue=a(29933),$=a(4393),_e=$.Z.Meta,ie=function(){var K,w,R=(0,A.useIntl)(),C=function(B){console.log(B);var I=B.app_id||B.apps_id;switch(B.type){case 1:A.history.push("/Agents?app_id=".concat(I));break;case 2:A.history.push("/chat_room/".concat(B.chatroom_id));break;case 3:A.history.push("/workspace/workflow?app_id=".concat(I));break;default:break}},h=function(){var P=ae()(m()().mark(function B(I){var L,ce,G;return m()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return L=I.current,ce=I.pageSize,ne.next=3,(0,ge.vu)({current:L,pageSize:ce});case 3:return G=ne.sent,ne.abrupt("return",{list:G.data.list,success:!0,total:G.data.total_count});case 5:case"end":return ne.stop()}},B)}));return function(I){return P.apply(this,arguments)}}(),W=c(h,{defaultPageSize:8}),O=W.data,M=W.loading,Q=W.pagination;return console.log(M),(0,t.jsxs)("div",{className:"flex-grow-0",children:[(0,t.jsx)(ee,{iconSrc:"/icons/recently_active.svg",titleText:R.formatMessage({id:"app.workflow.ra.title"}),pagination:Q}),(0,t.jsx)("div",{className:"grid grid-cols-4  gap-4 mt-4",children:O==null||(K=O.list)===null||K===void 0?void 0:K.map(function(P,B){var I=P.type==3?P.process_name:P.last_agent_name;return(0,t.jsx)(ue.Z,{className:"h-[160px] cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",title:(0,t.jsx)(b,{item:P}),onClick:function(){return C(P)},bodyStyle:{padding:"15px 20px"},children:(0,t.jsx)(u.Z.Paragraph,{ellipsis:{rows:2,tooltip:I},children:I})},P.app_id)})}),!(O!=null&&(w=O.list)!==null&&w!==void 0&&w.length)&&(0,t.jsxs)("div",{className:"h-[400px] w-full flex items-center justify-center",children:[!M&&(0,t.jsx)(r.Z,{imageStyle:{display:"flex",justifyContent:"center"},image:"/images/empty.svg",description:R.formatMessage({id:"app.workflow.ra.empty"})}),(0,t.jsx)(f.Z,{spinning:M})]})]})},F=a(37369),xe=a(43722),je=a(39873),$e=a(28508),Ae=a(66309),we=a(28036),Te=a(26412),z=a(22683),De=a(97807),Le=a(86),He=a(38027),Ke=(0,o.memo)(function(K){var w,R,C,h,W,O,M,Q,P,B,I,L,ce,G,Ze,ne,Ne,V=K.data,oe=K.onClose,T=(0,A.useIntl)(),be=(0,o.useState)(500),te=J()(be,2),Oe=te[0],Ie=te[1],le=(0,E.Z)(function(p){return p.setRunPanelLogRecord}),Ee=(0,Se.Z)(function(){var p=ae()(m()().mark(function v(j,U){var d;return m()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,xe.Gh)({chatroom_id:j,app_run_id:U});case 2:return d=me.sent,me.abrupt("return",d.data);case 4:case"end":return me.stop()}},v)}));return function(v,j){return p.apply(this,arguments)}}(),{manual:!0}),n=Ee.data,x=Ee.loading,X=Ee.run;(0,o.useEffect)(function(){V!=null&&V.chatroom_id&&V!==null&&V!==void 0&&V.app_run_id&&X(V.chatroom_id,V.app_run_id)},[V==null?void 0:V.chatroom_id,V==null?void 0:V.app_run_id,X]);var ze=function(v){var j={1:{color:"processing",text:T.formatMessage({id:"workflow.running"})},2:{color:"success",text:T.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:T.formatMessage({id:"workflow.runF"})}},U=j[v]||{color:"default",text:"Unknown"};return(0,t.jsx)(Ae.Z,{color:U.color,children:U.text})},Be=function(v){Ie(v)};return(0,t.jsx)(je.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:Oe,onChange:Be,children:(0,t.jsx)(ue.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,t.jsx)(we.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:oe,icon:(0,t.jsx)($e.Z,{})}),title:(0,t.jsx)(u.Z.Title,{level:5,children:T.formatMessage({id:"app.chatroom.log.title"})}),loading:x,children:(0,t.jsx)("div",{className:"space-y-6",children:x?(0,t.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,t.jsx)(f.Z,{})}):n!=null&&n.source_run?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Te.Z,{column:1,bordered:!0,size:"small",children:[(0,t.jsx)(Te.Z.Item,{label:T.formatMessage({id:"app.chatroom.log.name"}),children:n.source_run.name}),(0,t.jsx)(Te.Z.Item,{label:T.formatMessage({id:"workflow.created_time"}),children:n.source_run.created_time}),(0,t.jsx)(Te.Z.Item,{label:T.formatMessage({id:"workflow.finished_time"}),children:n.source_run.finished_time}),(0,t.jsxs)(Te.Z.Item,{label:T.formatMessage({id:"workflow.elapsed_time"}),children:[n.source_run.elapsed_time,"s"]}),(0,t.jsx)(Te.Z.Item,{label:"Tokens",children:n.source_run.total_tokens})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(u.Z.Title,{level:5,children:"\u8BA8\u8BBA\u603B\u7ED3"}),(0,t.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:n.source_run.created_time}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"p-[12px]  leading-[22px] bg-gray-50 rounded mt-2",children:(0,t.jsx)(z.U,{rehypePlugins:[De.Z],children:n==null||(w=n.source_run)===null||w===void 0?void 0:w.summary})})})]}),n!=null&&n.source_corrections&&(n==null?void 0:n.source_corrections.length)>0?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[T.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),n==null?void 0:n.source_corrections.map(function(p,v){return(0,t.jsx)("div",{className:"mb-[16px] last-of-type:mb-0",children:(0,t.jsx)("div",{className:"rounded-[4px]  ".concat((n==null?void 0:n.source_corrections.length)-1!=v?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,t.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,t.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[T.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",p.user_prompt]}),(0,t.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[T.formatMessage({id:"app.summaryhistory.time"}),": ",p.created_time]}),(0,t.jsx)(z.U,{rehypePlugins:[De.Z],children:p==null?void 0:p.corrected_summary})]})})},p.created_time)})]}):(0,t.jsx)(t.Fragment,{}),n!=null&&n.target_run?(0,t.jsxs)("div",{className:"py-[12px]",children:[(0,t.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[T.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,t.jsx)("span",{className:"font-[500] ",children:n!=null&&(R=n.target_run)!==null&&R!==void 0&&R.agent_id?"agent":"workflow"}),(0,t.jsx)("span",{className:"px-[6px]",children:":"}),(0,t.jsx)("span",{children:n==null||(C=n.target_run)===null||C===void 0||(C=C.app)===null||C===void 0?void 0:C.name})]})}),(0,t.jsx)("div",{children:n!=null&&(h=n.target_run)!==null&&h!==void 0&&(h=h.inputs)!==null&&h!==void 0&&h.properties?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[T.formatMessage({id:"app.summaryhistory.input"}),":"]}),(0,He.vw)(n==null||(W=n.target_run)===null||W===void 0||(W=W.inputs)===null||W===void 0?void 0:W.properties).map(function(p){return(0,t.jsxs)("div",{className:"pb-[10px]",children:[(0,t.jsx)("div",{className:"pb-[8px] font-[600]",children:p.display_name||p.name}),(0,t.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:p.value})]})})]}):(0,t.jsx)(t.Fragment,{})}),(0,t.jsx)("div",{children:n!=null&&(O=n.target_run)!==null&&O!==void 0&&O.raw_user_prompt?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[T.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,t.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:n==null||(M=n.target_run)===null||M===void 0?void 0:M.raw_user_prompt})]}):(0,t.jsx)(t.Fragment,{})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[T.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,t.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(n==null||(Q=n.target_run)===null||Q===void 0?void 0:Q.agent_id)!=0?(0,t.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,t.jsx)(z.U,{rehypePlugins:[De.Z],children:n==null||(P=n.target_run)===null||P===void 0||(P=P.outputs)===null||P===void 0?void 0:P.value})}):(0,t.jsx)(Le.Z,{status:n==null||(B=n.target_run)===null||B===void 0?void 0:B.status,icon:n==null||(I=n.target_run)===null||I===void 0?void 0:I.icon,title:n==null||(L=n.target_run)===null||L===void 0?void 0:L.name,textDetails:(0,t.jsx)(He.p1,{progressObj:{created_time:n==null||(ce=n.target_run)===null||ce===void 0?void 0:ce.created_time,elapsed_time:n==null||(G=n.target_run)===null||G===void 0?void 0:G.elapsed_time,app_name:n==null||(Ze=n.target_run)===null||Ze===void 0?void 0:Ze.app.name,status:n==null||(ne=n.target_run)===null||ne===void 0?void 0:ne.status}}),handleClick:function(){var v,j,U,d,Ce,me,Me,Re,ye,Ue;le({app_id:n==null||(v=n.target_run)===null||v===void 0||(v=v.app)===null||v===void 0?void 0:v.id,app_name:n==null||(j=n.target_run)===null||j===void 0||(j=j.app)===null||j===void 0?void 0:j.name,icon:n==null||(U=n.target_run)===null||U===void 0?void 0:U.icon,workflow_id:n==null||(d=n.target_run)===null||d===void 0?void 0:d.workflow_id,type:2,app_run_id:n==null||(Ce=n.target_run)===null||Ce===void 0?void 0:Ce.id,run_name:n==null||(me=n.target_run)===null||me===void 0?void 0:me.name,status:n==null||(Me=n.target_run)===null||Me===void 0?void 0:Me.status,created_time:n==null||(Re=n.target_run)===null||Re===void 0?void 0:Re.created_time,elapsed_time:n==null||(ye=n.target_run)===null||ye===void 0?void 0:ye.elapsed_time,completed_progress:"".concat(n==null||(Ue=n.target_run)===null||Ue===void 0?void 0:Ue.percentage,"%")})},progress:n==null||(Ne=n.target_run)===null||Ne===void 0?void 0:Ne.percentage})})]})]}):(0,t.jsx)(t.Fragment,{})]}):null})})})}),Ge=a(85422),Fe=a(1413),Xe=a(99011),Je=a(91146),Ye=function(w,R){return o.createElement(Je.Z,(0,Fe.Z)((0,Fe.Z)({},w),{},{ref:R,icon:Xe.Z}))},Qe=o.forwardRef(Ye),ke=Qe,qe=a(88284),et=a(28058),tt=a(2068),at=a(44720),rt=a(38703),nt=a(55241),lt=a(34041),st=(0,o.memo)(function(){var K,w,R=(0,E.Z)(function(p){return p.setDealtWithData}),C=(0,E.Z)(function(p){return p.setRunPanelLogRecord}),h=(0,A.useIntl)(),W=(0,o.useState)(0),O=J()(W,2),M=O[0],Q=O[1],P=function(v){var j=v.text;switch(j){case 1:return(0,t.jsx)(ke,{className:"text-blue-500"});case 2:return(0,t.jsx)(qe.Z,{className:"text-green-500"});case 3:return(0,t.jsx)(et.Z,{className:"text-red-500"})}return(0,t.jsx)("span",{children:j})},B=function(){var p=ae()(m()().mark(function v(j){var U,d,Ce,me,Me;return m()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return U=j.current,d=j.pageSize,Ce=j.showStatus,me=Ce===void 0?0:Ce,ye.next=3,(0,ge.PE)({current:U,pageSize:d,showStatus:me});case 3:return Me=ye.sent,ye.abrupt("return",{list:Me.data.list,success:!0,total:Me.data.total_count});case 5:case"end":return ye.stop()}},v)}));return function(j){return p.apply(this,arguments)}}(),I=c(function(p){var v=p.current,j=p.pageSize;return B({current:v,pageSize:j,showStatus:M})},{defaultPageSize:10,refreshDeps:[M]}),L=I.data,ce=I.loading,G=I.pagination,Ze=I.run,ne=(0,o.useState)(!1),Ne=J()(ne,2),V=Ne[0],oe=Ne[1],T=(0,o.useState)(null),be=J()(T,2),te=be[0],Oe=be[1],Ie=(0,o.useState)(!1),le=J()(Ie,2),Ee=le[0],n=le[1],x=function(){oe(!1),n(!1)},X=function(v){switch(v.show_status){case 1:Oe(v),oe(!1),n(!0);break;case 2:Oe(v),n(!1),oe(!0);break;case 3:C(v),R(null);break;default:break}},ze=function(v){var j=v.type;switch(j){case 1:return(0,t.jsx)(Ae.Z,{color:"blue",children:h.formatMessage({id:"app.workflow.log.type.roundtable"})});case 2:return(0,t.jsx)(Ae.Z,{color:"green",children:h.formatMessage({id:"app.workflow.log.type.agent"})});case 3:return(0,t.jsx)(Ae.Z,{color:"purple",children:h.formatMessage({id:"app.workflow.log.type.workflow"})})}},Be=(0,o.memo)(function(p){var v,j,U,d=p.item,Ce=d.status==1?"#1B64F3":d.status==2?"#22C55F":"#F04444",me=d.status==1?"#f9fafe":d.status==2?"#f6fcf3":"#fafafa",Me=(0,o.useRef)(null),Re=(0,at.Z)(Me),ye=function(){return d.show_status==1?d.chat_room_name:d.show_status==2?d.app_runs_name:d.show_status==3?d.associated_chat_room_name!=""?h.formatMessage({id:"app.workflow.log.roundtable.guidance"},{name:d.associated_chat_room_name}):d.app_runs_name:d.apps_name},Ue=function(){return d.show_status==1&&d.apps_name?h.formatMessage({id:"app.workflow.log.guidance.execution"},{type:d.model==1?h.formatMessage({id:"app.workflow.log.type.agent.simple"}):h.formatMessage({id:"app.workflow.log.type.workflow.simple"}),name:d.apps_name}):d.apps_name};return(0,t.jsxs)("div",{onClick:function(){X(d)},ref:Me,className:"flex relative rounded truncate gap-5  items-center shrink-0 cursor-pointer duration-200  box-border py-2.5 pr-5 ",children:[(0,t.jsx)("div",{style:{backgroundColor:Re?me:"",width:Re?"".concat(d.completed_steps/d.total_steps*100,"%"):"0%",transition:"0.5s"},className:"w-full h-full absolute left-0 duration-500"}),(0,t.jsx)("div",{style:{backgroundColor:Ce},className:"w-[4px] h-full z-10 mr-[10px] absolute"}),(0,t.jsx)("div",{className:"ml-5",children:((v=d.agents_data)===null||v===void 0?void 0:v.length)>0?(0,t.jsx)("div",{className:"ml-2",children:(0,t.jsx)(l.Z,{agentList:d.agents_data,size:"sm"})}):(0,t.jsx)(he.Z,{Image:(0,pe.s9)("single",d.icon),avatar:d.avatar})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1  z-10",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("span",{children:[(0,t.jsx)(ze,{type:d.show_status}),(0,t.jsx)(ye,{})]})}),(0,t.jsx)("div",{className:"text-[#999999] text-xs truncate  max-w-7/8",children:(0,t.jsxs)("div",{className:"flex items-center truncate",children:[(0,t.jsxs)("span",{children:[" ",d.created_time," "]}),(0,t.jsx)("span",{style:{maxWidth:"calc(100% - 200px)"},className:"truncate ml-2 ",children:(0,t.jsx)(Ue,{})}),(d.show_status==3||d.show_status==2)&&(0,t.jsxs)("span",{className:"inline-flex items-center ml-2 gap-2",children:[(0,t.jsx)("span",{style:{backgroundColor:Ce},className:"inline-block w-1 h-1 rounded-sm"}),(j=d.elapsed_time)===null||j===void 0?void 0:j.toFixed(6),"S"]})]})})]}),d.total_steps!=d.completed_steps&&(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(rt.Z,{type:"circle",size:30,percent:parseInt(d.completed_steps/d.total_steps*100)})}),d.show_status==3&&(d==null||(U=d.file_list)===null||U===void 0?void 0:U.length)>0&&(0,t.jsx)("div",{className:"flex items-center justify-center z-20",children:(0,t.jsx)(nt.Z,{content:(0,t.jsx)(F.Z,{files:d==null?void 0:d.file_list}),placement:"leftTop",title:h.formatMessage({id:"app.workflow.log.output.files"}),children:(0,t.jsx)(tt.Z,{className:"text-[22px] text-green-600"})})})]},d.app_run_id)});return(0,t.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,t.jsx)(ee,{iconSrc:"/icons/workflows.svg",titleText:h.formatMessage({id:"app.workflow.log.title"}),pagination:G,showTotal:!1,titleAfter:(0,t.jsx)("div",{className:"flex-1 flex justify-end",children:(0,t.jsx)(lt.Z,{defaultValue:0,className:"w-full max-w-[120px]",allowClear:!0,style:{maxWidth:"120px"},onChange:function(v){var j;Q(v),(j=G.onChange)===null||j===void 0||j.call(G,1,G.pageSize)},size:"small",options:[{label:h.formatMessage({id:"app.workflow.log.filter.all"}),value:0},{label:h.formatMessage({id:"app.workflow.log.filter.roundtable"}),value:1},{label:h.formatMessage({id:"app.workflow.log.filter.agent"}),value:2},{label:h.formatMessage({id:"app.workflow.log.filter.workflow"}),value:3}]})})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 h-full mt-4 overflow-y-auto box-border relative flex flex-col gap-5",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[L==null||(K=L.list)===null||K===void 0?void 0:K.map(function(p,v){return(0,t.jsx)(Be,{item:p})}),!ce&&(L==null||(w=L.list)===null||w===void 0?void 0:w.length)===0&&(0,t.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,t.jsx)(r.Z,{image:"/images/empty.svg",description:h.formatMessage({id:"app.workflow.log.empty"})})})]}),V&&(te==null?void 0:te.app_run_id)&&(0,t.jsx)(Ge.Z,{data:te,onClose:x}),Ee&&(0,t.jsx)(Ke,{data:{chatroom_id:te==null?void 0:te.chatroom_id,app_run_id:te==null?void 0:te.app_run_id},onClose:x})]})}),it=function(){return(0,t.jsxs)("div",{style:{height:"calc(100vh - 56px)"},className:"w-full p-[30px] flex flex-col gap-6 overflow-x-auto box-border",children:[(0,t.jsx)(ie,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6 flex-1",children:[(0,t.jsx)(de,{}),(0,t.jsx)(st,{})]}),(0,t.jsx)(S.$_,{}),(0,t.jsx)(g.Z,{})]})},ot=it},12845:function(We,se,a){a.d(se,{Z:function(){return f}});var S=a(67294),g=a(93967),o=a.n(g),_=a(53124),m=a(35792),y=a(861),ae=a(14747),D=a(83559),Z=a(83262);const N=e=>{const{componentCls:r,calc:l}=e;return{[r]:Object.assign(Object.assign({},(0,ae.Wf)(e)),{margin:0,padding:0,listStyle:"none",[`${r}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:l(l(e.itemHeadSize).sub(e.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,y.unit)(e.itemHeadSize)})`,borderInlineStart:`${(0,y.unit)(e.tailWidth)} ${e.lineType} ${e.tailColor}`},"&-pending":{[`${r}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${r}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${(0,y.unit)(e.dotBorderWidth)} ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:l(e.itemHeadSize).div(2).equal(),insetInlineStart:l(e.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:l(l(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.lineWidth).equal(),marginInlineStart:l(e.margin).add(e.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${r}-item-tail`]:{display:"none"},[`> ${r}-item-content`]:{minHeight:l(e.controlHeightLG).mul(1.2).equal()}}},[`&${r}-alternate,
        &${r}-right,
        &${r}-label`]:{[`${r}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:l(e.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:l(e.tailWidth).div(2).equal()}},"&-left":{[`${r}-item-content`]:{insetInlineStart:`calc(50% - ${(0,y.unit)(e.marginXXS)})`,width:`calc(50% - ${(0,y.unit)(e.marginSM)})`,textAlign:"start"}},"&-right":{[`${r}-item-content`]:{width:`calc(50% - ${(0,y.unit)(e.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${r}-right`]:{[`${r}-item-right`]:{[`${r}-item-tail,
            ${r}-item-head,
            ${r}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,y.unit)(l(l(e.itemHeadSize).add(e.tailWidth)).div(2).equal())})`},[`${r}-item-content`]:{width:`calc(100% - ${(0,y.unit)(l(e.itemHeadSize).add(e.marginXS).equal())})`}}},[`&${r}-pending
        ${r}-item-last
        ${r}-item-tail`]:{display:"block",height:`calc(100% - ${(0,y.unit)(e.margin)})`,borderInlineStart:`${(0,y.unit)(e.tailWidth)} dotted ${e.tailColor}`},[`&${r}-reverse
        ${r}-item-last
        ${r}-item-tail`]:{display:"none"},[`&${r}-reverse ${r}-item-pending`]:{[`${r}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${(0,y.unit)(e.margin)})`,borderInlineStart:`${(0,y.unit)(e.tailWidth)} dotted ${e.tailColor}`},[`${r}-item-content`]:{minHeight:l(e.controlHeightLG).mul(1.2).equal()}},[`&${r}-label`]:{[`${r}-item-label`]:{position:"absolute",insetBlockStart:l(l(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.tailWidth).equal(),width:`calc(50% - ${(0,y.unit)(e.marginSM)})`,textAlign:"end"},[`${r}-item-right`]:{[`${r}-item-label`]:{insetInlineStart:`calc(50% + ${(0,y.unit)(e.marginSM)})`,width:`calc(50% - ${(0,y.unit)(e.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${r}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},J=e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3,dotBg:e.colorBgContainer,itemPaddingBottom:e.padding*1.25});var ge=(0,D.I$)("Timeline",e=>{const r=(0,Z.mergeToken)(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2});return[N(r)]},J),E=function(e,r){var l={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(l[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(l[s[i]]=e[s[i]]);return l},k=e=>{var{prefixCls:r,className:l,color:s="blue",dot:i,pending:u=!1,position:t,label:ee,children:b}=e,de=E(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:ue}=S.useContext(_.E_),$=ue("timeline",r),_e=o()(`${$}-item`,{[`${$}-item-pending`]:u},l),ie=/blue|red|green|gray/.test(s||"")?void 0:s,F=o()(`${$}-item-head`,{[`${$}-item-head-custom`]:!!i,[`${$}-item-head-${s}`]:!ie});return S.createElement("li",Object.assign({},de,{className:_e}),ee&&S.createElement("div",{className:`${$}-item-label`},ee),S.createElement("div",{className:`${$}-item-tail`}),S.createElement("div",{className:F,style:{borderColor:ie,color:ie}},i),S.createElement("div",{className:`${$}-item-content`},b))},fe=a(74902),re=a(19267),q=function(e,r){var l={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(l[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(l[s[i]]=e[s[i]]);return l},H=e=>{var{prefixCls:r,className:l,pending:s=!1,children:i,items:u,rootClassName:t,reverse:ee=!1,direction:b,hashId:de,pendingDot:ue,mode:$=""}=e,_e=q(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const ie=(z,De)=>$==="alternate"?z==="right"?`${r}-item-right`:z==="left"?`${r}-item-left`:De%2===0?`${r}-item-left`:`${r}-item-right`:$==="left"?`${r}-item-left`:$==="right"?`${r}-item-right`:z==="right"?`${r}-item-right`:"",F=(0,fe.Z)(u||[]),xe=typeof s=="boolean"?null:s;s&&F.push({pending:!!s,dot:ue||S.createElement(re.Z,null),children:xe}),ee&&F.reverse();const je=F.length,$e=`${r}-item-last`,Ae=F.filter(z=>!!z).map((z,De)=>{var Le;const He=De===je-2?$e:"",Ke=De===je-1?$e:"",{className:Ge}=z,Fe=q(z,["className"]);return S.createElement(k,Object.assign({},Fe,{className:o()([Ge,!ee&&s?He:Ke,ie((Le=z==null?void 0:z.position)!==null&&Le!==void 0?Le:"",De)]),key:(z==null?void 0:z.key)||De}))}),we=F.some(z=>!!(z!=null&&z.label)),Te=o()(r,{[`${r}-pending`]:!!s,[`${r}-reverse`]:!!ee,[`${r}-${$}`]:!!$&&!we,[`${r}-label`]:we,[`${r}-rtl`]:b==="rtl"},l,t,de);return S.createElement("ul",Object.assign({},_e,{className:Te}),Ae)},Se=a(50344);function Pe(e,r){return e&&Array.isArray(e)?e:(0,Se.Z)(r).map(l=>{var s,i;return Object.assign({children:(i=(s=l==null?void 0:l.props)===null||s===void 0?void 0:s.children)!==null&&i!==void 0?i:""},l.props)})}var c=Pe,he=function(e,r){var l={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(l[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(l[s[i]]=e[s[i]]);return l};const pe=e=>{const{getPrefixCls:r,direction:l,timeline:s}=S.useContext(_.E_),{prefixCls:i,children:u,items:t,className:ee,style:b}=e,de=he(e,["prefixCls","children","items","className","style"]),ue=r("timeline",i),$=(0,m.Z)(ue),[_e,ie,F]=ge(ue,$),xe=c(t,u);return _e(S.createElement(H,Object.assign({},de,{className:o()(s==null?void 0:s.className,ee,F,$),style:Object.assign(Object.assign({},s==null?void 0:s.style),b),prefixCls:ue,direction:l,items:xe,hashId:ie})))};pe.Item=k;var A=pe,f=A}}]);
