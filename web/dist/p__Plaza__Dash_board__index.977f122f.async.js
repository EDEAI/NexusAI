"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{11475:function(re,B,t){t.d(B,{Z:function(){return L}});var w=t(1413),r=t(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},x=U,E=t(91146),f=function(y,$){return r.createElement(E.Z,(0,w.Z)((0,w.Z)({},y),{},{ref:$,icon:x}))},F=r.forwardRef(f),L=F},35790:function(re,B,t){var w=t(1413),r=t(67294),U=t(19369),x=t(91146),E=function(L,P){return r.createElement(x.Z,(0,w.Z)((0,w.Z)({},L),{},{ref:P,icon:U.Z}))},f=r.forwardRef(E);B.Z=f},83510:function(re,B,t){t.d(B,{LK:function(){return S},bs:function(){return H},go:function(){return X},uy:function(){return O}});var w=t(15009),r=t.n(w),U=t(99289),x=t.n(U),E=t(47520),f="/v1/apps/apps_list",F="/v1/agent/agent_delete/",L="/v1/workflow/workflow_app_delete/",P="/v1/vector/delete_dataset/",y="/v1/skill/delete_skill_by_app_id/",$="/v1/apps/apps_create",G="/v1/apps/app_update/",X=function(){var W=x()(r()().mark(function c(D){var I;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.ZP)("".concat(f),{method:"GET",data:D});case 2:return I=a.sent,a.abrupt("return",I);case 4:case"end":return a.stop()}},c)}));return function(D){return W.apply(this,arguments)}}(),S=function(){var W=x()(r()().mark(function c(D){var I;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(D),a.next=3,D.mode;case 3:if(a.t0=a.sent,a.t0!=1){a.next=8;break}a.t1=(0,E.ZP)("".concat(F).concat(D.app_id),{method:"DELETE"}),a.next=9;break;case 8:a.t1=D.mode==2?(0,E.ZP)("".concat(L).concat(D.app_id),{method:"DELETE"}):D.mode==3?(0,E.ZP)("".concat(P).concat(D.app_id),{method:"DELETE"}):(0,E.ZP)("".concat(y).concat(D.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return I=a.t1,a.abrupt("return",I);case 11:case"end":return a.stop()}},c)}));return function(D){return W.apply(this,arguments)}}(),O=function(){var W=x()(r()().mark(function c(D){var I;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.ZP)("".concat($),{method:"POST",data:D});case 2:return I=a.sent,a.abrupt("return",I);case 4:case"end":return a.stop()}},c)}));return function(D){return W.apply(this,arguments)}}(),H=function(){var W=x()(r()().mark(function c(D){var I;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.ZP)("".concat(G).concat(D.app_id),{method:"PUT",data:D});case 2:return I=a.sent,a.abrupt("return",I);case 4:case"end":return a.stop()}},c)}));return function(D){return W.apply(this,arguments)}}()},43722:function(re,B,t){t.d(B,{Gn:function(){return P},KH:function(){return H},Rp:function(){return W},cH:function(){return $},dB:function(){return y},j2:function(){return G},r5:function(){return S},rw:function(){return f},sI:function(){return X},sT:function(){return O},sh:function(){return D},vu:function(){return L},xM:function(){return I},xT:function(){return c}});var w=t(15009),r=t.n(w),U=t(99289),x=t.n(U),E=t(47520),f=function(){var o=x()(r()().mark(function a(){var s;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,E.ZP)("/v1/index/",{method:"GET"});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),F=null,L=function(){var o=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/",{method:"GET",data:s});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return o.apply(this,arguments)}}(),P=function(){var o=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/".concat(s.id),{method:"DELETE"});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return o.apply(this,arguments)}}(),y=function(){var o=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/",{method:"POST",data:s});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return o.apply(this,arguments)}}(),$=function(){var o=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/".concat(s.id,"/details"),{method:"GET"});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return o.apply(this,arguments)}}(),G=function(){var o=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:s.id}});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return o.apply(this,arguments)}}(),X=function(){var o=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.ZP)("/v1/chatroom/".concat(i,"/update_chatroom"),{method:"POST",data:s});case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(s,i){return o.apply(this,arguments)}}(),S=function(){var o=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.ZP)("/v1/chatroom/".concat(i,"/smart_selection"),{method:"POST",data:s});case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(s,i){return o.apply(this,arguments)}}(),O=function(){var o=x()(r()().mark(function a(s,i,u){var n;return r()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,E.ZP)("/v1/chatroom/".concat(i,"/agents/").concat(u,"/setting"),{method:"PUT",data:s});case 2:return n=V.sent,V.abrupt("return",n);case 4:case"end":return V.stop()}},a)}));return function(s,i,u){return o.apply(this,arguments)}}(),H=function(){var o=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chatroom_message"),{method:"GET",data:i});case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(s,i){return o.apply(this,arguments)}}(),W=function(){var o=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chat_history_message_summary"),{method:"POST",data:i});case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(s,i){return o.apply(this,arguments)}}(),c=function(){var o=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chat_history_summary"),{method:"POST",data:i});case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(s,i){return o.apply(this,arguments)}}(),D=function(){var o=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:s});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return o.apply(this,arguments)}}(),I=function(){var o=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chat_single_message_generation"),{method:"POST",data:i});case 2:return u=l.sent,l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(s,i){return o.apply(this,arguments)}}()},86:function(re,B,t){var w=t(5574),r=t.n(w),U=t(32332),x=t(38703),E=t(67294),f=t(85893),F=function(P){var y=P.subtitle,$=P.handleClick,G=P.lineClamp,X=G===void 0?2:G,S=P.textDetails,O=P.title,H=P.icon,W=P.iconType,c=W===void 0?"":W,D=P.operation,I=D===void 0?"":D,o=P.progress,a=P.status,s=P.backlogTips,i=(0,E.useState)(0),u=r()(i,2),n=u[0],l=u[1],V=function(){l(o)},j=function(){l(0)},e=function(ee){return"rounded-[4px] border-l-[4px] ".concat(ee==1?"border-[#1B64F3]":ee==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,f.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(a!==void 0?e(a):"graphicbox"),onClick:$,onMouseEnter:function(){o!=null&&V()},onMouseLeave:function(){o!=null&&j()},children:[a!==void 0&&(0,f.jsx)("div",{style:{width:"".concat(n,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(a==1?"bg-[#1B64F3]/[.03]":a==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,f.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,f.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,f.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,f.jsx)("img",{src:(0,U.s9)("single",H),className:"w-[22px] h-[22px]"}),c&&(0,f.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,f.jsx)("img",{src:"/icons/".concat(c,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,f.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,f.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,f.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,f.jsx)("span",{className:"truncate",children:O}),(0,f.jsx)("span",{className:"flex items-center flex-1",children:y})]}),(0,f.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:S})]})}),s||(0,f.jsx)(f.Fragment,{}),I&&(0,f.jsx)("div",{className:"flex items-center w-[24px]",children:(0,f.jsx)("span",{className:"operation",children:I})}),o!=null&&(0,f.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,f.jsx)(x.Z,{type:"circle",percent:o,size:29})})]})]})};B.Z=F},21446:function(re,B,t){var w=t(15009),r=t.n(w),U=t(97857),x=t.n(U),E=t(99289),f=t.n(E),F=t(5574),L=t.n(F),P=t(83510),y=t(29608),$=t(32332),G=t(35312),X=t(26915),S=t(28036),O=t(85576),H=t(67294),W=t(94840),c=t(85893),D=X.Z.TextArea,I=function(a){var s=a.setIsModalOpen,i=a.isModalOpen,u=a.transformData,n=a.CreationType,l=a.setcreationType,V=a.ModalType,j=(0,G.useIntl)(),e=(0,H.useState)(""),J=L()(e,2),ee=J[0],me=J[1],pe=(0,H.useState)(""),oe=L()(pe,2),fe=oe[0],le=oe[1],_e=(0,H.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),ue=L()(_e,2),ce=ue[0],ve=ue[1],he=(0,y.Z)(),xe=he.setAgentCreateOpen;(0,H.useEffect)(function(){},[]);var ge=function(d){me(d.target.value)},Z=function(d){le(d.target.value)},h=function(){var M=f()(r()().mark(function d(){var m,A;return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(m={name:ee,mode:n.apps_mode,description:fe,icon:JSON.stringify(ce.id),icon_background:""},n.apps_mode!=2){R.next=8;break}return R.next=4,(0,P.uy)(m);case 4:A=R.sent,A.code===0&&(s(!1),v(A.data.app_id)),R.next=10;break;case 8:(0,$.Go)("SET",x()(x()({},m),{},{type:!1})),v();case 10:case"end":return R.stop()}},d)}));return function(){return M.apply(this,arguments)}}(),p=function(d){u.map(function(m){m.name==d.name&&(console.log(m,"item"),l(m))})},v=function(d){d?G.history.push("/".concat(n.path,"?app_id=").concat(d,"&&type=false")):G.history.push("/".concat(n.path,"?type=false"))},g=function(){return(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("div",{className:"flex items-center",children:n.apps_mode==1&&(0,c.jsx)(S.ZP,{onClick:function(){xe(!0),s(!1)},children:j.formatMessage({id:"agent.creation.button.ai"})})}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)(S.ZP,{onClick:function(){return s(!1)},children:j.formatMessage({id:"agent.modal.button.cancel"})}),(0,c.jsx)(S.ZP,{disabled:ee==="",onClick:h,type:"primary",children:j.formatMessage({id:"creation"})})]})]})};return(0,c.jsx)(O.Z,{title:j.formatMessage({id:"creation.addnewapp"}),open:i,okText:j.formatMessage({id:"creation"}),onOk:h,onCancel:function(){return s(!1)},okButtonProps:{disabled:ee===""},width:820,footer:(0,c.jsx)(g,{}),children:(0,c.jsxs)("div",{className:"pb-1",children:[V?(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:j.formatMessage({id:"creation.appntype"})}),(0,c.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:u&&u.map(function(M){return(0,c.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:M.apps_mode===n.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){p(M)},children:[(0,c.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,c.jsx)("img",{className:"w-6 h-6",src:M.signicon,alt:""})}),(0,c.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:M.name})]})})})]}):null,(0,c.jsxs)("div",{className:" mt-5",children:[(0,c.jsxs)("div",{className:"mb-5",children:[(0,c.jsxs)("p",{className:"text-xs",children:[n.apps_mode==1?j.formatMessage({id:"creation.agent"}):n.apps_mode==2?j.formatMessage({id:"creation.workflow"}):n.apps_mode==3?j.formatMessage({id:"creation.repository"}):j.formatMessage({id:"creation.skill"}),j.formatMessage({id:"creation.appiconname"})]}),(0,c.jsxs)("div",{className:"flex items-center justify-around",children:[(0,c.jsx)(W.Z,{CardData:ce,setCardData:ve}),(0,c.jsx)(X.Z,{showCount:!0,maxLength:20,placeholder:j.formatMessage({id:"creation.placeholder.appname"}),onChange:ge})]})]}),(0,c.jsxs)("div",{className:"mb-5 text-xs",children:[(0,c.jsxs)("p",{children:[n.apps_mode==1?j.formatMessage({id:"creation.agent"}):n.apps_mode==2?j.formatMessage({id:"creation.workflow"}):n.apps_mode==3?j.formatMessage({id:"creation.repository"}):j.formatMessage({id:"creation.skill"}),j.formatMessage({id:"creation.appdescribe"})]}),(0,c.jsx)(D,{showCount:!0,maxLength:100,rows:4,placeholder:j.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Z})]})]})]})})};B.Z=I},94840:function(re,B,t){var w=t(97857),r=t.n(w),U=t(32332),x=t(55241),E=t(67294),f=t(85893),F=function(P){var y=P.CardData,$=P.setCardData;(0,E.useEffect)(function(){},[]);var G=function(){return(0,f.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,U.s9)("all").map(function(O){return(0,f.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){X(O)},children:(0,f.jsx)("img",{src:O.image,alt:""})})})})},X=function(O){$(r()(r()({},y),{},{icon:O.image,id:O.id}))};return(0,f.jsx)(x.Z,{content:G,trigger:"click",placement:"bottomLeft",children:(0,f.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,f.jsx)("img",{src:(0,U.s9)("single",y.id?y.id:y.icon),alt:""})})})};B.Z=F},91166:function(re,B,t){t.r(B);var w=t(97857),r=t.n(w),U=t(15009),x=t.n(U),E=t(99289),f=t.n(E),F=t(19632),L=t.n(F),P=t(5574),y=t.n(P),$=t(43722),G=t(21446),X=t(99702),S=t(86),O=t(29608),H=t(55927),W=t(32332),c=t(35790),D=t(11475),I=t(8751),o=t(35312),a=t(28036),s=t(32983),i=t(71230),u=t(15746),n=t(83062),l=t(66309),V=t(74330),j=t(67294),e=t(85893),J=function(h){var p,v=h.subtitle,g="pl-[10px] text-[#1B64F3] text-[12px] ".concat(v.need_human_confirm==1||v.need_human_confirm==null?"text-[#1B64F3]":"text-[#808183] ");return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:v.app_name}),(0,e.jsx)(c.Z,{}),(0,e.jsx)("span",{className:g,children:v.node_name||((p=v.node_exec_data)===null||p===void 0?void 0:p.node_name)})]})})},ee=function(h){var p=h.progressObj,v=function(){return parseFloat(p.elapsed_time).toFixed(6)},g=function(d){var m=new Date(d),A=m.getFullYear(),z=(m.getMonth()+1).toString().padStart(2,"0"),R=m.getDate().toString().padStart(2,"0"),se=m.getHours().toString().padStart(2,"0"),Y=m.getMinutes().toString().padStart(2,"0"),ae=m.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(A,".").concat(z,".").concat(R," ").concat(se,":").concat(Y,":").concat(ae)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:p.created_time&&g(p.created_time)}),(0,e.jsx)("div",{className:"truncate",children:p.apps_name||p.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(p.status==1?"bg-blue-600":p.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[v(),"S"]})]})]})})},me=function(h){var p=h.operationObj,v=(0,O.Z)(function(d){return d.setRunId}),g=(0,O.Z)(function(d){return d.setRunPanelLogRecord}),M=(0,O.Z)(function(d){return d.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(a.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:p.publish_status==0,icon:(0,e.jsx)("img",{src:p.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"}),onClick:function(m){return m.stopPropagation(),g(!1),M(!1),v(p.app_id),!1}})})})},pe=function(h){var p=h.bindAdd,v=h.type;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:p,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:v})]})})})},oe=function(h){var p=(0,o.useIntl)();return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(s.Z,{image:s.Z.PRESENTED_IMAGE_SIMPLE,description:p.formatMessage({id:"app.dashboard.None"})})})},fe=function(h){var p=h.data,v=(0,o.useIntl)(),g=p.map(function(_){return{app_name:_.app_name,app_run_id:_.app_run_id,icon:_.icon,icon_background:_.icon_background,need_human_confirm:_.need_human_confirm,node_exec_data:{node_name:_.node_name,node_id:_.node_execution_id,node_exec_id:_.exec_id},exec_id:_.exec_id,run_name:_.app_run_name,mode:_.mode}}),M=(0,j.useState)(g),d=y()(M,2),m=d[0],A=d[1],z=(0,O.Z)(function(_){return _.setRunPanelLogRecord}),R=(0,O.Z)(function(_){return _.setDealtWithData}),se=(0,O.Z)(function(_){return _.setRunId}),Y=(0,O.Z)(function(_){return _.submitPromptId}),ae=function(C,k){var T=new Set,ne=[].concat(L()(k.reverse()),L()(C)),K=ne.filter(function(N){var Q,ie,de=((Q=N.node_exec_data)===null||Q===void 0?void 0:Q.node_exec_id)||N.exec_id;if(!N.exec_id&&(ie=N.node_exec_data)!==null&&ie!==void 0&&ie.node_exec_id){var q;N.exec_id=(q=N.node_exec_data)===null||q===void 0?void 0:q.node_exec_id}return!de||T.has(de)?!1:(T.add(de),!0)});return K.reverse()},te=function(){var _=f()(x()().mark(function C(){var k,T;return x()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:T=b==null||(k=b.filter(function(N){return N.type=="workflow_need_human_confirm"}).map(function(N){var Q=N.data;return Q}))===null||k===void 0?void 0:k.filter(function(N){return N.type!==1}),T&&T.length&&A(ae(T,m));case 2:case"end":return K.stop()}},C)}));return function(){return _.apply(this,arguments)}}(),b=(0,H.Z)(function(_){return _.flowMessage});return(0,j.useEffect)(function(){te()},[b]),(0,j.useEffect)(function(){Y&&A(function(_){return _.map(function(C){return r()(r()({},C),{},{need_human_confirm:C.node_exec_data.node_exec_id==Y?0:C.need_human_confirm})})})},[Y]),(0,e.jsx)(e.Fragment,{children:m&&m.length?(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,0],children:m.map(function(_,C){var k;return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(S.Z,{icon:_.icon,title:((k=_.node_exec_data)===null||k===void 0?void 0:k.node_name)&&(0,e.jsx)(J,{subtitle:_}),textDetails:_.run_name,handleClick:function(){_.need_human_confirm!=0&&(R(_),se(null),z(!1))},backlogTips:(0,e.jsx)("div",{className:"flex items-center",children:_.need_human_confirm==1||_.need_human_confirm==null?(0,e.jsx)(n.Z,{title:v.formatMessage({id:"app.workflow.needHumanConfirm"}),children:(0,e.jsx)(D.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(n.Z,{title:v.formatMessage({id:"app.workflow.noHumanConfirm"}),children:(0,e.jsx)(I.Z,{className:"text-[#808183]"})})})})},C)})})}):(0,e.jsx)(oe,{})})},le=function(h){var p=h.data,v=h.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,0],children:p.map(function(g,M){return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(S.Z,{icon:g.icon,title:g.name,textDetails:g.description,handleClick:function(){v=="my_agent"?o.history.push("/Agents?app_id=".concat(g.app_id,"&type=false")):o.history.push("/ReadOnlyAgent?app_id=".concat(g.app_id,"&type=true"))}})},M)})})})},_e=function(h){var p=h.data,v=h.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,0],children:p.map(function(g,M){return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(S.Z,{icon:g.icon,title:g.name,textDetails:g.description,handleClick:function(){v=="my_workflow"?o.history.push("/workspace/workflow?app_id=".concat(g.app_id,"&type=false")):o.history.push("/workspace/workflow?app_id=".concat(g.app_id,"&type=true"))},operation:(0,e.jsx)(me,{operationObj:g}),iconType:v=="my_workflow"?g.publish_status==0?"play_disable_icon":"play_icon":""})},M)})})})},ue=function(h){var p=h.data,v=(0,o.useIntl)(),g=(0,O.Z)(function(b){return b.setRunPanelLogRecord}),M=(0,O.Z)(function(b){return b.setDealtWithData}),d=(0,O.Z)(function(b){return b.setRunId}),m=(0,j.useState)(p),A=y()(m,2),z=A[0],R=A[1],se=function(_,C){var k=new Map;return C.reverse().forEach(function(T){k.set(T.app_run_id,T)}),_.forEach(function(T){k.set(T.app_run_id,T)}),Array.from(k.values()).reverse()},Y=function(_){return _.completed_progress?parseInt(_.completed_progress.slice(0,-1)):!1},ae=function(){var b=f()(x()().mark(function _(){var C;return x()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:C=te==null?void 0:te.filter(function(ne){return ne.type=="workflow_run_progress"}).map(function(ne){var K=ne.data;return K}),C&&C.length&&R(se(C,z));case 2:case"end":return T.stop()}},_)}));return function(){return b.apply(this,arguments)}}(),te=(0,H.Z)(function(b){return b.flowMessage});return(0,j.useEffect)(function(){ae()},[te]),(0,e.jsx)(e.Fragment,{children:z&&z.length?(0,e.jsx)("div",{className:"cardbox px-[10px]",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,20],children:z.map(function(b,_){return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(S.Z,{status:b.status,icon:b.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:b.app_runs_name||b.run_name}),b.status==2?1:0,(b==null?void 0:b.need_human_confirm)==1||(b==null?void 0:b.status)==1?(0,e.jsx)(l.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:v.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)(ee,{progressObj:b}),handleClick:function(){g(b),d(null),M(!1)},progress:b.percentage||Y(b)})},_)})})}):(0,e.jsx)(oe,{})})},ce=function(h){var p=h.item,v=h.data,g=function(m,A){return m&&m.length?A:(0,e.jsx)(oe,{})},M={backlogs:function(m){return(0,e.jsx)(fe,{data:m.data})},my_agent:function(m){return g(v,(0,e.jsx)(le,{data:m.data,keyName:"my_agent"}))},my_workflow:function(m){return g(v,(0,e.jsx)(_e,{data:m.data,keyName:"my_workflow"}))},workflow_log:function(m){return(0,e.jsx)(ue,{data:m.data})},more_agent:function(m){return g(v,(0,e.jsx)(le,{data:m.data}))},more_workflow:function(m){return g(v,(0,e.jsx)(_e,{data:m.data}))}};return(0,e.jsx)(e.Fragment,{children:M[p.key]({data:v})})},ve=function(h){var p=h.item,v=(0,o.useIntl)(),g=function(){var d=p.key=="my_agent"||p.key=="more_agent"?1:2,m=p.key=="more_agent"||p.key=="more_workflow";(0,W.f1)("SET",d,m),o.history.push("/creation")};return(0,e.jsx)("div",{onClick:g,children:p.key!=="backlogs"&&p.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:v.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},he=function(h){var p=(0,o.useIntl)(),v=h.item,g=h.setIsModalOpen,M=h.setCreationType,d=function(){var z=v.key=="my_agent"?{name:"Agent",path:"Agents",apps_mode:1}:{name:"WorkFlow",path:"workspace/workflow",apps_mode:2};M(function(R){return r()(r()({},R),z)}),g(!0)},m=v.key=="my_agent"?p.formatMessage({id:"app.dashboard.title_button_1.1"}):v.isAdd?p.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[v.isAdd&&(0,e.jsx)(pe,{bindAdd:d,type:v.isAdd&&m}),(0,e.jsx)(ve,{item:v})]})},xe=function(){var h=(0,o.useIntl)(),p=[{title:h.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0},{title:h.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:h.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:h.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:h.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:h.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],v=(0,j.useState)(!1),g=y()(v,2),M=g[0],d=g[1],m=(0,j.useState)({}),A=y()(m,2),z=A[0],R=A[1],se=(0,j.useState)(!0),Y=y()(se,2),ae=Y[0],te=Y[1],b=(0,j.useState)({}),_=y()(b,2),C=_[0],k=_[1],T=(0,j.useRef)(!1),ne=function(){var K=f()(x()().mark(function N(){var Q,ie;return x()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,$.rw)();case 2:Q=q.sent,Q.code==0&&(ie=Q.data,k(ie),T.current=!0,te(!0));case 4:case"end":return q.stop()}},N)}));return function(){return K.apply(this,arguments)}}();return(0,j.useEffect)(function(){T.current||ne()},[]),(0,e.jsxs)(e.Fragment,{children:[ae&&p.map(function(K,N){return(0,e.jsx)(u.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:K.title}),(0,e.jsx)("span",{children:(0,e.jsx)(he,{item:K,setIsModalOpen:d,setCreationType:R})})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:C[K.key]?(0,e.jsx)(ce,{item:K,data:C[K.key]}):(0,e.jsx)(e.Fragment,{})})]})},N)}),!ae&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(V.Z,{size:"large"})}),(0,e.jsx)(G.Z,{setIsModalOpen:d,isModalOpen:M,ModalType:!1,CreationType:z})]})},ge=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"px-[30px] pb-[10px] flex flex-col pt-[30px]",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(i.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(xe,{})})})}),(0,e.jsx)(X.Z,{})]})};B.default=ge}}]);
