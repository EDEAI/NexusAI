"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{11475:function(ne,N,t){t.d(N,{Z:function(){return U}});var A=t(1413),r=t(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},x=B,E=t(91146),f=function(y,z){return r.createElement(E.Z,(0,A.Z)((0,A.Z)({},y),{},{ref:z,icon:x}))},$=r.forwardRef(f),U=$},35790:function(ne,N,t){var A=t(1413),r=t(67294),B=t(19369),x=t(91146),E=function(U,j){return r.createElement(x.Z,(0,A.Z)((0,A.Z)({},U),{},{ref:j,icon:B.Z}))},f=r.forwardRef(E);N.Z=f},83510:function(ne,N,t){t.d(N,{LK:function(){return L},bs:function(){return H},go:function(){return X},uy:function(){return M}});var A=t(15009),r=t.n(A),B=t(99289),x=t.n(B),E=t(47520),f="/v1/apps/apps_list",$="/v1/agent/agent_delete/",U="/v1/workflow/workflow_app_delete/",j="/v1/vector/delete_dataset/",y="/v1/skill/delete_skill_by_app_id/",z="/v1/apps/apps_create",G="/v1/apps/app_update/",X=function(){var S=x()(r()().mark(function d(b){var T;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.ZP)("".concat(f),{method:"GET",data:b});case 2:return T=a.sent,a.abrupt("return",T);case 4:case"end":return a.stop()}},d)}));return function(b){return S.apply(this,arguments)}}(),L=function(){var S=x()(r()().mark(function d(b){var T;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(b),a.next=3,b.mode;case 3:if(a.t0=a.sent,a.t0!=1){a.next=8;break}a.t1=(0,E.ZP)("".concat($).concat(b.app_id),{method:"DELETE"}),a.next=9;break;case 8:a.t1=b.mode==2?(0,E.ZP)("".concat(U).concat(b.app_id),{method:"DELETE"}):b.mode==3?(0,E.ZP)("".concat(j).concat(b.app_id),{method:"DELETE"}):(0,E.ZP)("".concat(y).concat(b.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return T=a.t1,a.abrupt("return",T);case 11:case"end":return a.stop()}},d)}));return function(b){return S.apply(this,arguments)}}(),M=function(){var S=x()(r()().mark(function d(b){var T;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.ZP)("".concat(z),{method:"POST",data:b});case 2:return T=a.sent,a.abrupt("return",T);case 4:case"end":return a.stop()}},d)}));return function(b){return S.apply(this,arguments)}}(),H=function(){var S=x()(r()().mark(function d(b){var T;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,E.ZP)("".concat(G).concat(b.app_id),{method:"PUT",data:b});case 2:return T=a.sent,a.abrupt("return",T);case 4:case"end":return a.stop()}},d)}));return function(b){return S.apply(this,arguments)}}()},43722:function(ne,N,t){t.d(N,{Gn:function(){return j},KH:function(){return H},Rp:function(){return S},cH:function(){return z},dB:function(){return y},j2:function(){return G},r5:function(){return L},rw:function(){return f},sI:function(){return X},sT:function(){return M},sh:function(){return b},vu:function(){return U},xM:function(){return T},xT:function(){return d}});var A=t(15009),r=t.n(A),B=t(99289),x=t.n(B),E=t(47520),f=function(){var l=x()(r()().mark(function a(){var s;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,E.ZP)("/v1/index/",{method:"GET"});case 2:return s=u.sent,u.abrupt("return",s);case 4:case"end":return u.stop()}},a)}));return function(){return l.apply(this,arguments)}}(),$=null,U=function(){var l=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/",{method:"GET",data:s});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return l.apply(this,arguments)}}(),j=function(){var l=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/".concat(s.id),{method:"DELETE"});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return l.apply(this,arguments)}}(),y=function(){var l=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/",{method:"POST",data:s});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return l.apply(this,arguments)}}(),z=function(){var l=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/".concat(s.id,"/details"),{method:"GET"});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return l.apply(this,arguments)}}(),G=function(){var l=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:s.id}});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return l.apply(this,arguments)}}(),X=function(){var l=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,E.ZP)("/v1/chatroom/".concat(i,"/update_chatroom"),{method:"POST",data:s});case 2:return u=_.sent,_.abrupt("return",u);case 4:case"end":return _.stop()}},a)}));return function(s,i){return l.apply(this,arguments)}}(),L=function(){var l=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,E.ZP)("/v1/chatroom/".concat(i,"/smart_selection"),{method:"POST",data:s});case 2:return u=_.sent,_.abrupt("return",u);case 4:case"end":return _.stop()}},a)}));return function(s,i){return l.apply(this,arguments)}}(),M=function(){var l=x()(r()().mark(function a(s,i,u){var n;return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,E.ZP)("/v1/chatroom/".concat(i,"/agents/").concat(u,"/setting"),{method:"PUT",data:s});case 2:return n=O.sent,O.abrupt("return",n);case 4:case"end":return O.stop()}},a)}));return function(s,i,u){return l.apply(this,arguments)}}(),H=function(){var l=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chatroom_message"),{method:"GET",data:i});case 2:return u=_.sent,_.abrupt("return",u);case 4:case"end":return _.stop()}},a)}));return function(s,i){return l.apply(this,arguments)}}(),S=function(){var l=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chat_history_message_summary"),{method:"POST",data:i});case 2:return u=_.sent,_.abrupt("return",u);case 4:case"end":return _.stop()}},a)}));return function(s,i){return l.apply(this,arguments)}}(),d=function(){var l=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chat_history_summary"),{method:"POST",data:i});case 2:return u=_.sent,_.abrupt("return",u);case 4:case"end":return _.stop()}},a)}));return function(s,i){return l.apply(this,arguments)}}(),b=function(){var l=x()(r()().mark(function a(s){var i;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:s});case 2:return i=n.sent,n.abrupt("return",i);case 4:case"end":return n.stop()}},a)}));return function(s){return l.apply(this,arguments)}}(),T=function(){var l=x()(r()().mark(function a(s,i){var u;return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,E.ZP)("/v1/chatroom/".concat(s,"/chat_single_message_generation"),{method:"POST",data:i});case 2:return u=_.sent,_.abrupt("return",u);case 4:case"end":return _.stop()}},a)}));return function(s,i){return l.apply(this,arguments)}}()},86:function(ne,N,t){var A=t(5574),r=t.n(A),B=t(32332),x=t(38703),E=t(67294),f=t(85893),$=function(j){var y=j.subtitle,z=j.handleClick,G=j.lineClamp,X=G===void 0?2:G,L=j.textDetails,M=j.title,H=j.icon,S=j.iconType,d=S===void 0?"":S,b=j.operation,T=b===void 0?"":b,l=j.progress,a=j.status,s=j.backlogTips,i=(0,E.useState)(0),u=r()(i,2),n=u[0],_=u[1],O=function(){_(l)},e=function(){_(0)},oe=function(te){return"rounded-[4px] border-l-[4px] ".concat(te==1?"border-[#1B64F3]":te==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,f.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(a!==void 0?oe(a):"graphicbox"),onClick:z,onMouseEnter:function(){l!=null&&O()},onMouseLeave:function(){l!=null&&e()},children:[a!==void 0&&(0,f.jsx)("div",{style:{width:"".concat(n,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(a==1?"bg-[#1B64F3]/[.03]":a==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,f.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,f.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,f.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,f.jsx)("img",{src:(0,B.s9)("single",H),className:"w-[22px] h-[22px]"}),d&&(0,f.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,f.jsx)("img",{src:"/icons/".concat(d,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,f.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,f.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,f.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,f.jsx)("span",{className:"truncate",children:M}),(0,f.jsx)("span",{className:"flex items-center flex-1",children:y})]}),(0,f.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:L})]})}),s||(0,f.jsx)(f.Fragment,{}),T&&(0,f.jsx)("div",{className:"flex items-center w-[24px]",children:(0,f.jsx)("span",{className:"operation",children:T})}),l!=null&&(0,f.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,f.jsx)(x.Z,{type:"circle",percent:l,size:29})})]})]})};N.Z=$},21446:function(ne,N,t){var A=t(15009),r=t.n(A),B=t(97857),x=t.n(B),E=t(99289),f=t.n(E),$=t(5574),U=t.n($),j=t(83510),y=t(29608),z=t(32332),G=t(35312),X=t(26915),L=t(28036),M=t(85576),H=t(67294),S=t(94840),d=t(85893),b=X.Z.TextArea,T=function(a){var s=a.setIsModalOpen,i=a.isModalOpen,u=a.transformData,n=a.CreationType,_=a.setcreationType,O=a.ModalType,e=(0,G.useIntl)(),oe=(0,H.useState)(""),q=U()(oe,2),te=q[0],pe=q[1],ie=(0,H.useState)(""),le=U()(ie,2),_e=le[0],ue=le[1],fe=(0,H.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),ce=U()(fe,2),de=ce[0],ve=ce[1],he=(0,y.Z)(),xe=he.setAgentCreateOpen;(0,H.useEffect)(function(){},[]);var Z=function(o){pe(o.target.value)},g=function(o){ue(o.target.value)},m=function(){var p=f()(r()().mark(function o(){var P,V;return r()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(P={name:te,mode:n.apps_mode,description:_e,icon:JSON.stringify(de.id),icon_background:""},n.apps_mode!=2){K.next=8;break}return K.next=4,(0,j.uy)(P);case 4:V=K.sent,V.code===0&&(s(!1),h(V.data.app_id)),K.next=10;break;case 8:(0,z.Go)("SET",x()(x()({},P),{},{type:!1})),h();case 10:case"end":return K.stop()}},o)}));return function(){return p.apply(this,arguments)}}(),v=function(o){u.map(function(P){P.name==o.name&&(console.log(P,"item"),_(P))})},h=function(o){o?G.history.push("/".concat(n.path,"?app_id=").concat(o,"&&type=false")):G.history.push("/".concat(n.path,"?type=false"))},I=function(){return(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("div",{className:"flex items-center",children:n.apps_mode==1&&(0,d.jsx)(L.ZP,{onClick:function(){xe(!0),s(!1)},children:e.formatMessage({id:"agent.creation.button.ai"})})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(L.ZP,{onClick:function(){return s(!1)},children:e.formatMessage({id:"agent.modal.button.cancel"})}),(0,d.jsx)(L.ZP,{disabled:te==="",onClick:m,type:"primary",children:e.formatMessage({id:"creation"})})]})]})};return(0,d.jsx)(M.Z,{title:e.formatMessage({id:"creation.addnewapp"}),open:i,okText:e.formatMessage({id:"creation"}),onOk:m,onCancel:function(){return s(!1)},okButtonProps:{disabled:te===""},width:820,footer:(0,d.jsx)(I,{}),children:(0,d.jsxs)("div",{className:"pb-1",children:[O?(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:e.formatMessage({id:"creation.appntype"})}),(0,d.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:u&&u.map(function(p){return(0,d.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:p.apps_mode===n.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){v(p)},children:[(0,d.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,d.jsx)("img",{className:"w-6 h-6",src:p.signicon,alt:""})}),(0,d.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:p.name})]})})})]}):null,(0,d.jsxs)("div",{className:" mt-5",children:[(0,d.jsxs)("div",{className:"mb-5",children:[(0,d.jsxs)("p",{className:"text-xs",children:[n.apps_mode==1?e.formatMessage({id:"creation.agent"}):n.apps_mode==2?e.formatMessage({id:"creation.workflow"}):n.apps_mode==3?e.formatMessage({id:"creation.repository"}):e.formatMessage({id:"creation.skill"}),e.formatMessage({id:"creation.appiconname"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-around",children:[(0,d.jsx)(S.Z,{CardData:de,setCardData:ve}),(0,d.jsx)(X.Z,{showCount:!0,maxLength:20,placeholder:e.formatMessage({id:"creation.placeholder.appname"}),onChange:Z})]})]}),(0,d.jsxs)("div",{className:"mb-5 text-xs",children:[(0,d.jsxs)("p",{children:[n.apps_mode==1?e.formatMessage({id:"creation.agent"}):n.apps_mode==2?e.formatMessage({id:"creation.workflow"}):n.apps_mode==3?e.formatMessage({id:"creation.repository"}):e.formatMessage({id:"creation.skill"}),e.formatMessage({id:"creation.appdescribe"})]}),(0,d.jsx)(b,{showCount:!0,maxLength:100,rows:4,placeholder:e.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:g})]})]})]})})};N.Z=T},94840:function(ne,N,t){var A=t(97857),r=t.n(A),B=t(32332),x=t(55241),E=t(67294),f=t(85893),$=function(j){var y=j.CardData,z=j.setCardData;(0,E.useEffect)(function(){},[]);var G=function(){return(0,f.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,B.s9)("all").map(function(M){return(0,f.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){X(M)},children:(0,f.jsx)("img",{src:M.image,alt:""})})})})},X=function(M){z(r()(r()({},y),{},{icon:M.image,id:M.id}))};return(0,f.jsx)(x.Z,{content:G,trigger:"click",placement:"bottomLeft",children:(0,f.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,f.jsx)("img",{src:(0,B.s9)("single",y.id?y.id:y.icon),alt:""})})})};N.Z=$},91166:function(ne,N,t){t.r(N);var A=t(97857),r=t.n(A),B=t(15009),x=t.n(B),E=t(99289),f=t.n(E),$=t(19632),U=t.n($),j=t(5574),y=t.n(j),z=t(43722),G=t(21446),X=t(99702),L=t(86),M=t(29608),H=t(55927),S=t(32332),d=t(35790),b=t(11475),T=t(8751),l=t(35312),a=t(28036),s=t(32983),i=t(71230),u=t(15746),n=t(83062),_=t(74330),O=t(67294),e=t(85893),oe=function(g){var m,v=g.subtitle,h="pl-[10px] text-[#1B64F3] text-[12px] ".concat(v.need_human_confirm==1||v.need_human_confirm==null?"text-[#1B64F3]":"text-[#808183] ");return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:v.app_name}),(0,e.jsx)(d.Z,{}),(0,e.jsx)("span",{className:h,children:v.node_name||((m=v.node_exec_data)===null||m===void 0?void 0:m.node_name)})]})})},q=function(g){var m=g.progressObj,v=function(){return parseFloat(m.elapsed_time).toFixed(6)},h=function(p){var o=new Date(p),P=o.getFullYear(),V=(o.getMonth()+1).toString().padStart(2,"0"),J=o.getDate().toString().padStart(2,"0"),K=o.getHours().toString().padStart(2,"0"),Q=o.getMinutes().toString().padStart(2,"0"),Y=o.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(P,".").concat(V,".").concat(J," ").concat(K,":").concat(Q,":").concat(Y)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:m.created_time&&h(m.created_time)}),(0,e.jsx)("div",{className:"truncate",children:m.apps_name||m.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(m.status==1?"bg-blue-600":m.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[v(),"S"]})]})]})})},te=function(g){var m=g.operationObj,v=(0,M.Z)(function(p){return p.setRunId}),h=(0,M.Z)(function(p){return p.setRunPanelLogRecord}),I=(0,M.Z)(function(p){return p.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(a.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:m.publish_status==0,icon:(0,e.jsx)("img",{src:m.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"}),onClick:function(o){return o.stopPropagation(),h(!1),I(!1),v(m.app_id),!1}})})})},pe=function(g){var m=g.bindAdd,v=g.type;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:m,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:v})]})})})},ie=function(g){var m=(0,l.useIntl)();return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(s.Z,{image:s.Z.PRESENTED_IMAGE_SIMPLE,description:m.formatMessage({id:"app.dashboard.None"})})})},le=function(g){var m=g.data,v=(0,l.useIntl)(),h=m.map(function(c){return{app_name:c.app_name,app_run_id:c.app_run_id,icon:c.icon,icon_background:c.icon_background,need_human_confirm:c.need_human_confirm,node_exec_data:{node_name:c.node_name,node_id:c.node_execution_id,node_exec_id:c.exec_id},exec_id:c.exec_id,run_name:c.app_run_name,mode:c.mode}}),I=(0,O.useState)(h),p=y()(I,2),o=p[0],P=p[1],V=(0,M.Z)(function(c){return c.setRunPanelLogRecord}),J=(0,M.Z)(function(c){return c.setDealtWithData}),K=(0,M.Z)(function(c){return c.setRunId}),Q=(0,M.Z)(function(c){return c.submitPromptId}),Y=function(w,C){var k=new Set,re=[].concat(U()(C.reverse()),U()(w)),F=re.filter(function(R){var ee,se,me=((ee=R.node_exec_data)===null||ee===void 0?void 0:ee.node_exec_id)||R.exec_id;if(!R.exec_id&&(se=R.node_exec_data)!==null&&se!==void 0&&se.node_exec_id){var ae;R.exec_id=(ae=R.node_exec_data)===null||ae===void 0?void 0:ae.node_exec_id}return!me||k.has(me)?!1:(k.add(me),!0)});return console.log(F),F.reverse()},D=function(){var c=f()(x()().mark(function w(){var C,k;return x()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:k=W==null||(C=W.filter(function(R){return R.type=="workflow_need_human_confirm"}).map(function(R){var ee=R.data;return ee}))===null||C===void 0?void 0:C.filter(function(R){return R.type!==1}),console.log(k),k&&k.length&&P(Y(k,o));case 3:case"end":return F.stop()}},w)}));return function(){return c.apply(this,arguments)}}(),W=(0,H.Z)(function(c){return c.flowMessage});return(0,O.useEffect)(function(){D()},[W]),(0,O.useEffect)(function(){Q&&P(function(c){return c.map(function(w){return r()(r()({},w),{},{need_human_confirm:w.node_exec_data.node_exec_id==Q?0:w.need_human_confirm})})})},[Q]),(0,e.jsx)(e.Fragment,{children:o&&o.length?(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,0],children:o.map(function(c,w){var C;return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(L.Z,{icon:c.icon,title:((C=c.node_exec_data)===null||C===void 0?void 0:C.node_name)&&(0,e.jsx)(oe,{subtitle:c}),textDetails:c.run_name,handleClick:function(){c.need_human_confirm!=0&&(J(c),K(null),V(!1))},backlogTips:(0,e.jsx)("div",{className:"flex items-center",children:c.need_human_confirm==1||c.need_human_confirm==null?(0,e.jsx)(n.Z,{title:v.formatMessage({id:"app.workflow.needHumanConfirm"}),children:(0,e.jsx)(b.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(n.Z,{title:v.formatMessage({id:"app.workflow.noHumanConfirm"}),children:(0,e.jsx)(T.Z,{className:"text-[#808183]"})})})})},w)})})}):(0,e.jsx)(ie,{})})},_e=function(g){var m=g.data,v=g.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,0],children:m.map(function(h,I){return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(L.Z,{icon:h.icon,title:h.name,textDetails:h.description,handleClick:function(){console.log(v),v=="my_agent"?l.history.push("/Agents?app_id=".concat(h.app_id,"&type=false")):l.history.push("/ReadOnlyAgent?app_id=".concat(h.app_id,"&type=true"))}})},I)})})})},ue=function(g){var m=g.data,v=g.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,0],children:m.map(function(h,I){return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(L.Z,{icon:h.icon,title:h.name,textDetails:h.description,handleClick:function(){v=="my_workflow"?l.history.push("/workspace/workflow?app_id=".concat(h.app_id,"&type=false")):l.history.push("/workspace/workflow?app_id=".concat(h.app_id,"&type=true"))},operation:(0,e.jsx)(te,{operationObj:h}),iconType:v=="my_workflow"?h.publish_status==0?"play_disable_icon":"play_icon":""})},I)})})})},fe=function(g){var m=g.data,v=(0,M.Z)(function(D){return D.setRunPanelLogRecord}),h=(0,M.Z)(function(D){return D.setDealtWithData}),I=(0,M.Z)(function(D){return D.setRunId}),p=(0,O.useState)(m),o=y()(p,2),P=o[0],V=o[1],J=function(W,c){var w=new Map;return c.reverse().forEach(function(C){w.set(C.app_run_id,C)}),W.forEach(function(C){w.set(C.app_run_id,C)}),Array.from(w.values()).reverse()},K=function(W){return W.completed_progress?parseInt(W.completed_progress.slice(0,-1)):!1},Q=function(){var D=f()(x()().mark(function W(){var c;return x()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:c=Y==null?void 0:Y.filter(function(k){return k.type=="workflow_run_progress"}).map(function(k){var re=k.data;return re}),c&&c.length&&V(J(c,P));case 2:case"end":return C.stop()}},W)}));return function(){return D.apply(this,arguments)}}(),Y=(0,H.Z)(function(D){return D.flowMessage});return(0,O.useEffect)(function(){Q()},[Y]),(0,e.jsx)(e.Fragment,{children:P&&P.length?(0,e.jsx)("div",{className:"cardbox px-[10px]",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(i.Z,{gutter:[30,20],children:P.map(function(D,W){return(0,e.jsx)(u.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(L.Z,{status:D.status,icon:D.icon,title:D.app_runs_name||D.run_name,textDetails:(0,e.jsx)(q,{progressObj:D}),handleClick:function(){v(D),I(null),h(!1)},progress:D.percentage||K(D)})},W)})})}):(0,e.jsx)(ie,{})})},ce=function(g){var m=g.item,v=g.data,h=function(o,P){return o&&o.length?P:(0,e.jsx)(ie,{})},I={backlogs:function(o){return(0,e.jsx)(le,{data:o.data})},my_agent:function(o){return h(v,(0,e.jsx)(_e,{data:o.data,keyName:"my_agent"}))},my_workflow:function(o){return h(v,(0,e.jsx)(ue,{data:o.data,keyName:"my_workflow"}))},workflow_log:function(o){return(0,e.jsx)(fe,{data:o.data})},more_agent:function(o){return h(v,(0,e.jsx)(_e,{data:o.data}))},more_workflow:function(o){return h(v,(0,e.jsx)(ue,{data:o.data}))}};return(0,e.jsx)(e.Fragment,{children:I[m.key]({data:v})})},de=function(g){var m=g.item,v=(0,l.useIntl)(),h=function(){var p=m.key=="my_agent"||m.key=="more_agent"?1:2,o=m.key=="more_agent"||m.key=="more_workflow";(0,S.f1)("SET",p,o),l.history.push("/creation")};return(0,e.jsx)("div",{onClick:h,children:m.key!=="backlogs"&&m.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:v.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},ve=function(g){var m=(0,l.useIntl)(),v=g.item,h=g.setIsModalOpen,I=g.setCreationType,p=function(){var V=v.key=="my_agent"?{name:"Agent",path:"Agents",apps_mode:1}:{name:"WorkFlow",path:"workspace/workflow",apps_mode:2};I(function(J){return r()(r()({},J),V)}),h(!0)},o=v.key=="my_agent"?m.formatMessage({id:"app.dashboard.title_button_1.1"}):v.isAdd?m.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[v.isAdd&&(0,e.jsx)(pe,{bindAdd:p,type:v.isAdd&&o}),(0,e.jsx)(de,{item:v})]})},he=function(){var g=(0,l.useIntl)(),m=[{title:g.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0},{title:g.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:g.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:g.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:g.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:g.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],v=(0,O.useState)(!1),h=y()(v,2),I=h[0],p=h[1],o=(0,O.useState)({}),P=y()(o,2),V=P[0],J=P[1],K=(0,O.useState)(!0),Q=y()(K,2),Y=Q[0],D=Q[1],W=(0,O.useState)({}),c=y()(W,2),w=c[0],C=c[1],k=(0,O.useRef)(!1),re=function(){var F=f()(x()().mark(function R(){var ee,se;return x()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,z.rw)();case 2:ee=ae.sent,ee.code==0&&(se=ee.data,C(se),k.current=!0,D(!0));case 4:case"end":return ae.stop()}},R)}));return function(){return F.apply(this,arguments)}}();return(0,O.useEffect)(function(){k.current||re()},[]),(0,e.jsxs)(e.Fragment,{children:[Y&&m.map(function(F,R){return(0,e.jsx)(u.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:F.title}),(0,e.jsx)("span",{children:(0,e.jsx)(ve,{item:F,setIsModalOpen:p,setCreationType:J})})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:w[F.key]?(0,e.jsx)(ce,{item:F,data:w[F.key]}):(0,e.jsx)(e.Fragment,{})})]})},R)}),!Y&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(_.Z,{size:"large"})}),(0,e.jsx)(G.Z,{setIsModalOpen:p,isModalOpen:I,ModalType:!1,CreationType:V})]})},xe=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"px-[30px] pb-[10px] flex flex-col pt-[30px]",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(i.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(he,{})})})}),(0,e.jsx)(X.Z,{})]})};N.default=xe}}]);
