"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9057],{88872:function(_e,de,i){i.r(de),i.d(de,{default:function(){return Xt}});var ce=i(15009),f=i.n(ce),je=i(99289),I=i.n(je),ye=i(5574),x=i.n(ye),B=i(43722),q=i(32983),Se=i(55026),t=i(67294),T=i(76772),pe=i(19632),ue=i.n(pe),z=i(97857),k=i.n(z),Ze=i(80459),Ee=i(82114),Pe=i(82826),He=i(63783),ze=i(3471),We=i(45360),Ue=i(85576),ke=i(83622),we=i(83062),Te=i(72269),Re=i(74330),$e=i(96486),Ie=i(44010),ee=i(39e3),e=i(85893),it=function(c){var u=(0,T.useIntl)(),R=c.roomDetail,O=c.setAgent,N=We.ZP.useMessage(),o=x()(N,2),b=o[0],D=o[1],_=(0,T.useParams)(),w=_.id,h=(0,ee.Z)(function(n){return n.disableInput}),H=(0,ee.Z)(function(n){return n.truncatable}),P=(0,ee.Z)(function(n){return n.setClearMemory}),W=(0,t.useState)([]),Y=x()(W,2),U=Y[0],Q=Y[1],F=(0,t.useState)(k()({},R)),C=x()(F,2),$=C[0],X=C[1],te=(0,t.useState)([]),ae=x()(te,2),L=ae[0],Z=ae[1],V=(0,t.useRef)(!1),fe=(0,t.useRef)(!1),ve=(0,t.useState)(!1),re=x()(ve,2),K=re[0],ne=re[1],me=function(){var s=Ue.Z.confirm;s({title:u.formatMessage({id:"app.chatroom.clear.title"}),icon:(0,e.jsx)(Ee.Z,{}),content:u.formatMessage({id:"app.chatroom.clear.tips"}),okText:u.formatMessage({id:"app.chatroom.clear.confirm"}),okType:"danger",cancelText:u.formatMessage({id:"app.chatroom.clear.cancel"}),onOk:function(){P(["TRUNCATE","0"])}})},S=function(){var n=I()(f()().mark(function s(){var a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!w){l.next=5;break}return l.next=3,(0,B.cH)({id:w});case 3:if(a=l.sent,a.code==0)try{X(function(){return k()(k()({},a.data.chat_info),{},{max_round:a.data.max_round,smart_selection:a.data.smart_selection})}),Q(a.data.agent_list),V.current=!0}catch(v){}case 5:case"end":return l.stop()}},s)}));return function(){return n.apply(this,arguments)}}(),le=function(){var n=I()(f()().mark(function s(){var a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,B.j2)({id:w});case 2:a=l.sent,a.code==0&&(Z(a.data.list),fe.current=!0);case 4:case"end":return l.stop()}},s)}));return function(){return n.apply(this,arguments)}}(),oe=function(){var n=I()(f()().mark(function s(a){var r,l,v;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!w){d.next=11;break}if(r=a.active==1?0:1,r!=0){d.next=7;break}if(l=U.filter(function(g){return g.active==1}),l.length-1!=0){d.next=7;break}return b.open({type:"error",content:u.formatMessage({id:"app.chatroom.sidebar.agent_tips"}),duration:2}),d.abrupt("return",!1);case 7:return d.next=9,(0,B.sT)({active:r},w,a.agent_id);case 9:v=d.sent,v.code==0&&Q(function(g){return g.map(function(A){return k()(k()({},A),{},{active:A.agent_id==a.agent_id?r:A.active})})});case 11:case"end":return d.stop()}},s)}));return function(a){return n.apply(this,arguments)}}(),xe=function(s){return s.length>6?s.length=6:s.lenth,s},he=function(s){s.type=="my_agent"?T.history.push("/Agents?app_id=".concat(s.app_id,"&type=false&from=chat_room")):T.history.push("/ReadOnlyAgent?app_id=".concat(s.app_id,"&type=true&from=chat_room"))},E=function(s){T.history.replace("/chat_room/".concat(s.chatroom_id)),window.location.reload()},j=function(){ne(!0)},y=function(){ne(!1)},M=function(){var n=I()(f()().mark(function s(a){var r,l,v;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(a.checkItem&&a.checkItem.length==0)){d.next=3;break}return b.open({type:"error",content:u.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2}),d.abrupt("return");case 3:return r=ue()(a.checkItem).map(function(g){var A=g.agent_id,Ne=g.active,G=Ne===void 0?1:Ne;return{agent_id:A,active:G}}),l={description:$.description,name:$.name,max_round:$.max_round},d.next=7,(0,B.sI)(k()(k()({},l),{},{agent:r}),w);case 7:v=d.sent,v.code==0?(a.checkItem.map(function(g){g.active=g.active==null?1:g.active}),Q(ue()(a.checkItem)),O.current=ue()(a.checkItem),b.open({type:"success",content:u.formatMessage({id:"app.chatroom.content.addAgentTips"}),duration:2})):b.open({type:"error",content:u.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2});case 9:case"end":return d.stop()}},s)}));return function(a){return n.apply(this,arguments)}}(),p=function(){var n=I()(f()().mark(function s(){var a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=$.smart_selection==1?0:1,l.next=3,(0,B.r5)({smart_selection:a},w);case 3:X(function(v){return k()(k()({},v),{},{smart_selection:a})});case 4:case"end":return l.stop()}},s)}));return function(){return n.apply(this,arguments)}}();return(0,t.useEffect)(function(){S(),le()},[]),(0,e.jsxs)(e.Fragment,{children:[D,(0,e.jsxs)("div",{className:"h-full w-[320px] bg-[#fff] shrink-0",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.1)"},id:"sider",children:[(0,e.jsxs)("div",{className:"flex flex-col  h-full",children:[(0,e.jsx)("div",{className:"w-full flex  justify-start px-[30px]",children:(0,e.jsxs)("div",{className:"py-[20px] text-[14px] text-[#213044] font-[500] flex gap-x-[10px] items-center w-full",children:[(0,e.jsxs)("div",{className:"cursor-pointer flex items-center shrink-0",onClick:function(){T.history.go(-1)},children:[(0,e.jsx)(ke.ZP,{type:"link",danger:!0,className:"p-0",children:(0,e.jsx)(Pe.Z,{className:"text-[#1B64F3] w-[16px] h-[16px]"})}),(0,e.jsx)("span",{className:"ml-[5px] text-[#213044] text-sm",children:u.formatMessage({id:"app.chatroom.sidebar.return"})})]}),(0,e.jsx)("div",{className:"h-full flex items-center shrink-0",children:(0,e.jsx)("div",{className:"w-[1px] h-[13px] bg-[#ebebeb]"})}),(0,e.jsx)("div",{className:"flex-1 min-w-0 truncate",children:$.name})]})}),(0,e.jsx)("div",{className:"h-[360px]",children:(0,e.jsxs)("div",{className:"pb-[20px] border-b-[1px] px-[10px]",children:[(0,e.jsxs)("div",{className:"flex items-center cursor-pointer px-[20px]",children:[(0,e.jsx)("div",{className:"flex gap-x-[5px] flex-1",children:(0,e.jsx)("span",{className:"text-[#666] text-[14px]",children:u.formatMessage({id:"app.chatroom.sidebar.agent_title"})})}),(0,e.jsxs)("div",{className:"shrink-0 flex items-center",children:[(0,e.jsx)(we.Z,{className:"pr-[2px]",overlayStyle:{fontSize:"12px"},title:u.formatMessage({id:"app.chatroom.sidebar.chatroom_switch_tips"}),children:(0,e.jsx)(He.Z,{className:"cursor-pointer text-[#666] text-[12px]"})}),(0,e.jsx)("span",{className:"text-[12px] text-[#666] pr-[5px]",children:u.formatHTMLMessage({id:"app.chatroom_list.switch"})}),(0,e.jsx)(Te.Z,{size:"small",defaultChecked:!0,className:"w-[28px]",checked:$.smart_selection==1,onChange:p,disabled:h})]})]}),(0,e.jsx)("div",{className:"py-[20px] pt-[10px]",children:(0,e.jsx)("div",{className:"h-[220px] overflow-y-auto px-[10px]",children:V.current?(0,e.jsx)("div",{className:"flex flex-col",children:U&&U.length>0?U.map(function(n){return(0,e.jsxs)("div",{className:"flex items-center gap-x-[5px] hover:bg-[#FAFAFA] transition p-[10px] slider_agent_box",children:[(0,e.jsxs)("div",{className:"flex gap-x-[15px] flex-1 min-w-[0]",children:[(0,e.jsx)(Ze.Z,{data:n}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("span",{className:"text-[#213044] text-[12px] font-[500] truncate w-full",children:n.name}),(0,e.jsx)("span",{className:"text-[#999999] text-[12px] truncate",children:n.description})]})]}),(0,e.jsxs)("div",{className:"shrink-0 flex gap-x-[15px] items-center",children:[(0,e.jsx)("div",{className:"edit cursor-pointer w-[20px] h-[20px] flex justify-center items-center opacity-0 transition",onClick:function(){he(n)},children:(0,e.jsx)("img",{className:"w-[16px] h-[16px]",src:"/icons/edit_icon_1.svg"})}),(0,e.jsx)(Te.Z,{size:"small",disabled:h,defaultChecked:!0,className:"w-[28px]",checked:n.active==1,onChange:function(){oe(n)}})]})]},n.agent_id)}):(0,e.jsx)("div",{className:"w-full min-h-[220px] flex items-center justify-center",children:(0,e.jsx)(q.Z,{image:q.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(Re.Z,{})})})}),(0,e.jsx)("div",{className:"px-[20px] ",children:(0,e.jsx)("div",{style:{border:"1px solid #1B64F3"},onClick:j,className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:u.formatMessage({id:"app.chatroom.add.agent"})})})}),(0,e.jsx)("div",{className:"px-[20px] pt-[15px]",children:(0,e.jsx)("div",{style:H&&!h?{border:"1px solid #1B64F3"}:{background:"#d9d9d9",color:"rgba(0,0,0,0.25)",cursor:"not-allowed"},onClick:(0,$e.throttle)(function(){H&&!h&&me()}),className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:u.formatMessage({id:"app.chatroom.sidebar.agent_button"})})})})]})}),(0,e.jsxs)("div",{className:"flex-1 min-h-[0] flex flex-col",children:[(0,e.jsx)("div",{className:"pt-[30px] px-[30px] text-[#666] text-[14px] shrink-0",children:u.formatMessage({id:"app.chatroom.sidebar.othe_title"})}),(0,e.jsx)("div",{className:"px-[10px] flex-1 min-h-[0] py-[10px]",children:(0,e.jsx)("div",{style:{height:"calc(100% - 20px)"},className:"px-[10px]  overflow-y-auto",children:fe.current?(0,e.jsx)("div",{className:"h-full flex flex-col",children:L&&L.length>0?L.map(function(n){return(0,e.jsxs)("div",{className:"w-full transition hover:bg-[#FAFAFA] p-[10px] cursor-pointer",onClick:function(){E(n)},children:[(0,e.jsxs)("div",{className:"flex pb-[10px]",children:[(0,e.jsx)("div",{className:"flex-1 min-w-[0] truncate text-[#333] text-[14px]",children:n.name}),n.active==0?(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c2.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:u.formatMessage({id:"app.chatroom.sidebar.othe_status"})})]}):(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c1.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:u.formatMessage({id:"app.chatroom.sidebar.othe_status_succeed"})})]})]}),(0,e.jsx)("div",{className:"flex gap-x-[10px]",children:n.agent_list&&n.agent_list.length>0?(0,e.jsxs)(e.Fragment,{children:[xe(n.agent_list).map(function(s,a){return(0,e.jsx)("div",{className:"flex",children:(0,e.jsx)(Ze.Z,{data:s,width:"30px"})},a)}),n.agent_list.length>=6?(0,e.jsx)(ze.Z,{}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})]},n.chatroom_id)}):(0,e.jsx)("div",{className:"w-full h-full",children:(0,e.jsx)(q.Z,{image:q.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(Re.Z,{})})})})]})]}),(0,e.jsx)(Ie.Z,{show:K,popupClose:y,popupSave:M,checkList:U,zIndex:99})]})]})},lt=(0,t.memo)(it),ot=i(18304),ct=i(39873),Ce=i(1413),ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},dt=ut,Le=i(91146),pt=function(c,u){return t.createElement(Le.Z,(0,Ce.Z)((0,Ce.Z)({},c),{},{ref:u,icon:dt}))},ft=t.forwardRef(pt),vt=ft,mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},xt=mt,ht=function(c,u){return t.createElement(Le.Z,(0,Ce.Z)((0,Ce.Z)({},c),{},{ref:u,icon:xt}))},gt=t.forwardRef(ht),jt=gt,yt=i(50136),St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},wt=St,Nt=function(c,u){return t.createElement(Le.Z,(0,Ce.Z)((0,Ce.Z)({},c),{},{ref:u,icon:wt}))},Mt=t.forwardRef(Nt),Rt=Mt,Ve=i(86),et=i(34994),tt=i(2216),Ct=i(85877),Zt=i(29432),kt=i(39944),At=i(11551),Ke=i(55927),Ge=i(98486),Je=i(97807),bt=function(c){var u,R,O,N,o=c.selectApp,b=c.runid,D=c.setBoxLoading,_=c.setinputShow,w=c.appId,h=c.id,H=c.setisRun,P=(0,T.useIntl)(),W=(0,t.useRef)(""),Y=(0,t.useRef)(""),U=(0,t.useRef)(null),Q=(0,t.useState)(""),F=x()(Q,2),C=F[0],$=F[1],X=(0,t.useState)(null),te=x()(X,2),ae=te[0],L=te[1],Z=(0,t.useState)([]),V=x()(Z,2),fe=V[0],ve=V[1],re=(0,t.useState)(""),K=x()(re,2),ne=K[0],me=K[1],S=(0,Ke.Z)(function(E){return E.flowMessage}),le=function(j){Y.current=oe(j);var y={user:{value:oe(j)}};me(new kt.z(y))},oe=function E(j){return j.map(function(y){return y.type==="mention"?y.id:y.children?E(y.children):y.text}).join("")},xe=function(){var E=I()(f()().mark(function j(y){var M,p;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return D(!0),M=Object.keys(y),M.forEach(function(a){U.current.properties[a]&&(U.current.properties[a].value=y[a])}),s.next=5,(0,At.LH)({agent_id:o.checkItem[0].agent_id,ability_id:0,input_dict:U.current,prompt:ne,data_source_run_id:W.current});case 5:p=s.sent,p.code==0&&($(p.data.outputs_md),D(!1),H(!1));case 7:case"end":return s.stop()}},j)}));return function(y){return E.apply(this,arguments)}}(),he=function(){var E=I()(f()().mark(function j(y,M){var p,n;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,B.xT)(y,M);case 2:p=a.sent,(p==null?void 0:p.code)==0&&(W.current=p==null||(n=p.data)===null||n===void 0?void 0:n.app_run_id);case 4:case"end":return a.stop()}},j)}));return function(y,M){return E.apply(this,arguments)}}();return(0,t.useEffect)(function(){o&&o.checkItem.length&&(H(!0),he(h,{app_id:w,app_run_id:b,status:1,corrected_parameter:""}))},[o]),(0,t.useEffect)(function(){var E=S.filter(function(s){return s.data.app_run_id==b&&s.type.indexOf("generate_meeting_action_items")!==-1});if(E.length!=0){var j,y=(j=E[E.length-1])===null||j===void 0||(j=j.data)===null||j===void 0||(j=j.exec_data)===null||j===void 0||(j=j.outputs)===null||j===void 0?void 0:j.value;if(y){var M=JSON.parse(y);U.current=M;var p=Object.keys(M.properties);if(p.length){L(M.properties);var n=p.map(function(s){return{value:"<<".concat(Zt.qX,".inputs.").concat(s,">>"),label:s}});ve(n)}_(!1),D(!1)}}},[S]),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ve.Z,{icon:o==null||(u=o.checkItem[0])===null||u===void 0?void 0:u.icon,title:o==null||(R=o.checkItem[0])===null||R===void 0?void 0:R.name,textDetails:o==null||(O=o.checkItem[0])===null||O===void 0?void 0:O.description,iconType:"robot_icon",avatar:o==null||(N=o.checkItem[0])===null||N===void 0?void 0:N.avatar,handleClick:function(){}})}),ae!=null?(0,e.jsxs)(et.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full",disabled:!Y.current},searchConfig:{submitText:P.formatMessage({id:"workflow.button.run"})}},onFinish:function(j){xe(j)},children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(tt._,{data:ae})}),(0,e.jsx)("div",{className:"h-[150px] overflow-y-auto border border-color-[#eee] py-[4px] px-[11px] mb-[8px]",children:(0,e.jsx)(Ct.Z,{onChange:function(j){le(j)},options:fe,placeholder:"\u8BF7\u8F93\u5165\u8FD0\u884C\u6307\u4EE4\uFF0C\u8F93\u5165@\u63D2\u5165\u53D8\u91CF"})})]}):(0,e.jsx)(e.Fragment,{}),C?(0,e.jsx)("div",{className:"max-h-[400px] overflow-y-auto mt-[16px]",children:(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(Ge.UG,{rehypePlugins:[Je.Z],children:C})})}):(0,e.jsx)(e.Fragment,{})]})},Dt=(0,t.memo)(bt),Ft=i(66309),at=i(42237),It=i(93696),Ot=function(c,u){return t.createElement(Le.Z,(0,Ce.Z)((0,Ce.Z)({},c),{},{ref:u,icon:It.Z}))},_t=t.forwardRef(Ot),Et=_t,Pt=i(4981),rt=i(29608),Tt=(0,t.memo)(function(J){var c=J.progressObj,u=function(){return parseFloat(c.elapsed_time).toFixed(6)},R=function(N){var o=new Date(N),b=o.getFullYear(),D=(o.getMonth()+1).toString().padStart(2,"0"),_=o.getDate().toString().padStart(2,"0"),w=o.getHours().toString().padStart(2,"0"),h=o.getMinutes().toString().padStart(2,"0"),H=o.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(b,".").concat(D,".").concat(_," ").concat(w,":").concat(h,":").concat(H)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:c.created_time&&R(c.created_time)}),(0,e.jsx)("div",{className:"truncate",children:c.apps_name||c.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(c.status==1?"bg-blue-600":c.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[u(),"S"]})]})]})})}),$t=function(c){var u,R,O,N,o=c.selectApp,b=c.runid,D=c.setBoxLoading,_=c.setinputShow,w=c.appId,h=c.id,H=c.setisRun,P=(0,T.useIntl)(),W=(0,t.useRef)(""),Y=(0,t.useRef)(null),U=(0,t.useState)(null),Q=x()(U,2),F=Q[0],C=Q[1],$=(0,t.useState)(!1),X=x()($,2),te=X[0],ae=X[1],L=(0,t.useState)(null),Z=x()(L,2),V=Z[0],fe=Z[1],ve=(0,t.useState)(null),re=x()(ve,2),K=re[0],ne=re[1],me=(0,t.useState)(null),S=x()(me,2),le=S[0],oe=S[1],xe=(0,rt.Z)(function(a){return a.setDealtWithData}),he=(0,rt.Z)(function(a){return a.setRunPanelLogRecord}),E=function(){var a=I()(f()().mark(function r(l){var v,m,d,g,A;return f()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return D(!0),v=Object.keys(l),m={},v.forEach(function(ge){Y.current.properties[ge]&&(Y.current.properties[ge].value=l[ge]),K&&K.forEach(function(be){be.node_id==ge&&(m[ge]=l[ge])})}),d={inputs:Y.current,node_confirm_users:m,run_name:"chatroom-".concat(h,"-run-").concat(W.current,"-driven"),run_type:1,data_source_run_id:W.current},G.next=7,(0,at.UE)(w,d);case 7:g=G.sent,g.code==0&&(W.current=g==null||(A=g.data)===null||A===void 0?void 0:A.app_run_id,ae(!0),H(!1));case 9:case"end":return G.stop()}},r)}));return function(l){return a.apply(this,arguments)}}(),j=function(){var a=I()(f()().mark(function r(){var l,v;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l=s==null?void 0:s.filter(function(g){return g.type=="workflow_run_progress"&&g.data.app_run_id==W.current}).map(function(g){var A=g.data;return A}),l&&l.length&&(v=l[l.length-1],C(v),D(!1));case 2:case"end":return d.stop()}},r)}));return function(){return a.apply(this,arguments)}}(),y=function(){var a=I()(f()().mark(function r(){var l,v,m,d,g;return f()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:v=s==null?void 0:s.filter(function(G){return G.type=="workflow_need_human_confirm"&&G.data.app_run_id==W.current}),m=(l=v.map(function(G){var ge=G.data,be=G.need_human_confirm;return{data:ge,need_human_confirm:be}}))===null||l===void 0?void 0:l.filter(function(G){return G.data.type!==1}),m&&m.length&&(g=m[m.length-1].data,g.exec_id=g==null||(d=g.node_exec_data)===null||d===void 0?void 0:d.node_exec_id,oe(m[m.length-1]),D(!1));case 3:case"end":return Ne.stop()}},r)}));return function(){return a.apply(this,arguments)}}(),M=function(r){return r.completed_progress?parseInt(r.completed_progress.slice(0,-1)):!1},p=function(){var a=I()(f()().mark(function r(l,v){var m,d;return f()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,B.xT)(l,v);case 2:m=A.sent,(m==null?void 0:m.code)==0&&(W.current=m==null||(d=m.data)===null||d===void 0?void 0:d.app_run_id);case 4:case"end":return A.stop()}},r)}));return function(l,v){return a.apply(this,arguments)}}(),n=function(){var a=I()(f()().mark(function r(){var l,v;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,at.zO)(w);case 2:l=d.sent,l.code==0&&ne(l==null||(v=l.data)===null||v===void 0?void 0:v.need_confirm_nodes),p(h,{app_id:w,app_run_id:b,status:1,corrected_parameter:""});case 5:case"end":return d.stop()}},r)}));return function(){return a.apply(this,arguments)}}();(0,t.useEffect)(function(){o&&o.checkItem.length&&(H(!0),n())},[o]);var s=(0,Ke.Z)(function(a){return a.flowMessage});return(0,t.useEffect)(function(){j(),y();var a=s.filter(function(d){return d.data.app_run_id==b&&d.type.indexOf("generate_meeting_action_items")!==-1});if(a.length!=0){var r,l=(r=a[a.length-1])===null||r===void 0||(r=r.data)===null||r===void 0||(r=r.exec_data)===null||r===void 0||(r=r.outputs)===null||r===void 0?void 0:r.value;if(l){var v=JSON.parse(l);Y.current=v;var m=Object.keys(v.properties);m.length&&fe(v.properties),_(!1),D(!1)}}},[s]),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ve.Z,{icon:o==null||(u=o.checkItem[0])===null||u===void 0?void 0:u.icon,title:o==null||(R=o.checkItem[0])===null||R===void 0?void 0:R.name,textDetails:o==null||(O=o.checkItem[0])===null||O===void 0?void 0:O.description,iconType:"workflow_icon",avatar:o==null||(N=o.checkItem[0])===null||N===void 0?void 0:N.avatar,handleClick:function(){}})}),!te&&V!=null?(0,e.jsxs)(et.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full"},searchConfig:{submitText:P.formatMessage({id:"workflow.button.run"})}},onFinish:E,children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(tt._,{data:V})}),(0,e.jsx)(Pt.e,{data:K})]}):(0,e.jsx)(e.Fragment,{children:V!=null?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[P.formatMessage({id:"app.summaryhistory.input"}),":"]}),Object.values(V).map(function(a){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:a.display_name||a.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:a.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),le&&le.need_human_confirm!=0?(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[6px] items-center h-[20px] cursor-pointer",onClick:function(){xe(le.data)},children:[(0,e.jsx)("div",{children:(0,e.jsx)(Et,{className:"text-[#1B64F3] text-[16px]"})}),(0,e.jsx)("span",{children:P.formatMessage({id:"app.summary.backlogTips"})})]})}):(0,e.jsx)(e.Fragment,{}),F?(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(Ve.Z,{status:F.status,icon:F.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:F.run_name}),F.need_human_confirm==1?(0,e.jsx)(Ft.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:P.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)(Tt,{progressObj:F}),handleClick:function(){he(F)},progress:M(F)})}):(0,e.jsx)(e.Fragment,{})]})},Lt=(0,t.memo)($t),Bt=function(c){var u,R,O,N=(0,T.useIntl)(),o=c.runid,b=c.id,D=c.setBoxLoading,_=c.scrollDom,w=c.setinputShow,h=(0,t.useRef)("agent"),H=(0,t.useRef)(""),P=(0,t.useState)(!1),W=x()(P,2),Y=W[0],U=W[1],Q=(0,t.useState)({type:"agent",checkItem:[],show:!1}),F=x()(Q,2),C=F[0],$=F[1],X=[{key:"1",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){$(function(Z){return k()(k()({},Z),{},{type:"agent",show:!0})})},children:N.formatMessage({id:"app.summary.SelectAgent"})})},{key:"2",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){$(function(Z){return k()(k()({},Z),{},{type:"workflow",show:!0})})},children:N.formatMessage({id:"app.summary.SelectWorkflow"})})}],te=function(){$(function(Z){return k()(k()({},Z),{},{show:!1})})},ae=function(Z){D(!0),$(function(V){return k()(k()({},V),{},{checkItem:Z.checkItem})}),h.current=C.type,H.current=Z.checkItem[0].app_id};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"pt-[24px]  border-[#ddd]",style:{minHeight:C!=null&&(u=C.checkItem)!==null&&u!==void 0&&u.length?_==null||(R=_.current)===null||R===void 0?void 0:R.offsetHeight:"100%"},children:[(0,e.jsxs)("div",{className:"text-[14px] font-[500] flex item-center",children:[(0,e.jsx)("div",{className:"flex-1",children:N.formatMessage({id:"app.summary.Runapp"})}),(0,e.jsx)("div",{className:"px-[10px]",children:Y?(0,e.jsx)(yt.Z,{menu:{items:X},children:(0,e.jsx)(Rt,{className:"transition cursor-pointer text-[#999] text-[18px] hover:text-[#1B64F3]"})}):(0,e.jsx)(e.Fragment,{})})]}),(0,e.jsx)("div",{children:C!=null&&(O=C.checkItem)!==null&&O!==void 0&&O.length?(0,e.jsx)(e.Fragment,{children:h.current=="agent"?(0,e.jsx)(Dt,{id:b,appId:H.current,selectApp:C,runid:o,setBoxLoading:D,scrollDom:_,setinputShow:w,setisRun:U}):(0,e.jsx)(Lt,{id:b,appId:H.current,selectApp:C,runid:o,setBoxLoading:D,scrollDom:_,setinputShow:w,setisRun:U})}):(0,e.jsxs)("div",{className:"flex gap-x-[20px] min-h-[70px] items-center px-[20px]",children:[(0,e.jsxs)(ke.ZP,{className:"flex-1 text-[14px]",onClick:function(){$(function(Z){return k()(k()({},Z),{},{type:"agent",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/robot_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),N.formatMessage({id:"app.summary.SelectAgent"})]}),(0,e.jsxs)(ke.ZP,{className:"flex-1 text-[14px]",onClick:function(){$(function(Z){return k()(k()({},Z),{},{type:"workflow",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/workflow_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),N.formatMessage({id:"app.summary.SelectWorkflow"})]})]})})]}),(0,e.jsx)(Ie.Z,{show:C.show,nodetype:C.type,popupClose:te,popupSave:ae,checkList:h.current==C.type?C.checkItem:[],zIndex:99,radio:!0})]})},Ht=(0,t.memo)(Bt),zt=i(55102),Wt=i(87740),nt=(0,t.memo)(function(J){var c=J.id,u=J.message,R=(0,T.useIntl)(),O=(0,ee.Z)(function(h){return h.setSummaryClick}),N=(0,t.useState)(!0),o=x()(N,2),b=o[0],D=o[1],_=(0,ee.Z)(function(h){return h.summaryClick}),w=(0,ee.Z)(function(h){return h.setSummaryParams});return(0,t.useEffect)(function(){D(_)},[_]),(0,e.jsx)("div",{className:"flex flex-row-reverse",children:(0,e.jsxs)(ke.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(H){b&&(w({id:c,message:u}),O(!1))},children:[(0,e.jsx)("span",{className:"text-[12px]",children:R.formatMessage({id:"app.summaryhistory.submitText"})}),(0,e.jsx)(Wt.Z,{className:"text-[14px]"})]})})}),Ut=function(c){var u,R,O,N,o=c.setShow,b=c.inputShow,D=c.setBoxLoading,_=c.setAppRunId,w=c.scrollDom,h=(0,T.useIntl)(),H=(0,t.useState)(!1),P=x()(H,2),W=P[0],Y=P[1],U=(0,t.useState)(""),Q=x()(U,2),F=Q[0],C=Q[1],$=(0,t.useState)(""),X=x()($,2),te=X[0],ae=X[1],L=(0,t.useRef)(""),Z=(0,t.useRef)(""),V=(0,t.useRef)(!1),fe=(0,t.useState)(!1),ve=x()(fe,2),re=ve[0],K=ve[1],ne=(0,t.useState)(null),me=x()(ne,2),S=me[0],le=me[1],oe=(0,ee.Z)(function(p){return p.setSummaryClick}),xe=function(){var p=I()(f()().mark(function n(s){var a,r,l,v,m=arguments;return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=m.length>1&&m[1]!==void 0?m[1]:{app_run_id:"",corrected_parameter:""},g.next=3,(0,B.Rp)(s,a);case 3:r=g.sent,(r==null?void 0:r.code)==0&&(_(r==null||(l=r.data)===null||l===void 0?void 0:l.app_run_id),Z.current=r==null||(v=r.data)===null||v===void 0?void 0:v.app_run_id,a.app_run_id&&(V.current=!0));case 5:case"end":return g.stop()}},n)}));return function(s){return p.apply(this,arguments)}}(),he=function(){var p=I()(f()().mark(function n(s,a){var r,l,v,m,d;return f()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,B.xM)(s,{message:a});case 2:r=A.sent,(r==null?void 0:r.code)==0&&(Z.current=r==null||(l=r.data)===null||l===void 0?void 0:l.app_run_id,_(r==null||(v=r.data)===null||v===void 0?void 0:v.app_run_id),r!=null&&(m=r.data)!==null&&m!==void 0&&(m=m.outputs)!==null&&m!==void 0&&m.value&&(C(r==null||(d=r.data)===null||d===void 0||(d=d.outputs)===null||d===void 0?void 0:d.value),o(!0),D(!1),oe(!0),w.current.scrollTo({top:0})));case 4:case"end":return A.stop()}},n)}));return function(s,a){return p.apply(this,arguments)}}(),E=function(){var p=I()(f()().mark(function n(){var s;return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,B.Gh)({chatroom_id:L.current,app_run_id:Z.current});case 2:s=r.sent,s&&s!==null&&s!==void 0&&s.data&&le(s.data);case 4:case"end":return r.stop()}},n)}));return function(){return p.apply(this,arguments)}}(),j=function(n){var s=new Date(n),a=s.getMonth()+1,r=s.getDate(),l=s.getHours(),v=s.getMinutes(),m=s.getSeconds();return s.getFullYear()+"-"+(a<10?"0"+a:a)+"-"+(r<10?"0"+r:r)+" "+(l<10?"0"+l:l)+":"+(v<10?"0"+v:v)+":"+(m<10?"0"+m:m)},y=(0,Ke.Z)(function(p){return p.flowMessage});(0,t.useEffect)(function(){var p=y.filter(function(a){return a.data.app_run_id==Z.current&&a.type.indexOf("generate_meeting_summary")!==-1});if(p.length!=0){var n,s=(n=p[p.length-1])===null||n===void 0||(n=n.data)===null||n===void 0||(n=n.exec_data)===null||n===void 0||(n=n.outputs)===null||n===void 0?void 0:n.value;s&&(V.current&&E(),C(s),K(!1),o(!0),oe(!0),D(!1),w.current.scrollTo({top:0}))}},[y]);var M=(0,ee.Z)(function(p){return p.summaryParams});return(0,t.useEffect)(function(){M&&M.id&&(L.current=M.id,S&&le(null),re&&K(!1),F&&C(""),Y(!0),M.message?(D(!0),he(M.id,M.message)):xe(M.id))},[M]),(0,e.jsx)(e.Fragment,{children:W?(0,e.jsxs)("div",{className:"pb-[16px]",children:[(0,e.jsx)("div",{className:"text-[16px] font-[600] pt-[12px]",children:h.formatMessage({id:"app.summary.title"})}),(0,e.jsx)("div",{className:"text-[14px] pt-[12px] leading-[23px] px-[8px]",children:F?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:" ".concat("max-h-[400px]"," p-[12px]  bg-[#F7F7F7]  relative overflow-y-auto"),children:(0,e.jsx)(Ge.UG,{rehypePlugins:[Je.Z],children:S?S==null||(u=S.source_run)===null||u===void 0?void 0:u.summary:F})}),S&&(S==null||(R=S.source_corrections)===null||R===void 0?void 0:R.length)>0||!b?(0,e.jsx)(nt,{id:L.current,message:S?S==null||(O=S.source_run)===null||O===void 0?void 0:O.summary:F}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)("div",{className:"min-h-[120px] flex items-center justify-center",children:(0,e.jsx)(Re.Z,{size:"large"})})}),S&&(S==null||(N=S.source_corrections)===null||N===void 0?void 0:N.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[h.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),S.source_corrections.map(function(p,n){return(0,e.jsxs)("div",{className:"mb-[16px]",children:[(0,e.jsx)("div",{className:"rounded-[4px]  ".concat(S.source_corrections.length-1==n?"bg-blue-100":"bg-[#F7F7F7]"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[h.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",p.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[h.formatMessage({id:"app.summaryhistory.time"}),": ",j(p.created_time)]}),(0,e.jsx)(Ge.UG,{rehypePlugins:[Je.Z],children:p==null?void 0:p.corrected_summary})]})},p.created_time),!b||S.source_corrections.length-1!=n?(0,e.jsx)(nt,{id:L.current,message:p==null?void 0:p.corrected_summary}):(0,e.jsx)(e.Fragment,{})]},p.created_time)})]}):(0,e.jsx)(e.Fragment,{}),b?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsx)(zt.Z.TextArea,{onChange:function(n){ae(n.target.value)},value:te,disabled:!F||re,rows:4,placeholder:h.formatMessage({id:"app.summary.placeholder"})})}),(0,e.jsx)("div",{className:"flex pt-[12px] gap-x-[4px]",children:(0,e.jsx)(ke.ZP,{type:"primary",disabled:!F||!te,loading:re,className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px] flex-1",onClick:function(){xe(L.current,{app_run_id:String(Z.current),corrected_parameter:te}),K(!0),ae(""),o("")},children:h.formatMessage({id:"app.summary.submitText"})})})]}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})},Vt=(0,t.memo)(Ut),Kt=i(38027),Gt=function(c){var u,R=c.id,O=(0,t.useState)(""),N=x()(O,2),o=N[0],b=N[1],D=(0,t.useState)(!1),_=x()(D,2),w=_[0],h=_[1],H=(0,t.useState)([]),P=x()(H,2),W=P[0],Y=P[1],U=(0,t.useState)(!1),Q=x()(U,2),F=Q[0],C=Q[1],$=(0,t.useState)(!1),X=x()($,2),te=X[0],ae=X[1],L=(0,t.useState)(""),Z=x()(L,2),V=Z[0],fe=Z[1],ve=(0,t.useState)(!1),re=x()(ve,2),K=re[0],ne=re[1],me=(0,t.useState)(!1),S=x()(me,2),le=S[0],oe=S[1],xe=(0,t.useState)(!0),he=x()(xe,2),E=he[0],j=he[1],y=(0,t.useRef)(null),M=(0,t.useRef)(1),p=(0,t.useRef)(!1),n=(0,t.useRef)(!0),s=(0,t.useRef)(0),a=(0,t.useState)(!1),r=x()(a,2),l=r[0],v=r[1],m=(0,t.useState)(800),d=x()(m,2),g=d[0],A=d[1],Ne=(0,t.useState)(!1),G=x()(Ne,2),ge=G[0],be=G[1],Be=(0,ee.Z)(function(se){return se.summaryParams}),qt=(0,ee.Z)(function(se){return se.setSummaryParams}),Ye=function(){var se=I()(f()().mark(function Me(){var st,Qe,ie,Xe,De,qe,Fe=arguments;return f()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(st=Fe.length>0&&Fe[0]!==void 0?Fe[0]:!0,Qe=Fe.length>1&&Fe[1]!==void 0?Fe[1]:!0,!(s.current!=0&&s.current<M.current)){Ae.next=5;break}return v(!1),Ae.abrupt("return");case 5:return Ae.next=8,(0,B.sh)({chatroom_id:R,page:M.current,page_size:10});case 8:ie=Ae.sent,ie.code==0&&(ie!=null&&(Xe=ie.data)!==null&&Xe!==void 0&&Xe.list&&ie!==null&&ie!==void 0&&(De=ie.data)!==null&&De!==void 0&&(De=De.list)!==null&&De!==void 0&&De.length&&(s.current=ie==null||(qe=ie.data)===null||qe===void 0?void 0:qe.total_pages,Y(function(Oe){return Qe?ue()(ie.data.list.reverse()):[].concat(ue()(ie.data.list.reverse()),ue()(Oe))}),n.current=!0,h(!0),v(!0)),Qe&&setTimeout(function(){var Oe;y==null||(Oe=y.current)===null||Oe===void 0||Oe.scrollTo({top:0})},200),st||(b(Be.id),qt({})));case 10:case"end":return Ae.stop()}},Me)}));return function(){return se.apply(this,arguments)}}(),ea=function(Me){Me.target.scrollHeight+(Me.target.scrollTop-Me.target.clientHeight)<400&&n.current&&(n.current=!1,v(!0),M.current=M.current+=1,Ye(!0,!1))};(0,t.useEffect)(function(){M.current=1,Ye()},[R]),(0,t.useEffect)(function(){Be&&Be.id&&(h(!0),E||j(!0),F&&C(!1),K&&ne(!1),M.current=1,ae(!0),Ye(!1),p.current=!0)},[Be]);var ta=(0,ee.Z)(function(se){return se.setOrientationShow});return(0,t.useEffect)(function(){w&&ta(!0)},[w]),(0,t.useEffect)(function(){var se=function(){window.innerWidth<1280?(A(400),be(!0),setTimeout(function(){ne(!0)},200)):(A((window.innerWidth-320)/2),be(!1),ne(!1))};return se(),window.addEventListener("resize",se),function(){window.removeEventListener("resize",se)}},[]),(0,e.jsx)(e.Fragment,{children:w?(0,e.jsxs)("div",{style:{overflow:K?"hidden":"initial"},className:"pl-[32px] box-border ".concat(ge?"fixed  right-0 bottom-0 top-[56px]":"relative"),children:[(0,e.jsx)("div",{onClick:function(){ne(function(Me){return!Me})},className:`
                                `.concat(K?"absolute left-[2px]  top-[60px]":"absolute left-[2px] top-[60px]",`
                                history_packup
                                hover:text-[#1B64F3]
                                w-[30px] h-[60px] bg-[rgba(255,255,255,1)] shadow-md flex justify-center items-center cursor-pointer z-[99]
                            `),children:K?(0,e.jsx)(jt,{className:"text-[18px]"}):(0,e.jsx)(vt,{className:"text-[18px]"})}),(0,e.jsxs)(ct.Z,{minWidth:400,maxWidth:g,className:"relative h-full right-0 border-0 returned-0 px-[0] ".concat(K?"hidden flex-[0]":"block"),children:[le?(0,e.jsx)("div",{className:"h-full w-full absolute top-0 left-0 flex justify-center items-center z-[100] bg-[rgba(255,255,255,0.5)]",children:(0,e.jsx)(Re.Z,{size:"large"})}):(0,e.jsx)(e.Fragment,{}),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"h-full min-h-full overflow-y-auto flex flex-col-reverse scroll-smooth relative",onScroll:ea,ref:y,children:[(0,e.jsxs)("div",{children:[W.length?(0,e.jsx)(Kt.ZP,{id:R,runid:V,scrollDom:y,list:W,historyHeight:p.current}):(0,e.jsx)(e.Fragment,{}),(0,e.jsxs)("div",{className:"w-full px-4 h-full",style:{minHeight:te?y==null||(u=y.current)===null||u===void 0?void 0:u.offsetHeight:""},children:[(0,e.jsx)(Vt,{setShow:C,inputShow:E,setBoxLoading:oe,setAppRunId:fe,scrollDom:y}),F?(0,e.jsx)(Ht,{id:o,runid:V,setBoxLoading:oe,scrollDom:y,setinputShow:j}):(0,e.jsx)(e.Fragment,{})]})]}),l?(0,e.jsx)("div",{className:"text-center justify-center items-center flex",children:(0,e.jsx)(Re.Z,{})}):(0,e.jsx)(e.Fragment,{})]})})]})]}):(0,e.jsx)(e.Fragment,{})})},Jt=(0,t.memo)(Gt),Yt=function(c){return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(q.Z,{image:q.Z.PRESENTED_IMAGE_SIMPLE})})},Qt=(0,t.memo)(function(){var J=(0,T.useParams)(),c=J.id,u=(0,t.useRef)([]),R=(0,t.useRef)(null),O=(0,t.useState)(!1),N=x()(O,2),o=N[0],b=N[1],D=function(){var _=I()(f()().mark(function w(){var h;return f()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!c){P.next=5;break}return P.next=3,(0,B.cH)({id:c});case 3:h=P.sent,h.code==0?(b(!0),R.current=h.data,u.current=h.data.agent_list):T.history.replace("/meeting");case 5:case"end":return P.stop()}},w)}));return function(){return _.apply(this,arguments)}}();return(0,t.useEffect)(function(){D()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex bg-[#fff] overflow-hidden overflow-x-auto",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)(lt,{roomDetail:R.current,setAgent:u}),(0,e.jsx)("div",{className:"flex-1 min-h-0 h-full",children:o?(0,e.jsx)(ot.F,{agentList:u}):(0,e.jsx)(Yt,{})}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Jt,{id:c})})]})})}),Xt=Qt},93203:function(_e,de,i){var ce=i(62508),f=i(66092),je=(0,ce.Z)(f.Z,"Set");de.Z=je},39473:function(_e,de,i){i.d(de,{Z:function(){return q}});var ce=i(72764),f=i(1851),je=(0,f.Z)(Object.keys,Object),I=je,ye=Object.prototype,x=ye.hasOwnProperty;function B(Se){if(!(0,ce.Z)(Se))return I(Se);var t=[];for(var T in Object(Se))x.call(Se,T)&&T!="constructor"&&t.push(T);return t}var q=B},83970:function(_e,de,i){i.d(de,{Z:function(){return Te}});var ce=i(62508),f=i(66092),je=(0,ce.Z)(f.Z,"DataView"),I=je,ye=i(86183),x=(0,ce.Z)(f.Z,"Promise"),B=x,q=i(93203),Se=(0,ce.Z)(f.Z,"WeakMap"),t=Se,T=i(93589),pe=i(90019),ue="[object Map]",z="[object Object]",k="[object Promise]",Ze="[object Set]",Ee="[object WeakMap]",Pe="[object DataView]",He=(0,pe.Z)(I),ze=(0,pe.Z)(ye.Z),We=(0,pe.Z)(B),Ue=(0,pe.Z)(q.Z),ke=(0,pe.Z)(t),we=T.Z;(I&&we(new I(new ArrayBuffer(1)))!=Pe||ye.Z&&we(new ye.Z)!=ue||B&&we(B.resolve())!=k||q.Z&&we(new q.Z)!=Ze||t&&we(new t)!=Ee)&&(we=function(Re){var $e=(0,T.Z)(Re),Ie=$e==z?Re.constructor:void 0,ee=Ie?(0,pe.Z)(Ie):"";if(ee)switch(ee){case He:return Pe;case ze:return ue;case We:return k;case Ue:return Ze;case ke:return Ee}return $e});var Te=we},79697:function(_e,de,i){var ce=i(39473),f=i(83970),je=i(29169),I=i(27771),ye=i(50585),x=i(77008),B=i(72764),q=i(18843),Se="[object Map]",t="[object Set]",T=Object.prototype,pe=T.hasOwnProperty;function ue(z){if(z==null)return!0;if((0,ye.Z)(z)&&((0,I.Z)(z)||typeof z=="string"||typeof z.splice=="function"||(0,x.Z)(z)||(0,q.Z)(z)||(0,je.Z)(z)))return!z.length;var k=(0,f.Z)(z);if(k==Se||k==t)return!z.size;if((0,B.Z)(z))return!(0,ce.Z)(z).length;for(var Ze in z)if(pe.call(z,Ze))return!1;return!0}de.Z=ue}}]);
