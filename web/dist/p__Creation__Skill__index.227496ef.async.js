(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{82826:function(W,I,t){"use strict";t.d(I,{Z:function(){return d}});var C=t(1413),a=t(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},c=G,k=t(91146),O=function(T,w){return a.createElement(k.Z,(0,C.Z)((0,C.Z)({},T),{},{ref:w,icon:c}))},U=a.forwardRef(O),d=U},89035:function(W,I,t){"use strict";t.d(I,{Z:function(){return d}});var C=t(1413),a=t(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},c=G,k=t(91146),O=function(T,w){return a.createElement(k.Z,(0,C.Z)((0,C.Z)({},T),{},{ref:w,icon:c}))},U=a.forwardRef(O),d=U},81644:function(W,I,t){"use strict";t.d(I,{Z:function(){return d}});var C=t(1413),a=t(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},c=G,k=t(91146),O=function(T,w){return a.createElement(k.Z,(0,C.Z)((0,C.Z)({},T),{},{ref:w,icon:c}))},U=a.forwardRef(O),d=U},2068:function(W,I,t){"use strict";t.d(I,{Z:function(){return d}});var C=t(1413),a=t(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},c=G,k=t(91146),O=function(T,w){return a.createElement(k.Z,(0,C.Z)((0,C.Z)({},T),{},{ref:w,icon:c}))},U=a.forwardRef(O),d=U},15360:function(W,I,t){"use strict";t.d(I,{Z:function(){return d}});var C=t(1413),a=t(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},c=G,k=t(91146),O=function(T,w){return a.createElement(k.Z,(0,C.Z)((0,C.Z)({},T),{},{ref:w,icon:c}))},U=a.forwardRef(O),d=U},83510:function(W,I,t){"use strict";t.d(I,{LK:function(){return Q},bs:function(){return B},go:function(){return ve},uy:function(){return H}});var C=t(15009),a=t.n(C),G=t(99289),c=t.n(G),k=t(47520),O="/v1/apps/apps_list",U="/v1/agent/agent_delete/",d="/v1/workflow/workflow_app_delete/",te="/v1/vector/delete_dataset/",T="/v1/skill/delete_skill_by_app_id/",w="/v1/apps/apps_create",le="/v1/apps/app_update/",ve=function(){var N=c()(a()().mark(function j(s){var m;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,k.ZP)("".concat(O),{method:"GET",data:s});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},j)}));return function(s){return N.apply(this,arguments)}}(),Q=function(){var N=c()(a()().mark(function j(s){var m;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(s),i.next=3,s.mode;case 3:if(i.t0=i.sent,i.t0!=1){i.next=8;break}i.t1=(0,k.ZP)("".concat(U).concat(s.app_id),{method:"DELETE"}),i.next=9;break;case 8:i.t1=s.mode==2?(0,k.ZP)("".concat(d).concat(s.app_id),{method:"DELETE"}):s.mode==3?(0,k.ZP)("".concat(te).concat(s.app_id),{method:"DELETE"}):(0,k.ZP)("".concat(T).concat(s.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return m=i.t1,i.abrupt("return",m);case 11:case"end":return i.stop()}},j)}));return function(s){return N.apply(this,arguments)}}(),H=function(){var N=c()(a()().mark(function j(s){var m;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,k.ZP)("".concat(w),{method:"POST",data:s});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},j)}));return function(s){return N.apply(this,arguments)}}(),B=function(){var N=c()(a()().mark(function j(s){var m;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,k.ZP)("".concat(le).concat(s.app_id),{method:"PUT",data:s});case 2:return m=i.sent,i.abrupt("return",m);case 4:case"end":return i.stop()}},j)}));return function(s){return N.apply(this,arguments)}}()},24805:function(W,I,t){"use strict";t.d(I,{Hb:function(){return T},Ur:function(){return ve},cN:function(){return le},ej:function(){return w}});var C=t(15009),a=t.n(C),G=t(99289),c=t.n(G),k=t(47520),O="/v1/skill/skill_info/",U="/v1/skill/skill_update/",d="/v1/skill/skill_publish/",te="/v1/skill/skill_run",T=function(){var Q=c()(a()().mark(function H(B,N){var j;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,k.ZP)("".concat(O).concat(B),{method:"GET",data:{publish_status:N=="true"?1:0}});case 2:return j=m.sent,m.abrupt("return",j);case 4:case"end":return m.stop()}},H)}));return function(B,N){return Q.apply(this,arguments)}}(),w=function(){var Q=c()(a()().mark(function H(B){var N;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,k.ZP)("".concat(U).concat(B.app_id),{method:"PUT",data:B.data});case 2:return N=s.sent,s.abrupt("return",N);case 4:case"end":return s.stop()}},H)}));return function(B){return Q.apply(this,arguments)}}(),le=function(){var Q=c()(a()().mark(function H(B){var N;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,k.ZP)("".concat(d).concat(B),{method:"PUT"});case 2:return N=s.sent,s.abrupt("return",N);case 4:case"end":return s.stop()}},H)}));return function(B){return Q.apply(this,arguments)}}(),ve=function(){var Q=c()(a()().mark(function H(B){var N;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,k.ZP)("".concat(te),{method:"POST",data:B});case 2:return N=s.sent,s.abrupt("return",N);case 4:case"end":return s.stop()}},H)}));return function(B){return Q.apply(this,arguments)}}()},31664:function(W,I,t){"use strict";t.r(I),t.d(I,{default:function(){return nt}});var C=t(97857),a=t.n(C),G=t(15009),c=t.n(G),k=t(99289),O=t.n(k),U=t(5574),d=t.n(U),te=t(83510),T=t(24805),w=t(10759),le=t(32332),ve=t(2068),Q=t(89035),H=t(81644),B=t(15360),N=t(82826),j=t(35312),s=t(40741),m=t(45360),L=t(28036),i=t(50136),Me=t(74330),E=t(67294),Ue=t(13769),Se=t.n(Ue),he=t(92939),Ce=t(51042),Pe=t(82061),q=t(26915),Oe=t(72269),Ze=t(34041),e=t(85893),He=["key","name"],wt=q.Z.TextArea,Ke=function(l){var b=l.FirstValue,P=l.FirstSkillref,_=l.Skillinfo,v=l.setSkillInfo,ne=l.Operationbentate,ie=l.firstjudgingcondition,J=l.pageKeyfun,y=l.skillmenudisabled,ue=l.setskillmenudisabled,o=(0,j.useIntl)();(0,E.useEffect)(function(){},[]);var ee=function(D){v(a()(a()({},_),{},{is_public:D?1:0}))},f=function(D,se){var X=new w.Kr("output","","");D.users.forEach(function(S){var Z=new w._w(S.name,S.type?S.type:"string","",S.content,S.status);X.addProperty(S.name,Z)});var K={input_variables:X,is_public:_.is_public};b(K)},V=function(){ie(P.getFieldsValue().users,1)||P.validateFields().then(function(D){J("2"),ue(a()(a()({},y),{},{second:!1}))}).catch(function(D){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:o.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",onFinish:function(D){b(D)},style:{width:900},autoComplete:"off",form:P,children:[(0,e.jsx)(s.Z.List,{name:"users",children:function(D,se){var X=se.add,K=se.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:o.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[_&&_.name,"\xA0"]})]}),(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:o.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:_&&_.description})]}),(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(he.Z,{className:"font-medium text-xs text-[#555555]",name:o.formatMessage({id:"skill.teamvisibility"}),title:o.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(Oe.Z,{size:"small",onChange:ee,checked:!!(_&&_.is_public==1)})]}),(0,e.jsxs)("div",{className:"mb-[11px] text-xs font-bold flex justify-between items-center",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:(0,e.jsx)(he.Z,{required:!0,name:o.formatMessage({id:"skill.inputvariable"}),title:o.formatMessage({id:"skill.Callword.inputvariable"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(L.ZP,{type:"link",onClick:function(){return X()},block:!0,icon:(0,e.jsx)(Ce.Z,{}),children:o.formatMessage({id:"skill.add"})})})]}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-[10px]",children:o.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:o.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-36 mr-[100px]",children:o.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"w-14 mr-[90px]",children:o.formatMessage({id:"skill.variable.required"})}),(0,e.jsx)("div",{children:o.formatMessage({id:"skill.variable.operation"})})]}),(0,e.jsx)("div",{children:D.map(function(S){var Z=S.key,p=S.name,h=Se()(S,He);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(s.Z.Item,a()(a()({className:"m-0"},h),{},{name:[p,"name"],rules:[{required:!0,message:o.formatMessage({id:"skill.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:o.formatMessage({id:"skill.rules.verifydescription"})}],children:(0,e.jsx)(q.Z,{placeholder:o.formatMessage({id:"skill.variable.name"}),className:"w-48 mr-5"})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"m-0"},h),{},{name:[p,"content"],rules:[{required:!0,message:o.formatMessage({id:"skill.rules.displayname"})}],children:(0,e.jsx)(q.Z,{placeholder:o.formatMessage({id:"skill.variable.display"}),className:"w-52 mr-5"})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"w-36 mr-[110px] m-0"},h),{},{name:[p,"type"],children:(0,e.jsx)(Ze.Z,{defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"}]})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"w-12 mr-[100px] m-0"},h),{},{name:[p,"status"],children:(0,e.jsx)(Oe.Z,{size:"small"})})),(0,e.jsx)(s.Z.Item,{children:P&&P.getFieldsValue().users.length>1?(0,e.jsx)(Pe.Z,{onClick:function(){return K(p)}}):null})]},Z)})})]})}}),(0,e.jsxs)("div",{className:"mt-[20px]",children:[(0,e.jsx)(L.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){V()},children:o.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(L.ZP,{onClick:function(){history.back()},children:o.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},$e=Ke,Te=t(92485),We=function(l){var b=l.SecondValue,P=l.handleBack,_=l.Skillinfo,v=l.setSkillInfo,ne=l.SkillRelyOn,ie=l.setSkillRelyOn,J=l.Secondref,y=l.setskillcodestate,ue=l.setNewcode,o=l.pageKeyfun,ee=l.skillmenudisabled,f=l.setskillmenudisabled,V=(0,j.useIntl)();(0,E.useEffect)(function(){},[]);var z=function(S){ie(S)},D=function(S){y(S===""),ue(JSON.stringify({python3:S}))},se=function(S){var Z={dependencies:{python3:ne?ne.split(","):[]},code:_.code?_.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})};b(Z)},X=function(){o("3"),f(a()(a()({},ee),{},{thirdly:!1}))};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:V.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:J,children:[(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(he.Z,{className:"font-medium",name:V.formatMessage({id:"skill.dependency"}),title:V.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Ze.Z,{mode:"tags",style:{width:"100%"},value:ne,onChange:z,tokenSeparators:[","]})]}),(0,e.jsxs)(s.Z.Item,{children:[(0,e.jsx)("div",{className:"",children:V.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-[345px]",children:(0,e.jsx)(Te.Z,{language:"python3",value:_&&_.code?JSON.parse(_.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,onChange:D,title:"python3"})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(L.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){X()},children:V.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(L.ZP,{onClick:function(){history.back()},children:V.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Je=We,xe=t(78045),Xe=["key","name"],Nt=q.Z.TextArea,Mt=q.Z.Search,Ye=function(l){var b=l.ThirdlyValue,P=l.Thirdlyref,_=l.handleBack,v=l.Skillinfo,ne=l.setSkillInfo,ie=l.Operationbentate,J=l.firstjudgingcondition,y=l.pageKeyfun,ue=l.skillmenudisabled,o=l.setskillmenudisabled,ee=l.skillupdata,f=(0,j.useIntl)(),V=(0,E.useState)(null),z=d()(V,2),D=z[0],se=z[1];(0,E.useEffect)(function(){},[]);var X=function(p){ne(a()(a()({},v),{},{output_type:p.target.value}))},K=function(p){var h=new w.Kr("output","","");p.users.forEach(function(r){var x=new w._w(r.name,r.type?r.type:"string","",r.content,!1);h.addProperty(r.name,x)});var R={output_type:v.output_type,output_variables:h};b(R)},S=function(){J(P.getFieldsValue().users,2)||P.validateFields().then(function(p){ee()}).catch(function(p){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsxs)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:[" ",f.formatMessage({id:"skill.menu.output"})]})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",onFinish:K,style:{width:900},autoComplete:"off",form:P,children:[(0,e.jsx)(s.Z.List,{name:"users",children:function(p,h){var R=h.add,r=h.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(he.Z,{name:f.formatMessage({id:"skill.outputvariable"}),title:f.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(xe.ZP.Group,{onChange:X,value:v&&v.output_type,children:[(0,e.jsx)(xe.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(xe.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(xe.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(xe.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.file"})})})]})]}),(0,e.jsxs)("div",{className:"mb-[11px] text-[#555555] text-xs font-medium flex justify-between items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)(he.Z,{required:!0,name:f.formatMessage({id:"skill.outputv"}),title:f.formatMessage({id:"skill.Callword.outputv"})})}),(0,e.jsx)("div",{children:(0,e.jsx)(L.ZP,{type:"link",onClick:function(){return R()},block:!0,icon:(0,e.jsx)(Ce.Z,{}),children:f.formatMessage({id:"skill.add"})})})]}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-[290px] ml-2.5",children:f.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-[290px]",children:f.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-[240px]",children:f.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"",children:f.formatMessage({id:"skill.variable.operation"})})]}),p.map(function(x){var F=x.key,$=x.name,re=Se()(x,Xe);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(s.Z.Item,a()(a()({},re),{},{name:[$,"name"],rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:f.formatMessage({id:"skill.rules.verifydescription"})}],className:"m-0",children:(0,e.jsx)(q.Z,{placeholder:f.formatMessage({id:"skill.variable.name"}),className:"w-[270px] mr-[20px]"})})),(0,e.jsx)(s.Z.Item,a()(a()({className:"m-0"},re),{},{name:[$,"content"],rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})}],children:(0,e.jsx)(q.Z,{placeholder:f.formatMessage({id:"skill.variable.display"}),className:"w-[260px] mr-[20px]"})})),(0,e.jsx)(s.Z.Item,a()(a()({},re),{},{name:[$,"type"],children:(0,e.jsx)(Ze.Z,{style:{width:"150px",marginRight:"115px"},placeholder:"Please select",defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"}]})})),(0,e.jsx)(s.Z.Item,{children:P&&P.getFieldsValue().users.length>1?(0,e.jsx)(Pe.Z,{onClick:function(){return r($)}}):null})]})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(L.ZP,{type:"primary",className:"mr-[20px] mt-[30px]",onClick:function(){S()},children:[" ",f.formatMessage({id:"skill.btn.savedebug"})]}),(0,e.jsx)(L.ZP,{onClick:function(){history.back()},children:f.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Qe=Ye,qe=t(49677),et=t.n(qe),tt=["key","name"],Ct=q.Z.TextArea,Pt=q.Z.Search,st=function(l){var b=l.FourthlyValue,P=l.Fourthlyref,_=l.handleBack,v=l.Skillinfo,ne=l.Operationbentate,ie=l.skillid,J=l.app_id,y=(0,j.useIntl)(),ue=(0,E.useState)(null),o=d()(ue,2),ee=o[0],f=o[1],V=(0,E.useState)(!1),z=d()(V,2),D=z[0],se=z[1];(0,E.useEffect)(function(){},[]);var X=function(){var p=O()(c()().mark(function h(){var R;return c()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,T.cN)(J||v.app_id);case 2:R=x.sent,R.code==0?m.ZP.success(y.formatMessage({id:"skill.publishsuccess"})):m.ZP.error(y.formatMessage({id:"skill.select.value"}));case 4:case"end":return x.stop()}},h)}));return function(){return p.apply(this,arguments)}}(),K=function(h){var R=h.users.filter(function(F,$){return F.type=="number"&&!Number(F.value)&&!!F.value});if(R.length>0)m.ZP.warning(y.formatMessage({id:"skill.message.warning.vlaue"}));else{se(!0);var r=new w.Kr("output","","");h.users.forEach(function(F){var $=new w._w(F.name,F.type,F.type=="string"?F.value:Number(F.value),F.content,F.status);r.addProperty(F.name,$)});var x={skill_id:ie||v.id,input_dict:r};S(x)}},S=function(){var p=O()(c()().mark(function h(R){return c()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:(0,T.Ur)(R).then(function(F){m.ZP.success(y.formatMessage({id:"skill.run.success"})),f(F.data.outputs),se(!1)}).catch(function(F){se(!1),F.code==="ERR_NETWORK"&&m.ZP.error(y.formatMessage({id:"skill.run.error"})),console.log(F,"err-===>")});case 1:case"end":return x.stop()}},h)}));return function(R){return p.apply(this,arguments)}}(),Z=function(){var p=O()(c()().mark(function h(){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:j.history.push("/Skill?app_id=".concat(J||(v==null?void 0:v.app_id),"&type=false")),location.reload();case 2:case"end":return r.stop()}},h)}));return function(){return p.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:y.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(s.Z,{name:"dynamic_form_nest_item",onFinish:K,style:{width:900},autoComplete:"off",form:P,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsxs)("div",{children:[" ",y.formatMessage({id:"skill.inputvariable"})]})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:y.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:y.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(s.Z.List,{name:"users",children:function(h,R){return et()(R),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:h.map(function(r){var x=r.key,F=r.name,$=Se()(r,tt);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(s.Z.Item,a()(a()({},$),{},{name:[F,"content"],children:(0,e.jsx)(q.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless"})})),(0,e.jsx)(s.Z.Item,a()(a()({},$),{},{name:[F,"value"],rules:[{required:!!(P.getFieldsValue()&&P.getFieldsValue().users[x].status==!0),message:y.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(q.Z,{placeholder:P.getFieldsValue()&&P.getFieldsValue().users[x].status==!0?y.formatMessage({id:"skill.variantcontent.required"}):y.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(s.Z.Item,{rules:[{required:!0,message:y.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:y.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Me.Z,{spinning:D,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:ee?(0,e.jsx)(Te.Z,{language:"python3",value:ee&&JSON.stringify(ee)}):null}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(L.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:y.formatMessage({id:"skill.run"})})})})]})})]})]}),(0,e.jsx)("div",{className:"w-28",children:(v==null?void 0:v.publish_status)===1&&(v==null?void 0:v.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsxs)(L.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:Z,children:[" ",y.formatMessage({id:"skill.amend"})]})}):(0,e.jsx)("div",{children:(0,e.jsxs)(L.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:X,children:[" ",y.formatMessage({id:"skill.publish"})]})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},at=st,lt=function(){var l,b=(0,j.useIntl)(),P=s.Z.useForm(),_=d()(P,1),v=_[0],ne=s.Z.useForm(),ie=d()(ne,1),J=ie[0],y=s.Z.useForm(),ue=d()(y,1),o=ue[0],ee=s.Z.useForm(),f=d()(ee,1),V=f[0],z=(0,E.useState)(0),D=d()(z,2),se=D[0],X=D[1],K=(0,E.useState)("1"),S=d()(K,2),Z=S[0],p=S[1],h=(0,E.useState)(null),R=d()(h,2),r=R[0],x=R[1],F=(0,E.useState)(null),$=d()(F,2),re=$[0],Fe=$[1],it=(0,E.useState)(!0),Ee=d()(it,2),we=Ee[0],Ot=Ee[1],rt=(0,E.useState)(!1),Ie=d()(rt,2),Tt=Ie[0],dt=Ie[1],ut=(0,E.useState)(null),_e=d()(ut,2),be=_e[0],ot=_e[1],ct=(0,E.useState)(null),Ve=d()(ct,2),ge=Ve[0],Re=Ve[1],mt=(0,E.useState)(null),De=d()(mt,2),ft=De[0],Ae=De[1],pt=(0,E.useState)(!1),Be=d()(pt,2),vt=Be[0],ye=Be[1],ht=(0,E.useState)({first:!1,second:!1,thirdly:!1,fourthly:!1}),Le=d()(ht,2),de=Le[0],ce=Le[1],xt=[{key:"1",disabled:de.first,icon:(0,e.jsx)(ve.Z,{}),label:b.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:Z=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:de.second,icon:(0,e.jsx)(Q.Z,{}),label:b.formatMessage({id:"skill.menu.code"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:Z=="2"?"#1B64F3":"#213044"}},{key:"3",disabled:de.thirdly,icon:(0,e.jsx)(H.Z,{}),label:b.formatMessage({id:"skill.menu.output"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:Z=="3"?"#1B64F3":"#213044"}},{key:"4",disabled:de.fourthly,icon:(0,e.jsx)(B.Z,{}),label:b.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:Z=="4"?"#1B64F3":"#213044"}}];(0,E.useEffect)(function(){ye(!0);var A=new URLSearchParams(window.location.search);A.get("app_id")||ce({first:!1,second:!0,thirdly:!0,fourthly:!0}),ze()},[]);var ze=function(){var A=O()(c()().mark(function u(M){var n,g,Y,ke,ae;return c()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(n=new URLSearchParams(window.location.search),g=null,!(n.get("app_id")||M)){oe.next=10;break}return oe.next=5,(0,T.Hb)(M||n.get("app_id"),n.get("type"));case 5:g=oe.sent,Re(g.data.app_id),Ae(g.data.id),oe.next=11;break;case 10:g=(0,le.iJ)();case 11:ye(!1),g.code==0?(x(g.data),Y=me(g.data.input_variables),v.setFieldsValue(Y),Fe(g.data.dependencies?g.data.dependencies.python3:[]),ke=me(g.data.output_variables),o.setFieldsValue(ke),ae=me(g.data.input_variables),V.setFieldsValue(ae)):m.ZP.error(b.formatMessage({id:"skill.message.listerror"}));case 13:case"end":return oe.stop()}},u)}));return function(M){return A.apply(this,arguments)}}(),me=function(u){var M={users:u&&u.properties?Object.values(u.properties).map(function(n){return{name:n.name,type:n.type,content:n.display_name,status:n.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return M},fe=function(){var A=O()(c()().mark(function u(M,n){var g,Y;return c()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return g={app_id:n||ge,data:M},ae.next=3,(0,T.ej)(g);case 3:Y=ae.sent,ye(!1),Y.code===0&&(m.ZP.success(b.formatMessage({id:"skill.conserve.success"})),ze(n||ge),ye(!1));case 6:case"end":return ae.stop()}},u)}));return function(M,n){return A.apply(this,arguments)}}(),gt=function(){history.back()},yt=function(u,M){fe(u,M);var n=me(u.input_variables);V.setFieldsValue(n)},kt=function(u){fe(u)},jt=function(u){fe(u)},bt=function(u){fe(u)},Ne=function(u){X(u)},St=function(u){p(u.key)},Zt=function(){if(ye(!0),!ge)(0,te.uy)((0,le.Go)("GET")).then(function(n){Re(n.data.app_id),(0,T.Hb)(n.data.app_id,!1).then(function(g){Ae(g.data.id);var Y={};Y={input_variables:pe(v.getFieldsValue()),is_public:r.is_public,dependencies:{python3:re||[]},code:be||(r.code?r.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:r.output_type,output_variables:pe(o.getFieldsValue())};var ke=me(pe(v.getFieldsValue()));V.setFieldsValue(ke),fe(Y,n.data.app_id);var ae=a()(a()({},(0,le.Go)("GET")),{},{app_id:n.data.app_id});(0,le.Go)("SET",ae),p("4"),ce(a()(a()({},de),{},{fourthly:!1}))}).catch(function(g){})}).catch(function(n){});else{var u={input_variables:pe(v.getFieldsValue()),is_public:r.is_public,dependencies:{python3:re||[]},code:be||(r.code?r.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:r.output_type,output_variables:pe(o.getFieldsValue())},M=me(pe(v.getFieldsValue()));V.setFieldsValue(M),fe(u,ge),p("4"),ce(a()(a()({},de),{},{fourthly:!1}))}},Ge=function(u,M){var n=u.filter(function(g){return!g||!g.name||!g.content});if(u[0]){if(n.length!==0)return m.ZP.warning("".concat(M===1?b.formatMessage({id:"skill.message.inputerror3"}):b.formatMessage({id:"skill.message.inputerror4"}))),!0}else return m.ZP.warning("".concat(M===1?b.formatMessage({id:"skill.message.inputerror1"}):b.formatMessage({id:"skill.message.inputerror2"}))),!0;return Ft(u,"name")?(m.ZP.warning(b.formatMessage({id:"skill.message.inputerror5"})),!0):!1},Ft=function(u,M){var n=new Set;return u.some(function(g){var Y=g[M];return n.has(Y)?n.add(Y):n.add(Y)&&!1})},pe=function(u){var M=new w.Kr("output","","");return u.users.forEach(function(n){var g=new w._w(n.name,n.type?n.type:"string",n.value?n.value:"",n.content,n.status?n.status:!1);M.addProperty(n.name,g)}),M};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(L.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:gt,children:[(0,e.jsx)(N.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:b.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(i.Z,{selectedKeys:[Z],onClick:St,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[Z],mode:"inline",items:xt})})]}),(0,e.jsx)(Me.Z,{spinning:vt,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px] ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsx)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:(l=(0,le.Go)("GET"))!==null&&l!==void 0&&l.app_id?b.formatMessage({id:"skill.Editingskill"}):b.formatMessage({id:"skill.Creatingskill"})}),(r==null?void 0:r.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:b.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE]  text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:b.formatMessage({id:"skill.unpublish"})})]})}),(0,e.jsx)("div",{style:{display:Z==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)($e,{FirstValue:yt,Skillinfo:r,setSkillInfo:x,FirstSkillref:v,Operationbentate:we,firstjudgingcondition:Ge,pageKeyfun:p,skillmenudisabled:de,setskillmenudisabled:ce})}),(0,e.jsx)("div",{style:{display:Z==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Je,{SecondValue:kt,handleBack:Ne,Skillinfo:r,setSkillInfo:x,SkillRelyOn:re,setSkillRelyOn:Fe,Secondref:J,setskillcodestate:dt,setNewcode:ot,pageKeyfun:p,skillmenudisabled:de,setskillmenudisabled:ce})}),(0,e.jsx)("div",{style:{display:Z==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Qe,{ThirdlyValue:jt,handleBack:Ne,Thirdlyref:o,Skillinfo:r,setSkillInfo:x,Operationbentate:we,firstjudgingcondition:Ge,pageKeyfun:p,skillmenudisabled:de,setskillmenudisabled:ce,skillupdata:Zt})}),(0,e.jsx)("div",{style:{display:Z==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(at,{FourthlyValue:bt,handleBack:Ne,Fourthlyref:V,Skillinfo:r,skillid:ft,app_id:ge,Operationbentate:we})})]})})})]})},nt=lt},49677:function(W){function I(t){if(t==null)throw new TypeError("Cannot destructure "+t)}W.exports=I,W.exports.__esModule=!0,W.exports.default=W.exports}}]);
