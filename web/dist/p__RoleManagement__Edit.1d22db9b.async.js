"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2049],{82826:function(R,_,e){e.d(_,{Z:function(){return n}});var m=e(1413),t=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},M=f,g=e(91146),i=function(v,d){return t.createElement(g.Z,(0,m.Z)((0,m.Z)({},v),{},{ref:d,icon:M}))},E=t.forwardRef(i),n=E},19171:function(R,_,e){e.r(_);var m=e(15009),t=e.n(m),f=e(99289),M=e.n(f),g=e(5574),i=e.n(g),E=e(82826),n=e(40741),h=e(45360),v=e(74330),d=e(28036),B=e(4393),j=e(26915),I=e(84567),D=e(67294),C=e(35312),U=e(32060),s=e(85893),Z=function(P){var N=P.permissionsList,l=P.roleDetail,w=P.onClose,a=(0,C.useIntl)(),K=n.Z.useForm(),W=i()(K,1),p=W[0],y=(0,D.useState)(!1),A=i()(y,2),H=A[0],k=A[1],S=(0,D.useState)(!1),x=i()(S,2),L=x[0],b=x[1];(0,D.useEffect)(function(){if(l){var o=l.permissions.map(function(u){return u.id});p.setFieldsValue({name:l.name,description:l.description,permissions:o})}},[l,p]);var F=function(){var o=M()(t()().mark(function u(c){var O;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(l){r.next=2;break}return r.abrupt("return");case 2:return b(!0),r.prev=3,r.next=6,(0,U.ul)({id:l.id,name:c.name,description:c.description,list:c.permissions});case 6:O=r.sent,O.code===0?(h.ZP.success(a.formatMessage({id:"workflow.roleManagement.updateSuccess"})),w()):h.ZP.error(O.message||"Failed to update role"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),console.error("Failed to update role:",r.t0);case 13:return r.prev=13,b(!1),r.finish(13);case 16:case"end":return r.stop()}},u,null,[[3,10,13,16]])}));return function(c){return o.apply(this,arguments)}}(),T=function(){w()};return l?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)(d.ZP,{type:"text",icon:(0,s.jsx)(E.Z,{}),onClick:T,className:"mr-4",children:a.formatMessage({id:"workflow.roleManagement.back"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:a.formatMessage({id:"workflow.roleManagement.editRole"})})]}),(0,s.jsx)(B.Z,{children:(0,s.jsxs)(n.Z,{form:p,layout:"vertical",onFinish:F,disabled:L,children:[(0,s.jsx)(n.Z.Item,{name:"name",label:a.formatMessage({id:"workflow.roleManagement.roleName"}),rules:[{required:!0,message:a.formatMessage({id:"workflow.roleManagement.roleNameRequired"})},{max:50,message:a.formatMessage({id:"workflow.roleManagement.roleNameMaxLength"})}],children:(0,s.jsx)(j.Z,{placeholder:a.formatMessage({id:"workflow.roleManagement.roleNamePlaceholder"})})}),(0,s.jsx)(n.Z.Item,{name:"description",label:a.formatMessage({id:"workflow.roleManagement.description"}),rules:[{required:!0,message:a.formatMessage({id:"workflow.roleManagement.descriptionRequired"})},{max:200,message:a.formatMessage({id:"workflow.roleManagement.descriptionMaxLength"})}],children:(0,s.jsx)(j.Z.TextArea,{rows:4,placeholder:a.formatMessage({id:"workflow.roleManagement.descriptionPlaceholder"})})}),(0,s.jsx)(n.Z.Item,{name:"permissions",label:a.formatMessage({id:"workflow.roleManagement.permissions"}),rules:[{required:!0,message:a.formatMessage({id:"workflow.roleManagement.permissionsRequired"})}],children:(0,s.jsx)(I.Z.Group,{className:"w-full",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(function(o){return(0,s.jsx)(I.Z,{value:o.id,className:"whitespace-nowrap",children:o.title},o.id)})})})}),(0,s.jsx)(n.Z.Item,{className:"mb-0",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(d.ZP,{type:"primary",htmlType:"submit",loading:L,children:a.formatMessage({id:"workflow.roleManagement.update"})}),(0,s.jsx)(d.ZP,{onClick:T,children:a.formatMessage({id:"workflow.roleManagement.cancel"})})]})})]})})]}):(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)(v.Z,{size:"large"})})})};_.default=Z}}]);
