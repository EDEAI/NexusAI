"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[178],{83510:function(Kt,Ue,n){n.d(Ue,{LK:function(){return ze},bs:function(){return _e},go:function(){return rt},uy:function(){return Pe}});var at=n(15009),Y=n.n(at),st=n(99289),Z=n.n(st),re=n(47520),ee="/v1/apps/apps_list",nt="/v1/agent/agent_delete/",t="/v1/workflow/workflow_app_delete/",it="/v1/vector/delete_dataset/",g="/v1/skill/delete_skill_by_app_id/",z="/v1/apps/apps_create",lt="/v1/apps/app_update/",rt=function(){var oe=Z()(Y()().mark(function R(M){var $;return Y()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,re.ZP)("".concat(ee),{method:"GET",data:M});case 2:return $=c.sent,c.abrupt("return",$);case 4:case"end":return c.stop()}},R)}));return function(M){return oe.apply(this,arguments)}}(),ze=function(){var oe=Z()(Y()().mark(function R(M){var $;return Y()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log(M),c.next=3,M.mode;case 3:if(c.t0=c.sent,c.t0!=1){c.next=8;break}c.t1=(0,re.ZP)("".concat(nt).concat(M.app_id),{method:"DELETE"}),c.next=9;break;case 8:c.t1=M.mode==2?(0,re.ZP)("".concat(t).concat(M.app_id),{method:"DELETE"}):M.mode==3?(0,re.ZP)("".concat(it).concat(M.app_id),{method:"DELETE"}):(0,re.ZP)("".concat(g).concat(M.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return $=c.t1,c.abrupt("return",$);case 11:case"end":return c.stop()}},R)}));return function(M){return oe.apply(this,arguments)}}(),Pe=function(){var oe=Z()(Y()().mark(function R(M){var $;return Y()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,re.ZP)("".concat(z),{method:"POST",data:M});case 2:return $=c.sent,c.abrupt("return",$);case 4:case"end":return c.stop()}},R)}));return function(M){return oe.apply(this,arguments)}}(),_e=function(){var oe=Z()(Y()().mark(function R(M){var $;return Y()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,re.ZP)("".concat(lt).concat(M.app_id),{method:"PUT",data:M});case 2:return $=c.sent,c.abrupt("return",$);case 4:case"end":return c.stop()}},R)}));return function(M){return oe.apply(this,arguments)}}()},6180:function(Kt,Ue,n){n.r(Ue),n.d(Ue,{default:function(){return ba}});var at=n(19632),Y=n.n(at),st=n(15009),Z=n.n(st),re=n(99289),ee=n.n(re),nt=n(97857),t=n.n(nt),it=n(5574),g=n.n(it),z=n(11551),lt=n(83510),rt=n(47520),ze=n(29432),Pe=n(10759),_e=n(32332),oe=n(2068),R=n(89035),M=n(15360),$=n(82826),Be=n(69243),c=n(35312),w=n(40741),E=n(45360),de=n(28036),Ht=n(50136),ot=n(25409),Ft=n(74330),f=n(67294),ue=n(92939),Xt=n(85750),Yt=n(5608),Jt=n(58299),Ne=n(26915),Ge=n(72269),dt=n(34041),Zt=n(66309),G=n(78045),Mt=n(44010),Le=n(51042),ut=n(82061),kt=n(80459),e=n(85893),Qt=Ne.Z.TextArea,qt=function(o){var te,A,I,j,ae,Oe=o.loading,ce=o.FirstValue,a=o.Detaillist,C=o.setDetaillist,Fe=o.repository,S=o.setRepository,_=o.Operationbentate,je=o.Ffromref,se=o.setFourthly_config_id,Ze=o.Fourthly_config_id,me=o.Fourthly_select_list,pe=o.Newproperties,ye=o.setNewproperties,ge=o.pageKeyfun,v=o.firstjudgingcondition,ne=o.setAgentmunudisabled,Se=o.agentmenudisabled,d=(0,c.useIntl)(),Ce=(0,f.useState)([]),K=g()(Ce,2),N=K[0],H=K[1],B=(0,f.useState)(!1),O=g()(B,2),fe=O[0],Ae=O[1],J=(0,f.useState)([]),ie=g()(J,2),he=ie[0],ve=ie[1],Ke=(0,f.useState)([]),D=g()(Ke,2),b=D[0],y=D[1],V=(0,f.useState)(!1),L=g()(V,2),P=L[0],W=L[1],He=(0,f.useState)(!1),Xe=g()(He,2),mt=Xe[0],Me=Xe[1],De=(0,f.useState)({agent_id:0,data:{is_public:1,enable_api:0,obligations:null,input_variables:{},dataset_ids:[],attrs_are_visible:1}}),ke=g()(De,2),X=ke[0],we=ke[1];(0,f.useEffect)(function(){var i,s;if(ft(),a!=null&&(i=a.agent)!==null&&i!==void 0&&i.selected_skills&&ve(a.agent.selected_skills),a!=null&&(s=a.agent)!==null&&s!==void 0&&s.selected_workflows){var x;y(a==null||(x=a.agent)===null||x===void 0?void 0:x.selected_workflows)}},[a,a==null?void 0:a.agent]);var At=function(s){se(s)},Dt=function(s){we(t()(t()({},X),{},{data:t()(t()({},X.data),{},{obligations:s.target.value})})),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{obligations:s.target.value})}))},Et=function(s,x){var T=new Set;return s.some(function(U){var q=U[x];return T.has(q)?T.add(q):T.add(q)&&!1})},Ye=function(s){C(t()(t()({},a),{},{app:t()(t()({},a.app),{},{is_public:s?1:0})})),we(t()(t()({},X),{},{data:t()(t()({},X.data),{},{is_public:s?1:0})}))},Je=function(s){C(t()(t()({},a),{},{app:t()(t()({},a.app),{},{enable_api:s?1:0})})),we(t()(t()({},X),{},{data:t()(t()({},X.data),{},{enable_api:s?1:0})}))},pt=function(s){C(t()(t()({},a),{},{app:t()(t()({},a.app),{},{attrs_are_visible:s?1:0})})),we(t()(t()({},X),{},{data:t()(t()({},X.data),{},{attrs_are_visible:s?1:0})}))},Tt=function(s){C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{allow_upload_file:s?1:0})}))},gt=function(s){C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{mcp:s?1:0})}))},xe=function(s){we(t()(t()({},X),{},{data:t()(t()({},X.data),{},{dataset_ids:s})})),S(s)},ft=function(){var i=ee()(Z()().mark(function s(){var x;return Z()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,z.zl)();case 2:x=U.sent,H(x.data.data.map(function(q){return{value:q.dataset_id,label:q.name}}));case 4:case"end":return U.stop()}},s)}));return function(){return i.apply(this,arguments)}}(),It=function(s){ve(s),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:s})}))},ht=function(s){y(s),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:s})}))},Q=function(){var i=ee()(Z()().mark(function s(){return Z()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:v()||(ge("2"),ne(t()(t()({},Se),{},{first:!1,second:!1})));case 1:case"end":return T.stop()}},s)}));return function(){return i.apply(this,arguments)}}(),Ee=function(s){C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{default_output_format:s.target.value})}))},vt=function(s){C(t()(t()({},a),{},{agent:t()(t()({},a==null?void 0:a.agent),{},{input_variables:s.free})}))},Ve=(0,Jt.m)(),Qe=Ve.options,xt=Ve.defaultValue,bt=function(s){ve(s.checkItem),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:s.checkItem})})),W(!1)},qe=function(s){y(s.checkItem),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:s.checkItem})})),Me(!1)},jt=function(){W(!1)},yt=function(){Me(!1)},St=function(s){var x=he.filter(function(T){return T.app_id!==s.app_id});ve(x),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:x})}))},et=function(s){var x=b.filter(function(T){return T.app_id!==s.app_id});y(x),C(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:x})}))};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:d.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(w.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:je,children:[(0,e.jsx)(w.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:d.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:_==="true"?d.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(w.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:d.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})}),(0,e.jsx)(w.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ue.Z,{className:"font-medium",name:d.formatMessage({id:"agent.teamvisibility"}),title:d.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(Ge.Z,{size:"small",onChange:Ye,checked:!!(a&&((te=a.app)===null||te===void 0?void 0:te.is_public)===1)})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ue.Z,{className:"font-medium",name:d.formatMessage({id:"agent.attrVisible"}),title:d.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(Ge.Z,{size:"small",onChange:pt,checked:a&&((A=a.app)===null||A===void 0?void 0:A.attrs_are_visible)===1})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:d.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(Ge.Z,{size:"small",onChange:Je,checked:a&&((I=a.app)===null||I===void 0?void 0:I.enable_api)===1,disabled:(a==null||(j=a.app)===null||j===void 0?void 0:j.publish_status)!==1})]})]})}),(0,e.jsx)(w.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:[(0,e.jsx)("span",{className:"text-[#E80000]",children:"* "}),d.formatMessage({id:"agent.LLMmodel"})]}),(0,e.jsx)(dt.Z,{placeholder:d.formatMessage({id:"agent.pleaseselect"}),value:Ze==0?d.formatMessage({id:"agent.pleaseselect"}):Ze,variant:"filled",onChange:At,options:Qe,optionRender:function(s){var x;return(0,e.jsxs)("div",{children:[s.label," ",(s==null||(x=s.data)===null||x===void 0?void 0:x.support_image)==1&&(0,e.jsx)(Zt.Z,{color:"blue",className:"text-xs",children:d.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})},labelRender:function(s){var x;return(0,e.jsxs)("div",{children:[s==null?void 0:s.label," ",((x=(0,Xt.ti)(s==null?void 0:s.value,{options:Qe}))===null||x===void 0?void 0:x.support_image)==1&&(0,e.jsx)(Zt.Z,{color:"blue",className:"text-xs",children:d.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})}})]})}),(0,e.jsx)(w.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ue.Z,{className:"font-medium",required:!0,name:d.formatMessage({id:"agent.functiondescription"}),title:d.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(Qt,{onChange:Dt,value:a&&a.agent&&a.agent.obligations,placeholder:"Agent".concat(d.formatMessage({id:"agent.functiondescription"})),autoSize:{minRows:8,maxRows:10}})]})}),!fe&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Yt.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ue.Z,{className:"font-medium",required:!0,name:d.formatMessage({id:"agent.inputvariable"}),title:d.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((a==null||(ae=a.agent)===null||ae===void 0||(ae=ae.input_variables)===null||ae===void 0?void 0:ae.properties)||{}),onChange:vt})}),(0,e.jsx)(w.Z.List,{name:"users",children:function(s,x){var T=x.add,U=x.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(w.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(ue.Z,{className:"font-medium",name:d.formatMessage({id:"agent.associatedknowledgebase"}),title:d.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(dt.Z,{size:"large",mode:"multiple",showSearch:!0,style:{width:"100%",fontSize:"12px"},placeholder:d.formatMessage({id:"agent.pleaseselect"}),filterOption:function(Re,Te){var Ie;return((Ie=Te==null?void 0:Te.label)!==null&&Ie!==void 0?Ie:"").toLowerCase().includes(Re.toLowerCase())},value:Fe,onChange:xe,options:N})]}),(0,e.jsx)(w.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",d.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(G.ZP.Group,{value:a&&a.agent.default_output_format,onChange:function(Re){Ee(Re)},children:[(0,e.jsx)(G.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(G.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(G.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})]})})]})}}),(0,e.jsxs)(w.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:d.formatMessage({id:"agent.mcp.resources"})}),(0,e.jsxs)("div",{className:"pl-4 ",children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ue.Z,{className:"font-medium",name:d.formatMessage({id:"agent.selectSkills"}),title:d.formatMessage({id:"agent.explain.selectSkills"})})}),(0,e.jsx)(de.ZP,{type:"link",icon:(0,e.jsx)(Le.Z,{}),onClick:function(){return W(!0)},className:"text-xs",children:d.formatMessage({id:"agent.addSkill"})})]}),he.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:he.map(function(i){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(kt.Z,{rounded:"6px",data:i,bg:i.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:i.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:i.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(x){x.stopPropagation(),St(i)},children:(0,e.jsx)(ut.Z,{})})]},i.app_id)})}):(0,e.jsx)("div",{onClick:function(){return W(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(Le.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:d.formatMessage({id:"agent.addSkill"})})]})}),(0,e.jsx)(Mt.Z,{show:P,popupClose:jt,popupSave:bt,checkList:he,radio:!1,nodetype:"skill",zIndex:30})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ue.Z,{className:"font-medium",name:d.formatMessage({id:"agent.selectWorkflows"}),title:d.formatMessage({id:"agent.explain.selectWorkflows"})})}),(0,e.jsx)(de.ZP,{type:"link",icon:(0,e.jsx)(Le.Z,{}),onClick:function(){return Me(!0)},className:"text-xs",children:d.formatMessage({id:"agent.addWorkflow"})})]}),b.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:b.map(function(i){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(kt.Z,{rounded:"6px",data:i,bg:i.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:i.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:i.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(x){x.stopPropagation(),et(i)},children:(0,e.jsx)(ut.Z,{})})]},i.app_id)})}):(0,e.jsx)("div",{onClick:function(){return Me(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(Le.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:d.formatMessage({id:"agent.addWorkflow"})})]})}),(0,e.jsx)(Mt.Z,{show:mt,popupClose:yt,popupSave:qe,checkList:b,radio:!1,nodetype:"workflow",zIndex:30})]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(de.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){Q()},children:d.formatMessage({id:"agent.btn.nextstep"})}),(0,e.jsx)(de.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"agent.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},ea=qt,ta=n(13769),Pt=n.n(ta),aa=n(49677),sa=n.n(aa),na=n(24216),ia=n(85877),Ct=n(39944),la=n(71471),ra=["key","name"],ka=la.Z.Title,Pa=Ne.Z.TextArea,Ca=Ne.Z.Search,oa=function(o){var te=o.handleBack,A=o.Detaillist,I=o.setDetaillist,j=o.Fourthly_select_list,ae=o.setFourthly_config_id,Oe=o.Fourthly_config_id,ce=o.Fourthlyref,a=o.Fourthly_abilities_list,C=o.Operationbentate,Fe=o.callwordlist,S=o.newagentid,_=(0,c.useIntl)(),je=(0,f.useState)(0),se=g()(je,2),Ze=se[0],me=se[1],pe=(0,f.useState)(""),ye=g()(pe,2),ge=ye[0],v=ye[1],ne=(0,f.useState)(""),Se=g()(ne,2),d=Se[0],Ce=Se[1],K=(0,f.useState)(!1),N=g()(K,2),H=N[0],B=N[1],O=function(b){var y={user:{value:ie(b)}};v(new Ct.z(y))},fe=function(b){var y={user:{value:b.target.value}};v(new Ct.z(y))},Ae=function(b){me(b)},J=function(b){var y=b.users.filter(function(P,W){return P.type=="number"&&!Number(P.value)&&!!P.value});if(!ge.user)E.ZP.warning(_.formatMessage({id:"agent.message.warning.callword"}));else if(y.length>0)E.ZP.warning(_.formatMessage({id:"agent.message.warning.datatype"}));else{B(!0);var V=new Pe.Kr("input","","");b.users.forEach(function(P){var W=new Pe._w(P.name,P.type?P.type:"string",P.type=="string"?P.value:Number(P.value),P.content,P.status);V.addProperty(P.name,W)});var L={agent_id:S||A.agent.agent_id,ability_id:Ze,input_dict:V,prompt:ge};he(L)}},ie=function D(b){return b.map(function(y){return y.type==="mention"?y.id:y.children?D(y.children):y.text}).join("")},he=function(b){(0,z.LH)(b).then(function(y){E.ZP.success(_.formatMessage({id:"agent.message.success.runpublish"})),Ce(y.data.outputs.text),B(!1)}).catch(function(y){B(!1)})},ve=function(){var D=ee()(Z()().mark(function b(){var y;return Z()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,z.Dh)(S||A.agent.agent_id);case 2:y=L.sent,y.code==0?E.ZP.success(_.formatMessage({id:"agent.message.success.publish"})):E.ZP.error(_.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return L.stop()}},b)}));return function(){return D.apply(this,arguments)}}(),Ke=function(){var D=ee()(Z()().mark(function b(){return Z()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:c.history.push("/Agents?app_id=".concat(A.app.app_id,"&type=false")),location.reload();case 2:case"end":return V.stop()}},b)}));return function(){return D.apply(this,arguments)}}();return(0,f.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:_.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(dt.Z,{placeholder:_.formatMessage({id:"agent.pleaseselect"}),defaultValue:_.formatMessage({id:"agent.allability"}),style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:Ae,options:a})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(w.Z,{name:"dynamic_form_nest_item",onFinish:J,style:{width:"100%"},autoComplete:"off",form:ce,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(w.Z.List,{name:"users",children:function(b,y){return sa()(y),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"mr-5 ml-2.5",children:_.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"",children:_.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:b.map(function(V){var L=V.key,P=V.name,W=Pt()(V,ra);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(w.Z.Item,t()(t()({},W),{},{name:[P,"content"],children:(0,e.jsx)(Ne.Z,{className:"mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(w.Z.Item,t()(t()({},W),{},{name:[P,"value"],rules:[{required:!!(ce.getFieldsValue()&&ce.getFieldsValue().users[L].status==!0),message:_.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(Ne.Z,{placeholder:ce.getFieldsValue()&&ce.getFieldsValue().users[L].status==!0?_.formatMessage({id:"agent.variable.required.value"}):_.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(w.Z.Item,{rules:[{required:!0,message:_.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.runpreview"})}),(0,e.jsx)(Ft.Z,{spinning:H,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:d?(0,e.jsx)(na.Z,{language:"python3",value:d&&JSON.stringify(d)}):null}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(ia.Z,{onChange:function(b){O(b)},options:Fe})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(de.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})})]})]})}),(0,e.jsx)("div",{className:"w-28",children:(A==null?void 0:A.agent.publish_status)===1&&(A==null?void 0:A.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(de.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:Ke,children:_.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(de.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:C!="false",onClick:ve,children:_.formatMessage({id:"agent.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},da=oa,ua=["key","name"],ca=Ne.Z.TextArea,ma=function(o){var te=o.SecondValue,A=o.handleBack,I=o.Detaillist,j=o.setDetaillist,ae=o.Sformref,Oe=o.Operationbentate,ce=o.pageKeyfun,a=o.secondjudgingcondition,C=o.SkillMenuClick,Fe=o.agentupdata,S=(0,c.useIntl)(),_=E.ZP.useMessage(),je=g()(_,2),se=je[0],Ze=je[1],me=(0,f.useRef)(null),pe=(0,f.useState)({auto_match_ability:0,agent_abilities:[{agent_ability_id:0,name:"string",content:"string",status:0}]}),ye=g()(pe,2),ge=ye[0],v=ye[1];(0,f.useEffect)(function(){});var ne=function(N){if(N.users.length==1&&(!N.users[0].content&&N.users[0].name||N.users[0].content&&!N.users[0].name))return E.ZP.warning(S.formatMessage({id:"agent.message.warning.selectknowledgebase"}));var H=N.users.map(function(O){return t()(t()({},O),{},{status:O.status?1:2,agent_ability_id:O.agent_ability_id?O.agent_ability_id:0})}),B={agent_id:I.agent.agent_id,data:{auto_match_ability:I.agent.auto_match_ability,agent_abilities:N.users.length==1&&!N.users[0].content&&!N.users[0].name?[]:H}};Oe=="false"&&Se(),te(t()({},ge))},Se=function(){var K=ee()(Z()().mark(function N(){return Z()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:a()||Fe();case 1:case"end":return B.stop()}},N)}));return function(){return K.apply(this,arguments)}}(),d=function(N){j(t()(t()({},I),{},{agent:t()(t()({},I.agent),{},{auto_match_ability:N?1:0})}))},Ce=function(){setTimeout(function(){me.current&&me.current.scrollTo({top:me.current.scrollHeight,behavior:"smooth"})},100)};return(0,e.jsxs)("div",{style:{height:"100%"},className:"w-full flex-1 sticky top-0",children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:S.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(ue.Z,{name:S.formatMessage({id:"agent.automatch"}),title:S.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(Ge.Z,{size:"small",checked:!!(I&&I.agent.auto_match_ability==1),onChange:d})]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(w.Z,{name:"dynamic_form_nest_item",onFinish:ne,style:{width:"100%"},autoComplete:"off",form:ae,children:[(0,e.jsx)(w.Z.List,{name:"users",children:function(N,H){var B=H.add,O=H.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:[(0,e.jsx)("div",{className:" text-[#555555] text-xs font-medium",children:S.formatMessage({id:"agent.capability"})}),(0,e.jsx)("div",{children:(0,e.jsx)(de.ZP,{type:"link",onClick:function(){B(),Ce()},block:!0,icon:(0,e.jsx)(Le.Z,{}),children:S.formatMessage({id:"agent.add"})})})]}),(0,e.jsx)("div",{style:{height:"calc(100vh - 206px)",overflowY:"auto"},className:"overflow-y-auto",ref:me,children:N.map(function(fe){var Ae=fe.key,J=fe.name,ie=Pt()(fe,ua);return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(w.Z.Item,{className:"mb-0",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:S.formatMessage({id:"agent.capabilityname"})}),(0,e.jsxs)("div",{children:[" ",(0,e.jsx)(ut.Z,{onClick:function(){return O(J)}})]})]})}),(0,e.jsx)(w.Z.Item,t()(t()({className:"mb-[20px]"},ie),{},{name:[J,"name"],rules:[{required:N.length!==1,message:S.formatMessage({id:"agent.capabilityname"})}],children:(0,e.jsx)(Ne.Z,{placeholder:S.formatMessage({id:"agent.capabilityname"}),maxLength:50,className:"w-full"})})),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(ue.Z,{className:"text-[#555555] text-xs font-medium",name:S.formatMessage({id:"agent.capabilitydescription"}),title:S.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(w.Z.Item,t()(t()({className:"w-full mb-[20px]"},ie),{},{name:[J,"content"],rules:[{required:N.length!==1,message:S.formatMessage({id:"agent.capabilitydescription"})}],children:(0,e.jsx)(ca,{placeholder:S.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},className:"w-full"})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:S.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(w.Z.Item,t()(t()({className:"mb-[20px]"},ie),{},{name:[J,"status"],children:(0,e.jsxs)(G.ZP.Group,{optionType:"button",buttonStyle:"solid",defaultValue:!0,children:[(0,e.jsx)(G.ZP,{value:!0,children:S.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(G.ZP,{value:!1,children:S.formatMessage({id:"agent.capabilitystatus.disable"})})]})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:S.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(w.Z.Item,{className:"mb-0",name:[J,"output_format"],children:(0,e.jsxs)(G.ZP.Group,{defaultValue:0,children:[(0,e.jsx)(G.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:S.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(G.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(G.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(G.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})})]})})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},pa=ma,ga=n(68709),fa=n(27842),ha=n(96486),va=n.n(ha),xa=function(){var o,te,A,I,j=(0,c.useIntl)(),ae=(0,f.useRef)(null),Oe=w.Z.useForm(),ce=g()(Oe,1),a=ce[0],C=w.Z.useForm(),Fe=g()(C,1),S=Fe[0],_=w.Z.useForm(),je=g()(_,1),se=je[0],Ze=w.Z.useForm(),me=g()(Ze,1),pe=me[0],ye=(0,f.useState)(null),ge=g()(ye,2),v=ge[0],ne=ge[1],Se=(0,f.useState)(0),d=g()(Se,2),Ce=d[0],K=d[1],N=(0,f.useState)(null),H=g()(N,2),B=H[0],O=H[1],fe=(0,f.useState)(null),Ae=g()(fe,2),J=Ae[0],ie=Ae[1],he=(0,f.useState)(null),ve=g()(he,2),Ke=ve[0],D=ve[1],b=(0,f.useState)(null),y=g()(b,2),V=y[0],L=y[1],P=(0,f.useState)(null),W=g()(P,2),He=W[0],Xe=W[1],mt=(0,f.useState)(null),Me=g()(mt,2),De=Me[0],ke=Me[1],X=(0,f.useState)(null),we=g()(X,2),At=we[0],Dt=we[1],Et=(0,f.useState)(null),Ye=g()(Et,2),Je=Ye[0],pt=Ye[1],Tt=(0,f.useState)(null),gt=g()(Tt,2),xe=gt[0],ft=gt[1],It=(0,f.useState)("1"),ht=g()(It,2),Q=ht[0],Ee=ht[1],vt=(0,f.useState)(null),Ve=g()(vt,2),Qe=Ve[0],xt=Ve[1],bt=(0,f.useState)(null),qe=g()(bt,2),jt=qe[0],yt=qe[1],St=(0,f.useState)(null),et=g()(St,2),i=et[0],s=et[1],x=(0,f.useState)(null),T=g()(x,2),U=T[0],q=T[1],Re=(0,f.useState)(!0),Te=g()(Re,2),Ie=Te[0],$e=Te[1],ja=(0,f.useState)({first:!1,second:!1,fourthly:!1}),Bt=g()(ja,2),We=Bt[0],tt=Bt[1],ya=[{key:"1",icon:(0,e.jsx)(oe.Z,{}),label:j.formatMessage({id:"agent.menu.basicsetup"}),disabled:We.first,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",lineHeight:"22px",color:Q=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:We.second,icon:(0,e.jsx)(R.Z,{}),label:j.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:Q=="2"?"#1B64F3":"#213044"}},{key:"5",disabled:We.fourthly,icon:(0,e.jsx)(M.Z,{}),label:j.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:Q=="5"?"#1B64F3":"#213044"}}];(0,f.useEffect)(function(){var k=new URLSearchParams(window.location.search);k.get("app_id")||(tt(t()(t()({},We),{},{first:!1,second:!0,fourthly:!0})),$e(!1)),wt()},[]);var wt=function(){var k=ee()(Z()().mark(function m(u){var l,h,r,p,le,Nt,zt,Gt;return Z()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(h=new URLSearchParams(window.location.search),h.get("from")&&yt(h.get("from")),r=null,!(h.get("app_id")||u)){be.next=10;break}return be.next=6,(0,z.ek)(u||h.get("app_id"),h.get("type"));case 6:r=be.sent,q(r.data.app.app_id),be.next=13;break;case 10:return be.next=12,(0,_e.cI)();case 12:r=be.sent;case 13:p=r.data,le=(l=r.data)===null||l===void 0||(l=l.agent_dataset_relation_list)===null||l===void 0?void 0:l.map(function(F){return F.dataset_id}),O(le),r.data.callable_items&&(r.data.agent.selected_skills=[],r.data.agent.selected_workflows=[],r.data.callable_items.forEach(function(F){F.item_type==1?r.data.agent.selected_skills.push(t()(t()({},F),{},{mode:4})):r.data.agent.selected_workflows.push(t()(t()({},F),{},{mode:2}))})),ne(r.data),ft(r.data.agent.publish_status===0&&r.data.is_creator===1?"false":"true"),r.data.agent.publish_status===1&&E.ZP.warning(j.formatMessage({id:"agent.message.listwarning"}),5),a.setFieldsValue(Lt(p.agent.input_variables)),Nt=r.data.agent_abilities_list.map(function(F){return F.status==1?t()(t()({},F),{},{status:!0}):t()(t()({},F),{},{status:!1})}),se.setFieldsValue({users:Nt[0]?Nt:[{agent_ability_id:0,name:"",content:"",status:!0,output_format:0}]}),D(_t(p.agent_abilities_list)),L(_t(p.agent_abilities_list)),zt=p.agent_abilities_list.filter(function(F){return F.output_format!==0}),S.setFieldsValue({users:zt.map(function(F){return{agent_ability_id:F.agent_ability_id,output_format:F.output_format}})}),pe.setFieldsValue(Lt(p.agent.input_variables)),Xe(p.m_configurations_list.map(function(F){return{value:F.m_config_id?F.m_config_id:F.model_config_id,label:F.m_name?F.m_name:F.model_name}})),p.agent.m_config_id||p.agent.model_config_id?ke(p.agent.m_config_id?p.agent.m_config_id:p.agent.model_config_id):ke(p.m_configurations_list[0].model_config_id),Gt=p.agent_abilities_list.filter(function(F,Da){return F.status===1}),pt(_t(Gt).concat([{value:0,label:j.formatMessage({id:"agent.allability"})}])),$e(!1);case 33:case"end":return be.stop()}},m)}));return function(u){return k.apply(this,arguments)}}(),Lt=function(m){var u={users:m&&m.properties?Object.values(m.properties).map(function(l){return t()({name:l.name,type:l.type,content:l.display_name,status:l.required},l)}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return u},_t=function(m){return m.map(function(u){return{value:u.agent_ability_id,label:u.name}})},Sa=function(m){Ut(m,1),pe.setFieldsValue(a.getFieldsValue())},wa=function(){wt()},Ot=function(m){K(m)},_a=function(){c.history.back()},Vt=function(){if(!v.agent.input_variables)return E.ZP.warning(j.formatMessage({id:"agent.message.warning.variable"})),!0;if(va().isEmpty(v.agent.input_variables.properties))return E.ZP.warning(j.formatMessage({id:"agent.message.warning.variable"})),!0;if(De)if(v.agent.obligations){if(Za(a.getFieldsValue().users,"name"))return E.ZP.warning(j.formatMessage({id:"agent.message.warning.repetition"})),!0}else return E.ZP.warning(j.formatMessage({id:"agent.message.warning.functiondescribe"})),!0;else return E.ZP.warning(j.formatMessage({id:"agent.message.warning.LLM"})),!0;return!1},Rt=function(){var m=se.getFieldsValue().users.filter(function(l){return!!l}),u=m.filter(function(l){return!l.name||!l.content});return u.length!==0&&!(u.length==1&&u[0].name==""&&u[0].content=="")?(E.ZP.warning(j.formatMessage({id:"agent.message.warning.integritycapacity"})),!0):!1},$t=function(m){if((m==null?void 0:m.key)=="4"){var u=a.getFieldsValue().users.map(function(l){return{value:"<<".concat(ze.qX,".inputs.").concat(l.name,">>"),label:l.name}});xt(u)}Ee(m.key)},Wt=function(){$e(!0);var m=0;return new Promise(function(u){var l=function(r){return(0,z.ek)(r,!1).then(function(p){return m=p.data.agent.agent_id,Na(m),U||c.history.replace("/Agents?app_id=".concat(r,"&type=false")),setTimeout(function(){Fa(m),E.ZP.success(j.formatMessage({id:"skill.conserve.success"}))},500),setTimeout(function(){if(wt(r),!U){var le=t()(t()({},(0,_e.Go)("GET")),{},{app_id:r});(0,_e.Go)("SET",le)}},1e3),s(m),p}).catch(function(){return""})};U?l(U).then(function(h){return u(h)}).catch(function(h){console.error("Error during agent update:",h),u("")}):(0,lt.uy)((0,_e.Go)("GET")).then(function(h){q(h.data.app_id),l(h.data.app_id).then(function(r){return u(r)}).catch(function(r){console.error("Error during agent creation:",r),u("")})}).catch(function(h){console.error("Error creating app:",h),$e(!1),u("")})})},Na=function(m,u){a.validateFields().then(function(l){var h=[].concat(Y()(v.agent.selected_skills||[]),Y()(v.agent.selected_workflows||[])).map(function(le){return{app_id:le.app_id,item_type:le.mode==4?1:2}}),r={agent_id:m,data:{is_public:v.app.is_public,enable_api:v.app.enable_api,attrs_are_visible:v.app.attrs_are_visible,obligations:v.agent.obligations,input_variables:v.agent.input_variables?v.agent.input_variables:Ma(a.getFieldsValue()),dataset_ids:B,m_config_id:De,allow_upload_file:v.agent.allow_upload_file,default_output_format:v.agent.default_output_format,callable_list:h}};xe=="false"&&Ut(r,1),pe.setFieldsValue(a.getFieldsValue());var p=a.getFieldsValue().users.map(function(le){return{value:"<<".concat(ze.qX,".inputs.").concat(le.name,">>"),label:le.name}});xt(p),u&&Ee(u.key)}).catch(function(l){})},Fa=function(m){var u=se.getFieldsValue().users.filter(function(r){return!!r}),l=u.map(function(r){return t()(t()({},r),{},{status:r.status==!1?2:1,agent_ability_id:r.agent_ability_id?r.agent_ability_id:0,output_format:r.output_format?r.output_format:0})}),h={agent_id:m,data:{auto_match_ability:v.agent.auto_match_ability,agent_abilities:l}};xe=="false"&&(l.length==1&&l[0].name==""&&l[0].content==""?tt({first:!1,second:!1,fourthly:!1}):(0,z.Iw)(h).then(function(r){r.code==0&&tt({first:!1,second:!1,fourthly:!1})}).catch(function(r){}))},Ut=function(){var k=ee()(Z()().mark(function m(u,l){var h;return Z()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(xe!=="false"){p.next=19;break}if(l!==1){p.next=7;break}return p.next=4,(0,z.XB)(u);case 4:p.t0=p.sent,p.next=17;break;case 7:if(l!==2){p.next=13;break}return p.next=10,(0,z.Iw)(u);case 10:p.t1=p.sent,p.next=16;break;case 13:return p.next=15,(0,z.Ce)(u);case 15:p.t1=p.sent;case 16:p.t0=p.t1;case 17:h=p.t0,h&&h.code===0&&$e(!1);case 19:case"end":return p.stop()}},m)}));return function(u,l){return k.apply(this,arguments)}}(),Za=function(m,u){var l=new Set;return m.some(function(h){var r=h[u];return l.has(r)?l.add(r):l.add(r)&&!1})},Ma=function(m){var u=new Pe.Kr("input","","");return m.users.forEach(function(l){var h=new Pe._w(l.name,l.type?l.type:"string",l.value?l.value:"",l.content,l.status);u.addProperty(l.name,h)}),u};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(de.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:_a,children:[(0,e.jsx)($.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:jt=="chat_room"?j.formatMessage({id:"agent.back_meeting"}):j.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Ht.Z,{selectedKeys:[Q],onClick:$t,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[Q],mode:"inline",items:ya}),v&&((o=v.app)===null||o===void 0?void 0:o.enable_api)===1&&((te=v.app)===null||te===void 0?void 0:te.publish_status)===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:ee()(Z()().mark(function k(){var m,u;return Z()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(m=new URLSearchParams(window.location.search),u=null,!m.get("app_id")){h.next=6;break}return h.next=5,(0,z.ek)(m.get("app_id"),m.get("type"));case 5:u=h.sent;case 6:u!=null&&u.data.app.enable_api===1&&u.data.app.publish_status===1?window.open(rt._n+v.app.api_url):E.ZP.warning(j.formatMessage({id:"agent.save.and.click"}),5);case 7:case"end":return h.stop()}},k)})),children:(0,e.jsxs)("div",{className:"mr-[20px] text-base font-medium text-[#213044] -mt-1",children:[(0,e.jsx)(Be.Z,{className:"mr-3"}),j.formatMessage({id:"agent.visit"})," API"]})}):null]})]}),(0,e.jsx)("div",{className:"flex-1 relative w-[calc(100%-300px)]",children:(0,e.jsxs)(ot.Z,{style:{height:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,e.jsx)(ot.Z.Panel,{defaultSize:"50%",min:"40%",max:"70%",children:(0,e.jsx)(Ft.Z,{spinning:Ie,size:"large",className:"mt-[112px] mr-4",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[(A=(0,_e.Go)("GET"))!==null&&A!==void 0&&A.app_id?j.formatMessage({id:"agent.compile"}):j.formatMessage({id:"agent.created"})," ",j.formatMessage({id:"agent"})]}),(v==null||(I=v.app)===null||I===void 0?void 0:I.publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] px-[7px] text-[#fff] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:j.formatMessage({id:"agent.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE] px-[7px]  text-[#999] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:j.formatMessage({id:"agent.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:Q==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Ie&&(0,e.jsx)(ea,{FirstValue:Sa,Ffromref:a,Detaillist:v,setDetaillist:ne,repository:B,setRepository:O,Newproperties:J,setNewproperties:ie,Operationbentate:xe,Fourthly_config_id:De,setFourthly_config_id:ke,Fourthly_select_list:He,pageKeyfun:Ee,firstjudgingcondition:Vt,agentmenudisabled:We,setAgentmunudisabled:tt})}),(0,e.jsx)("div",{style:{display:Q==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center",position:"sticky",top:"-150px"},children:(0,e.jsx)(pa,{SecondValue:wa,Detaillist:v,setDetaillist:ne,Sformref:se,Operationbentate:xe,handleBack:Ot,pageKeyfun:Ee,SkillMenuClick:$t,secondjudgingcondition:Rt,agentupdata:Wt})}),(0,e.jsx)("div",{style:{display:Q==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(da,{handleBack:Ot,Detaillist:v,setDetaillist:ne,Fourthly_select_list:He,Fourthly_config_id:De,setFourthly_config_id:ke,Fourthlyref:pe,Fourthly_abilities_list:Je,Operationbentate:xe,callwordlist:Qe,newagentid:i})})]})})})}),(0,e.jsx)(ot.Z.Panel,{children:(0,e.jsx)("div",{children:(0,e.jsx)(ga.Z,{saveInfo:{firstjudgingcondition:Vt,secondjudgingcondition:Rt,agentupdata:Wt},operationbentate:xe,data:{abilitiesList:Je,detailList:v}})})}),Q=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(fa.ZP,{agent_id:v.agent.agent_id})})]})})]})},ba=xa}}]);
