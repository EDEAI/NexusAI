"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[894],{82826:function(H,I,r){r.d(I,{Z:function(){return w}});var M=r(1413),_=r(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},o=T,h=r(91146),b=function(R,C){return _.createElement(h.Z,(0,M.Z)((0,M.Z)({},R),{},{ref:C,icon:o}))},y=_.forwardRef(b),w=y},2068:function(H,I,r){r.d(I,{Z:function(){return w}});var M=r(1413),_=r(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},o=T,h=r(91146),b=function(R,C){return _.createElement(h.Z,(0,M.Z)((0,M.Z)({},R),{},{ref:C,icon:o}))},y=_.forwardRef(b),w=y},11551:function(H,I,r){r.d(I,{Ce:function(){return D},Dh:function(){return f},Iw:function(){return V},LH:function(){return F},XB:function(){return d},ek:function(){return p},zl:function(){return Z}});var M=r(15009),_=r.n(M),T=r(99289),o=r.n(T),h=r(47520),b="/v1/agent/agent_info/",y="/v1/vector/dataset_list/2",w="/v1/agent/agent_base_update/",S="/v1/agent/agent_abilities_set/",R="/v1/agent/agent_output_set/",C="/v1/agent/agent_engine_set/",N="/v1/agent/agent_publish/",K="/v1/agent/agent_run",p=function(){var i=o()(_()().mark(function s(a,u){var t;return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,h.ZP)("".concat(b).concat(a),{method:"GET",data:{publish_status:u=="true"?1:0}});case 2:return t=l.sent,l.abrupt("return",t);case 4:case"end":return l.stop()}},s)}));return function(a,u){return i.apply(this,arguments)}}(),Z=function(){var i=o()(_()().mark(function s(){var a;return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.ZP)("".concat(y),{method:"GET"});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}},s)}));return function(){return i.apply(this,arguments)}}(),d=function(){var i=o()(_()().mark(function s(a){var u;return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.ZP)("".concat(w).concat(a.agent_id),{method:"PUT",data:a.data});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},s)}));return function(a){return i.apply(this,arguments)}}(),V=function(){var i=o()(_()().mark(function s(a){var u;return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.ZP)("".concat(S).concat(a.agent_id),{method:"PUT",data:a.data});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},s)}));return function(a){return i.apply(this,arguments)}}(),D=function(){var i=o()(_()().mark(function s(a){var u;return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.ZP)("".concat(R).concat(a.agent_id),{method:"PUT",data:a});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},s)}));return function(a){return i.apply(this,arguments)}}(),W=null,f=function(){var i=o()(_()().mark(function s(a){var u;return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.ZP)("".concat(N).concat(a),{method:"PUT"});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},s)}));return function(a){return i.apply(this,arguments)}}(),F=function(){var i=o()(_()().mark(function s(a){var u;return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.ZP)("".concat(K),{method:"POST",data:a});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},s)}));return function(a){return i.apply(this,arguments)}}(),X=null,J=null,Q=null,$=null,q=null},85877:function(H,I,r){var M=r(19632),_=r.n(M),T=r(97857),o=r.n(T),h=r(5574),b=r.n(h),y=r(52677),w=r.n(y),S=r(35312),R=r(78234),C=r(77598),N=r(96486),K=r.n(N),p=r(67294),Z=r(73935),d=r(43413),V=r(92858),D=r(16845),W=r(15425),f=r(85893),F=function(t){var e=t.children;return(typeof document=="undefined"?"undefined":w()(document))==="object"?Z.createPortal(e,document.body):null},X=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent),J=function(t){var e=t.value,l=t.onChange,x=t.id,m=t.placeholder,E=t.options,B=(0,S.useIntl)(),ee=(0,p.useRef)(),_e=(0,p.useState)(),te=b()(_e,2),O=te[0],L=te[1],ie=(0,p.useState)(0),ne=b()(ie,2),A=ne[0],z=ne[1],ce=(0,p.useState)(""),re=b()(ce,2),de=re[0],fe=re[1],ve=(0,p.useCallback)(function(n){return(0,f.jsx)(i,o()({},n))},[]),pe=(0,p.useCallback)(function(n){return(0,f.jsx)(q,o()({},n))},[]),v=(0,p.useMemo)(function(){return Q((0,D.BU)((0,V.VC)((0,d.Jh)())))},[]),ge=(0,p.useState)(null),ae=b()(ge,2),me=ae[0],he=ae[1],De=(0,W.Z)(function(n){return n.selectedNode}),Oe=(0,W.Z)(function(n){return n.getOutputVariables}),Ae=(0,W.Z)(function(n){return n.getInputVariables}),be=(0,p.useState)([]),se=b()(be,2),P=se[0],ue=se[1];(0,R.Z)(function(){e&&e.length>0&&k(e),E!=null&&E.length&&ue(E.map(function(n){return o()(o()({},n),{},{name:n.label,id:n.value})}))}),(0,C.Z)(function(){var n=K().isEqual(me,e);n||(e&&e.length>0?k(e):e&&K().isArray(e)&&e.length==0&&k([{type:"paragraph",children:[]}]))},[e,x]),(0,C.Z)(function(){E.length&&ue(E.map(function(n){return o()(o()({},n),{},{name:n.label,id:n.value})})),console.log(E)},[E]);var k=function(c){he(c),oe(v,{nodes:[{type:"paragraph",children:[]}]}),oe(v,{nodes:c})},xe=(0,p.useCallback)(function(n){if(O&&P.length>0)switch(n.key){case"ArrowDown":n.preventDefault();var c=A>=P.length-1?0:A+1;z(c);return;case"ArrowUp":n.preventDefault();var g=A<=0?P.length-1:A-1;z(g);return;case"Tab":case"Enter":n.preventDefault(),d.YR.select(v,O),$(v,P[A]),L(null);return;case"Escape":n.preventDefault(),L(null);return}else if(n.key==="@"){setTimeout(function(){return Ee()},10);return}L(null)},[P,v,A,O]),oe=function(c){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=_()(c.children);if(Y.forEach(function(j){return c.apply({type:"remove_node",path:[0],node:j})}),g.nodes){var U=d.NB.isNode(g.nodes)?[g.nodes]:g.nodes;U.forEach(function(j,le){return c.apply({type:"insert_node",path:[le],node:j})})}var G=g.at&&d.E9.isPoint(g.at)?g.at:d.ML.end(c,[]);G&&d.YR.select(c,G)};(0,p.useEffect)(function(){if(O&&P.length>0){var n=ee.current,c=D.F3.toDOMRange(v,O),g=c.getBoundingClientRect();n.style.top="".concat(g.top+window.pageYOffset+24,"px"),n.style.left="".concat(g.left+window.pageXOffset,"px")}},[P.length,v,A,de,O]);var Ee=function(){var c=v.selection;if(c&&d.e6.isCollapsed(c)){var g=d.e6.edges(c),Y=b()(g,1),U=Y[0],G=d.ML.before(v,U),j=G&&d.ML.range(v,G,U),le=j&&d.ML.string(v,j),Me=d.ML.after(v,U),Pe=d.ML.range(v,U,Me),Ie=d.ML.string(v,Pe);L(j),fe(""),z(0);return}L(null)};return(0,f.jsxs)(D.mH,{editor:v,initialValue:a,onChange:function(c){l==null||l(c),L(null)},children:[(0,f.jsx)(D.CX,{renderElement:ve,renderLeaf:pe,onKeyDown:xe,className:"!outline-none",placeholder:m!=null?m:B.formatMessage({id:"workflow.placeholder.enterContent",defaultMessage:"\uFF0C@"})}),O&&(0,f.jsx)(F,{children:(0,f.jsx)("div",{ref:ee,style:{top:"-9999px",left:"-9999px",position:"absolute",zIndex:10,padding:"3px",background:"white",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,.2)"},className:"px-1 pt-1 z-10","data-cy":"mentions-portal",children:P.length?P.map(function(n,c){return(0,f.jsx)("div",{onClick:function(){console.log(n),d.YR.select(v,O),$(v,n),L(null)},className:"hover:bg-blue-100 text-sm mb-1",style:{padding:"1px 3px",borderRadius:"3px",cursor:"pointer",background:c===A?"#B4D5FF":""},children:(0,f.jsx)("span",{children:n.name})},n.name+c)}):(0,f.jsx)(f.Fragment,{children:B.formatMessage({id:"workflow.message.noVariablesFound",defaultMessage:""})})})})]})},Q=function(t){var e=t.isInline,l=t.isVoid,x=t.markableVoid;return t.isInline=function(m){return m.type==="mention"?!0:e(m)},t.isVoid=function(m){return m.type==="mention"?!0:l(m)},t.markableVoid=function(m){return m.type==="mention"||x(m)},t},$=function(t,e){var l={type:"mention",id:(e==null?void 0:e.id)||"",character:e.name,base:e,children:[{bold:!0,text:"11111"}]};d.YR.insertNodes(t,l),d.YR.move(t)},q=function(t){var e=t.attributes,l=t.children,x=t.leaf;return(0,f.jsx)("span",o()(o()({},e),{},{children:l}))},i=function(t){var e=t.attributes,l=t.children,x=t.element;switch(x.type){case"mention":return(0,f.jsx)(s,o()({},t));default:return(0,f.jsx)("p",o()(o()({},e),{},{children:l}))}},s=function(t){var e=t.attributes,l=t.children,x=t.element,m=(0,D.vt)(),E=(0,D.UE)(),B={padding:"3px 3px 2px",margin:"0 1px",verticalAlign:"baseline",display:"inline-block",borderRadius:"4px",backgroundColor:"#eee",fontSize:"0.9em",boxShadow:m&&E?"0 0 0 2px #B4D5FF":"none"};return x.children[0].bold&&(B.fontWeight="bold"),x.children[0].italic&&(B.fontStyle="italic"),(0,f.jsx)("span",o()(o()({},e),{},{className:"m-2",contentEditable:!1,"data-cy":"mention-".concat(x.character.replace(" ","-")),style:B,children:X?(0,f.jsxs)(p.Fragment,{children:["1",l,"/",x.character]}):(0,f.jsxs)(p.Fragment,{children:[(0,f.jsx)("span",{children:x.character}),l]})}))},a=[{type:"paragraph",children:[{text:""}]}];I.Z=J}}]);
