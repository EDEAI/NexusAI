"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{82826:function(re,I,t){t.d(I,{Z:function(){return d}});var Z=t(1413),c=t(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},s=E,z=t(91146),w=function(K,G){return c.createElement(z.Z,(0,Z.Z)((0,Z.Z)({},K),{},{ref:G,icon:s}))},W=c.forwardRef(w),d=W},89035:function(re,I,t){t.d(I,{Z:function(){return d}});var Z=t(1413),c=t(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},s=E,z=t(91146),w=function(K,G){return c.createElement(z.Z,(0,Z.Z)((0,Z.Z)({},K),{},{ref:G,icon:s}))},W=c.forwardRef(w),d=W},82114:function(re,I,t){var Z=t(1413),c=t(67294),E=t(83707),s=t(91146),z=function(d,L){return c.createElement(s.Z,(0,Z.Z)((0,Z.Z)({},d),{},{ref:L,icon:E.Z}))},w=c.forwardRef(z);I.Z=w},2068:function(re,I,t){t.d(I,{Z:function(){return d}});var Z=t(1413),c=t(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},s=E,z=t(91146),w=function(K,G){return c.createElement(z.Z,(0,Z.Z)((0,Z.Z)({},K),{},{ref:G,icon:s}))},W=c.forwardRef(w),d=W},14955:function(re,I,t){t.r(I),t.d(I,{default:function(){return rt}});var Z=t(15009),c=t.n(Z),E=t(97857),s=t.n(E),z=t(99289),w=t.n(z),W=t(5574),d=t.n(W),L=t(11551),K=t(47520),G=t(29432),Ee=t(2068),ze=t(89035),Le=t(15360),Re=t(82826),Ve=t(69243),q=t(35312),i=t(40741),U=t(45360),de=t(28036),Te=t(50136),we=t(74330),p=t(67294),R=t(92939),Be=t(5608),k=t(26915),ee=t(72269),ge=t(34041),V=t(78045),Me=t(80459),e=t(85893),$e=k.Z.TextArea,We=function(n){var a=n.Detaillist,T=n.repository,x=n.Operationbentate,S=n.Ffromref,ae=n.Fourthly_config_id,B=n.Fourthly_select_list,l=(0,q.useIntl)(),se=(0,p.useState)([]),X=d()(se,2),m=X[0],le=X[1];(0,p.useEffect)(function(){_()},[]);var _=function(){var f=w()(c()().mark(function P(){var F;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,L.zl)();case 2:F=j.sent,le(F.data.data.map(function(g){return{value:g.dataset_id,label:g.name}}));case 4:case"end":return j.stop()}},P)}));return function(){return f.apply(this,arguments)}}(),ie={readOnly:!0},A={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:l.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:S,children:[a&&a.app.attrs_are_visible===0?(0,e.jsx)(i.Z.List,{name:"users",children:function(P,F){var $=F.add,j=F.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:x==="true"?l.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})})]})}}):(0,e.jsx)(i.Z.List,{name:"users",children:function(P,F){var $,j,g=F.add,J=F.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:x==="true"?l.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:l.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",name:l.formatMessage({id:"agent.teamvisibility"}),title:l.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(ee.Z,s()(s()({},A),{},{size:"small",checked:!!(a&&a.app.is_public===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",name:l.formatMessage({id:"agent.attrVisible"}),title:l.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(ee.Z,s()(s()({},A),{},{size:"small",checked:!!(a&&a.app.attrs_are_visible===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:l.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(ee.Z,s()(s()({},A),{},{size:"small",checked:!!(a&&a.app.enable_api===1)}))]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:l.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(ee.Z,s()(s()({},A),{},{size:"small",checked:!!(a&&a.agent.allow_upload_file==1)}))]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:l.formatMessage({id:"agent.LLMmodel"})}),(0,e.jsx)(ge.Z,s()(s()({},A),{},{"aria-readonly":"true",style:{width:270},variant:"filled",value:ae,options:B}))]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{name:l.formatMessage({id:"agent.functiondescription"}),title:l.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)($e,s()(s()({},A),{},{value:a&&a.agent&&a.agent.obligations,variant:"filled",autoSize:{minRows:8,maxRows:10}}))]})}),(a==null||($=a.agent)===null||$===void 0?void 0:$.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Be.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",required:!0,name:l.formatMessage({id:"agent.inputvariable"}),title:l.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((a==null||(j=a.agent)===null||j===void 0||(j=j.input_variables)===null||j===void 0?void 0:j.properties)||{})})}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(R.Z,{className:"font-medium",name:l.formatMessage({id:"agent.associatedknowledgebase"}),title:l.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(ge.Z,s()(s()({},A),{},{size:"large",mode:"tags",style:{width:"100%"},placeholder:l.formatMessage({id:"agent.pleaseselect"}),value:T,variant:"filled",options:m}))]}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",l.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsx)(V.ZP.Group,s()(s()({},A),{},{value:a&&a.agent.default_output_format,options:[{value:1,label:"text"},{value:2,label:"json"},{value:3,label:"code"}]}))]})})]})}}),a&&a.app.attrs_are_visible===1&&a.agent.selected_skills&&(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:l.formatMessage({id:"agent.mcp.resources"})}),(0,e.jsxs)("div",{className:"pl-4",children:[a.agent.selected_skills&&a.agent.selected_skills.length>0&&(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",name:l.formatMessage({id:"agent.selectSkills"}),title:l.formatMessage({id:"agent.explain.selectSkills"})})})}),(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:a.agent.selected_skills.map(function(f){return(0,e.jsxs)("div",{className:"flex items-center w-full p-2 bg-white rounded-lg shadow-sm",children:[(0,e.jsx)(Me.Z,{rounded:"6px",data:f,bg:f.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:f.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:f.description})]})]},f.app_id)})})]}),a.agent.selected_workflows&&a.agent.selected_workflows.length>0&&(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",name:l.formatMessage({id:"agent.selectWorkflows"}),title:l.formatMessage({id:"agent.explain.selectWorkflows"})})})}),(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:a.agent.selected_workflows.map(function(f){return(0,e.jsxs)("div",{className:"flex items-center w-full p-2 bg-white rounded-lg shadow-sm",children:[(0,e.jsx)(Me.Z,{rounded:"6px",data:f,bg:f.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:f.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:f.description})]})]},f.app_id)})})]}),!a.agent.selected_skills&&!a.agent.selected_workflows&&(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:l.formatMessage({id:"agent.noResources"})})]})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},He=We,Ke=t(13769),Ge=t.n(Ke),Ue=t(49677),ke=t.n(Ue),Xe=t(24216),Je=t(85877),Ye=t(39944),Se=t(10759),_e=t(71471),Qe=["key","name"],pt=_e.Z.Title,ht=k.Z.TextArea,jt=k.Z.Search,qe=function(n){var a=n.Detaillist,T=n.setDetaillist,x=n.Fourthly_select_list,S=n.setFourthly_config_id,ae=n.Fourthly_config_id,B=n.Fourthlyref,l=n.Fourthly_abilities_list,se=n.Operationbentate,X=n.callwordlist,m=(0,q.useIntl)(),le=(0,p.useState)(0),_=d()(le,2),ie=_[0],A=_[1],f=(0,p.useState)(""),P=d()(f,2),F=P[0],$=P[1],j=(0,p.useState)(""),g=d()(j,2),J=g[0],pe=g[1],oe=(0,p.useState)(!1),ce=d()(oe,2),he=ce[0],ne=ce[1],je={readOnly:!0},be={disabled:!0},ye=function(o){var v={user:{value:ue(o)}};$(new Ye.z(v))},Ne=function(o){A(o)},me=function(o){var v=o.users.filter(function(u,Y){return u.type=="number"&&!Number(u.value)&&!!u.value});if(!F.user)U.ZP.warning(m.formatMessage({id:"agent.message.warning.callword"}));else if(v.length>0)U.ZP.warning(m.formatMessage({id:"agent.message.warning.datatype"}));else{ne(!0);var N=new Se.Kr("input","","");o.users.forEach(function(u){var Y=new Se._w(u.name,u.type?u.type:"string",u.type=="string"?u.value:Number(u.value),u.content,u.status);N.addProperty(u.name,Y)});var b={agent_id:a.agent.agent_id,ability_id:ie,input_dict:N,prompt:F};xe(b)}},ue=function y(o){return o.map(function(v){return v.type==="mention"?v.id:v.children?y(v.children):v.text}).join("")},xe=function(){var y=w()(c()().mark(function o(v){return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(0,L.LH)(v).then(function(u){U.ZP.success(m.formatMessage({id:"agent.message.success.runpublish"})),pe(u.data.outputs.text),ne(!1)}).catch(function(u){ne(!1)});case 1:case"end":return b.stop()}},o)}));return function(v){return y.apply(this,arguments)}}(),Fe=function(){var y=w()(c()().mark(function o(){var v;return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,L.Dh)(a.agent.agent_id);case 2:v=b.sent,v.code==0?U.ZP.success("success"):U.ZP.error("error");case 4:case"end":return b.stop()}},o)}));return function(){return y.apply(this,arguments)}}(),fe=function(){var y=w()(c()().mark(function o(){return c()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:q.history.push("/Agents?app_id=".concat(a.app.app_id,"&type=false")),location.reload();case 2:case"end":return N.stop()}},o)}));return function(){return y.apply(this,arguments)}}();return(0,p.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:m.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(ge.Z,{placeholder:m.formatMessage({id:"agent.pleaseselect"}),defaultValue:m.formatMessage({id:"agent.allability"}),variant:"filled",style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:Ne,options:l})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",onFinish:me,style:{width:900},autoComplete:"off",form:B,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(i.Z.List,{name:"users",children:function(o,v){return ke()(v),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:m.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52",children:m.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:o.map(function(N){var b=N.key,u=N.name,Y=Ge()(N,Qe);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(i.Z.Item,s()(s()({},Y),{},{name:[u,"content"],children:(0,e.jsx)(k.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(i.Z.Item,s()(s()({},Y),{},{name:[u,"value"],rules:[{required:!!(B.getFieldsValue()&&B.getFieldsValue().users[b].status==!0),message:m.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(k.Z,{style:{width:"660px"},placeholder:B.getFieldsValue()&&B.getFieldsValue().users[b].status==!0?m.formatMessage({id:"agent.variable.required.value"}):m.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(i.Z.Item,{rules:[{required:!0,message:m.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.runpreview"})}),(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)(we.Z,{spinning:he,children:(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:J?(0,e.jsx)(Xe.Z,{language:"python3",value:J&&JSON.stringify(J)}):null})}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Je.Z,{onChange:function(o){console.log(X),ye(o)},options:X})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(de.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})]}),(0,e.jsx)(i.Z.Item,{children:(0,e.jsx)("div",{className:"w-28",children:(a==null?void 0:a.agent.publish_status)===1&&(a==null?void 0:a.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(de.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:fe,children:m.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(de.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:se!="false",onClick:Fe,children:m.formatMessage({id:"agent.publish"})})})})})]})}),(0,e.jsx)("div",{className:"h-10 w-1"})]})},et=qe,tt=k.Z.TextArea,bt={readOnly:!0},te={disabled:!0},at=function(n){var a=n.Detaillist,T=n.Sformref,x=(0,q.useIntl)();return(0,p.useEffect)(function(){}),(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:x.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(R.Z,{name:x.formatMessage({id:"agent.automatch"}),title:x.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(ee.Z,s()(s()({},te),{},{size:"small",checked:!!(a&&a.agent.auto_match_ability==1)}))]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:T,children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.capability"})})}),T&&T.getFieldValue("users")&&T.getFieldValue("users").map(function(S,ae){return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(i.Z.Item,{className:"mb-0",children:(0,e.jsx)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.capabilityname"})})})}),(0,e.jsx)(i.Z.Item,{className:"mb-[20px]",children:(0,e.jsx)(k.Z,s()(s()({},te),{},{placeholder:x.formatMessage({id:"agent.capabilityname"}),value:S.name,className:"w-full"}))}),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(R.Z,{className:"text-[#555555] text-xs font-medium",name:x.formatMessage({id:"agent.capabilitydescription"}),title:x.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(i.Z.Item,{className:"w-full mb-[20px]",children:(0,e.jsx)(tt,s()(s()({value:S.content},te),{},{placeholder:x.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},style:{width:"100%"}}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:x.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(i.Z.Item,{className:"mb-[20px]",children:(0,e.jsxs)(V.ZP.Group,s()(s()({value:S.status,optionType:"button",buttonStyle:"solid"},te),{},{defaultValue:!0,children:[(0,e.jsx)(V.ZP,{value:!0,children:x.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(V.ZP,{value:!1,children:x.formatMessage({id:"agent.capabilitystatus.disable"})})]}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:x.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(i.Z.Item,{className:"mb-0",children:(0,e.jsxs)(V.ZP.Group,s()(s()({defaultValue:0,value:S.output_format},te),{},{children:[(0,e.jsx)(V.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:x.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(V.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(V.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(V.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))})]})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},st=at,lt=t(68709),it=t(27842),nt=function(){var n=(0,q.useIntl)(),a=(0,p.useRef)(null),T=i.Z.useForm(),x=d()(T,1),S=x[0],ae=i.Z.useForm(),B=d()(ae,1),l=B[0],se=i.Z.useForm(),X=d()(se,1),m=X[0],le=i.Z.useForm(),_=d()(le,1),ie=_[0],A=(0,p.useState)(!1),f=d()(A,2),P=f[0],F=f[1],$=(0,p.useState)(null),j=d()($,2),g=j[0],J=j[1],pe=(0,p.useState)(null),oe=d()(pe,2),ce=oe[0],he=oe[1],ne=(0,p.useState)(null),je=d()(ne,2),be=je[0],ye=je[1],Ne=(0,p.useState)(null),me=d()(Ne,2),ue=me[0],xe=me[1],Fe=(0,p.useState)(null),fe=d()(Fe,2),y=fe[0],o=fe[1],v=(0,p.useState)(null),N=d()(v,2),b=N[0],u=N[1],Y=(0,p.useState)("1"),Ae=d()(Y,2),C=Ae[0],dt=Ae[1],ot=(0,p.useState)(null),Oe=d()(ot,2),ct=Oe[0],mt=Oe[1],ut=[{key:"1",icon:(0,e.jsx)(Ee.Z,{}),label:n.formatMessage({id:"agent.menu.basicsetup"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:C=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(ze.Z,{}),label:n.formatMessage({id:"agent.menu.Capacityoutput"}),disabled:g&&g.app.attrs_are_visible===0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:C=="2"?"#1B64F3":"#213044"}},{key:"5",icon:(0,e.jsx)(Le.Z,{}),label:n.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:C=="5"?"#1B64F3":"#213044"}}];(0,p.useEffect)(function(){xt()},[]);var xt=function(){var Q=w()(c()().mark(function O(){var D,r,H,De,Ze,Ie,Pe;return c()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return F(!0),M.prev=1,D=new URLSearchParams(window.location.search),console.log(D.get("type")),M.next=6,(0,L.ek)(D.get("app_id"),D.get("type"));case 6:r=M.sent,H=r.data,r.data.agent_dataset_relation_list&&r.data.agent_dataset_relation_list.length&&(De=r.data.agent_dataset_relation_list.map(function(h){return h.dataset_id}),he(De)),r.data.callable_items&&(r.data.agent.selected_skills=[],r.data.agent.selected_workflows=[],r.data.callable_items.forEach(function(h){h.item_type==1?r.data.agent.selected_skills.push(s()(s()({},h),{},{mode:4})):r.data.agent.selected_workflows.push(s()(s()({},h),{},{mode:2}))})),J(r.data),u(r.data.agent.publish_status===0&&r.data.is_creator===1?"false":"true"),r.data.agent.publish_status===1&&U.ZP.warning(n.formatMessage({id:"agent.message.listwarning"}),5),S.setFieldsValue(ft(H.agent.input_variables)),r.data.agent_abilities_list&&(Ze=r.data.agent_abilities_list.map(function(h){return h.status==1?s()(s()({},h),{},{status:!0}):s()(s()({},h),{},{status:!1})}),m.setFieldsValue({users:Ze[0]?Ze:[{agent_ability_id:0,name:"",content:"",status:!0}]}),Ie=H.agent_abilities_list.filter(function(h){return h.output_format!==0}),l.setFieldsValue({users:Ie.map(function(h){return{agent_ability_id:h.agent_ability_id,output_format:h.output_format}})})),H.m_configurations_list&&ye(H.m_configurations_list.map(function(h){return{value:h.m_config_id,label:h.m_name}})),xe(H.agent.m_config_id),H.agent_abilities_list&&(Pe=H.agent_abilities_list.filter(function(h,Nt){return h.status===1}),o(gt(Pe).concat([{value:0,label:n.formatMessage({id:"agent.allability"})}]))),M.next=24;break;case 20:M.prev=20,M.t0=M.catch(1),console.error("Failed to fetch agent details:",M.t0),U.ZP.error(n.formatMessage({id:"agent.message.error"}));case 24:return M.prev=24,F(!1),M.finish(24);case 27:case"end":return M.stop()}},O,null,[[1,20,24,27]])}));return function(){return Q.apply(this,arguments)}}(),ft=function(O){console.log(!!O&&!!O.properties,"obj");var D={users:O&&O.properties?Object.values(O.properties).map(function(r){return{name:r.name,type:r.type,content:r.display_name,status:r.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return D},gt=function(O){return O.map(function(D){return{value:D.agent_ability_id,label:D.name}})},vt=function(){Ce({key:C,keyPath:[],item:void 0,domEvent:void 0}),history.back()},Ce=function(O){try{if(C=="1"){var D=S.getFieldsValue().users.map(function(r){return{value:"<<".concat(G.qX,".inputs.").concat(r.name,">>"),label:r.name}});ie.setFieldsValue(S.getFieldsValue()),mt(D)}dt(O.key)}catch(r){console.log(r,"error")}};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(de.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:vt,children:[(0,e.jsx)(Re.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:n.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Te.Z,{selectedKeys:[C],onClick:Ce,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[C],mode:"inline",items:ut}),g&&g.app.enable_api===1&&g.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:function(){window.open(K._n+g.app.api_url)},children:(0,e.jsxs)("div",{className:"mr-[20px]",children:[(0,e.jsx)(Ve.Z,{className:"mr-2"}),n.formatMessage({id:"agent.visit"}),"API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)(we.Z,{spinning:P,className:"h-full",children:(0,e.jsx)("div",{className:"flex flex-col  ",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[g?g.creator_nickname:""," ",n.formatMessage({id:"agent.agents"})]})]})}),(0,e.jsx)("div",{style:{display:C==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(He,{Ffromref:S,loading:P,Detaillist:g,repository:ce,Operationbentate:b,Fourthly_config_id:ue,Fourthly_select_list:be})}),(0,e.jsx)("div",{style:{display:C==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(st,{Detaillist:g,Sformref:m})}),(0,e.jsx)("div",{style:{display:C==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(et,{Detaillist:g,setDetaillist:J,Fourthly_select_list:be,Fourthly_config_id:ue,setFourthly_config_id:xe,Fourthlyref:ie,Fourthly_abilities_list:y,Operationbentate:b,callwordlist:ct})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(lt.Z,{operationbentate:b,data:{abilitiesList:y,detailList:g}})}),C=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(it.ZP,{agent_id:g.agent.agent_id})})]})]})},rt=nt}}]);
