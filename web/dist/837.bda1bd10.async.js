(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[837],{82826:function(L,b,e){"use strict";e.d(b,{Z:function(){return x}});var f=e(1413),a=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},r=P,d=e(91146),m=function(T,A){return a.createElement(d.Z,(0,f.Z)((0,f.Z)({},T),{},{ref:A,icon:r}))},I=a.forwardRef(m),x=I},89035:function(L,b,e){"use strict";e.d(b,{Z:function(){return x}});var f=e(1413),a=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},r=P,d=e(91146),m=function(T,A){return a.createElement(d.Z,(0,f.Z)((0,f.Z)({},T),{},{ref:A,icon:r}))},I=a.forwardRef(m),x=I},69243:function(L,b,e){"use strict";e.d(b,{Z:function(){return x}});var f=e(1413),a=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},r=P,d=e(91146),m=function(T,A){return a.createElement(d.Z,(0,f.Z)((0,f.Z)({},T),{},{ref:A,icon:r}))},I=a.forwardRef(m),x=I},2068:function(L,b,e){"use strict";e.d(b,{Z:function(){return x}});var f=e(1413),a=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},r=P,d=e(91146),m=function(T,A){return a.createElement(d.Z,(0,f.Z)((0,f.Z)({},T),{},{ref:A,icon:r}))},I=a.forwardRef(m),x=I},15360:function(L,b,e){"use strict";e.d(b,{Z:function(){return x}});var f=e(1413),a=e(67294),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},r=P,d=e(91146),m=function(T,A){return a.createElement(d.Z,(0,f.Z)((0,f.Z)({},T),{},{ref:A,icon:r}))},I=a.forwardRef(m),x=I},11551:function(L,b,e){"use strict";e.d(b,{Ce:function(){return B},Dh:function(){return v},Iw:function(){return k},LH:function(){return Y},XB:function(){return _},ek:function(){return E},zl:function(){return $}});var f=e(15009),a=e.n(f),P=e(99289),r=e.n(P),d=e(47520),m="/v1/agent/agent_info/",I="/v1/vector/dataset_list/2",x="/v1/agent/agent_base_update/",y="/v1/agent/agent_abilities_set/",T="/v1/agent/agent_output_set/",A="/v1/agent/agent_engine_set/",G="/v1/agent/agent_publish/",z="/v1/agent/agent_run",E=function(){var g=r()(a()().mark(function l(u,i){var p;return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,d.ZP)("".concat(m).concat(u),{method:"GET",data:{publish_status:i=="true"?1:0}});case 2:return p=w.sent,w.abrupt("return",p);case 4:case"end":return w.stop()}},l)}));return function(u,i){return g.apply(this,arguments)}}(),$=function(){var g=r()(a()().mark(function l(){var u;return a()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,d.ZP)("".concat(I),{method:"GET"});case 2:return u=p.sent,p.abrupt("return",u);case 4:case"end":return p.stop()}},l)}));return function(){return g.apply(this,arguments)}}(),_=function(){var g=r()(a()().mark(function l(u){var i;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.ZP)("".concat(x).concat(u.agent_id),{method:"PUT",data:u.data});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},l)}));return function(u){return g.apply(this,arguments)}}(),k=function(){var g=r()(a()().mark(function l(u){var i;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.ZP)("".concat(y).concat(u.agent_id),{method:"PUT",data:u.data});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},l)}));return function(u){return g.apply(this,arguments)}}(),B=function(){var g=r()(a()().mark(function l(u){var i;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.ZP)("".concat(T).concat(u.agent_id),{method:"PUT",data:u});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},l)}));return function(u){return g.apply(this,arguments)}}(),F=null,v=function(){var g=r()(a()().mark(function l(u){var i;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.ZP)("".concat(G).concat(u),{method:"PUT"});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},l)}));return function(u){return g.apply(this,arguments)}}(),Y=function(){var g=r()(a()().mark(function l(u){var i;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.ZP)("".concat(z),{method:"POST",data:u});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},l)}));return function(u){return g.apply(this,arguments)}}()},85877:function(L,b,e){"use strict";var f=e(19632),a=e.n(f),P=e(97857),r=e.n(P),d=e(5574),m=e.n(d),I=e(52677),x=e.n(I),y=e(35312),T=e(78234),A=e(77598),G=e(96486),z=e.n(G),E=e(67294),$=e(73935),_=e(43413),k=e(92858),B=e(16845),F=e(1096),v=e(85893),Y=function(s){var o=s.children;return(typeof document=="undefined"?"undefined":x()(document))==="object"?$.createPortal(o,document.body):null},g=typeof navigator!="undefined"&&/Mac OS X/.test(navigator.userAgent),l=function(s){var o=s.value,D=s.onChange,C=s.id,M=s.placeholder,R=s.options,K=(0,y.useIntl)(),q=(0,E.useRef)(),ie=(0,E.useState)(),ee=m()(ie,2),U=ee[0],H=ee[1],ce=(0,E.useState)(0),te=m()(ce,2),Z=te[0],X=te[1],de=(0,E.useState)(""),ne=m()(de,2),_e=ne[0],ve=ne[1],fe=(0,E.useCallback)(function(n){return(0,v.jsx)(t,r()({},n))},[]),me=(0,E.useCallback)(function(n){return(0,v.jsx)(p,r()({},n))},[]),h=(0,E.useMemo)(function(){return u((0,B.BU)((0,k.VC)((0,_.Jh)())))},[]),pe=(0,E.useState)(null),ae=m()(pe,2),he=ae[0],ge=ae[1],Pe=(0,F.Z)(function(n){return n.selectedNode}),Ie=(0,F.Z)(function(n){return n.getOutputVariables}),xe=(0,F.Z)(function(n){return n.getInputVariables}),be=(0,E.useState)([]),re=m()(be,2),j=re[0],se=re[1];(0,T.Z)(function(){o&&o.length>0&&J(o),R!=null&&R.length&&se(R.map(function(n){return r()(r()({},n),{},{name:n.label,id:n.value})}))}),(0,A.Z)(function(){var n=z().isEqual(he,o);n||(o&&o.length>0?J(o):o&&z().isArray(o)&&o.length==0&&J([{type:"paragraph",children:[]}]))},[o,C]),(0,A.Z)(function(){R.length&&se(R.map(function(n){return r()(r()({},n),{},{name:n.label,id:n.value})})),console.log(R)},[R]);var J=function(c){ge(c),ue(h,{nodes:[{type:"paragraph",children:[]}]}),ue(h,{nodes:c})},Ee=(0,E.useCallback)(function(n){if(U&&j.length>0)switch(n.key){case"ArrowDown":n.preventDefault();var c=Z>=j.length-1?0:Z+1;X(c);return;case"ArrowUp":n.preventDefault();var O=Z<=0?j.length-1:Z-1;X(O);return;case"Tab":case"Enter":n.preventDefault(),_.YR.select(h,U),i(h,j[Z]),H(null);return;case"Escape":n.preventDefault(),H(null);return}else if(n.key==="@"){setTimeout(function(){return Oe()},10);return}H(null)},[j,h,Z,U]),ue=function(c){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=a()(c.children);if(Q.forEach(function(S){return c.apply({type:"remove_node",path:[0],node:S})}),O.nodes){var W=_.NB.isNode(O.nodes)?[O.nodes]:O.nodes;W.forEach(function(S,oe){return c.apply({type:"insert_node",path:[oe],node:S})})}var N=O.at&&_.E9.isPoint(O.at)?O.at:_.ML.end(c,[]);N&&_.YR.select(c,N)};(0,E.useEffect)(function(){if(U&&j.length>0){var n=q.current,c=B.F3.toDOMRange(h,U),O=c.getBoundingClientRect();n.style.top="".concat(O.top+window.pageYOffset+24,"px"),n.style.left="".concat(O.left+window.pageXOffset,"px")}},[j.length,h,Z,_e,U]);var Oe=function(){var c=h.selection;if(c&&_.e6.isCollapsed(c)){var O=_.e6.edges(c),Q=m()(O,1),W=Q[0],N=_.ML.before(h,W),S=N&&_.ML.range(h,N,W),oe=S&&_.ML.string(h,S),De=_.ML.after(h,W),Me=_.ML.range(h,W,De),Te=_.ML.string(h,Me);H(S),ve(""),X(0);return}H(null)};return(0,v.jsxs)(B.mH,{editor:h,initialValue:le,onChange:function(c){D==null||D(c),H(null)},children:[(0,v.jsx)(B.CX,{renderElement:fe,renderLeaf:me,onKeyDown:Ee,className:"!outline-none",placeholder:M!=null?M:K.formatMessage({id:"workflow.placeholder.enterContent",defaultMessage:"\uFF0C@"})}),U&&(0,v.jsx)(Y,{children:(0,v.jsx)("div",{ref:q,style:{top:"-9999px",left:"-9999px",position:"absolute",zIndex:10,padding:"3px",background:"white",borderRadius:"4px",boxShadow:"0 1px 5px rgba(0,0,0,.2)"},className:"px-1 pt-1 z-10","data-cy":"mentions-portal",children:j.length?j.map(function(n,c){return(0,v.jsx)("div",{onClick:function(){console.log(n),_.YR.select(h,U),i(h,n),H(null)},className:"hover:bg-blue-100 text-sm mb-1",style:{padding:"1px 3px",borderRadius:"3px",cursor:"pointer",background:c===Z?"#B4D5FF":""},children:(0,v.jsx)("span",{children:n.name})},n.name+c)}):(0,v.jsx)(v.Fragment,{children:K.formatMessage({id:"workflow.message.noVariablesFound",defaultMessage:""})})})})]})},u=function(s){var o=s.isInline,D=s.isVoid,C=s.markableVoid;return s.isInline=function(M){return M.type==="mention"?!0:o(M)},s.isVoid=function(M){return M.type==="mention"?!0:D(M)},s.markableVoid=function(M){return M.type==="mention"||C(M)},s},i=function(s,o){var D={type:"mention",id:(o==null?void 0:o.id)||"",character:o.name,base:o,children:[{bold:!0,text:"11111"}]};_.YR.insertNodes(s,D),_.YR.move(s)},p=function(s){var o=s.attributes,D=s.children,C=s.leaf;return(0,v.jsx)("span",r()(r()({},o),{},{children:D}))},t=function(s){var o=s.attributes,D=s.children,C=s.element;switch(C.type){case"mention":return(0,v.jsx)(w,r()({},s));default:return(0,v.jsx)("p",r()(r()({},o),{},{children:D}))}},w=function(s){var o=s.attributes,D=s.children,C=s.element,M=(0,B.vt)(),R=(0,B.UE)(),K={padding:"3px 3px 2px",margin:"0 1px",verticalAlign:"baseline",display:"inline-block",borderRadius:"4px",backgroundColor:"#eee",fontSize:"0.9em",boxShadow:M&&R?"0 0 0 2px #B4D5FF":"none"};return C.children[0].bold&&(K.fontWeight="bold"),C.children[0].italic&&(K.fontStyle="italic"),(0,v.jsx)("span",r()(r()({},o),{},{className:"m-2",contentEditable:!1,"data-cy":"mention-".concat(C.character.replace(" ","-")),style:K,children:g?(0,v.jsxs)(E.Fragment,{children:["1",D,"/",C.character]}):(0,v.jsxs)(E.Fragment,{children:[(0,v.jsx)("span",{children:C.character}),D]})}))},le=[{type:"paragraph",children:[{text:""}]}];b.Z=l},49677:function(L){function b(e){if(e==null)throw new TypeError("Cannot destructure "+e)}L.exports=b,L.exports.__esModule=!0,L.exports.default=L.exports}}]);
