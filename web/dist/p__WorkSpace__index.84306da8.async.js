"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[316],{66212:function(Te,J,a){var h=a(1413),R=a(67294),s=a(99011),F=a(91146),C=function(Y,M){return R.createElement(F.Z,(0,h.Z)((0,h.Z)({},Y),{},{ref:M,icon:s.Z}))},f=R.forwardRef(C);J.Z=f},11475:function(Te,J,a){a.d(J,{Z:function(){return Y}});var h=a(1413),R=a(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},F=s,C=a(91146),f=function(E,H){return R.createElement(C.Z,(0,h.Z)((0,h.Z)({},E),{},{ref:H,icon:F}))},G=R.forwardRef(f),Y=G},2068:function(Te,J,a){a.d(J,{Z:function(){return Y}});var h=a(1413),R=a(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},F=s,C=a(91146),f=function(E,H){return R.createElement(C.Z,(0,h.Z)((0,h.Z)({},E),{},{ref:H,icon:F}))},G=R.forwardRef(f),Y=G},35790:function(Te,J,a){var h=a(1413),R=a(67294),s=a(19369),F=a(91146),C=function(Y,M){return R.createElement(F.Z,(0,h.Z)((0,h.Z)({},Y),{},{ref:M,icon:s.Z}))},f=R.forwardRef(C);J.Z=f},88864:function(Te,J,a){var h=a(32332),R=a(67294),s=a(85893);J.Z=(0,R.memo)(function(F){var C=F.agentList,f=F.size,G=f===void 0?"sm":f,Y=F.rounded,M=Y===void 0?!1:Y,E=C==null?void 0:C.map(function(we){return we.avatar?we.avatar:(0,h.s9)("single",we.icon)}),H={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},Ce={sm:"w-[47%] h-[47%]",md:"w-[47%] h-[47%]",lg:"w-[47%] h-[47%]"},re=function(){var se=(E==null?void 0:E.length)||0;if(!se||!E)return(0,s.jsx)("div",{className:"bg-gray-200 w-full h-full ".concat(M?"rounded-full":"")});if(se===1)return(0,s.jsx)("div",{className:"w-full h-full overflow-hidden ".concat(M?"rounded-full":""),children:(0,s.jsx)("img",{src:E[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})});if(se===2)return(0,s.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,s.jsx)("div",{className:"w-1/2 h-full pr-[2%]",children:(0,s.jsx)("img",{src:E[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(M?"rounded-l-full":"")})}),(0,s.jsx)("div",{className:"w-1/2 h-full pl-[2%]",children:(0,s.jsx)("img",{src:E[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(M?"rounded-r-full":"")})})]});if(se===3)return(0,s.jsxs)("div",{className:"w-full h-full flex flex-wrap",children:[(0,s.jsx)("div",{className:"w-1/2 h-full pr-[2%] flex items-center justify-center",children:(0,s.jsx)("img",{src:E[0],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(M?"rounded-l-full":"")})}),(0,s.jsxs)("div",{className:"w-1/2 h-full pl-[2%] flex flex-col",children:[(0,s.jsx)("div",{className:"h-1/2 pb-[2%]",children:(0,s.jsx)("img",{src:E[1],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(M?"rounded-tr-full":"")})}),(0,s.jsx)("div",{className:"h-1/2 pt-[2%]",children:(0,s.jsx)("img",{src:E[2],alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(M?"rounded-br-full":"")})})]})]});if(se===4)return(0,s.jsx)("div",{className:"w-full h-full flex flex-wrap",children:E.slice(0,4).map(function(Q,te){return(0,s.jsx)("div",{className:"".concat(Ce[G]," p-[3%] ").concat(te===0?"pl-0 pt-0":te===1?"pr-0 pt-0":te===2?"pl-0 pb-0":"pr-0 pb-0"),children:(0,s.jsx)("img",{src:Q,alt:"\u5934\u50CF",className:"w-full h-full object-cover ".concat(M?te===0?"rounded-tl-full":te===1?"rounded-tr-full":te===2?"rounded-bl-full":"rounded-br-full":"")})},te)})});for(var Ee=E.slice(0,9),ie=[],oe=0;oe<Math.min(9,Ee.length);oe++)ie.push((0,s.jsx)("div",{className:"w-1/3 h-1/3",style:{padding:"1.5%"},children:(0,s.jsx)("img",{src:Ee[oe],alt:"\u5934\u50CF",className:"w-full h-full object-cover"})},oe));return(0,s.jsx)("div",{className:"w-full h-full flex flex-wrap",children:ie})};return(0,s.jsx)("div",{className:"".concat(H[G]," overflow-hidden bg-white ").concat(M?"rounded-full":""),children:re()})})},85422:function(Te,J,a){var h=a(15009),R=a.n(h),s=a(99289),F=a.n(s),C=a(5574),f=a.n(C),G=a(11551),Y=a(39873),M=a(28508),E=a(29933),H=a(35312),Ce=a(3917),re=a(66309),we=a(28036),se=a(71471),Ee=a(74330),ie=a(26412),oe=a(12845),Q=a(67294),te=a(22683),We=a(97807),Ae=a(24216),d=a(85893);J.Z=(0,Q.memo)(function(Pe){var he,ae,De,t=Pe.data,n=Pe.onClose,i=(0,H.useIntl)(),r=(0,Q.useState)(500),v=f()(r,2),ce=v[0],e=v[1],k=(0,Ce.Z)(function(){var q=F()(R()().mark(function z(ue,me){var Ne;return R()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,(0,G.pC)(ue,me);case 2:return Ne=ge.sent,ge.abrupt("return",Ne.data);case 4:case"end":return ge.stop()}},z)}));return function(z,ue){return q.apply(this,arguments)}}(),{manual:!0}),_=k.data,xe=k.loading,de=k.run;(0,Q.useEffect)(function(){t!=null&&t.app_id&&t!==null&&t!==void 0&&t.app_run_id&&de(t.app_id,t.app_run_id)},[t==null?void 0:t.app_id,t==null?void 0:t.app_run_id,de]);var Z=function(z){var ue={1:{color:"processing",text:i.formatMessage({id:"workflow.running"})},2:{color:"success",text:i.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:i.formatMessage({id:"workflow.runF"})}},me=ue[z]||{color:"default",text:"Unknown"};return(0,d.jsx)(re.Z,{color:me.color,children:me.text})},Oe=function(z){e(z)};return(0,d.jsx)(Y.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:ce,onChange:Oe,children:(0,d.jsx)(E.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,d.jsx)(we.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:n,icon:(0,d.jsx)(M.Z,{})}),title:(0,d.jsx)(se.Z.Title,{level:5,children:i.formatMessage({id:"agent.log.detail"})}),loading:xe,children:(0,d.jsx)("div",{className:"space-y-6",children:xe?(0,d.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,d.jsx)(Ee.Z,{})}):_?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(ie.Z,{column:1,bordered:!0,size:"small",children:[(0,d.jsx)(ie.Z.Item,{label:i.formatMessage({id:"workflow.user"}),children:_.nickname}),(0,d.jsx)(ie.Z.Item,{label:i.formatMessage({id:"workflow.status"}),children:Z(_.status)}),(0,d.jsx)(ie.Z.Item,{label:i.formatMessage({id:"workflow.created_time"}),children:_.created_time}),(0,d.jsxs)(ie.Z.Item,{label:i.formatMessage({id:"workflow.elapsed_time"}),children:[_.elapsed_time,"s"]}),(0,d.jsx)(ie.Z.Item,{label:"Tokens",children:_.total_tokens})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(se.Z.Title,{level:5,children:i.formatMessage({id:"agent.log.output"})}),_.outputs?(0,d.jsx)("div",{children:(_==null||(he=_.outputs)===null||he===void 0?void 0:he.type)=="json"?(0,d.jsx)("div",{className:"h-80",children:(0,d.jsx)(Ae.Z,{language:"python3",value:JSON.parse((ae=_.outputs)===null||ae===void 0?void 0:ae.value)||"{}",readOnly:!0,isJSONStringifyBeauty:!0,onChange:function(){},title:"JSON"})}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)(te.U,{rehypePlugins:[We.Z],children:((De=_.outputs)===null||De===void 0?void 0:De.value)||""})})}):_.error?(0,d.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,d.jsx)("div",{className:"text-red-500 font-medium mb-2",children:i.formatMessage({id:"agent.log.error"})}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:_.error})]}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)("div",{className:"text-sm text-gray-500",children:i.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(_==null?void 0:_.prompt_data)&&_.prompt_data.length>0&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(se.Z.Title,{level:5,children:i.formatMessage({id:"agent.log.conversation"})}),(0,d.jsx)(oe.Z,{className:"mt-2",children:_.prompt_data.map(function(q,z){var ue=f()(q,2),me=ue[0],Ne=ue[1];return(0,d.jsx)(oe.Z.Item,{color:me==="human"?"blue":"green",children:(0,d.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:me}),(0,d.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:Ne.value})]})},z)})})]})]}):null})})})})},83961:function(Te,J,a){a.r(J),a.d(J,{default:function(){return lt}});var h=a(56264),R=a(64456),s=a(67294),F=a(15009),C=a.n(F),f=a(99289),G=a.n(f),Y=a(97857),M=a.n(Y),E=a(5574),H=a.n(E),Ce=a(42237),re=a(29608),we=a(35790),se=a(11475),Ee=a(8751),ie=a(97578),oe=a(77598),Q=a(97582),te=a(22638),We=a(3917),Ae=function(L,x){var T;x===void 0&&(x={});var j=x.defaultPageSize,m=j===void 0?10:j,b=x.defaultCurrent,w=b===void 0?1:b,S=(0,Q._T)(x,["defaultPageSize","defaultCurrent"]),U=(0,We.Z)(L,(0,Q.pi)({defaultParams:[{current:w,pageSize:m}],refreshDepsAction:function(){_e(1)}},S)),y=U.params[0]||{},O=y.current,D=O===void 0?1:O,$=y.pageSize,le=$===void 0?m:$,W=((T=U.data)===null||T===void 0?void 0:T.total)||0,Ie=(0,s.useMemo)(function(){return Math.ceil(W/le)},[le,W]),V=function(ee,N){var pe=ee<=0?1:ee,K=N<=0?1:N,be=Math.ceil(W/K);pe>be&&(pe=Math.max(1,be));var Me=(0,Q.CR)(U.params||[]),X=Me[0],ye=X===void 0?{}:X,l=Me.slice(1);U.run.apply(U,(0,Q.ev)([(0,Q.pi)((0,Q.pi)({},ye),{current:pe,pageSize:K})],(0,Q.CR)(l),!1))},_e=function(ee){V(ee,le)},B=function(ee){V(D,ee)};return(0,Q.pi)((0,Q.pi)({},U),{pagination:{current:D,pageSize:le,total:W,totalPage:Ie,onChange:(0,te.Z)(V),changeCurrent:(0,te.Z)(_e),changePageSize:(0,te.Z)(B)}})},d=Ae,Pe=a(78697),he=a(32332),ae=a(35312),De=a(74330),t=a(83062),n=a(32983),i=a(88864),r=a(29432),v=a(72252),ce=a(71471),e=a(85893),k=function(x){var T=x.iconSrc,j=x.titleText,m=x.pagination,b=x.showTotal,w=b===void 0?!0:b,S=x.titleAfter,U=S===void 0?null:S,y=(0,ae.useIntl)();return(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)("img",{src:T,alt:""}),(0,e.jsx)("div",{children:j}),(0,e.jsx)("div",{children:(0,e.jsx)(v.Z,{size:"small",simple:!0,showTotal:function(D,$){return w?"".concat(y.formatMessage({id:"app.workflow.title.1"})).concat($[0],"-").concat($[1]).concat(y.formatMessage({id:"app.workflow.title.2"})," / ").concat(y.formatMessage({id:"app.workflow.title.3"})).concat(D," ").concat(y.formatMessage({id:"app.workflow.title.2"})):null},current:m.current,pageSize:m.pageSize,onShowSizeChange:null,total:m.total,onChange:m.onChange})}),U]})},_=function(x){var T,j=x.item;console.log(j);var m=(0,ae.useIntl)(),b="/icons/creation/",w="",S="";switch(j.type){case 1:S=m.formatMessage({id:"app.itemHeader.agent"}),w="Agent";break;case 2:S=m.formatMessage({id:"app.itemHeader.chatRoom"}),w="ChatRoom";break;case 3:S=m.formatMessage({id:"app.itemHeader.workFlow"}),w="WorkFlow";break;default:break}return b+=r.Le[w],(0,e.jsxs)("div",{className:"flex gap-5 shrink-0",children:[(0,e.jsx)("div",{className:"shrink-0",children:((T=j.agents_data)===null||T===void 0?void 0:T.length)>0?(0,e.jsx)(i.Z,{agentList:j.agents_data,size:"sm"}):(0,e.jsx)(Pe.Z,{Image:j.type==2?"/icons/chat_room.svg":(0,he.s9)("single",j.icon),avatar:j.avatar,icon:"".concat(b,".svg")})}),(0,e.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,e.jsx)("div",{className:"text-sm text-[#213044]",children:(0,e.jsx)(ce.Z.Paragraph,{ellipsis:{rows:2,tooltip:j.name},className:"!mb-0",children:j.name})}),(0,e.jsx)("div",{className:"text-xs text-[#999999]",children:S})]})]})},xe=function(){var L,x,T=(0,re.Z)(function(g){return g.setDealtWithData}),j=(0,re.Z)(function(g){return g.prevConfirmDealtWith}),m=(0,re.Z)(function(g){return g.dealtWithData}),b=(0,re.Z)(function(g){return g.setRunPanelLogRecord}),w=(0,re.Z)(function(g){return g.submitPromptId}),S=(0,ae.useIntl)(),U=(0,s.useRef)(null),y=(0,s.useState)(null),O=H()(y,2),D=O[0],$=O[1],le=(0,ie.Z)("pageNumber"),W=H()(le,2),Ie=W[0],V=W[1],_e=function(A){console.log(A),T(A)};(0,oe.Z)(function(){var g=X.list.map(function(A){return A.exec_id==j.exec_id&&(A.need_human_confirm=0),A});ye(M()(M()({},X),{},{list:g}))},[j]);var B=function(){var g=G()(C()().mark(function A(ze){var Be,c,u;return C()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return Be=ze.current,c=ze.pageSize,I.next=3,(0,Ce.VE)({current:Be,pageSize:c});case 3:return u=I.sent,I.abrupt("return",{list:u.data.list,success:!0,total:u.data.total_count});case 5:case"end":return I.stop()}},A)}));return function(ze){return g.apply(this,arguments)}}(),ee=d(B,{defaultPageSize:10}),N=ee.data,pe=ee.loading,K=ee.pagination,be=(0,s.useState)(N),Me=H()(be,2),X=Me[0],ye=Me[1];(0,s.useEffect)(function(){ye(N)},[N]),(0,oe.Z)(function(){U.current&&U.current.reload()},[w]);var l=(0,s.useCallback)(function(g){var A=g.item;return(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:A.app_name})," ",(0,e.jsx)(we.Z,{}),(0,e.jsx)("span",{className:A.need_human_confirm==1?"text-[#1B64F3]":"text-[#808183]",children:A.node_name})]}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate",children:A.app_run_name})]})},[X]);return(0,e.jsx)(De.Z,{spinning:pe,children:(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(k,{iconSrc:"/icons/back_log.svg",titleText:S.formatMessage({id:"app.workflow.backlogs.title"}),pagination:K}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-2.5 mt-4 overflow-y-auto h-full",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[X==null||(L=X.list)===null||L===void 0?void 0:L.map(function(g,A){return g.type=3,(0,e.jsxs)("div",{onClick:function(){console.log(g),g.need_human_confirm&&(T(g),$(g),b(!1))},className:"flex items-center gap-5 cursor-pointer duration-200 rounded-lg  p-2.5 hover:bg-[#fafafa]",children:[(0,e.jsx)(Pe.Z,{Image:(0,he.s9)("single",g.icon),avatar:g.avatar}),(0,e.jsx)(l,{item:g}),(0,e.jsx)("div",{children:g.need_human_confirm?(0,e.jsx)(t.Z,{title:S.formatMessage({id:"workflow.needHumanConfirm"}),children:(0,e.jsx)(se.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(t.Z,{title:S.formatMessage({id:"workflow.noHumanConfirm"}),children:(0,e.jsx)(Ee.Z,{className:"text-[#52C41C]"})})})]},g.exec_id)}),!pe&&(X==null||(x=X.list)===null||x===void 0?void 0:x.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(n.Z,{image:"/images/empty.svg",description:S.formatMessage({id:"app.workflow.backlogs.empty"})})})]})]})})},de=a(29933),Z=a(4393),Oe=Z.Z.Meta,q=function(){var L,x,T=(0,ae.useIntl)(),j=function(O){console.log(O);var D=O.app_id||O.apps_id;switch(O.type){case 1:ae.history.push("/Agents?app_id=".concat(D));break;case 2:ae.history.push("/chat_room/".concat(O.chatroom_id));break;case 3:ae.history.push("/workspace/workflow?app_id=".concat(D));break;default:break}},m=function(){var y=G()(C()().mark(function O(D){var $,le,W;return C()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return $=D.current,le=D.pageSize,V.next=3,(0,Ce.vu)({current:$,pageSize:le});case 3:return W=V.sent,V.abrupt("return",{list:W.data.list,success:!0,total:W.data.total_count});case 5:case"end":return V.stop()}},O)}));return function(D){return y.apply(this,arguments)}}(),b=d(m,{defaultPageSize:8}),w=b.data,S=b.loading,U=b.pagination;return console.log(S),(0,e.jsxs)("div",{className:"flex-grow-0",children:[(0,e.jsx)(k,{iconSrc:"/icons/recently_active.svg",titleText:T.formatMessage({id:"app.workflow.ra.title"}),pagination:U}),(0,e.jsx)("div",{className:"grid grid-cols-4  gap-4 mt-4",children:w==null||(L=w.list)===null||L===void 0?void 0:L.map(function(y,O){var D=y.type==3?y.process_name:y.last_agent_name;return(0,e.jsx)(de.Z,{className:"h-[160px] cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",title:(0,e.jsx)(_,{item:y}),onClick:function(){return j(y)},bodyStyle:{padding:"15px 20px"},children:(0,e.jsx)(ce.Z.Paragraph,{ellipsis:{rows:2,tooltip:D},children:D})},y.app_id)})}),!(w!=null&&(x=w.list)!==null&&x!==void 0&&x.length)&&(0,e.jsxs)("div",{className:"h-[400px] w-full flex items-center justify-center",children:[!S&&(0,e.jsx)(n.Z,{imageStyle:{display:"flex",justifyContent:"center"},image:"/images/empty.svg",description:T.formatMessage({id:"app.workflow.ra.empty"})}),(0,e.jsx)(De.Z,{spinning:S})]})]})},z=a(37369),ue=a(43722),me=a(39873),Ne=a(28508),Re=a(66309),ge=a(28036),$e=a(26412),P=a(22683),je=a(97807),Le=a(86),Fe=a(38027),He=(0,s.memo)(function(L){var x,T,j,m,b,w,S,U,y,O,D,$,le,W,Ie,V,_e,B=L.data,ee=L.onClose,N=(0,ae.useIntl)(),pe=(0,s.useState)(500),K=H()(pe,2),be=K[0],Me=K[1],X=(0,re.Z)(function(c){return c.setRunPanelLogRecord}),ye=(0,We.Z)(function(){var c=G()(C()().mark(function u(p,I){var o;return C()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,ue.Gh)({chatroom_id:p,app_run_id:I});case 2:return o=ne.sent,ne.abrupt("return",o.data);case 4:case"end":return ne.stop()}},u)}));return function(u,p){return c.apply(this,arguments)}}(),{manual:!0}),l=ye.data,g=ye.loading,A=ye.run;(0,s.useEffect)(function(){B!=null&&B.chatroom_id&&B!==null&&B!==void 0&&B.app_run_id&&A(B.chatroom_id,B.app_run_id)},[B==null?void 0:B.chatroom_id,B==null?void 0:B.app_run_id,A]);var ze=function(u){var p={1:{color:"processing",text:N.formatMessage({id:"workflow.running"})},2:{color:"success",text:N.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:N.formatMessage({id:"workflow.runF"})}},I=p[u]||{color:"default",text:"Unknown"};return(0,e.jsx)(Re.Z,{color:I.color,children:I.text})},Be=function(u){Me(u)};return(0,e.jsx)(me.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:be,onChange:Be,children:(0,e.jsx)(de.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,e.jsx)(ge.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:ee,icon:(0,e.jsx)(Ne.Z,{})}),title:(0,e.jsx)(ce.Z.Title,{level:5,children:N.formatMessage({id:"app.chatroom.log.title"})}),loading:g,children:(0,e.jsx)("div",{className:"space-y-6",children:g?(0,e.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,e.jsx)(De.Z,{})}):l!=null&&l.source_run?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)($e.Z,{column:1,bordered:!0,size:"small",children:[(0,e.jsx)($e.Z.Item,{label:N.formatMessage({id:"app.chatroom.log.name"}),children:l.source_run.name}),(0,e.jsx)($e.Z.Item,{label:N.formatMessage({id:"workflow.created_time"}),children:l.source_run.created_time}),(0,e.jsx)($e.Z.Item,{label:N.formatMessage({id:"workflow.finished_time"}),children:l.source_run.finished_time}),(0,e.jsxs)($e.Z.Item,{label:N.formatMessage({id:"workflow.elapsed_time"}),children:[l.source_run.elapsed_time,"s"]}),(0,e.jsx)($e.Z.Item,{label:"Tokens",children:l.source_run.total_tokens})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(ce.Z.Title,{level:5,children:"\u8BA8\u8BBA\u603B\u7ED3"}),(0,e.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:l.source_run.created_time}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"p-[12px]  leading-[22px] bg-gray-50 rounded mt-2",children:(0,e.jsx)(P.U,{rehypePlugins:[je.Z],children:l==null||(x=l.source_run)===null||x===void 0?void 0:x.summary})})})]}),l!=null&&l.source_corrections&&(l==null?void 0:l.source_corrections.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[N.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),l==null?void 0:l.source_corrections.map(function(c,u){return(0,e.jsx)("div",{className:"mb-[16px] last-of-type:mb-0",children:(0,e.jsx)("div",{className:"rounded-[4px]  ".concat((l==null?void 0:l.source_corrections.length)-1!=u?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[N.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",c.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[N.formatMessage({id:"app.summaryhistory.time"}),": ",c.created_time]}),(0,e.jsx)(P.U,{rehypePlugins:[je.Z],children:c==null?void 0:c.corrected_summary})]})})},c.created_time)})]}):(0,e.jsx)(e.Fragment,{}),l!=null&&l.target_run?(0,e.jsxs)("div",{className:"py-[12px]",children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[N.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,e.jsx)("span",{className:"font-[500] ",children:l!=null&&(T=l.target_run)!==null&&T!==void 0&&T.agent_id?"agent":"workflow"}),(0,e.jsx)("span",{className:"px-[6px]",children:":"}),(0,e.jsx)("span",{children:l==null||(j=l.target_run)===null||j===void 0||(j=j.app)===null||j===void 0?void 0:j.name})]})}),(0,e.jsx)("div",{children:l!=null&&(m=l.target_run)!==null&&m!==void 0&&(m=m.inputs)!==null&&m!==void 0&&m.properties?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[N.formatMessage({id:"app.summaryhistory.input"}),":"]}),(0,Fe.vw)(l==null||(b=l.target_run)===null||b===void 0||(b=b.inputs)===null||b===void 0?void 0:b.properties).map(function(c){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:c.display_name||c.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:c.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{children:l!=null&&(w=l.target_run)!==null&&w!==void 0&&w.raw_user_prompt?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[N.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:l==null||(S=l.target_run)===null||S===void 0?void 0:S.raw_user_prompt})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[N.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(l==null||(U=l.target_run)===null||U===void 0?void 0:U.agent_id)!=0?(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(P.U,{rehypePlugins:[je.Z],children:l==null||(y=l.target_run)===null||y===void 0||(y=y.outputs)===null||y===void 0?void 0:y.value})}):(0,e.jsx)(Le.Z,{status:l==null||(O=l.target_run)===null||O===void 0?void 0:O.status,icon:l==null||(D=l.target_run)===null||D===void 0?void 0:D.icon,title:l==null||($=l.target_run)===null||$===void 0?void 0:$.name,textDetails:(0,e.jsx)(Fe.p1,{progressObj:{created_time:l==null||(le=l.target_run)===null||le===void 0?void 0:le.created_time,elapsed_time:l==null||(W=l.target_run)===null||W===void 0?void 0:W.elapsed_time,app_name:l==null||(Ie=l.target_run)===null||Ie===void 0?void 0:Ie.app.name,status:l==null||(V=l.target_run)===null||V===void 0?void 0:V.status}}),handleClick:function(){var u,p,I,o,fe,ne,Se,Ze,ve,Ue;X({app_id:l==null||(u=l.target_run)===null||u===void 0||(u=u.app)===null||u===void 0?void 0:u.id,app_name:l==null||(p=l.target_run)===null||p===void 0||(p=p.app)===null||p===void 0?void 0:p.name,icon:l==null||(I=l.target_run)===null||I===void 0?void 0:I.icon,workflow_id:l==null||(o=l.target_run)===null||o===void 0?void 0:o.workflow_id,type:2,app_run_id:l==null||(fe=l.target_run)===null||fe===void 0?void 0:fe.id,run_name:l==null||(ne=l.target_run)===null||ne===void 0?void 0:ne.name,status:l==null||(Se=l.target_run)===null||Se===void 0?void 0:Se.status,created_time:l==null||(Ze=l.target_run)===null||Ze===void 0?void 0:Ze.created_time,elapsed_time:l==null||(ve=l.target_run)===null||ve===void 0?void 0:ve.elapsed_time,completed_progress:"".concat(l==null||(Ue=l.target_run)===null||Ue===void 0?void 0:Ue.percentage,"%")})},progress:l==null||(_e=l.target_run)===null||_e===void 0?void 0:_e.percentage})})]})]}):(0,e.jsx)(e.Fragment,{})]}):null})})})}),Ke=a(85422),Ge=a(66212),Xe=a(88284),Je=a(28058),Ye=a(2068),Qe=a(44720),ke=a(38703),qe=a(55241),et=a(34041),tt=(0,s.memo)(function(){var L,x,T=(0,re.Z)(function(c){return c.setDealtWithData}),j=(0,re.Z)(function(c){return c.setRunPanelLogRecord}),m=(0,ae.useIntl)(),b=(0,s.useState)(0),w=H()(b,2),S=w[0],U=w[1],y=function(u){var p=u.text;switch(p){case 1:return(0,e.jsx)(Ge.Z,{className:"text-blue-500"});case 2:return(0,e.jsx)(Xe.Z,{className:"text-green-500"});case 3:return(0,e.jsx)(Je.Z,{className:"text-red-500"})}return(0,e.jsx)("span",{children:p})},O=function(){var c=G()(C()().mark(function u(p){var I,o,fe,ne,Se;return C()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return I=p.current,o=p.pageSize,fe=p.showStatus,ne=fe===void 0?0:fe,ve.next=3,(0,Ce.PE)({current:I,pageSize:o,showStatus:ne});case 3:return Se=ve.sent,ve.abrupt("return",{list:Se.data.list,success:!0,total:Se.data.total_count});case 5:case"end":return ve.stop()}},u)}));return function(p){return c.apply(this,arguments)}}(),D=d(function(c){var u=c.current,p=c.pageSize;return O({current:u,pageSize:p,showStatus:S})},{defaultPageSize:10,refreshDeps:[S]}),$=D.data,le=D.loading,W=D.pagination,Ie=D.run,V=(0,s.useState)(!1),_e=H()(V,2),B=_e[0],ee=_e[1],N=(0,s.useState)(null),pe=H()(N,2),K=pe[0],be=pe[1],Me=(0,s.useState)(!1),X=H()(Me,2),ye=X[0],l=X[1],g=function(){ee(!1),l(!1)},A=function(u){switch(u.show_status){case 1:be(u),ee(!1),l(!0);break;case 2:be(u),l(!1),ee(!0);break;case 3:j(u),T(null);break;default:break}},ze=function(u){var p=u.type;switch(p){case 1:return(0,e.jsx)(Re.Z,{color:"blue",children:m.formatMessage({id:"app.workflow.log.type.roundtable"})});case 2:return(0,e.jsx)(Re.Z,{color:"green",children:m.formatMessage({id:"app.workflow.log.type.agent"})});case 3:return(0,e.jsx)(Re.Z,{color:"purple",children:m.formatMessage({id:"app.workflow.log.type.workflow"})})}},Be=(0,s.memo)(function(c){var u,p,I,o=c.item,fe=o.status==1?"#1B64F3":o.status==2?"#22C55F":"#F04444",ne=o.status==1?"#f9fafe":o.status==2?"#f6fcf3":"#fafafa",Se=(0,s.useRef)(null),Ze=(0,Qe.Z)(Se),ve=function(){return o.show_status==1?o.chat_room_name:o.show_status==2?o.app_runs_name:o.show_status==3?o.associated_chat_room_name!=""?m.formatMessage({id:"app.workflow.log.roundtable.guidance"},{name:o.associated_chat_room_name}):o.app_runs_name:o.apps_name},Ue=function(){return o.show_status==1&&o.apps_name?m.formatMessage({id:"app.workflow.log.guidance.execution"},{type:o.model==1?m.formatMessage({id:"app.workflow.log.type.agent.simple"}):m.formatMessage({id:"app.workflow.log.type.workflow.simple"}),name:o.apps_name}):o.apps_name};return(0,e.jsxs)("div",{onClick:function(){A(o)},ref:Se,className:"flex relative rounded truncate gap-5  items-center shrink-0 cursor-pointer duration-200  box-border py-2.5 pr-5 ",children:[(0,e.jsx)("div",{style:{backgroundColor:Ze?ne:"",width:Ze?"".concat(o.completed_steps/o.total_steps*100,"%"):"0%",transition:"0.5s"},className:"w-full h-full absolute left-0 duration-500"}),(0,e.jsx)("div",{style:{backgroundColor:fe},className:"w-[4px] h-full z-10 mr-[10px] absolute"}),(0,e.jsx)("div",{className:"ml-5",children:((u=o.agents_data)===null||u===void 0?void 0:u.length)>0?(0,e.jsx)("div",{className:"ml-2",children:(0,e.jsx)(i.Z,{agentList:o.agents_data,size:"sm"})}):(0,e.jsx)(Pe.Z,{Image:(0,he.s9)("single",o.icon),avatar:o.avatar})}),(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1  z-10",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("span",{children:[(0,e.jsx)(ze,{type:o.show_status}),(0,e.jsx)(ve,{})]})}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate  max-w-7/8",children:(0,e.jsxs)("div",{className:"flex items-center truncate",children:[(0,e.jsxs)("span",{children:[" ",o.created_time," "]}),(0,e.jsx)("span",{style:{maxWidth:"calc(100% - 200px)"},className:"truncate ml-2 ",children:(0,e.jsx)(Ue,{})}),(o.show_status==3||o.show_status==2)&&(0,e.jsxs)("span",{className:"inline-flex items-center ml-2 gap-2",children:[(0,e.jsx)("span",{style:{backgroundColor:fe},className:"inline-block w-1 h-1 rounded-sm"}),(p=o.elapsed_time)===null||p===void 0?void 0:p.toFixed(6),"S"]})]})})]}),o.total_steps!=o.completed_steps&&(0,e.jsx)("div",{className:"flex items-center justify-center",children:(0,e.jsx)(ke.Z,{type:"circle",size:30,percent:parseInt(o.completed_steps/o.total_steps*100)})}),o.show_status==3&&(o==null||(I=o.file_list)===null||I===void 0?void 0:I.length)>0&&(0,e.jsx)("div",{className:"flex items-center justify-center z-20",children:(0,e.jsx)(qe.Z,{content:(0,e.jsx)(z.Z,{files:o==null?void 0:o.file_list}),placement:"leftTop",title:m.formatMessage({id:"app.workflow.log.output.files"}),children:(0,e.jsx)(Ye.Z,{className:"text-[22px] text-green-600"})})})]},o.app_run_id)});return(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(k,{iconSrc:"/icons/workflows.svg",titleText:m.formatMessage({id:"app.workflow.log.title"}),pagination:W,showTotal:!1,titleAfter:(0,e.jsx)("div",{className:"flex-1 flex justify-end",children:(0,e.jsx)(et.Z,{defaultValue:0,className:"w-full max-w-[120px]",allowClear:!0,style:{maxWidth:"120px"},onChange:function(u){var p;U(u),(p=W.onChange)===null||p===void 0||p.call(W,1,W.pageSize)},size:"small",options:[{label:m.formatMessage({id:"app.workflow.log.filter.all"}),value:0},{label:m.formatMessage({id:"app.workflow.log.filter.roundtable"}),value:1},{label:m.formatMessage({id:"app.workflow.log.filter.agent"}),value:2},{label:m.formatMessage({id:"app.workflow.log.filter.workflow"}),value:3}]})})}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-4 h-full mt-4 overflow-y-auto box-border relative flex flex-col gap-5",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[$==null||(L=$.list)===null||L===void 0?void 0:L.map(function(c,u){return(0,e.jsx)(Be,{item:c})}),!le&&($==null||(x=$.list)===null||x===void 0?void 0:x.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(n.Z,{image:"/images/empty.svg",description:m.formatMessage({id:"app.workflow.log.empty"})})})]}),B&&(K==null?void 0:K.app_run_id)&&(0,e.jsx)(Ke.Z,{data:K,onClose:g}),ye&&(0,e.jsx)(He,{data:{chatroom_id:K==null?void 0:K.chatroom_id,app_run_id:K==null?void 0:K.app_run_id},onClose:g})]})}),at=function(){return(0,e.jsxs)("div",{style:{height:"calc(100vh - 56px)"},className:"w-full p-[30px] flex flex-col gap-6 overflow-x-auto box-border",children:[(0,e.jsx)(q,{}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-6 flex-1",children:[(0,e.jsx)(xe,{}),(0,e.jsx)(tt,{})]}),(0,e.jsx)(h.$_,{}),(0,e.jsx)(R.Z,{})]})},lt=at},12845:function(Te,J,a){a.d(J,{Z:function(){return De}});var h=a(67294),R=a(93967),s=a.n(R),F=a(53124),C=a(35792),f=a(861),G=a(14747),Y=a(83559),M=a(83262);const E=t=>{const{componentCls:n,calc:i}=t;return{[n]:Object.assign(Object.assign({},(0,G.Wf)(t)),{margin:0,padding:0,listStyle:"none",[`${n}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:i(i(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,f.unit)(t.itemHeadSize)})`,borderInlineStart:`${(0,f.unit)(t.tailWidth)} ${t.lineType} ${t.tailColor}`},"&-pending":{[`${n}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${n}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${(0,f.unit)(t.dotBorderWidth)} ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:i(t.itemHeadSize).div(2).equal(),insetInlineStart:i(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:i(i(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:i(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${n}-item-tail`]:{display:"none"},[`> ${n}-item-content`]:{minHeight:i(t.controlHeightLG).mul(1.2).equal()}}},[`&${n}-alternate,
        &${n}-right,
        &${n}-label`]:{[`${n}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:i(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:i(t.tailWidth).div(2).equal()}},"&-left":{[`${n}-item-content`]:{insetInlineStart:`calc(50% - ${(0,f.unit)(t.marginXXS)})`,width:`calc(50% - ${(0,f.unit)(t.marginSM)})`,textAlign:"start"}},"&-right":{[`${n}-item-content`]:{width:`calc(50% - ${(0,f.unit)(t.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${n}-right`]:{[`${n}-item-right`]:{[`${n}-item-tail,
            ${n}-item-head,
            ${n}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,f.unit)(i(i(t.itemHeadSize).add(t.tailWidth)).div(2).equal())})`},[`${n}-item-content`]:{width:`calc(100% - ${(0,f.unit)(i(t.itemHeadSize).add(t.marginXS).equal())})`}}},[`&${n}-pending
        ${n}-item-last
        ${n}-item-tail`]:{display:"block",height:`calc(100% - ${(0,f.unit)(t.margin)})`,borderInlineStart:`${(0,f.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`&${n}-reverse
        ${n}-item-last
        ${n}-item-tail`]:{display:"none"},[`&${n}-reverse ${n}-item-pending`]:{[`${n}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${(0,f.unit)(t.margin)})`,borderInlineStart:`${(0,f.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`${n}-item-content`]:{minHeight:i(t.controlHeightLG).mul(1.2).equal()}},[`&${n}-label`]:{[`${n}-item-label`]:{position:"absolute",insetBlockStart:i(i(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:`calc(50% - ${(0,f.unit)(t.marginSM)})`,textAlign:"end"},[`${n}-item-right`]:{[`${n}-item-label`]:{insetInlineStart:`calc(50% + ${(0,f.unit)(t.marginSM)})`,width:`calc(50% - ${(0,f.unit)(t.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${n}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},H=t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25});var Ce=(0,Y.I$)("Timeline",t=>{const n=(0,M.mergeToken)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[E(n)]},H),re=function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,r=Object.getOwnPropertySymbols(t);v<r.length;v++)n.indexOf(r[v])<0&&Object.prototype.propertyIsEnumerable.call(t,r[v])&&(i[r[v]]=t[r[v]]);return i},se=t=>{var{prefixCls:n,className:i,color:r="blue",dot:v,pending:ce=!1,position:e,label:k,children:_}=t,xe=re(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:de}=h.useContext(F.E_),Z=de("timeline",n),Oe=s()(`${Z}-item`,{[`${Z}-item-pending`]:ce},i),q=/blue|red|green|gray/.test(r||"")?void 0:r,z=s()(`${Z}-item-head`,{[`${Z}-item-head-custom`]:!!v,[`${Z}-item-head-${r}`]:!q});return h.createElement("li",Object.assign({},xe,{className:Oe}),k&&h.createElement("div",{className:`${Z}-item-label`},k),h.createElement("div",{className:`${Z}-item-tail`}),h.createElement("div",{className:z,style:{borderColor:q,color:q}},v),h.createElement("div",{className:`${Z}-item-content`},_))},Ee=a(74902),ie=a(19267),oe=function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,r=Object.getOwnPropertySymbols(t);v<r.length;v++)n.indexOf(r[v])<0&&Object.prototype.propertyIsEnumerable.call(t,r[v])&&(i[r[v]]=t[r[v]]);return i},te=t=>{var{prefixCls:n,className:i,pending:r=!1,children:v,items:ce,rootClassName:e,reverse:k=!1,direction:_,hashId:xe,pendingDot:de,mode:Z=""}=t,Oe=oe(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const q=(P,je)=>Z==="alternate"?P==="right"?`${n}-item-right`:P==="left"?`${n}-item-left`:je%2===0?`${n}-item-left`:`${n}-item-right`:Z==="left"?`${n}-item-left`:Z==="right"?`${n}-item-right`:P==="right"?`${n}-item-right`:"",z=(0,Ee.Z)(ce||[]),ue=typeof r=="boolean"?null:r;r&&z.push({pending:!!r,dot:de||h.createElement(ie.Z,null),children:ue}),k&&z.reverse();const me=z.length,Ne=`${n}-item-last`,Re=z.filter(P=>!!P).map((P,je)=>{var Le;const Fe=je===me-2?Ne:"",He=je===me-1?Ne:"",{className:Ke}=P,Ge=oe(P,["className"]);return h.createElement(se,Object.assign({},Ge,{className:s()([Ke,!k&&r?Fe:He,q((Le=P==null?void 0:P.position)!==null&&Le!==void 0?Le:"",je)]),key:(P==null?void 0:P.key)||je}))}),ge=z.some(P=>!!(P!=null&&P.label)),$e=s()(n,{[`${n}-pending`]:!!r,[`${n}-reverse`]:!!k,[`${n}-${Z}`]:!!Z&&!ge,[`${n}-label`]:ge,[`${n}-rtl`]:_==="rtl"},i,e,xe);return h.createElement("ul",Object.assign({},Oe,{className:$e}),Re)},We=a(50344);function Ae(t,n){return t&&Array.isArray(t)?t:(0,We.Z)(n).map(i=>{var r,v;return Object.assign({children:(v=(r=i==null?void 0:i.props)===null||r===void 0?void 0:r.children)!==null&&v!==void 0?v:""},i.props)})}var d=Ae,Pe=function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,r=Object.getOwnPropertySymbols(t);v<r.length;v++)n.indexOf(r[v])<0&&Object.prototype.propertyIsEnumerable.call(t,r[v])&&(i[r[v]]=t[r[v]]);return i};const he=t=>{const{getPrefixCls:n,direction:i,timeline:r}=h.useContext(F.E_),{prefixCls:v,children:ce,items:e,className:k,style:_}=t,xe=Pe(t,["prefixCls","children","items","className","style"]),de=n("timeline",v),Z=(0,C.Z)(de),[Oe,q,z]=Ce(de,Z),ue=d(e,ce);return Oe(h.createElement(te,Object.assign({},xe,{className:s()(r==null?void 0:r.className,k,z,Z),style:Object.assign(Object.assign({},r==null?void 0:r.style),_),prefixCls:de,direction:i,items:ue,hashId:q})))};he.Item=se;var ae=he,De=ae}}]);
