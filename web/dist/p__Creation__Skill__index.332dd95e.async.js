(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[803],{82826:function(Y,I,t){"use strict";t.d(I,{Z:function(){return o}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},m=H,h=t(91146),M=function(T,j){return s.createElement(h.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:j,icon:m}))},U=s.forwardRef(M),o=U},89035:function(Y,I,t){"use strict";t.d(I,{Z:function(){return o}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},m=H,h=t(91146),M=function(T,j){return s.createElement(h.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:j,icon:m}))},U=s.forwardRef(M),o=U},81644:function(Y,I,t){"use strict";t.d(I,{Z:function(){return o}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},m=H,h=t(91146),M=function(T,j){return s.createElement(h.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:j,icon:m}))},U=s.forwardRef(M),o=U},2068:function(Y,I,t){"use strict";t.d(I,{Z:function(){return o}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},m=H,h=t(91146),M=function(T,j){return s.createElement(h.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:j,icon:m}))},U=s.forwardRef(M),o=U},15360:function(Y,I,t){"use strict";t.d(I,{Z:function(){return o}});var N=t(1413),s=t(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},m=H,h=t(91146),M=function(T,j){return s.createElement(h.Z,(0,N.Z)((0,N.Z)({},T),{},{ref:j,icon:m}))},U=s.forwardRef(M),o=U},83510:function(Y,I,t){"use strict";t.d(I,{LK:function(){return ee},bs:function(){return B},go:function(){return ke},uy:function(){return z}});var N=t(15009),s=t.n(N),H=t(99289),m=t.n(H),h=t(47520),M="/v1/apps/apps_list",U="/v1/agent/agent_delete/",o="/v1/workflow/workflow_app_delete/",se="/v1/vector/delete_dataset/",T="/v1/skill/delete_skill_by_app_id/",j="/v1/apps/apps_create",ue="/v1/apps/app_update/",ke=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,h.ZP)("".concat(M),{method:"GET",data:a});case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}(),ee=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log(a),u.next=3,a.mode;case 3:if(u.t0=u.sent,u.t0!=1){u.next=8;break}u.t1=(0,h.ZP)("".concat(U).concat(a.app_id),{method:"DELETE"}),u.next=9;break;case 8:u.t1=a.mode==2?(0,h.ZP)("".concat(o).concat(a.app_id),{method:"DELETE"}):a.mode==3?(0,h.ZP)("".concat(se).concat(a.app_id),{method:"DELETE"}):(0,h.ZP)("".concat(T).concat(a.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return c=u.t1,u.abrupt("return",c);case 11:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}(),z=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,h.ZP)("".concat(j),{method:"POST",data:a});case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}(),B=function(){var Z=m()(s()().mark(function x(a){var c;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,h.ZP)("".concat(ue).concat(a.app_id),{method:"PUT",data:a});case 2:return c=u.sent,u.abrupt("return",c);case 4:case"end":return u.stop()}},x)}));return function(a){return Z.apply(this,arguments)}}()},24805:function(Y,I,t){"use strict";t.d(I,{Hb:function(){return T},Ur:function(){return ke},cN:function(){return ue},ej:function(){return j}});var N=t(15009),s=t.n(N),H=t(99289),m=t.n(H),h=t(47520),M="/v1/skill/skill_info/",U="/v1/skill/skill_update/",o="/v1/skill/skill_publish/",se="/v1/skill/skill_run",T=function(){var ee=m()(s()().mark(function z(B,Z){var x;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,h.ZP)("".concat(M).concat(B),{method:"GET",data:{publish_status:Z=="true"?1:0}});case 2:return x=c.sent,c.abrupt("return",x);case 4:case"end":return c.stop()}},z)}));return function(B,Z){return ee.apply(this,arguments)}}(),j=function(){var ee=m()(s()().mark(function z(B){var Z;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.ZP)("".concat(U).concat(B.app_id),{method:"PUT",data:B.data});case 2:return Z=a.sent,a.abrupt("return",Z);case 4:case"end":return a.stop()}},z)}));return function(B){return ee.apply(this,arguments)}}(),ue=function(){var ee=m()(s()().mark(function z(B){var Z;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.ZP)("".concat(o).concat(B),{method:"PUT"});case 2:return Z=a.sent,a.abrupt("return",Z);case 4:case"end":return a.stop()}},z)}));return function(B){return ee.apply(this,arguments)}}(),ke=function(){var ee=m()(s()().mark(function z(B){var Z;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,h.ZP)("".concat(se),{method:"POST",data:B});case 2:return Z=a.sent,a.abrupt("return",Z);case 4:case"end":return a.stop()}},z)}));return function(B){return ee.apply(this,arguments)}}()},31664:function(Y,I,t){"use strict";t.r(I),t.d(I,{default:function(){return rt}});var N=t(97857),s=t.n(N),H=t(15009),m=t.n(H),h=t(99289),M=t.n(h),U=t(5574),o=t.n(U),se=t(83510),T=t(24805),j=t(10759),ue=t(32332),ke=t(2068),ee=t(89035),z=t(81644),B=t(15360),Z=t(82826),x=t(35312),a=t(40741),c=t(45360),W=t(28036),u=t(50136),Ce=t(74330),Ue=t(96486),Pe=t.n(Ue),C=t(67294),he=t(92939),Oe=t(7157),pe=t(26915),Te=t(72269),e=t(85893),Zt=pe.Z.TextArea,ze=function(l){var k=l.loading,X=l.FirstValue,L=l.FirstSkillref,n=l.Skillinfo,_=l.setSkillInfo,le=l.Operationbentate,te=l.firstjudgingcondition,p=l.pageKeyfun,ce=l.skillmenudisabled,Q=l.setskillmenudisabled,P=(0,x.useIntl)();(0,C.useEffect)(function(){},[]);var de=function(g){_(s()(s()({},n),{},{is_public:g?1:0}))},d=function(g){_(s()(s()({},n),{},{attrs_are_visible:g?1:0}))},ne=function(g){_(s()(s()({},n),{},{input_variables:g.free}))},ie=function(g,G){var b=new j.Kr("output","","");g.users.forEach(function(V){var $=new j._w(V.name,V.type?V.type:"string","",V.content,V.status);b.addProperty(V.name,$)});var J={input_variables:b,is_public:n.is_public,attrs_are_visible:n.attrs_are_visible};X(J)},me=function(){te(L.getFieldsValue().users,1)||L.validateFields().then(function(g){p("2"),Q(s()(s()({},ce),{},{second:!1}))}).catch(function(g){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:P.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:function(g){X(g)},style:{width:900},autoComplete:"off",form:L,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function(g,G){var b,J=G.add,V=G.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:P.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[n&&n.name,"\xA0"]})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:P.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:n&&n.description})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(he.Z,{className:"font-medium text-xs text-[#555555]",name:P.formatMessage({id:"skill.teamvisibility"}),title:P.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(Te.Z,{size:"small",onChange:de,checked:!!(n&&n.is_public==1)})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",name:P.formatMessage({id:"agent.attrVisible"}),title:P.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(Te.Z,{size:"small",onChange:d,checked:!!(n&&n.attrs_are_visible==1)})]}),!k&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Oe.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",required:!0,name:P.formatMessage({id:"skill.inputvariable"}),title:P.formatMessage({id:"skill.Callword.inputvariable"})})}),variableTypes:["string","number","json"],variables:Object.values((n==null||(b=n.input_variables)===null||b===void 0?void 0:b.properties)||{}),onChange:ne})})]})}}),(0,e.jsxs)("div",{className:"mt-[20px]",children:[(0,e.jsx)(W.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){me()},children:P.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(W.ZP,{onClick:function(){history.back()},children:P.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Ke=ze,_e=t(92485),$e=t(34041),We=function(l){var k=l.SecondValue,X=l.handleBack,L=l.Skillinfo,n=l.setSkillInfo,_=l.SkillRelyOn,le=l.setSkillRelyOn,te=l.Secondref,p=l.setskillcodestate,ce=l.setNewcode,Q=l.pageKeyfun,P=l.skillmenudisabled,de=l.setskillmenudisabled,d=(0,x.useIntl)();(0,C.useEffect)(function(){},[]);var ne=function(G){le(G)},ie=function(G){p(G===""),ce(JSON.stringify({python3:G}))},me=function(G){var b={dependencies:{python3:_?_.split(","):[]},code:L.code?L.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})};k(b)},K=function(){Q("3"),de(s()(s()({},P),{},{thirdly:!1}))};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:d.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:te,children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(he.Z,{className:"font-medium",name:d.formatMessage({id:"skill.dependency"}),title:d.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)($e.Z,{mode:"tags",style:{width:"100%"},value:_,onChange:ne,tokenSeparators:[","]})]}),(0,e.jsx)("div",{className:"text-xs text-gray-500 p-3 whitespace-pre-line border-l-4 mb-2 border-gray-300 bg-gray-50",children:"".concat(d.formatMessage({id:"customcode.notice.title"}),`:

`).concat(d.formatMessage({id:"customcode.notice.file.write"}),`\uFF1A
`).concat(d.formatMessage({id:"customcode.notice.file.write.desc"}),`
`).concat(d.formatMessage({id:"customcode.notice.file.write.example"}),`

`).concat(d.formatMessage({id:"customcode.notice.file.return"}),`\uFF1A
`).concat(d.formatMessage({id:"customcode.notice.file.return.desc"}),`
`).concat(d.formatMessage({id:"customcode.notice.file.return.example"}))}),(0,e.jsxs)(a.Z.Item,{children:[(0,e.jsx)("div",{className:"",children:d.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-[345px]",children:(0,e.jsx)(_e.Z,{language:"python3",value:L&&L.code?JSON.parse(L.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,onChange:ie,title:"python3"})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(W.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){K()},children:d.formatMessage({id:"skill.btn.nextstep"})}),(0,e.jsx)(W.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Je=We,je=t(78045),Nt=pe.Z.TextArea,Mt=pe.Z.Search,Xe=function(l){var k=l.loading,X=l.ThirdlyValue,L=l.Thirdlyref,n=l.handleBack,_=l.Skillinfo,le=l.setSkillInfo,te=l.Operationbentate,p=l.firstjudgingcondition,ce=l.pageKeyfun,Q=l.skillmenudisabled,P=l.setskillmenudisabled,de=l.skillupdata,d=(0,x.useIntl)(),ne=(0,C.useState)(null),ie=o()(ne,2),me=ie[0],K=ie[1];(0,C.useEffect)(function(){},[]);var g=function($){le(s()(s()({},_),{},{output_type:$.target.value}))},G=function($){le(s()(s()({},_),{},{output_variables:$.free}))},b=function($){var i=new j.Kr("output","","");$.users.forEach(function(D){var S=new j._w(D.name,D.type?D.type:"string","",D.content,!1);i.addProperty(D.name,S)});var ae={output_type:_.output_type,output_variables:i};X(ae)},J=function(){p(L.getFieldsValue().users,2)||L.validateFields().then(function($){de()}).catch(function($){})};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsxs)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:[" ",d.formatMessage({id:"skill.menu.output"})]})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:b,style:{width:900},autoComplete:"off",form:L,children:[(0,e.jsx)(a.Z.List,{name:"users",children:function($,i){var ae,D=i.add,S=i.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(he.Z,{name:d.formatMessage({id:"skill.outputvariable"}),title:d.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(je.ZP.Group,{onChange:g,value:_&&_.output_type,children:[(0,e.jsx)(je.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(je.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(je.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(je.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:d.formatMessage({id:"skill.radio.file"})})})]})]}),!k&&(0,e.jsx)("div",{className:"",children:(0,e.jsx)(Oe.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",required:!0,name:d.formatMessage({id:"skill.outputv"}),title:d.formatMessage({id:"skill.Callword.outputv"})})}),variableTypes:["string","number","json","file"],variables:Object.values((_==null||(ae=_.output_variables)===null||ae===void 0?void 0:ae.properties)||{}),onChange:G})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsxs)(W.ZP,{type:"primary",className:"mr-[20px] mt-[30px]",onClick:function(){J()},children:[" ",d.formatMessage({id:"skill.btn.savedebug"})]}),(0,e.jsx)(W.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"skill.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Ye=Xe,Qe=t(13769),qe=t.n(Qe),et=t(49677),tt=t.n(et),at=t(68672),st=["key","name"],Ct=pe.Z.TextArea,Pt=pe.Z.Search,lt=function(l){var k=l.FourthlyValue,X=l.Fourthlyref,L=l.handleBack,n=l.Skillinfo,_=l.Operationbentate,le=l.skillid,te=l.app_id,p=(0,x.useIntl)(),ce=(0,C.useState)(null),Q=o()(ce,2),P=Q[0],de=Q[1],d=(0,C.useState)(!1),ne=o()(d,2),ie=ne[0],me=ne[1];(0,C.useEffect)(function(){},[]);var K=function(){var D=M()(m()().mark(function S(){var E;return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,T.cN)(te||n.app_id);case 2:E=R.sent,E.code==0?c.ZP.success(p.formatMessage({id:"skill.publishsuccess"})):c.ZP.error(p.formatMessage({id:"skill.select.value"}));case 4:case"end":return R.stop()}},S)}));return function(){return D.apply(this,arguments)}}(),g=function(S){var E=S.users.filter(function(v,y){return v.type=="number"&&!Number(v.value)&&!!v.value});if(E.length>0)c.ZP.warning(p.formatMessage({id:"skill.message.warning.vlaue"}));else{me(!0);var O=new j.Kr("output","","");S.users.forEach(function(v){var y=new j._w(v.name,v.type,v.type=="string"?v.value:Number(v.value),v.content,v.status);O.addProperty(v.name,y)});var R={skill_id:le||n.id,input_dict:O};$(R)}},G=(0,C.useState)([]),b=o()(G,2),J=b[0],V=b[1],$=function(){var D=M()(m()().mark(function S(E){return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:(0,T.Ur)(E).then(function(v){c.ZP.success(p.formatMessage({id:"skill.run.success"})),de(v.data.outputs),V(v.data.file_list||[]),me(!1)}).catch(function(v){me(!1),v.code==="ERR_NETWORK"&&c.ZP.error(p.formatMessage({id:"skill.run.error"})),console.log(v,"err-===>")});case 1:case"end":return R.stop()}},S)}));return function(E){return D.apply(this,arguments)}}(),i=function(){var D=M()(m()().mark(function S(){return m()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:x.history.push("/Skill?app_id=".concat(te||(n==null?void 0:n.app_id),"&type=false")),location.reload();case 2:case"end":return O.stop()}},S)}));return function(){return D.apply(this,arguments)}}(),ae=function(){var D=M()(m()().mark(function S(E){var O,R;return m()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,fetch("/api/novel/".concat(novelId,"/outline"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});case 3:if(O=y.sent,O.ok){y.next=6;break}throw new Error("HTTP error! status: ".concat(O.status));case 6:return y.next=8,O.json();case 8:R=y.sent,c.ZP.success("\u4FDD\u5B58\u6210\u529F"),y.next=16;break;case 12:y.prev=12,y.t0=y.catch(0),console.error("Error saving outline:",y.t0),c.ZP.error("\u4FDD\u5B58\u5931\u8D25");case 16:case"end":return y.stop()}},S,null,[[0,12]])}));return function(E){return D.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:p.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:g,style:{width:900},autoComplete:"off",form:X,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsxs)("div",{children:[" ",p.formatMessage({id:"skill.inputvariable"})]})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:p.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:p.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(a.Z.List,{name:"users",children:function(S,E){return tt()(E),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:S.map(function(O){var R=O.key,v=O.name,y=qe()(O,st);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,s()(s()({},y),{},{name:[v,"content"],children:(0,e.jsx)(pe.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless"})})),(0,e.jsx)(a.Z.Item,s()(s()({},y),{},{name:[v,"value"],rules:[{required:!!(X.getFieldsValue()&&X.getFieldsValue().users[R].status==!0),message:p.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(pe.Z,{placeholder:X.getFieldsValue()&&X.getFieldsValue().users[R].status==!0?p.formatMessage({id:"skill.variantcontent.required"}):p.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(a.Z.Item,{rules:[{required:!0,message:p.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:p.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Ce.Z,{spinning:ie,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:P?(0,e.jsx)(_e.Z,{language:"python3",value:P&&JSON.stringify(P)}):null}),J.length>0&&(0,e.jsx)(at.Z,{files:J,title:p.formatMessage({id:"agent.file.output"}),className:"mb-4"}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(W.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:p.formatMessage({id:"skill.run"})})})})]})})]})]}),(0,e.jsx)("div",{className:"w-28",children:(n==null?void 0:n.publish_status)===1&&(n==null?void 0:n.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsxs)(W.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:i,children:[" ",p.formatMessage({id:"skill.amend"})]})}):(0,e.jsx)("div",{children:(0,e.jsxs)(W.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:K,children:[" ",p.formatMessage({id:"skill.publish"})]})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},nt=lt,it=function(){var l,k=(0,x.useIntl)(),X=a.Z.useForm(),L=o()(X,1),n=L[0],_=a.Z.useForm(),le=o()(_,1),te=le[0],p=a.Z.useForm(),ce=o()(p,1),Q=ce[0],P=a.Z.useForm(),de=o()(P,1),d=de[0],ne=(0,C.useState)(0),ie=o()(ne,2),me=ie[0],K=ie[1],g=(0,C.useState)("1"),G=o()(g,2),b=G[0],J=G[1],V=(0,C.useState)(null),$=o()(V,2),i=$[0],ae=$[1],D=(0,C.useState)(null),S=o()(D,2),E=S[0],O=S[1],R=(0,C.useState)(!0),v=o()(R,2),y=v[0],Ot=v[1],ut=(0,C.useState)(!1),Ee=o()(ut,2),Tt=Ee[0],dt=Ee[1],ot=(0,C.useState)(null),Ie=o()(ot,2),Ne=Ie[0],ct=Ie[1],mt=(0,C.useState)(null),Ve=o()(mt,2),Se=Ve[0],De=Ve[1],ft=(0,C.useState)(null),Re=o()(ft,2),pt=Re[0],Ae=Re[1],vt=(0,C.useState)(!0),Be=o()(vt,2),Fe=Be[0],fe=Be[1],ht=(0,C.useState)({first:!1,second:!1,thirdly:!1,fourthly:!1}),Le=o()(ht,2),oe=Le[0],xe=Le[1],xt=[{key:"1",disabled:oe.first,icon:(0,e.jsx)(ke.Z,{}),label:k.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:oe.second,icon:(0,e.jsx)(ee.Z,{}),label:k.formatMessage({id:"skill.menu.code"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="2"?"#1B64F3":"#213044"}},{key:"3",disabled:oe.thirdly,icon:(0,e.jsx)(z.Z,{}),label:k.formatMessage({id:"skill.menu.output"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="3"?"#1B64F3":"#213044"}},{key:"4",disabled:oe.fourthly,icon:(0,e.jsx)(B.Z,{}),label:k.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="4"?"#1B64F3":"#213044"}}];(0,C.useEffect)(function(){fe(!0);var A=new URLSearchParams(window.location.search);A.get("app_id")||xe({first:!1,second:!0,thirdly:!0,fourthly:!0}),Ge()},[]);var Ge=function(){var A=M()(m()().mark(function f(F){var r,w,q,we,re;return m()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(r=new URLSearchParams(window.location.search),fe(!0),w=null,!(r.get("app_id")||F)){ve.next=11;break}return ve.next=6,(0,T.Hb)(F||r.get("app_id"),r.get("type"));case 6:w=ve.sent,De(w.data.app_id),Ae(w.data.id),ve.next=12;break;case 11:w=(0,ue.iJ)();case 12:fe(!1),w.code==0?(ae(w.data),q=ge(w.data.input_variables),n.setFieldsValue(q),O(w.data.dependencies?w.data.dependencies.python3:[]),we=ge(w.data.output_variables),Q.setFieldsValue(we),re=ge(w.data.input_variables),d.setFieldsValue(re)):c.ZP.error(k.formatMessage({id:"skill.message.listerror"}));case 14:case"end":return ve.stop()}},f)}));return function(F){return A.apply(this,arguments)}}(),ge=function(f){var F={users:f&&f.properties?Object.values(f.properties).map(function(r){return{name:r.name,type:r.type,content:r.display_name,status:r.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return F},be=function(){var A=M()(m()().mark(function f(F,r){var w,q;return m()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return w={app_id:r||Se,data:F},re.next=3,(0,T.ej)(w);case 3:q=re.sent,fe(!1),q.code===0&&(c.ZP.success(k.formatMessage({id:"skill.conserve.success"})),Ge(r||Se),fe(!1));case 6:case"end":return re.stop()}},f)}));return function(F,r){return A.apply(this,arguments)}}(),gt=function(){history.back()},bt=function(f,F){debugger;be(f,F);debugger;var r=ge(f.input_variables);debugger;d.setFieldsValue(r)},yt=function(f){be(f)},kt=function(f){be(f)},jt=function(f){be(f)},Me=function(f){K(f)},St=function(f){J(f.key)},Ft=function(){if(!Se)(0,se.uy)((0,ue.Go)("GET")).then(function(r){De(r.data.app_id),(0,T.Hb)(r.data.app_id,!1).then(function(w){Ae(w.data.id);var q={};q={input_variables:i.input_variables?i.input_variables:ye(n.getFieldsValue()),is_public:i.is_public,attrs_are_visible:i.attrs_are_visible,dependencies:{python3:E||[]},code:Ne||(i.code?i.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:i.output_type,output_variables:i.output_variables?i.output_variables:ye(Q.getFieldsValue())};var we=ge(ye(n.getFieldsValue()));d.setFieldsValue(we),be(q,r.data.app_id);var re=s()(s()({},(0,ue.Go)("GET")),{},{app_id:r.data.app_id});(0,ue.Go)("SET",re),J("4"),xe(s()(s()({},oe),{},{fourthly:!1}))}).catch(function(w){fe(!1)})}).catch(function(r){fe(!1)});else{var f={input_variables:i.input_variables?i.input_variables:ye(n.getFieldsValue()),is_public:i.is_public,attrs_are_visible:i.attrs_are_visible,dependencies:{python3:E||[]},code:Ne||(i.code?i.code:JSON.stringify({python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`})),output_type:i.output_type,output_variables:i.output_variables?i.output_variables:ye(Q.getFieldsValue())},F=ge(ye(n.getFieldsValue()));d.setFieldsValue(F),be(f,Se),fe(!1);debugger;J("4"),xe(s()(s()({},oe),{},{fourthly:!1}))}},He=function(f,F){if(console.log(F),F==1){if(!i.input_variables)return c.ZP.warning(k.formatMessage({id:"skill.message.inputerror1"})),!0;if(Pe().isEmpty(i.input_variables.properties))return c.ZP.warning(k.formatMessage({id:"skill.message.inputerror1"})),!0}if(F==2){if(!i.output_variables)return c.ZP.warning(k.formatMessage({id:"skill.message.inputerror2"})),!0;if(Pe().isEmpty(i.output_variables.properties))return c.ZP.warning(k.formatMessage({id:"skill.message.inputerror2"})),!0}return wt(f,"name")?(c.ZP.warning(k.formatMessage({id:"skill.message.inputerror5"})),!0):!1},wt=function(f,F){var r=new Set;return f.some(function(w){var q=w[F];return r.has(q)?r.add(q):r.add(q)&&!1})},ye=function(f){var F=new j.Kr("output","","");return f.users.forEach(function(r){var w=new j._w(r.name,r.type?r.type:"string",r.value?r.value:"",r.content,r.status?r.status:!1);F.addProperty(r.name,w)}),F};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(W.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:gt,children:[(0,e.jsx)(Z.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:k.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(u.Z,{selectedKeys:[b],onClick:St,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[b],mode:"inline",items:xt})})]}),(0,e.jsx)(Ce.Z,{spinning:Fe,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px] ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsx)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:(l=(0,ue.Go)("GET"))!==null&&l!==void 0&&l.app_id?k.formatMessage({id:"skill.Editingskill"}):k.formatMessage({id:"skill.Creatingskill"})}),(i==null?void 0:i.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:k.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE]  text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:k.formatMessage({id:"skill.unpublish"})})]})}),(0,e.jsx)("div",{style:{display:b==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Fe&&(0,e.jsx)(Ke,{loading:Fe,FirstValue:bt,Skillinfo:i,setSkillInfo:ae,FirstSkillref:n,Operationbentate:y,firstjudgingcondition:He,pageKeyfun:J,skillmenudisabled:oe,setskillmenudisabled:xe})}),(0,e.jsx)("div",{style:{display:b==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Je,{SecondValue:yt,handleBack:Me,Skillinfo:i,setSkillInfo:ae,SkillRelyOn:E,setSkillRelyOn:O,Secondref:te,setskillcodestate:dt,setNewcode:ct,pageKeyfun:J,skillmenudisabled:oe,setskillmenudisabled:xe})}),(0,e.jsx)("div",{style:{display:b==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Fe&&(0,e.jsx)(Ye,{loading:Fe,ThirdlyValue:kt,handleBack:Me,Thirdlyref:Q,Skillinfo:i,setSkillInfo:ae,Operationbentate:y,firstjudgingcondition:He,pageKeyfun:J,skillmenudisabled:oe,setskillmenudisabled:xe,skillupdata:Ft})}),(0,e.jsx)("div",{style:{display:b==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(nt,{FourthlyValue:jt,handleBack:Me,Fourthlyref:d,Skillinfo:i,skillid:pt,app_id:Se,Operationbentate:y})})]})})})]})},rt=it},49677:function(Y){function I(t){if(t==null)throw new TypeError("Cannot destructure "+t)}Y.exports=I,Y.exports.__esModule=!0,Y.exports.default=Y.exports}}]);
