"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{11475:function(Q,N,a){a.d(N,{Z:function(){return w}});var O=a(1413),s=a(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},h=A,b=a(91146),_=function(R,G){return s.createElement(b.Z,(0,O.Z)((0,O.Z)({},R),{},{ref:G,icon:h}))},W=s.forwardRef(_),w=W},35790:function(Q,N,a){var O=a(1413),s=a(67294),A=a(19369),h=a(91146),b=function(w,M){return s.createElement(h.Z,(0,O.Z)((0,O.Z)({},w),{},{ref:M,icon:A.Z}))},_=s.forwardRef(b);N.Z=_},83510:function(Q,N,a){a.d(N,{LK:function(){return S},bs:function(){return K},go:function(){return C},uy:function(){return Z}});var O=a(15009),s=a.n(O),A=a(99289),h=a.n(A),b=a(47520),_="/v1/apps/apps_list",W="/v1/agent/agent_delete/",w="/v1/workflow/workflow_app_delete/",M="/v1/vector/delete_dataset/",R="/v1/skill/delete_skill_by_app_id/",G="/v1/apps/apps_create",T="/v1/apps/app_update/",C=function(){var k=h()(s()().mark(function p(v){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.ZP)("".concat(_),{method:"GET",data:v});case 2:return P=t.sent,t.abrupt("return",P);case 4:case"end":return t.stop()}},p)}));return function(v){return k.apply(this,arguments)}}(),S=function(){var k=h()(s()().mark(function p(v){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(v),t.next=3,v.mode;case 3:if(t.t0=t.sent,t.t0!=1){t.next=8;break}t.t1=(0,b.ZP)("".concat(W).concat(v.app_id),{method:"DELETE"}),t.next=9;break;case 8:t.t1=v.mode==2?(0,b.ZP)("".concat(w).concat(v.app_id),{method:"DELETE"}):v.mode==3?(0,b.ZP)("".concat(M).concat(v.app_id),{method:"DELETE"}):(0,b.ZP)("".concat(R).concat(v.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return P=t.t1,t.abrupt("return",P);case 11:case"end":return t.stop()}},p)}));return function(v){return k.apply(this,arguments)}}(),Z=function(){var k=h()(s()().mark(function p(v){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.ZP)("".concat(G),{method:"POST",data:v});case 2:return P=t.sent,t.abrupt("return",P);case 4:case"end":return t.stop()}},p)}));return function(v){return k.apply(this,arguments)}}(),K=function(){var k=h()(s()().mark(function p(v){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.ZP)("".concat(T).concat(v.app_id),{method:"PUT",data:v});case 2:return P=t.sent,t.abrupt("return",P);case 4:case"end":return t.stop()}},p)}));return function(v){return k.apply(this,arguments)}}()},43722:function(Q,N,a){a.d(N,{Gh:function(){return P},Gn:function(){return M},KH:function(){return K},Rp:function(){return k},cH:function(){return G},dB:function(){return R},j2:function(){return T},r5:function(){return S},rw:function(){return _},sI:function(){return C},sT:function(){return Z},sh:function(){return v},vu:function(){return w},xM:function(){return B},xT:function(){return p}});var O=a(15009),s=a.n(O),A=a(99289),h=a.n(A),b=a(47520),_=function(){var t=h()(s()().mark(function n(){var o;return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.ZP)("/v1/index/",{method:"GET"});case 2:return o=l.sent,l.abrupt("return",o);case 4:case"end":return l.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),W=null,w=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/",{method:"GET",data:o});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),M=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/".concat(o.id),{method:"DELETE"});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),R=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/",{method:"POST",data:o});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),G=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/".concat(o.id,"/details"),{method:"GET"});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),T=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:o.id}});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),C=function(){var t=h()(s()().mark(function n(o,i){var l;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/chatroom/".concat(i,"/update_chatroom"),{method:"POST",data:o});case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},n)}));return function(o,i){return t.apply(this,arguments)}}(),S=function(){var t=h()(s()().mark(function n(o,i){var l;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/chatroom/".concat(i,"/smart_selection"),{method:"POST",data:o});case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},n)}));return function(o,i){return t.apply(this,arguments)}}(),Z=function(){var t=h()(s()().mark(function n(o,i,l){var r;return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,b.ZP)("/v1/chatroom/".concat(i,"/agents/").concat(l,"/setting"),{method:"PUT",data:o});case 2:return r=E.sent,E.abrupt("return",r);case 4:case"end":return E.stop()}},n)}));return function(o,i,l){return t.apply(this,arguments)}}(),K=function(){var t=h()(s()().mark(function n(o,i){var l;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chatroom_message"),{method:"GET",data:i});case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},n)}));return function(o,i){return t.apply(this,arguments)}}(),k=function(){var t=h()(s()().mark(function n(o,i){var l;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chat_history_message_summary"),{method:"POST",data:i});case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},n)}));return function(o,i){return t.apply(this,arguments)}}(),p=function(){var t=h()(s()().mark(function n(o,i){var l;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chat_history_summary"),{method:"POST",data:i});case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},n)}));return function(o,i){return t.apply(this,arguments)}}(),v=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:o});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),P=function(){var t=h()(s()().mark(function n(o){var i;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/chat_room_history_single",{method:"GET",data:o});case 2:return i=r.sent,r.abrupt("return",i);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),B=function(){var t=h()(s()().mark(function n(o,i){var l;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chat_single_message_generation"),{method:"POST",data:i});case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},n)}));return function(o,i){return t.apply(this,arguments)}}()},86:function(Q,N,a){var O=a(5574),s=a.n(O),A=a(32332),h=a(38703),b=a(67294),_=a(85893),W=function(M){var R=M.subtitle,G=M.handleClick,T=M.lineClamp,C=T===void 0?2:T,S=M.textDetails,Z=M.title,K=M.icon,k=M.iconType,p=k===void 0?"":k,v=M.operation,P=v===void 0?"":v,B=M.progress,t=M.status,n=M.backlogTips,o=(0,b.useState)(0),i=s()(o,2),l=i[0],r=i[1],u=function(){r(B)},E=function(){r(0)},ae=function(J){return"rounded-[4px] border-l-[4px] ".concat(J==1?"border-[#1B64F3]":J==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,_.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(t!==void 0?ae(t):"graphicbox"),onClick:G,onMouseEnter:function(){B!=null&&u()},onMouseLeave:function(){B!=null&&E()},children:[t!==void 0&&(0,_.jsx)("div",{style:{width:"".concat(l,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(t==1?"bg-[#1B64F3]/[.03]":t==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,_.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,_.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,_.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,_.jsx)("img",{src:(0,A.s9)("single",K),className:"w-[22px] h-[22px]"}),p&&(0,_.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,_.jsx)("img",{src:"/icons/".concat(p,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,_.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,_.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,_.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,_.jsx)("span",{className:"truncate",children:Z}),(0,_.jsx)("span",{className:"flex items-center flex-1",children:R})]}),(0,_.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:S})]})}),n||(0,_.jsx)(_.Fragment,{}),P&&(0,_.jsx)("div",{className:"flex items-center w-[24px]",children:(0,_.jsx)("span",{className:"operation",children:P})}),B!=null&&(0,_.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,_.jsx)(h.Z,{type:"circle",percent:B,size:29})})]})]})};N.Z=W},21446:function(Q,N,a){var O=a(15009),s=a.n(O),A=a(97857),h=a.n(A),b=a(99289),_=a.n(b),W=a(5574),w=a.n(W),M=a(83510),R=a(29608),G=a(32332),T=a(35312),C=a(26915),S=a(28036),Z=a(85576),K=a(67294),k=a(94840),p=a(85893),v=C.Z.TextArea,P=function(t){var n=t.setIsModalOpen,o=t.isModalOpen,i=t.transformData,l=t.CreationType,r=t.setcreationType,u=t.ModalType,E=(0,T.useIntl)(),ae=(0,K.useState)(""),e=w()(ae,2),J=e[0],de=e[1],pe=(0,K.useState)(""),oe=w()(pe,2),te=oe[0],me=oe[1],ie=(0,K.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),re=w()(ie,2),le=re[0],_e=re[1],ue=(0,R.Z)(),fe=ue.setAgentCreateOpen,he=ue.setSkillCreateOpen;(0,K.useEffect)(function(){},[]);var ve=function(j){de(j.target.value)},ge=function(j){me(j.target.value)},I=function(){var c=_()(s()().mark(function j(){var x,f;return s()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(x={name:J,mode:l.apps_mode,description:te,icon:JSON.stringify(le.id),icon_background:""},l.apps_mode!=2){y.next=8;break}return y.next=4,(0,M.uy)(x);case 4:f=y.sent,f.code===0&&(n(!1),d(f.data.app_id)),y.next=10;break;case 8:(0,G.Go)("SET",h()(h()({},x),{},{type:!1})),d();case 10:case"end":return y.stop()}},j)}));return function(){return c.apply(this,arguments)}}(),g=function(j){i.map(function(x){x.name==j.name&&(console.log(x,"item"),r(x))})},d=function(j){j?T.history.push("/".concat(l.path,"?app_id=").concat(j,"&&type=false")):T.history.push("/".concat(l.path,"?type=false"))},m=function(){return(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[l.apps_mode==1&&(0,p.jsx)(S.ZP,{onClick:function(){fe(!0),n(!1)},children:E.formatMessage({id:"agent.creation.button.ai"})}),l.apps_mode==4&&(0,p.jsx)(S.ZP,{onClick:function(){he(!0),n(!1)},children:E.formatMessage({id:"agent.creation.button.skill.ai"})})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(S.ZP,{onClick:function(){return n(!1)},children:E.formatMessage({id:"agent.modal.button.cancel"})}),(0,p.jsx)(S.ZP,{disabled:J==="",onClick:I,type:"primary",children:E.formatMessage({id:"creation"})})]})]})};return(0,p.jsx)(Z.Z,{title:E.formatMessage({id:"creation.addnewapp"}),open:o,okText:E.formatMessage({id:"creation"}),onOk:I,onCancel:function(){return n(!1)},okButtonProps:{disabled:J===""},width:820,footer:(0,p.jsx)(m,{}),children:(0,p.jsxs)("div",{className:"pb-1",children:[u?(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:E.formatMessage({id:"creation.appntype"})}),(0,p.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:i&&i.map(function(c){return(0,p.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:c.apps_mode===l.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){g(c)},children:[(0,p.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,p.jsx)("img",{className:"w-6 h-6",src:c.signicon,alt:""})}),(0,p.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:c.name})]})})})]}):null,(0,p.jsxs)("div",{className:" mt-5",children:[(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsxs)("p",{className:"text-xs",children:[l.apps_mode==1?E.formatMessage({id:"creation.agent"}):l.apps_mode==2?E.formatMessage({id:"creation.workflow"}):l.apps_mode==3?E.formatMessage({id:"creation.repository"}):E.formatMessage({id:"creation.skill"}),E.formatMessage({id:"creation.appiconname"})]}),(0,p.jsxs)("div",{className:"flex items-center justify-around",children:[(0,p.jsx)(k.Z,{CardData:le,setCardData:_e}),(0,p.jsx)(C.Z,{showCount:!0,maxLength:50,placeholder:E.formatMessage({id:"creation.placeholder.appname"}),onChange:ve})]})]}),(0,p.jsxs)("div",{className:"mb-5 text-xs",children:[(0,p.jsxs)("p",{children:[l.apps_mode==1?E.formatMessage({id:"creation.agent"}):l.apps_mode==2?E.formatMessage({id:"creation.workflow"}):l.apps_mode==3?E.formatMessage({id:"creation.repository"}):E.formatMessage({id:"creation.skill"}),E.formatMessage({id:"creation.appdescribe"})]}),(0,p.jsx)(v,{showCount:!0,maxLength:1e3,rows:4,placeholder:E.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:ge})]})]})]})})};N.Z=P},94840:function(Q,N,a){var O=a(97857),s=a.n(O),A=a(32332),h=a(55241),b=a(67294),_=a(85893),W=function(M){var R=M.CardData,G=M.setCardData;(0,b.useEffect)(function(){},[]);var T=function(){return(0,_.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,A.s9)("all").map(function(Z){return(0,_.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){C(Z)},children:(0,_.jsx)("img",{src:Z.image,alt:""})})})})},C=function(Z){G(s()(s()({},R),{},{icon:Z.image,id:Z.id}))};return(0,_.jsx)(h.Z,{content:T,trigger:"click",placement:"bottomLeft",children:(0,_.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,_.jsx)("img",{src:(0,A.s9)("single",R.id?R.id:R.icon),alt:""})})})};N.Z=W},26621:function(Q,N,a){a.r(N),a.d(N,{default:function(){return ge}});var O=a(97857),s=a.n(O),A=a(15009),h=a.n(A),b=a(99289),_=a.n(b),W=a(5574),w=a.n(W),M=a(43722),R=a(21446),G=a(99702),T=a(86),C=a(29608),S=a(55927),Z=a(32332),K=a(35790),k=a(11475),p=a(8751),v=a(35312),P=a(28036),B=a(32983),t=a(71230),n=a(15746),o=a(83062),i=a(66309),l=a(74330),r=a(67294),u=a(42237),E=a(3917),ae=function(){var g=(0,r.useState)(null),d=w()(g,2),m=d[0],c=d[1],j=(0,S.Z)(function(U){return U.filterMessages("workflow_need_human_confirm")}),x=(0,S.Z)(function(U){return U.filterMessages("workflow_run_progress")}),f=(0,C.Z)(function(U){return U.prevConfirmDealtWith}),L=(0,E.Z)(_()(h()().mark(function U(){var V;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,u.VE)({current:1,pageSize:10});case 2:return V=F.sent,F.abrupt("return",V.data);case 4:case"end":return F.stop()}},U)})),{refreshDeps:[j.length,x.length,f],onSuccess:function(V){c(V)}}),y=L.loading,z=L.runAsync;return{loading:y,data:m,refresh:z}},e=a(85893),J=function(g){var d,m=g.subtitle,c="pl-[10px] text-[#1B64F3] text-[12px] ".concat(m.need_human_confirm==1||m.need_human_confirm==null?"text-[#1B64F3]":"text-[#808183] ");return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:m.app_name}),(0,e.jsx)(K.Z,{}),(0,e.jsx)("span",{className:c,children:m.node_name||((d=m.node_exec_data)===null||d===void 0?void 0:d.node_name)})]})})},de=function(g){var d=g.progressObj,m=function(){return parseFloat(d.elapsed_time).toFixed(6)},c=function(x){var f=new Date(x),L=f.getFullYear(),y=(f.getMonth()+1).toString().padStart(2,"0"),z=f.getDate().toString().padStart(2,"0"),U=f.getHours().toString().padStart(2,"0"),V=f.getMinutes().toString().padStart(2,"0"),q=f.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(L,".").concat(y,".").concat(z," ").concat(U,":").concat(V,":").concat(q)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:d.created_time&&c(d.created_time)}),(0,e.jsx)("div",{className:"truncate",children:d.apps_name||d.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(d.status==1?"bg-blue-600":d.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[m(),"S"]})]})]})})},pe=function(g){var d=g.operationObj,m=(0,C.Z)(function(x){return x.setRunId}),c=(0,C.Z)(function(x){return x.setRunPanelLogRecord}),j=(0,C.Z)(function(x){return x.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(P.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:d.publish_status==0,icon:(0,e.jsx)("img",{src:d.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"}),onClick:function(f){return f.stopPropagation(),c(!1),j(!1),m(d.app_id),!1}})})})},oe=function(g){var d=g.bindAdd,m=g.type;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:d,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:m})]})})})},te=function(g){var d=(0,v.useIntl)();return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(B.Z,{image:B.Z.PRESENTED_IMAGE_SIMPLE,description:d.formatMessage({id:"app.dashboard.None"})})})},me=function(g){var d=ae(),m=d.data,c=d.loading,j=(0,v.useIntl)(),x=(0,C.Z)(function(y){return y.setRunPanelLogRecord}),f=(0,C.Z)(function(y){return y.setDealtWithData}),L=(0,C.Z)(function(y){return y.setRunId});return(0,e.jsx)(e.Fragment,{children:m&&m.list.length?(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(t.Z,{gutter:[30,0],children:m.list.map(function(y,z){return(0,e.jsx)(n.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(T.Z,{icon:y.icon,title:y.node_name&&(0,e.jsx)(J,{subtitle:{app_name:y.app_name,node_name:y.node_name}}),textDetails:y.app_run_name,handleClick:function(){y.need_human_confirm!=0&&(f(y),L(null),x(!1))},backlogTips:(0,e.jsx)("div",{className:"flex items-center",children:y.need_human_confirm==1||y.need_human_confirm==null?(0,e.jsx)(o.Z,{title:j.formatMessage({id:"app.workflow.needHumanConfirm"}),children:(0,e.jsx)(k.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(o.Z,{title:j.formatMessage({id:"app.workflow.noHumanConfirm"}),children:(0,e.jsx)(p.Z,{className:"text-[#52C41C]"})})})})},z)})})}):(0,e.jsx)(te,{})})},ie=function(g){var d=g.data,m=g.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(t.Z,{gutter:[30,0],children:d.map(function(c,j){return(0,e.jsx)(n.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(T.Z,{icon:c.icon,title:c.name,textDetails:c.description,handleClick:function(){m=="my_agent"?v.history.push("/Agents?app_id=".concat(c.app_id,"&type=false")):v.history.push("/ReadOnlyAgent?app_id=".concat(c.app_id,"&type=true"))}})},j)})})})},re=function(g){var d=g.data,m=g.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(t.Z,{gutter:[30,0],children:d.map(function(c,j){return(0,e.jsx)(n.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(T.Z,{icon:c.icon,title:c.name,textDetails:c.description,handleClick:function(){m=="my_workflow"?v.history.push("/workspace/workflow?app_id=".concat(c.app_id,"&type=false")):v.history.push("/workspace/workflow?app_id=".concat(c.app_id,"&type=true"))},operation:(0,e.jsx)(pe,{operationObj:c}),iconType:m=="my_workflow"?c.publish_status==0?"play_disable_icon":"play_icon":""})},j)})})})},le=function(g){var d=g.data,m=(0,v.useIntl)(),c=(0,C.Z)(function(D){return D.setRunPanelLogRecord}),j=(0,C.Z)(function(D){return D.setDealtWithData}),x=(0,C.Z)(function(D){return D.setRunId}),f=(0,r.useState)(d),L=w()(f,2),y=L[0],z=L[1],U=function(H,X){var ee=new Map;return X.reverse().forEach(function($){ee.set($.app_run_id,$)}),H.forEach(function($){ee.set($.app_run_id,$)}),Array.from(ee.values()).reverse()},V=function(H){return H.completed_progress?parseInt(H.completed_progress.slice(0,-1)):!1},q=function(){var D=_()(h()().mark(function H(){var X;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:X=F==null?void 0:F.filter(function(ne){return ne.type=="workflow_run_progress"}).map(function(ne){var Y=ne.data;return Y}),X&&X.length&&z(U(X,y));case 2:case"end":return $.stop()}},H)}));return function(){return D.apply(this,arguments)}}(),F=(0,S.Z)(function(D){return D.flowMessage});return(0,r.useEffect)(function(){q()},[F]),(0,e.jsx)(e.Fragment,{children:y&&y.length?(0,e.jsx)("div",{className:"cardbox px-[10px]",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(t.Z,{gutter:[30,20],children:y.map(function(D,H){return(0,e.jsx)(n.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(T.Z,{status:D.status,icon:D.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:D.app_runs_name||D.run_name}),(D==null?void 0:D.need_human_confirm)==1?(0,e.jsx)(i.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:m.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)(de,{progressObj:D}),handleClick:function(){c(D),x(null),j(!1)},progress:D.percentage||V(D)})},H)})})}):(0,e.jsx)(te,{})})},_e=function(g){var d=g.item,m=g.data,c=function(f,L){return f&&f.length?L:(0,e.jsx)(te,{})},j={backlogs:function(f){return(0,e.jsx)(me,{data:f.data})},my_agent:function(f){return c(m,(0,e.jsx)(ie,{data:f.data,keyName:"my_agent"}))},my_workflow:function(f){return c(m,(0,e.jsx)(re,{data:f.data,keyName:"my_workflow"}))},workflow_log:function(f){return(0,e.jsx)(le,{data:f.data})},more_agent:function(f){return c(m,(0,e.jsx)(ie,{data:f.data}))},more_workflow:function(f){return c(m,(0,e.jsx)(re,{data:f.data}))}};return(0,e.jsx)(e.Fragment,{children:j[d.key]({data:m})})},ue=function(g){var d=g.item,m=(0,v.useIntl)(),c=function(){var x=d.key=="my_agent"||d.key=="more_agent"?1:2,f=d.key=="more_agent"||d.key=="more_workflow";(0,Z.f1)("SET",x,f),v.history.push("/creation")};return(0,e.jsx)("div",{onClick:c,children:d.key!=="backlogs"&&d.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:m.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},fe=function(g){var d=(0,v.useIntl)(),m=g.item,c=g.setIsModalOpen,j=g.setCreationType,x=function(){var y=m.key=="my_agent"?{name:"Agent",path:"Agents",apps_mode:1}:{name:"WorkFlow",path:"workspace/workflow",apps_mode:2};j(function(z){return s()(s()({},z),y)}),c(!0)},f=m.key=="my_agent"?d.formatMessage({id:"app.dashboard.title_button_1.1"}):m.isAdd?d.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[m.isAdd&&(0,e.jsx)(oe,{bindAdd:x,type:m.isAdd&&f}),(0,e.jsx)(ue,{item:m})]})},he=function(){var g=(0,v.useIntl)(),d=[{title:g.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0},{title:g.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:g.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:g.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:g.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:g.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],m=(0,r.useState)(!1),c=w()(m,2),j=c[0],x=c[1],f=(0,r.useState)({}),L=w()(f,2),y=L[0],z=L[1],U=(0,r.useState)(!0),V=w()(U,2),q=V[0],F=V[1],D=(0,r.useState)({}),H=w()(D,2),X=H[0],ee=H[1],$=(0,r.useRef)(!1),ne=function(){var Y=_()(h()().mark(function ce(){var xe,je;return h()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,M.rw)();case 2:xe=se.sent,xe.code==0&&(je=xe.data,ee(je),$.current=!0,F(!0));case 4:case"end":return se.stop()}},ce)}));return function(){return Y.apply(this,arguments)}}();return(0,r.useEffect)(function(){$.current||ne()},[]),(0,e.jsxs)(e.Fragment,{children:[q&&d.map(function(Y,ce){return(0,e.jsx)(n.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:Y.title}),(0,e.jsx)("span",{children:(0,e.jsx)(fe,{item:Y,setIsModalOpen:x,setCreationType:z})})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:X[Y.key]?(0,e.jsx)(_e,{item:Y,data:X[Y.key]}):(0,e.jsx)(e.Fragment,{})})]})},ce)}),!q&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(l.Z,{size:"large"})}),(0,e.jsx)(R.Z,{setIsModalOpen:x,isModalOpen:j,ModalType:!1,CreationType:y})]})},ve=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"px-[30px] pb-[10px] flex flex-col pt-[30px]",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(t.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(he,{})})})}),(0,e.jsx)(G.Z,{})]})},ge=ve}}]);
