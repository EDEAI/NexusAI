(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[630],{82826:function(A,k,t){"use strict";t.d(k,{Z:function(){return g}});var p=t(1413),n=t(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},x=T,b=t(91146),u=function(I,P){return n.createElement(b.Z,(0,p.Z)((0,p.Z)({},I),{},{ref:P,icon:x}))},S=n.forwardRef(u),g=S},89035:function(A,k,t){"use strict";t.d(k,{Z:function(){return g}});var p=t(1413),n=t(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},x=T,b=t(91146),u=function(I,P){return n.createElement(b.Z,(0,p.Z)((0,p.Z)({},I),{},{ref:P,icon:x}))},S=n.forwardRef(u),g=S},81644:function(A,k,t){"use strict";t.d(k,{Z:function(){return g}});var p=t(1413),n=t(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},x=T,b=t(91146),u=function(I,P){return n.createElement(b.Z,(0,p.Z)((0,p.Z)({},I),{},{ref:P,icon:x}))},S=n.forwardRef(u),g=S},2068:function(A,k,t){"use strict";t.d(k,{Z:function(){return g}});var p=t(1413),n=t(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},x=T,b=t(91146),u=function(I,P){return n.createElement(b.Z,(0,p.Z)((0,p.Z)({},I),{},{ref:P,icon:x}))},S=n.forwardRef(u),g=S},15360:function(A,k,t){"use strict";t.d(k,{Z:function(){return g}});var p=t(1413),n=t(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},x=T,b=t(91146),u=function(I,P){return n.createElement(b.Z,(0,p.Z)((0,p.Z)({},I),{},{ref:P,icon:x}))},S=n.forwardRef(u),g=S},24805:function(A,k,t){"use strict";t.d(k,{Hb:function(){return I},Ur:function(){return fe},cN:function(){return me},ej:function(){return P}});var p=t(15009),n=t.n(p),T=t(99289),x=t.n(T),b=t(47520),u="/v1/skill/skill_info/",S="/v1/skill/skill_update/",g="/v1/skill/skill_publish/",$="/v1/skill/skill_run",I=function(){var w=x()(n()().mark(function i(m,F){var Y;return n()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,b.ZP)("".concat(u).concat(m),{method:"GET",data:{publish_status:F=="true"?1:0}});case 2:return Y=U.sent,U.abrupt("return",Y);case 4:case"end":return U.stop()}},i)}));return function(m,F){return w.apply(this,arguments)}}(),P=function(){var w=x()(n()().mark(function i(m){var F;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.ZP)("".concat(S).concat(m.app_id),{method:"PUT",data:m.data});case 2:return F=l.sent,l.abrupt("return",F);case 4:case"end":return l.stop()}},i)}));return function(m){return w.apply(this,arguments)}}(),me=function(){var w=x()(n()().mark(function i(m){var F;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.ZP)("".concat(g).concat(m),{method:"PUT"});case 2:return F=l.sent,l.abrupt("return",F);case 4:case"end":return l.stop()}},i)}));return function(m){return w.apply(this,arguments)}}(),fe=function(){var w=x()(n()().mark(function i(m){var F;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,b.ZP)("".concat($),{method:"POST",data:m});case 2:return F=l.sent,l.abrupt("return",F);case 4:case"end":return l.stop()}},i)}));return function(m){return w.apply(this,arguments)}}()},23924:function(A,k,t){"use strict";t.r(k),t.d(k,{default:function(){return We}});var p=t(15009),n=t.n(p),T=t(99289),x=t.n(T),b=t(5574),u=t.n(b),S=t(24805),g=t(10759),$=t(2068),I=t(89035),P=t(81644),me=t(15360),fe=t(82826),w=t(35312),i=t(40741),m=t(45360),F=t(28036),Y=t(50136),l=t(67294),U=t(97857),M=t.n(U),ae=t(92939),ge=t(5608),Q=t(26915),ye=t(72269),e=t(85893),nt=Q.Z.TextArea,Oe=function(a){var H,R=a.FirstValue,B=a.FirstSkillref,s=a.Skillinfo,G=a.setSkillInfo,c=a.Operationbentate,o=(0,w.useIntl)();(0,l.useEffect)(function(){},[]);var W={readOnly:!0},V={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:o.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsx)(i.Z,{name:"dynamic_form_nest_item",onFinish:function(_){R(_)},style:{width:900},autoComplete:"off",form:B,children:s&&s.attrs_are_visible==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:o.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:c==="true"?o.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:o.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:s&&s.description})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:o.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:c==="true"?o.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:o.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:s&&s.description})]}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(ae.Z,{className:"font-medium text-xs text-[#555555]",name:o.formatMessage({id:"skill.teamvisibility"}),title:o.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(ye.Z,M()(M()({},V),{},{size:"small",checked:!!(s&&s.is_public==1)}))]}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(ae.Z,{className:"font-medium",name:o.formatMessage({id:"agent.attrVisible"}),title:o.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(ye.Z,M()(M()({},V),{},{size:"small",checked:!!(s&&s.attrs_are_visible==1)}))]}),(s==null?void 0:s.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(ge.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ae.Z,{className:"font-medium",required:!0,name:o.formatMessage({id:"skill.inputvariable"}),title:o.formatMessage({id:"skill.Callword.inputvariable"})})}),variableTypes:["string","number","json"],variables:Object.values((s==null||(H=s.input_variables)===null||H===void 0?void 0:H.properties)||{})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ce=Oe,Te=t(34041),je=t(92485),Ie=function(a){var H=a.SecondValue,R=a.handleBack,B=a.Skillinfo,s=a.setSkillInfo,G=a.SkillRelyOn,c=a.setSkillRelyOn,o=a.Secondref,W=a.setskillcodestate,V=a.setNewcode,L=(0,w.useIntl)();(0,l.useEffect)(function(){},[]);var _={readOnly:!0},K={disabled:!0},le=function(q){console.log(q),c(q)};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:L.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:o,children:[(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(ae.Z,{name:L.formatMessage({id:"skill.dependency"}),title:L.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Te.Z,M()(M()({},K),{},{mode:"tags",variant:"filled",style:{width:"100%"},value:G,tokenSeparators:[","]}))]}),(0,e.jsxs)(i.Z.Item,{children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:L.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(je.Z,{readOnly:!0,language:"python3",value:B&&B.code?JSON.parse(B.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,title:"python3"})})]})]})]})},Pe=Ie,ie=t(78045),it=Q.Z.TextArea,dt=Q.Z.Search,Ve=function(a){var H=a.ThirdlyValue,R=a.Thirdlyref,B=a.handleBack,s=a.Skillinfo,G=a.setSkillInfo,c=a.Operationbentate,o=(0,w.useIntl)(),W=(0,l.useState)(null),V=u()(W,2),L=V[0],_=V[1],K={readOnly:!0},le={disabled:!0};(0,l.useEffect)(function(){},[]);var J=function(X){G(M()(M()({},s),{},{output_type:X.target.value}))},q=function(X){var z=new g.Kr("output","","");X.users.forEach(function(D){var ne=new g._w(D.name,D.type?D.type:"string","",D.content,!1);z.addProperty(D.name,ne)});var f={output_type:s.output_type,output_variables:z};H(f)};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:o.formatMessage({id:"skill.menu.output"})})}),(0,e.jsx)(i.Z,{name:"dynamic_form_nest_item",onFinish:q,style:{width:900},autoComplete:"off",form:R,children:(0,e.jsx)(i.Z.List,{name:"users",children:function(X,z){var f,D=z.add,ne=z.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(ae.Z,{name:o.formatMessage({id:"skill.outputvariable"}),title:o.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(ie.ZP.Group,M()(M()({},le),{},{value:s&&s.output_type,children:[(0,e.jsx)(ie.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:o.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(ie.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:o.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(ie.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:o.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(ie.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:o.formatMessage({id:"skill.radio.file"})})})]}))]}),(s==null?void 0:s.output_variables)&&(0,e.jsx)("div",{className:"",children:(0,e.jsx)(ge.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(ae.Z,{className:"font-medium",required:!0,name:o.formatMessage({id:"skill.outputv"}),title:o.formatMessage({id:"skill.Callword.outputv"})})}),variableTypes:["string","number","json","file"],variables:Object.values((s==null||(f=s.output_variables)===null||f===void 0?void 0:f.properties)||{})})})]})}})})]})},Re=Ve,Ee=t(13769),Ae=t.n(Ee),Be=t(49677),ze=t.n(Be),De=t(68672),Le=t(74330),He=["key","name"],ot=Q.Z.TextArea,ut=Q.Z.Search,$e=function(a){var H=a.FourthlyValue,R=a.Fourthlyref,B=a.handleBack,s=a.Skillinfo,G=a.Operationbentate,c=(0,w.useIntl)(),o=(0,l.useState)(null),W=u()(o,2),V=W[0],L=W[1],_=(0,l.useState)(!1),K=u()(_,2),le=K[0],J=K[1];(0,l.useEffect)(function(){},[]);var q=function(){var j=x()(n()().mark(function y(){var E;return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,S.cN)(s.app_id);case 2:E=Z.sent,E.code==0?m.ZP.success(c.formatMessage({id:"skill.publishsuccess"})):m.ZP.error(c.formatMessage({id:"skill.select.value"}));case 4:case"end":return Z.stop()}},y)}));return function(){return j.apply(this,arguments)}}(),re=function(y){var E=y.users.filter(function(v,ee){return v.type=="number"&&!Number(v.value)&&!!v.value});if(E.length>0)m.ZP.warning(c.formatMessage({id:"skill.message.warning.vlaue"}));else{J(!0);var N=new g.Kr("output","","");y.users.forEach(function(v){var ee=new g._w(v.name,v.type,v.type=="string"?v.value:Number(v.value),v.content,v.status);N.addProperty(v.name,ee)});var Z={skill_id:s.id,input_dict:N};ne(Z)}},X=(0,l.useState)([]),z=u()(X,2),f=z[0],D=z[1],ne=function(){var j=x()(n()().mark(function y(E){return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:(0,S.Ur)(E).then(function(v){m.ZP.success(c.formatMessage({id:"skill.run.success"})),L(v.data.outputs),D(v.data.file_list||[]),J(!1)}).catch(function(v){J(!1)});case 1:case"end":return Z.stop()}},y)}));return function(E){return j.apply(this,arguments)}}(),ue=function(){var j=x()(n()().mark(function y(){return n()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:w.history.push("/Skill?app_id=".concat(s==null?void 0:s.app_id,"&type=false")),location.reload();case 2:case"end":return N.stop()}},y)}));return function(){return j.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:c.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",onFinish:re,style:{width:900},autoComplete:"off",form:R,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsx)("div",{children:c.formatMessage({id:"skill.inputvariable"})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:c.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:c.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(i.Z.List,{name:"users",children:function(y,E){return ze()(E),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:y.map(function(N){var Z=N.key,v=N.name,ee=Ae()(N,He);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(i.Z.Item,M()(M()({},ee),{},{name:[v,"content"],children:(0,e.jsx)(Q.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(i.Z.Item,M()(M()({},ee),{},{name:[v,"value"],rules:[{required:!!(R.getFieldsValue()&&R.getFieldsValue().users[Z].status==!0),message:c.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(Q.Z,{placeholder:R.getFieldsValue()&&R.getFieldsValue().users[Z].status==!0?c.formatMessage({id:"skill.variantcontent.required"}):c.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(i.Z.Item,{rules:[{required:!0,message:c.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:c.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(Le.Z,{spinning:le,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsxs)("div",{className:"h-[345px] mb-[30px]",children:[" ",V?(0,e.jsx)(je.Z,{language:"python3",value:V&&JSON.stringify(V)}):null]}),f.length>0&&(0,e.jsx)(De.Z,{files:f,title:c.formatMessage({id:"agent.file.output"}),className:"mb-4"}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(F.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:c.formatMessage({id:"skill.run"})})})})]})})]}),(0,e.jsx)("div",{className:"w-28",children:(s==null?void 0:s.publish_status)===1&&(s==null?void 0:s.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(F.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:ue,children:c.formatMessage({id:"skill.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(F.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:q,disabled:G!="false",children:c.formatMessage({id:"skill.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},Ue=$e,Ge=function(){var a=(0,w.useIntl)(),H=i.Z.useForm(),R=u()(H,1),B=R[0],s=i.Z.useForm(),G=u()(s,1),c=G[0],o=i.Z.useForm(),W=u()(o,1),V=W[0],L=i.Z.useForm(),_=u()(L,1),K=_[0],le=(0,l.useState)(0),J=u()(le,2),q=J[0],re=J[1],X=(0,l.useState)("1"),z=u()(X,2),f=z[0],D=z[1],ne=(0,l.useState)(null),ue=u()(ne,2),j=ue[0],y=ue[1],E=(0,l.useState)(null),N=u()(E,2),Z=N[0],v=N[1],ee=(0,l.useState)(null),ke=u()(ee,2),ve=ke[0],be=ke[1],Ke=(0,l.useState)(null),Se=u()(Ke,2),ce=Se[0],Je=Se[1],Xe=(0,l.useState)(!1),Fe=u()(Xe,2),ct=Fe[0],Ye=Fe[1],Qe=(0,l.useState)(null),Ze=u()(Qe,2),mt=Ze[0],_e=Ze[1],qe=[{key:"1",icon:(0,e.jsx)($.Z,{}),label:a.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:f=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(I.Z,{}),label:a.formatMessage({id:"skill.menu.code"}),disabled:ve&&j.attrs_are_visible==0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:f=="2"?"#1B64F3":"#213044"}},{key:"3",icon:(0,e.jsx)(P.Z,{}),label:a.formatMessage({id:"skill.menu.output"}),disabled:ve&&j.attrs_are_visible!==1,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:f=="3"?"#1B64F3":"#213044"}},{key:"4",icon:(0,e.jsx)(me.Z,{}),label:a.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:f=="4"?"#1B64F3":"#213044"}}];(0,l.useEffect)(function(){Ne()},[]);var Ne=function(){var O=x()(n()().mark(function d(){var h,r,C,te;return n()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return h=new URLSearchParams(window.location.search),v(h.get("app_id")),de.next=4,(0,S.Hb)(h.get("app_id"),h.get("type"));case 4:r=de.sent,console.log(r,"res-===>"),r.code==0?(y(r.data),Je(r.data.publish_status===1?"true":"false"),r.data.publish_status==1&&m.ZP.warning(a.formatMessage({id:"skill.message.listwarning"}),5),C=he(r.data.input_variables),B.setFieldsValue(C),be(r.data.dependencies?r.data.dependencies.python3:[]),te=he(r.data.output_variables),V.setFieldsValue(te)):m.ZP.error(a.formatMessage({id:"skill.message.listerror"}));case 7:case"end":return de.stop()}},d)}));return function(){return O.apply(this,arguments)}}(),he=function(d){console.log(!!d&&!!d.properties,"obj");var h={users:d&&d.properties?Object.values(d.properties).map(function(r){return{name:r.name,type:r.type,content:r.display_name,status:r.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return h},xe=function(){var O=x()(n()().mark(function d(h){var r,C;return n()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(ce!=="false"){se.next=7;break}return r={app_id:Z,data:h},se.next=4,(0,S.ej)(r);case 4:C=se.sent,console.log(C),C.code==0&&Ne();case 7:case"end":return se.stop()}},d)}));return function(h){return O.apply(this,arguments)}}(),et=function(){Me({key:f,keyPath:[],item:void 0,domEvent:void 0}),history.back()},we=function(d){var h=he(d.input_variables);K.setFieldsValue(h)},tt=function(d){xe(d)},st=function(d){xe(d)},at=function(d){xe(d)},pe=function(d){re(d)},Me=function(d){if(f=="1"){var h={input_variables:rt(B.getFieldValue()),is_public:j.is_public};we(h),D(d.key)}D(d.key)},ft=function(d,h){console.log(d,"users");var r=d.filter(function(C){return!C||!C.name||!C.content});if(console.log("firstusers",r,!d[0]),d[0]){if(r.length!==0)return m.ZP.warning("".concat(h===1?a.formatMessage({id:"skill.message.inputerror3"}):a.formatMessage({id:"skill.message.inputerror4"}))),!0}else return m.ZP.warning("".concat(h===1?a.formatMessage({id:"skill.message.inputerror1"}):a.formatMessage({id:"skill.message.inputerror2"}))),!0;return lt(d,"name")?(m.ZP.warning(a.formatMessage({id:"skill.message.inputerror5"})),!0):!1},lt=function(d,h){var r=new Set;return d.some(function(C){var te=C[h];return r.has(te)?r.add(te):r.add(te)&&!1})},rt=function(d){var h=new g.Kr("output","","");return d.users.forEach(function(r){var C=new g._w(r.name,r.type?r.type:"string",r.value?r.value:"",r.content,r.status?r.status:!1);h.addProperty(r.name,C)}),h};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col h-full w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(F.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:et,children:[(0,e.jsx)(fe.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:a.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(Y.Z,{selectedKeys:[f],onClick:Me,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[f],mode:"inline",items:qe})})]}),(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px]",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:[j?j.nickname:"",a.formatMessage({id:"skill.skills"})]})]})}),(0,e.jsx)("div",{style:{display:f==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ce,{FirstValue:we,Skillinfo:j,setSkillInfo:y,FirstSkillref:B,Operationbentate:ce})}),(0,e.jsx)("div",{style:{display:f==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Pe,{SecondValue:tt,handleBack:pe,Skillinfo:j,setSkillInfo:y,SkillRelyOn:ve,setSkillRelyOn:be,Secondref:c,setskillcodestate:Ye,setNewcode:_e})}),(0,e.jsx)("div",{style:{display:f==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Re,{ThirdlyValue:st,handleBack:pe,Thirdlyref:V,Skillinfo:j,setSkillInfo:y,Operationbentate:ce})}),(0,e.jsx)("div",{style:{display:f==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ue,{FourthlyValue:at,handleBack:pe,Fourthlyref:K,Skillinfo:j,Operationbentate:ce})})]})})]})},We=Ge},49677:function(A){function k(t){if(t==null)throw new TypeError("Cannot destructure "+t)}A.exports=k,A.exports.__esModule=!0,A.exports.default=A.exports}}]);
