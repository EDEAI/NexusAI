"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5178],{83510:function(kt,Re,i){i.d(Re,{LK:function(){return v},bs:function(){return $},go:function(){return t},uy:function(){return P}});var ve=i(15009),W=i.n(ve),He=i(99289),S=i.n(He),le=i(47520),I="/v1/apps/apps_list",Oe="/v1/agent/agent_delete/",a="/v1/workflow/workflow_app_delete/",Ke="/v1/vector/delete_dataset/",r="/v1/skill/delete_skill_by_app_id/",x="/v1/apps/apps_create",o="/v1/apps/app_update/",t=function(){var te=S()(W()().mark(function Y(D){var z;return W()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,le.ZP)("".concat(I),{method:"GET",data:D});case 2:return z=c.sent,c.abrupt("return",z);case 4:case"end":return c.stop()}},Y)}));return function(D){return te.apply(this,arguments)}}(),v=function(){var te=S()(W()().mark(function Y(D){var z;return W()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log(D),c.next=3,D.mode;case 3:if(c.t0=c.sent,c.t0!=1){c.next=8;break}c.t1=(0,le.ZP)("".concat(Oe).concat(D.app_id),{method:"DELETE"}),c.next=9;break;case 8:c.t1=D.mode==2?(0,le.ZP)("".concat(a).concat(D.app_id),{method:"DELETE"}):D.mode==3?(0,le.ZP)("".concat(Ke).concat(D.app_id),{method:"DELETE"}):(0,le.ZP)("".concat(r).concat(D.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return z=c.t1,c.abrupt("return",z);case 11:case"end":return c.stop()}},Y)}));return function(D){return te.apply(this,arguments)}}(),P=function(){var te=S()(W()().mark(function Y(D){var z;return W()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,le.ZP)("".concat(x),{method:"POST",data:D});case 2:return z=c.sent,c.abrupt("return",z);case 4:case"end":return c.stop()}},Y)}));return function(D){return te.apply(this,arguments)}}(),$=function(){var te=S()(W()().mark(function Y(D){var z;return W()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,le.ZP)("".concat(o).concat(D.app_id),{method:"PUT",data:D});case 2:return z=c.sent,c.abrupt("return",z);case 4:case"end":return c.stop()}},Y)}));return function(D){return te.apply(this,arguments)}}()},6180:function(kt,Re,i){i.r(Re),i.d(Re,{default:function(){return ja}});var ve=i(19632),W=i.n(ve),He=i(15009),S=i.n(He),le=i(99289),I=i.n(le),Oe=i(97857),a=i.n(Oe),Ke=i(5574),r=i.n(Ke),x=i(11551),o=i(83510),t=i(47520),v=i(29432),P=i(10759),$=i(32332),te=i(2068),Y=i(89035),D=i(15360),z=i(82826),Ze=i(69243),c=i(35312),_=i(40741),O=i(45360),xe=i(28036),Xt=i(50136),ft=i(25409),Et=i(74330),Jt=i(96486),Qt=i.n(Jt),b=i(67294),be=i(92939),Ct=i(80459),qt=i(85750),ea=i(5608),ta=i(58299),Xe=i(51042),mt=i(82061),De=i(26915),at=i(72269),gt=i(34041),Dt=i(66309),ae=i(78045),Tt=i(44010),e=i(85893),aa=De.Z.TextArea,sa=function(p){var pe,B,G,M,fe,Je=p.loading,ye=p.FirstValue,s=p.Detaillist,R=p.setDetaillist,Te=p.repository,k=p.setRepository,E=p.Operationbentate,Pe=p.Ffromref,me=p.setFourthly_config_id,Ae=p.Fourthly_config_id,je=p.Fourthly_select_list,we=p.Newproperties,ke=p.setNewproperties,Se=p.pageKeyfun,j=p.firstjudgingcondition,ge=p.setAgentmunudisabled,Ee=p.agentmenudisabled,f=(0,c.useIntl)(),Be=(0,b.useState)([]),se=r()(Be,2),C=se[0],ne=se[1],H=(0,b.useState)(!1),X=r()(H,2),_e=X[0],Ve=X[1],oe=(0,b.useState)([]),he=r()(oe,2),Ne=he[0],Fe=he[1],st=(0,b.useState)([]),V=r()(st,2),N=V[0],Z=V[1],J=(0,b.useState)(!1),K=r()(J,2),A=K[0],Q=K[1],nt=(0,b.useState)(!1),it=r()(nt,2),vt=it[0],Le=it[1],$e=(0,b.useState)({agent_id:0,data:{is_public:1,enable_api:0,obligations:null,input_variables:{},dataset_ids:[],attrs_are_visible:1}}),Ie=r()($e,2),ie=Ie[0],Ce=Ie[1];(0,b.useEffect)(function(){var l,n;if(yt(),s!=null&&(l=s.agent)!==null&&l!==void 0&&l.selected_skills&&Fe(s.agent.selected_skills),s!=null&&(n=s.agent)!==null&&n!==void 0&&n.selected_workflows){var w;Z(s==null||(w=s.agent)===null||w===void 0?void 0:w.selected_workflows)}},[s,s==null?void 0:s.agent]);var It=function(n){me(n)},Rt=function(n){Ce(a()(a()({},ie),{},{data:a()(a()({},ie.data),{},{obligations:n.target.value})})),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{obligations:n.target.value})}))},Ot=function(n,w){var U=new Set;return n.some(function(q){var de=q[w];return U.has(de)?U.add(de):U.add(de)&&!1})},rt=function(n){R(a()(a()({},s),{},{app:a()(a()({},s.app),{},{is_public:n?1:0})})),Ce(a()(a()({},ie),{},{data:a()(a()({},ie.data),{},{is_public:n?1:0})}))},lt=function(n){R(a()(a()({},s),{},{app:a()(a()({},s.app),{},{enable_api:n?1:0})})),Ce(a()(a()({},ie),{},{data:a()(a()({},ie.data),{},{enable_api:n?1:0})}))},xt=function(n){R(a()(a()({},s),{},{app:a()(a()({},s.app),{},{attrs_are_visible:n?1:0})})),Ce(a()(a()({},ie),{},{data:a()(a()({},ie.data),{},{attrs_are_visible:n?1:0})}))},Bt=function(n){R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{allow_upload_file:n?1:0})}))},bt=function(n){R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{mcp:n?1:0})}))},Me=function(n){Ce(a()(a()({},ie),{},{data:a()(a()({},ie.data),{},{dataset_ids:n})})),k(n)},yt=function(){var l=I()(S()().mark(function n(){var w;return S()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,x.zl)();case 2:w=q.sent,ne(w.data.data.map(function(de){return{value:de.dataset_id,label:de.name}}));case 4:case"end":return q.stop()}},n)}));return function(){return l.apply(this,arguments)}}(),Vt=function(n){Fe(n),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{selected_skills:n})}))},jt=function(n){Z(n),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{selected_workflows:n})}))},ue=function(){var l=I()(S()().mark(function n(){return S()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:j()||(Se("2"),ge(a()(a()({},Ee),{},{first:!1,second:!1})));case 1:case"end":return U.stop()}},n)}));return function(){return l.apply(this,arguments)}}(),Ue=function(n){R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{default_output_format:n.target.value})}))},wt=function(n){R(a()(a()({},s),{},{agent:a()(a()({},s==null?void 0:s.agent),{},{input_variables:n.free})}))},Qe=(0,ta.m)(),ot=Qe.options,St=Qe.defaultValue,_t=function(n){Fe(n.checkItem),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{selected_skills:n.checkItem})})),Q(!1)},ut=function(n){Z(n.checkItem),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{selected_workflows:n.checkItem})})),Le(!1)},Nt=function(){Q(!1)},Ft=function(){Le(!1)},Mt=function(n){var w=Ne.filter(function(U){return U.app_id!==n.app_id});Fe(w),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{selected_skills:w})}))},dt=function(n){var w=N.filter(function(U){return U.app_id!==n.app_id});Z(w),R(a()(a()({},s),{},{agent:a()(a()({},s.agent),{},{selected_workflows:w})}))};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:f.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:Pe,children:[(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:f.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.app&&s.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:E==="true"?f.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:f.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:s&&s.app&&s.app.description})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(be.Z,{className:"font-medium",name:f.formatMessage({id:"agent.teamvisibility"}),title:f.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(at.Z,{size:"small",onChange:rt,checked:!!(s&&((pe=s.app)===null||pe===void 0?void 0:pe.is_public)===1)})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(be.Z,{className:"font-medium",name:f.formatMessage({id:"agent.attrVisible"}),title:f.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(at.Z,{size:"small",onChange:xt,checked:s&&((B=s.app)===null||B===void 0?void 0:B.attrs_are_visible)===1})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:f.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(at.Z,{size:"small",onChange:lt,checked:s&&((G=s.app)===null||G===void 0?void 0:G.enable_api)===1,disabled:(s==null||(M=s.app)===null||M===void 0?void 0:M.publish_status)!==1})]})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:[(0,e.jsx)("span",{className:"text-[#E80000]",children:"* "}),f.formatMessage({id:"agent.LLMmodel"})]}),(0,e.jsx)(gt.Z,{placeholder:f.formatMessage({id:"agent.pleaseselect"}),value:Ae==0?f.formatMessage({id:"agent.pleaseselect"}):Ae,variant:"filled",onChange:It,options:ot,optionRender:function(n){var w;return(0,e.jsxs)("div",{children:[n.label," ",(n==null||(w=n.data)===null||w===void 0?void 0:w.support_image)==1&&(0,e.jsx)(Dt.Z,{color:"blue",className:"text-xs",children:f.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})},labelRender:function(n){var w;return(0,e.jsxs)("div",{children:[n==null?void 0:n.label," ",((w=(0,qt.ti)(n==null?void 0:n.value,{options:ot}))===null||w===void 0?void 0:w.support_image)==1&&(0,e.jsx)(Dt.Z,{color:"blue",className:"text-xs",children:f.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})}})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(be.Z,{className:"font-medium",required:!0,name:f.formatMessage({id:"agent.functiondescription"}),title:f.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(aa,{onChange:Rt,value:s&&s.agent&&s.agent.obligations,placeholder:"Agent".concat(f.formatMessage({id:"agent.functiondescription"})),autoSize:{minRows:8,maxRows:10}})]})}),!_e&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(ea.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(be.Z,{className:"font-medium",required:!0,name:f.formatMessage({id:"agent.inputvariable"}),title:f.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((s==null||(fe=s.agent)===null||fe===void 0||(fe=fe.input_variables)===null||fe===void 0?void 0:fe.properties)||{}),onChange:wt})}),(0,e.jsx)(_.Z.List,{name:"users",children:function(n,w){var U=w.add,q=w.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(be.Z,{className:"font-medium",name:f.formatMessage({id:"agent.associatedknowledgebase"}),title:f.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(gt.Z,{size:"large",mode:"multiple",showSearch:!0,style:{width:"100%",fontSize:"12px"},placeholder:f.formatMessage({id:"agent.pleaseselect"}),filterOption:function(qe,We){var Ye;return((Ye=We==null?void 0:We.label)!==null&&Ye!==void 0?Ye:"").toLowerCase().includes(qe.toLowerCase())},value:Te,onChange:Me,options:C})]}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",f.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(ae.ZP.Group,{value:s&&s.agent.default_output_format,onChange:function(qe){Ue(qe)},children:[(0,e.jsx)(ae.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(ae.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(ae.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})]})})]})}}),(0,e.jsxs)(_.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:f.formatMessage({id:"agent.mcp.resources"})}),(0,e.jsxs)("div",{className:"pl-4 ",children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(be.Z,{className:"font-medium",name:f.formatMessage({id:"agent.selectSkills"}),title:f.formatMessage({id:"agent.explain.selectSkills"})})}),(0,e.jsx)(xe.ZP,{type:"link",icon:(0,e.jsx)(Xe.Z,{}),onClick:function(){return Q(!0)},className:"text-xs",children:f.formatMessage({id:"agent.addSkill"})})]}),Ne.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:Ne.map(function(l){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(Ct.Z,{rounded:"6px",data:l,bg:l.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:l.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:l.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(w){w.stopPropagation(),Mt(l)},children:(0,e.jsx)(mt.Z,{})})]},l.app_id)})}):(0,e.jsx)("div",{onClick:function(){return Q(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(Xe.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:f.formatMessage({id:"agent.addSkill"})})]})}),(0,e.jsx)(Tt.Z,{show:A,popupClose:Nt,popupSave:_t,checkList:Ne,radio:!1,nodetype:"skill",zIndex:30})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(be.Z,{className:"font-medium",name:f.formatMessage({id:"agent.selectWorkflows"}),title:f.formatMessage({id:"agent.explain.selectWorkflows"})})}),(0,e.jsx)(xe.ZP,{type:"link",icon:(0,e.jsx)(Xe.Z,{}),onClick:function(){return Le(!0)},className:"text-xs",children:f.formatMessage({id:"agent.addWorkflow"})})]}),N.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:N.map(function(l){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(Ct.Z,{rounded:"6px",data:l,bg:l.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:l.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:l.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(w){w.stopPropagation(),dt(l)},children:(0,e.jsx)(mt.Z,{})})]},l.app_id)})}):(0,e.jsx)("div",{onClick:function(){return Le(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(Xe.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:f.formatMessage({id:"agent.addWorkflow"})})]})}),(0,e.jsx)(Tt.Z,{show:vt,popupClose:Ft,popupSave:ut,checkList:N,radio:!1,nodetype:"workflow",zIndex:30})]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(xe.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ue()},children:f.formatMessage({id:"agent.btn.nextstep"})}),(0,e.jsx)(xe.ZP,{onClick:function(){history.back()},children:f.formatMessage({id:"agent.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},na=sa,ia=i(13769),At=i.n(ia),ra=i(49677),la=i.n(ra),oa=i(620),ua=i(85877),Lt=i(39944),da=i(71471),ca=["key","name"],Ea=da.Z.Title,Ca=De.Z.TextArea,Da=De.Z.Search,pa=function(p){var pe=p.handleBack,B=p.Detaillist,G=p.setDetaillist,M=p.Fourthly_select_list,fe=p.setFourthly_config_id,Je=p.Fourthly_config_id,ye=p.Fourthlyref,s=p.Fourthly_abilities_list,R=p.Operationbentate,Te=p.callwordlist,k=p.newagentid,E=(0,c.useIntl)(),Pe=(0,b.useState)(0),me=r()(Pe,2),Ae=me[0],je=me[1],we=(0,b.useState)(""),ke=r()(we,2),Se=ke[0],j=ke[1],ge=(0,b.useState)(""),Ee=r()(ge,2),f=Ee[0],Be=Ee[1],se=(0,b.useState)(!1),C=r()(se,2),ne=C[0],H=C[1],X=function(N){var Z={user:{value:he(N)}};j(new Lt.z(Z))},_e=function(N){var Z={user:{value:N.target.value}};j(new Lt.z(Z))},Ve=function(N){je(N)},oe=function(N){var Z=N.users.filter(function(A,Q){return A.type=="number"&&!Number(A.value)&&!!A.value});if(!Se.user)O.ZP.warning(E.formatMessage({id:"agent.message.warning.callword"}));else if(Z.length>0)O.ZP.warning(E.formatMessage({id:"agent.message.warning.datatype"}));else{H(!0);var J=new P.Kr("input","","");N.users.forEach(function(A){var Q=new P._w(A.name,A.type?A.type:"string",A.type=="string"?A.value:Number(A.value),A.content,A.status);J.addProperty(A.name,Q)});var K={agent_id:k||B.agent.agent_id,ability_id:Ae,input_dict:J,prompt:Se};Ne(K)}},he=function V(N){return N.map(function(Z){return Z.type==="mention"?Z.id:Z.children?V(Z.children):Z.text}).join("")},Ne=function(N){(0,x.LH)(N).then(function(Z){O.ZP.success(E.formatMessage({id:"agent.message.success.runpublish"})),Be(Z.data.outputs.text),H(!1)}).catch(function(Z){H(!1)})},Fe=function(){var V=I()(S()().mark(function N(){var Z;return S()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,x.Dh)(k||B.agent.agent_id);case 2:Z=K.sent,Z.code==0?O.ZP.success(E.formatMessage({id:"agent.message.success.publish"})):O.ZP.error(E.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return K.stop()}},N)}));return function(){return V.apply(this,arguments)}}(),st=function(){var V=I()(S()().mark(function N(){return S()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:c.history.push("/Agents?app_id=".concat(B.app.app_id,"&type=false")),location.reload();case 2:case"end":return J.stop()}},N)}));return function(){return V.apply(this,arguments)}}();return(0,b.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:E.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:E.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(gt.Z,{placeholder:E.formatMessage({id:"agent.pleaseselect"}),defaultValue:E.formatMessage({id:"agent.allability"}),style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:Ve,options:s})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",onFinish:oe,style:{width:"100%"},autoComplete:"off",form:ye,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:E.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(_.Z.List,{name:"users",children:function(N,Z){return la()(Z),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"mr-5 ml-2.5",children:E.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"",children:E.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:N.map(function(J){var K=J.key,A=J.name,Q=At()(J,ca);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(_.Z.Item,a()(a()({},Q),{},{name:[A,"content"],children:(0,e.jsx)(De.Z,{className:"mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(_.Z.Item,a()(a()({},Q),{},{name:[A,"value"],rules:[{required:!!(ye.getFieldsValue()&&ye.getFieldsValue().users[K].status==!0),message:E.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(De.Z,{placeholder:ye.getFieldsValue()&&ye.getFieldsValue().users[K].status==!0?E.formatMessage({id:"agent.variable.required.value"}):E.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(_.Z.Item,{rules:[{required:!0,message:E.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:E.formatMessage({id:"agent.runpreview"})}),(0,e.jsx)(Et.Z,{spinning:ne,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:f?(0,e.jsx)(oa.Z,{language:"python3",value:f&&JSON.stringify(f)}):null}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(ua.Z,{onChange:function(N){X(N)},options:Te})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(xe.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})})]})]})}),(0,e.jsx)("div",{className:"w-28",children:(B==null?void 0:B.agent.publish_status)===1&&(B==null?void 0:B.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(xe.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:st,children:E.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(xe.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:R!="false",onClick:Fe,children:E.formatMessage({id:"agent.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},fa=pa,ma=["key","name"],ga=De.Z.TextArea,ha=function(p){var pe=p.SecondValue,B=p.handleBack,G=p.Detaillist,M=p.setDetaillist,fe=p.Sformref,Je=p.Operationbentate,ye=p.pageKeyfun,s=p.secondjudgingcondition,R=p.SkillMenuClick,Te=p.agentupdata,k=(0,c.useIntl)(),E=O.ZP.useMessage(),Pe=r()(E,2),me=Pe[0],Ae=Pe[1],je=(0,b.useRef)(null),we=(0,b.useState)({auto_match_ability:0,agent_abilities:[{agent_ability_id:0,name:"string",content:"string",status:0}]}),ke=r()(we,2),Se=ke[0],j=ke[1];(0,b.useEffect)(function(){});var ge=function(C){if(C.users.length==1&&(!C.users[0].content&&C.users[0].name||C.users[0].content&&!C.users[0].name))return O.ZP.warning(k.formatMessage({id:"agent.message.warning.selectknowledgebase"}));var ne=C.users.map(function(X){return a()(a()({},X),{},{status:X.status?1:2,agent_ability_id:X.agent_ability_id?X.agent_ability_id:0})}),H={agent_id:G.agent.agent_id,data:{auto_match_ability:G.agent.auto_match_ability,agent_abilities:C.users.length==1&&!C.users[0].content&&!C.users[0].name?[]:ne}};Je=="false"&&Ee(),pe(a()({},Se))},Ee=function(){var se=I()(S()().mark(function C(){return S()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:s()||Te();case 1:case"end":return H.stop()}},C)}));return function(){return se.apply(this,arguments)}}(),f=function(C){M(a()(a()({},G),{},{agent:a()(a()({},G.agent),{},{auto_match_ability:C?1:0})}))},Be=function(){setTimeout(function(){je.current&&je.current.scrollTo({top:je.current.scrollHeight,behavior:"smooth"})},100)};return(0,e.jsxs)("div",{style:{height:"100%"},className:"w-full flex-1 sticky top-0",children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:k.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(be.Z,{name:k.formatMessage({id:"agent.automatch"}),title:k.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(at.Z,{size:"small",checked:!!(G&&G.agent.auto_match_ability==1),onChange:f})]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",onFinish:ge,style:{width:"100%"},autoComplete:"off",form:fe,children:[(0,e.jsx)(_.Z.List,{name:"users",children:function(C,ne){var H=ne.add,X=ne.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:[(0,e.jsx)("div",{className:" text-[#555555] text-xs font-medium",children:k.formatMessage({id:"agent.capability"})}),(0,e.jsx)("div",{children:(0,e.jsx)(xe.ZP,{type:"link",onClick:function(){H(),Be()},block:!0,icon:(0,e.jsx)(Xe.Z,{}),children:k.formatMessage({id:"agent.add"})})})]}),(0,e.jsx)("div",{style:{height:"calc(100vh - 206px)",overflowY:"auto"},className:"overflow-y-auto",ref:je,children:C.map(function(_e){var Ve=_e.key,oe=_e.name,he=At()(_e,ma);return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(_.Z.Item,{className:"mb-0",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:k.formatMessage({id:"agent.capabilityname"})}),(0,e.jsxs)("div",{children:[" ",(0,e.jsx)(mt.Z,{onClick:function(){return X(oe)}})]})]})}),(0,e.jsx)(_.Z.Item,a()(a()({className:"mb-[20px]"},he),{},{name:[oe,"name"],rules:[{required:C.length!==1,message:k.formatMessage({id:"agent.capabilityname"})}],children:(0,e.jsx)(De.Z,{placeholder:k.formatMessage({id:"agent.capabilityname"}),maxLength:50,className:"w-full"})})),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(be.Z,{className:"text-[#555555] text-xs font-medium",name:k.formatMessage({id:"agent.capabilitydescription"}),title:k.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(_.Z.Item,a()(a()({className:"w-full mb-[20px]"},he),{},{name:[oe,"content"],rules:[{required:C.length!==1,message:k.formatMessage({id:"agent.capabilitydescription"})}],children:(0,e.jsx)(ga,{placeholder:k.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},className:"w-full"})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:k.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(_.Z.Item,a()(a()({className:"mb-[20px]"},he),{},{name:[oe,"status"],children:(0,e.jsxs)(ae.ZP.Group,{optionType:"button",buttonStyle:"solid",defaultValue:!0,children:[(0,e.jsx)(ae.ZP,{value:!0,children:k.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(ae.ZP,{value:!1,children:k.formatMessage({id:"agent.capabilitystatus.disable"})})]})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:k.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(_.Z.Item,{className:"mb-0",name:[oe,"output_format"],children:(0,e.jsxs)(ae.ZP.Group,{defaultValue:0,children:[(0,e.jsx)(ae.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:k.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(ae.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(ae.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(ae.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})})]})})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},va=ha,xa=i(43319),ba=i(27842),ya=function(){var p,pe,B,G,M=(0,c.useIntl)(),fe=(0,b.useRef)(null),Je=_.Z.useForm(),ye=r()(Je,1),s=ye[0],R=_.Z.useForm(),Te=r()(R,1),k=Te[0],E=_.Z.useForm(),Pe=r()(E,1),me=Pe[0],Ae=_.Z.useForm(),je=r()(Ae,1),we=je[0],ke=(0,b.useState)(null),Se=r()(ke,2),j=Se[0],ge=Se[1],Ee=(0,b.useState)(0),f=r()(Ee,2),Be=f[0],se=f[1],C=(0,b.useState)(null),ne=r()(C,2),H=ne[0],X=ne[1],_e=(0,b.useState)(null),Ve=r()(_e,2),oe=Ve[0],he=Ve[1],Ne=(0,b.useState)(null),Fe=r()(Ne,2),st=Fe[0],V=Fe[1],N=(0,b.useState)(null),Z=r()(N,2),J=Z[0],K=Z[1],A=(0,b.useState)(null),Q=r()(A,2),nt=Q[0],it=Q[1],vt=(0,b.useState)(null),Le=r()(vt,2),$e=Le[0],Ie=Le[1],ie=(0,b.useState)(null),Ce=r()(ie,2),It=Ce[0],Rt=Ce[1],Ot=(0,b.useState)(null),rt=r()(Ot,2),lt=rt[0],xt=rt[1],Bt=(0,b.useState)(null),bt=r()(Bt,2),Me=bt[0],yt=bt[1],Vt=(0,b.useState)("1"),jt=r()(Vt,2),ue=jt[0],Ue=jt[1],wt=(0,b.useState)(null),Qe=r()(wt,2),ot=Qe[0],St=Qe[1],_t=(0,b.useState)(null),ut=r()(_t,2),Nt=ut[0],Ft=ut[1],Mt=(0,b.useState)(null),dt=r()(Mt,2),l=dt[0],n=dt[1],w=(0,b.useState)(null),U=r()(w,2),q=U[0],de=U[1],qe=(0,b.useState)(!0),We=r()(qe,2),Ye=We[0],et=We[1],wa=(0,b.useState)({first:!1,second:!1,fourthly:!1}),$t=r()(wa,2),tt=$t[0],ct=$t[1],Sa=[{key:"1",icon:(0,e.jsx)(te.Z,{}),label:M.formatMessage({id:"agent.menu.basicsetup"}),disabled:tt.first,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",lineHeight:"22px",color:ue=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:tt.second,icon:(0,e.jsx)(Y.Z,{}),label:M.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:ue=="2"?"#1B64F3":"#213044"}},{key:"5",disabled:tt.fourthly,icon:(0,e.jsx)(D.Z,{}),label:M.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:ue=="5"?"#1B64F3":"#213044"}}];(0,b.useEffect)(function(){var T=new URLSearchParams(window.location.search);T.get("app_id")||(ct(a()(a()({},tt),{},{first:!1,second:!0,fourthly:!0})),et(!1)),Zt()},[]);var Zt=function(){var T=I()(S()().mark(function g(d){var u,y,h,m,L,ee,ze,ce;return S()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(y=new URLSearchParams(window.location.search),y.get("from")&&Ft(y.get("from")),h=null,!(y.get("app_id")||d)){re.next=10;break}return re.next=6,(0,x.ek)(d||y.get("app_id"),y.get("type"));case 6:h=re.sent,de(h.data.app.app_id),re.next=13;break;case 10:return re.next=12,(0,$.cI)();case 12:h=re.sent;case 13:m=h.data,L=(u=h.data)===null||u===void 0||(u=u.agent_dataset_relation_list)===null||u===void 0?void 0:u.map(function(F){return F.dataset_id}),X(L),h.data.callable_items&&(h.data.agent.selected_skills=[],h.data.agent.selected_workflows=[],h.data.callable_items.forEach(function(F){F.item_type==1?h.data.agent.selected_skills.push(a()(a()({},F),{},{mode:4})):h.data.agent.selected_workflows.push(a()(a()({},F),{},{mode:2}))})),ge(h.data),yt(h.data.agent.publish_status===0&&h.data.is_creator===1?"false":"true"),h.data.agent.publish_status===1&&O.ZP.warning(M.formatMessage({id:"agent.message.listwarning"}),5),s.setFieldsValue(Ut(m.agent.input_variables)),ee=h.data.agent_abilities_list.map(function(F){return F.status==1?a()(a()({},F),{},{status:!0}):a()(a()({},F),{},{status:!1})}),me.setFieldsValue({users:ee[0]?ee:[{agent_ability_id:0,name:"",content:"",status:!0,output_format:0}]}),V(Pt(m.agent_abilities_list)),K(Pt(m.agent_abilities_list)),ze=m.agent_abilities_list.filter(function(F){return F.output_format!==0}),k.setFieldsValue({users:ze.map(function(F){return{agent_ability_id:F.agent_ability_id,output_format:F.output_format}})}),we.setFieldsValue(Ut(m.agent.input_variables)),it(m.m_configurations_list.map(function(F){return{value:F.m_config_id?F.m_config_id:F.model_config_id,label:F.m_name?F.m_name:F.model_name}})),m.agent.m_config_id||m.agent.model_config_id?Ie(m.agent.m_config_id?m.agent.m_config_id:m.agent.model_config_id):Ie(m.m_configurations_list[0].model_config_id),ce=m.agent_abilities_list.filter(function(F,Ge){return F.status===1}),xt(Pt(ce).concat([{value:0,label:M.formatMessage({id:"agent.allability"})}])),et(!1);case 33:case"end":return re.stop()}},g)}));return function(d){return T.apply(this,arguments)}}(),Ut=function(g){var d={users:g&&g.properties?Object.values(g.properties).map(function(u){return a()({name:u.name,type:u.type,content:u.display_name,status:u.required},u)}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return d},Pt=function(g){return g.map(function(d){return{value:d.agent_ability_id,label:d.name}})},_a=function(g){Kt(g,1),we.setFieldsValue(s.getFieldsValue())},Na=function(){Zt()},Wt=function(g){se(g)},Fa=function(){c.history.back()},Yt=function(){if(!j.agent.input_variables)return O.ZP.warning(M.formatMessage({id:"agent.message.warning.variable"})),!0;if(Qt().isEmpty(j.agent.input_variables.properties))return O.ZP.warning(M.formatMessage({id:"agent.message.warning.variable"})),!0;if($e)if(j.agent.obligations){if(Pa(s.getFieldsValue().users,"name"))return O.ZP.warning(M.formatMessage({id:"agent.message.warning.repetition"})),!0}else return O.ZP.warning(M.formatMessage({id:"agent.message.warning.functiondescribe"})),!0;else return O.ZP.warning(M.formatMessage({id:"agent.message.warning.LLM"})),!0;return!1},zt=function(){var g=me.getFieldsValue().users.filter(function(u){return!!u}),d=g.filter(function(u){return!u.name||!u.content});return d.length!==0&&!(d.length==1&&d[0].name==""&&d[0].content=="")?(O.ZP.warning(M.formatMessage({id:"agent.message.warning.integritycapacity"})),!0):!1},Gt=function(g){if((g==null?void 0:g.key)=="4"){var d=s.getFieldsValue().users.map(function(u){return{value:"<<".concat(v.qX,".inputs.").concat(u.name,">>"),label:u.name}});St(d)}Ue(g.key)},Ht=function(){et(!0);var g=0;return new Promise(function(d){var u=function(h){return(0,x.ek)(h,!1).then(function(){var m=I()(S()().mark(function L(ee){return S()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return g=ee.data.agent.agent_id,ce.next=3,Ma(g);case 3:return q||c.history.replace("/Agents?app_id=".concat(h,"&type=false")),Za(g).then(function(pt){O.ZP.success(M.formatMessage({id:"skill.conserve.success"})),setTimeout(function(){if(Zt(h),!q){var re=a()(a()({},(0,$.Go)("GET")),{},{app_id:h});(0,$.Go)("SET",re)}},1e3),n(g)}),ce.abrupt("return",ee);case 6:case"end":return ce.stop()}},L)}));return function(L){return m.apply(this,arguments)}}()).catch(function(){return""})};q?u(q).then(function(y){return d(y)}).catch(function(y){console.error("Error during agent update:",y),d("")}):(0,o.uy)((0,$.Go)("GET")).then(function(y){de(y.data.app_id),u(y.data.app_id).then(function(h){return d(h)}).catch(function(h){console.error("Error during agent creation:",h),d("")})}).catch(function(y){console.error("Error creating app:",y),et(!1),d("")})})},Ma=function(g,d){return new Promise(function(u,y){s.validateFields().then(function(){var h=I()(S()().mark(function m(L){var ee,ze,ce,pt;return S()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(ze=[].concat(W()(j.agent.selected_skills||[]),W()(j.agent.selected_workflows||[])).map(function(Ge){return{app_id:Ge.app_id,item_type:Ge.mode==4?1:2}}),ce={agent_id:g,data:{is_public:j.app.is_public,enable_api:j.app.enable_api,attrs_are_visible:j.app.attrs_are_visible,obligations:j.agent.obligations,input_variables:j.agent.input_variables?j.agent.input_variables:ka(s.getFieldsValue()),dataset_ids:H,m_config_id:$e,allow_upload_file:j.agent.allow_upload_file,default_output_format:j.agent.default_output_format,callable_list:ze}},Me!="false"){F.next=5;break}return F.next=5,Kt(ce,1);case 5:we.setFieldsValue(s.getFieldsValue()),pt=((ee=s.getFieldsValue())===null||ee===void 0||(ee=ee.users)===null||ee===void 0?void 0:ee.map(function(Ge){return{value:"<<".concat(v.qX,".inputs.").concat(Ge.name,">>"),label:Ge.name}}))||[],St(pt),d&&Ue(d.key),u();case 10:case"end":return F.stop()}},m)}));return function(m){return h.apply(this,arguments)}}()).catch(function(h){y(h)})})},Za=function(g){return new Promise(function(d,u){var y=me.getFieldsValue().users.filter(function(L){return!!L}),h=y.map(function(L){return a()(a()({},L),{},{status:L.status==!1?2:1,agent_ability_id:L.agent_ability_id?L.agent_ability_id:0,output_format:L.output_format?L.output_format:0})}),m={agent_id:g,data:{auto_match_ability:j.agent.auto_match_ability,agent_abilities:h}};Me=="false"?h.length==1&&h[0].name==""&&h[0].content==""?(ct({first:!1,second:!1,fourthly:!1}),d()):(0,x.Iw)(m).then(function(L){L.code==0?(ct({first:!1,second:!1,fourthly:!1}),d()):u(new Error("API call failed with code: ".concat(L.code)))}).catch(function(L){u(L)}):d()})},Kt=function(){var T=I()(S()().mark(function g(d,u){var y;return S()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(Me!=="false"){m.next=19;break}if(u!==1){m.next=7;break}return m.next=4,(0,x.XB)(d);case 4:m.t0=m.sent,m.next=17;break;case 7:if(u!==2){m.next=13;break}return m.next=10,(0,x.Iw)(d);case 10:m.t1=m.sent,m.next=16;break;case 13:return m.next=15,(0,x.Ce)(d);case 15:m.t1=m.sent;case 16:m.t0=m.t1;case 17:y=m.t0,y&&y.code===0&&et(!1);case 19:return m.abrupt("return",!0);case 20:case"end":return m.stop()}},g)}));return function(d,u){return T.apply(this,arguments)}}(),Pa=function(g,d){var u=new Set;return g.some(function(y){var h=y[d];return u.has(h)?u.add(h):u.add(h)&&!1})},ka=function(g){var d=new P.Kr("input","","");return g.users.forEach(function(u){var y=new P._w(u.name,u.type?u.type:"string",u.value?u.value:"",u.content,u.status);d.addProperty(u.name,y)}),d};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(xe.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:Fa,children:[(0,e.jsx)(z.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:Nt=="chat_room"?M.formatMessage({id:"agent.back_meeting"}):M.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Xt.Z,{selectedKeys:[ue],onClick:Gt,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[ue],mode:"inline",items:Sa}),j&&((p=j.app)===null||p===void 0?void 0:p.enable_api)===1&&((pe=j.app)===null||pe===void 0?void 0:pe.publish_status)===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:I()(S()().mark(function T(){var g,d;return S()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(g=new URLSearchParams(window.location.search),d=null,!g.get("app_id")){y.next=6;break}return y.next=5,(0,x.ek)(g.get("app_id"),g.get("type"));case 5:d=y.sent;case 6:d!=null&&d.data.app.enable_api===1&&d.data.app.publish_status===1?window.open(t._n+j.app.api_url):O.ZP.warning(M.formatMessage({id:"agent.save.and.click"}),5);case 7:case"end":return y.stop()}},T)})),children:(0,e.jsxs)("div",{className:"mr-[20px] text-base font-medium text-[#213044] -mt-1",children:[(0,e.jsx)(Ze.Z,{className:"mr-3"}),M.formatMessage({id:"agent.visit"})," API"]})}):null]})]}),(0,e.jsx)("div",{className:"flex-1 relative w-[calc(100%-300px)]",children:(0,e.jsxs)(ft.Z,{style:{height:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,e.jsx)(ft.Z.Panel,{defaultSize:"50%",min:"40%",max:"70%",children:(0,e.jsx)(Et.Z,{spinning:Ye,size:"large",className:"mt-[112px] mr-4",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[(B=(0,$.Go)("GET"))!==null&&B!==void 0&&B.app_id?M.formatMessage({id:"agent.compile"}):M.formatMessage({id:"agent.created"})," ",M.formatMessage({id:"agent"})]}),(j==null||(G=j.app)===null||G===void 0?void 0:G.publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] px-[7px] text-[#fff] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:M.formatMessage({id:"agent.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE] px-[7px]  text-[#999] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:M.formatMessage({id:"agent.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:ue==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Ye&&(0,e.jsx)(na,{FirstValue:_a,Ffromref:s,Detaillist:j,setDetaillist:ge,repository:H,setRepository:X,Newproperties:oe,setNewproperties:he,Operationbentate:Me,Fourthly_config_id:$e,setFourthly_config_id:Ie,Fourthly_select_list:nt,pageKeyfun:Ue,firstjudgingcondition:Yt,agentmenudisabled:tt,setAgentmunudisabled:ct})}),(0,e.jsx)("div",{style:{display:ue==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center",position:"sticky",top:"-150px"},children:(0,e.jsx)(va,{SecondValue:Na,Detaillist:j,setDetaillist:ge,Sformref:me,Operationbentate:Me,handleBack:Wt,pageKeyfun:Ue,SkillMenuClick:Gt,secondjudgingcondition:zt,agentupdata:Ht})}),(0,e.jsx)("div",{style:{display:ue==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(fa,{handleBack:Wt,Detaillist:j,setDetaillist:ge,Fourthly_select_list:nt,Fourthly_config_id:$e,setFourthly_config_id:Ie,Fourthlyref:we,Fourthly_abilities_list:lt,Operationbentate:Me,callwordlist:ot,newagentid:l})})]})})})}),(0,e.jsx)(ft.Z.Panel,{children:(0,e.jsx)("div",{children:(0,e.jsx)(xa.Z,{saveInfo:{firstjudgingcondition:Yt,secondjudgingcondition:zt,agentupdata:Ht},operationbentate:Me,data:{abilitiesList:lt,detailList:j}})})}),ue=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(ba.ZP,{agent_id:j.agent.agent_id})})]})})]})},ja=ya},58533:function(kt,Re,i){var ve=i(67294);var W=function(r,x){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var v in t)t.hasOwnProperty(v)&&(o[v]=t[v])},W(r,x)};function He(r,x){W(r,x);function o(){this.constructor=r}r.prototype=x===null?Object.create(x):(o.prototype=x.prototype,new o)}var S=function(){return S=Object.assign||function(x){for(var o,t=1,v=arguments.length;t<v;t++){o=arguments[t];for(var P in o)Object.prototype.hasOwnProperty.call(o,P)&&(x[P]=o[P])}return x},S.apply(this,arguments)};function le(r,x,o,t){var v,P=!1,$=0;function te(){v&&clearTimeout(v)}function Y(){te(),P=!0}typeof x!="boolean"&&(t=o,o=x,x=void 0);function D(){var z=this,Ze=Date.now()-$,c=arguments;if(P)return;function _(){$=Date.now(),o.apply(z,c)}function O(){v=void 0}t&&!v&&_(),te(),t===void 0&&Ze>r?_():x!==!0&&(v=setTimeout(t?O:_,t===void 0?r-Ze:r))}return D.cancel=Y,D}var I={Pixel:"Pixel",Percent:"Percent"},Oe={unit:I.Percent,value:.8};function a(r){return typeof r=="number"?{unit:I.Percent,value:r*100}:typeof r=="string"?r.match(/^(\d*(\.\d+)?)px$/)?{unit:I.Pixel,value:parseFloat(r)}:r.match(/^(\d*(\.\d+)?)%$/)?{unit:I.Percent,value:parseFloat(r)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),Oe):(console.warn("scrollThreshold should be string or number"),Oe)}var Ke=function(r){He(x,r);function x(o){var t=r.call(this,o)||this;return t.lastScrollTop=0,t.actionTriggered=!1,t.startY=0,t.currentY=0,t.dragging=!1,t.maxPullDownDistance=0,t.getScrollableTarget=function(){return t.props.scrollableTarget instanceof HTMLElement?t.props.scrollableTarget:typeof t.props.scrollableTarget=="string"?document.getElementById(t.props.scrollableTarget):(t.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},t.onStart=function(v){t.lastScrollTop||(t.dragging=!0,v instanceof MouseEvent?t.startY=v.pageY:v instanceof TouchEvent&&(t.startY=v.touches[0].pageY),t.currentY=t.startY,t._infScroll&&(t._infScroll.style.willChange="transform",t._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},t.onMove=function(v){t.dragging&&(v instanceof MouseEvent?t.currentY=v.pageY:v instanceof TouchEvent&&(t.currentY=v.touches[0].pageY),!(t.currentY<t.startY)&&(t.currentY-t.startY>=Number(t.props.pullDownToRefreshThreshold)&&t.setState({pullToRefreshThresholdBreached:!0}),!(t.currentY-t.startY>t.maxPullDownDistance*1.5)&&t._infScroll&&(t._infScroll.style.overflow="visible",t._infScroll.style.transform="translate3d(0px, "+(t.currentY-t.startY)+"px, 0px)")))},t.onEnd=function(){t.startY=0,t.currentY=0,t.dragging=!1,t.state.pullToRefreshThresholdBreached&&(t.props.refreshFunction&&t.props.refreshFunction(),t.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){t._infScroll&&(t._infScroll.style.overflow="auto",t._infScroll.style.transform="none",t._infScroll.style.willChange="unset")})},t.onScrollListener=function(v){typeof t.props.onScroll=="function"&&setTimeout(function(){return t.props.onScroll&&t.props.onScroll(v)},0);var P=t.props.height||t._scrollableNode?v.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!t.actionTriggered){var $=t.props.inverse?t.isElementAtTop(P,t.props.scrollThreshold):t.isElementAtBottom(P,t.props.scrollThreshold);$&&t.props.hasMore&&(t.actionTriggered=!0,t.setState({showLoader:!0}),t.props.next&&t.props.next()),t.lastScrollTop=P.scrollTop}},t.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:o.dataLength},t.throttledOnScrollListener=le(150,t.onScrollListener).bind(t),t.onStart=t.onStart.bind(t),t.onMove=t.onMove.bind(t),t.onEnd=t.onEnd.bind(t),t}return x.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},x.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},x.prototype.componentDidUpdate=function(o){this.props.dataLength!==o.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},x.getDerivedStateFromProps=function(o,t){var v=o.dataLength!==t.prevDataLength;return v?S(S({},t),{prevDataLength:o.dataLength}):null},x.prototype.isElementAtTop=function(o,t){t===void 0&&(t=.8);var v=o===document.body||o===document.documentElement?window.screen.availHeight:o.clientHeight,P=a(t);return P.unit===I.Pixel?o.scrollTop<=P.value+v-o.scrollHeight+1:o.scrollTop<=P.value/100+v-o.scrollHeight+1},x.prototype.isElementAtBottom=function(o,t){t===void 0&&(t=.8);var v=o===document.body||o===document.documentElement?window.screen.availHeight:o.clientHeight,P=a(t);return P.unit===I.Pixel?o.scrollTop+v>=o.scrollHeight-P.value:o.scrollTop+v>=P.value/100*o.scrollHeight},x.prototype.render=function(){var o=this,t=S({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),v=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),P=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return ve.createElement("div",{style:P,className:"infinite-scroll-component__outerdiv"},ve.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function($){return o._infScroll=$},style:t},this.props.pullDownToRefresh&&ve.createElement("div",{style:{position:"relative"},ref:function($){return o._pullDown=$}},ve.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!v&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},x}(ve.Component);Re.Z=Ke}}]);
