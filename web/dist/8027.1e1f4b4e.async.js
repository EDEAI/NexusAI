"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8027],{86:function(ge,R,s){var K=s(5574),W=s.n(K),Z=s(32332),F=s(38703),H=s(67294),n=s(85893),k=function(l){var G=l.subtitle,d=l.handleClick,C=l.lineClamp,L=C===void 0?2:C,r=l.textDetails,w=l.title,U=l.icon,T=l.iconType,B=T===void 0?"":T,h=l.operation,a=h===void 0?"":h,u=l.progress,t=l.status,v=l.backlogTips,f=l.avatar,i=(0,H.useState)(0),o=W()(i,2),E=o[0],x=o[1],j=function(){x(u)},c=function(){x(0)},y=function($){return"rounded-[4px] border-l-[4px] ".concat($==1?"border-[#1B64F3]":$==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,n.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(t!==void 0?y(t):"graphicbox"),onClick:d,onMouseEnter:function(){u!=null&&j()},onMouseLeave:function(){u!=null&&c()},children:[t!==void 0&&(0,n.jsx)("div",{style:{width:"".concat(E,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(t==1?"bg-[#1B64F3]/[.03]":t==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,n.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,n.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,n.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[f?(0,n.jsx)("img",{src:f,className:"w-[40px] h-[40px] rounded-[6px]"}):(0,n.jsx)("img",{src:(0,Z.s9)("single",U),className:"w-[22px] h-[22px]"}),B&&(0,n.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,n.jsx)("img",{src:"/icons/".concat(B,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,n.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,n.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,n.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,n.jsx)("span",{className:"truncate",children:w}),(0,n.jsx)("span",{className:"flex items-center flex-1",children:G})]}),(0,n.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:r})]})}),v||(0,n.jsx)(n.Fragment,{}),a&&(0,n.jsx)("div",{className:"flex items-center w-[24px]",children:(0,n.jsx)("span",{className:"operation",children:a})}),u!=null&&(0,n.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,n.jsx)(F.Z,{type:"circle",percent:u,size:29})})]})]})};R.Z=k},38027:function(ge,R,s){s.d(R,{p1:function(){return w},vw:function(){return T}});var K=s(19632),W=s.n(K),Z=s(5574),F=s.n(Z),H=s(86),n=s(39e3),k=s(29608),ve=s(87740),l=s(76772),G=s(83622),d=s(67294),C=s(98486),L=s(97807),r=s(85893),w=(0,d.memo)(function(h){var a=h.progressObj,u=function(){return parseFloat(a.elapsed_time).toFixed(6)},t=function(f){var i=new Date(f),o=i.getFullYear(),E=(i.getMonth()+1).toString().padStart(2,"0"),x=i.getDate().toString().padStart(2,"0"),j=i.getHours().toString().padStart(2,"0"),c=i.getMinutes().toString().padStart(2,"0"),y=i.getSeconds().toString().padStart(2,"0");return(0,r.jsx)(r.Fragment,{children:"".concat(o,".").concat(E,".").concat(x," ").concat(j,":").concat(c,":").concat(y)})};return(0,r.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,r.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,r.jsx)("div",{className:"truncate min-w-[70px]",children:a.created_time&&t(a.created_time)}),(0,r.jsx)("div",{className:"truncate",children:a.apps_name||a.app_name}),(0,r.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,r.jsx)("div",{className:"shrink-0 rounded-full ".concat(a.status==1?"bg-blue-600":a.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,r.jsxs)("div",{className:"truncate",children:[u(),"S"]})]})]})})}),U=(0,d.memo)(function(h){var a=h.id,u=h.message,t=(0,l.useIntl)(),v=(0,n.Z)(function(c){return c.setSummaryClick}),f=(0,d.useState)(!0),i=F()(f,2),o=i[0],E=i[1],x=(0,n.Z)(function(c){return c.summaryClick}),j=(0,n.Z)(function(c){return c.setSummaryParams});return(0,d.useEffect)(function(){E(x)},[x]),(0,r.jsx)("div",{className:"flex flex-row-reverse",children:(0,r.jsxs)(G.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(y){o&&(j({id:a,message:u}),v(!1))},children:[(0,r.jsx)("span",{className:"text-[12px]",children:t.formatMessage({id:"app.summaryhistory.submitText"})}),(0,r.jsx)(ve.Z,{className:"text-[14px]"})]})})}),T=function(a){var u=Object.keys(a),t=[];return u.forEach(function(v){t.push(a[v])}),t},B=function(a){var u=a.list,t=a.scrollDom,v=a.historyHeight,f=a.id,i=a.runid,o=(0,l.useIntl)(),E=(0,d.useState)([]),x=F()(E,2),j=x[0],c=x[1],y=(0,d.useRef)("100%"),D=(0,d.useState)(0),$=F()(D,2),xe=$[0],me=$[1],he=(0,k.Z)(function(e){return e.setRunPanelLogRecord}),pe=function(I){var p=new Date(I),N=p.getMonth()+1,M=p.getDate(),P=p.getHours(),g=p.getMinutes(),m=p.getSeconds();return p.getFullYear()+"-"+(N<10?"0"+N:N)+"-"+(M<10?"0"+M:M)+" "+(P<10?"0"+P:P)+":"+(g<10?"0"+g:g)+":"+(m<10?"0"+m:m)};return(0,d.useEffect)(function(){if(t){var e;y.current=t==null||(e=t.current)===null||e===void 0?void 0:e.offsetHeight}},[t]),(0,d.useEffect)(function(){v&&(y.current="auto")},[v]),(0,d.useEffect)(function(){c(W()(u))},[u]),(0,d.useEffect)(function(){me(i)},[i]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"px-4",style:{minHeight:y.current},children:j&&j.length?j.map(function(e){var I,p,N,M,P,g,m,O,z,V,Y,A,J,Q,X,q,ee,re,ne,se,ae;return e!=null&&e.source_run&&e!==null&&e!==void 0&&e.source_run.summary&&(!xe||xe!=(e==null||(I=e.source_run)===null||I===void 0?void 0:I.id))?(0,r.jsx)("div",{className:"pt-[16px] border-b-[1px] border-color-[#eee] ",children:(0,r.jsxs)("div",{className:"pb-[60px]",children:[(0,r.jsx)("div",{className:"text-[16px] font-[600] pb-[8px] flex items-center",children:(0,r.jsx)("span",{className:"flex-1",children:o.formatMessage({id:"app.summary.title"})})}),(0,r.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:pe(e==null||(p=e.source_run)===null||p===void 0?void 0:p.created_time)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"p-[12px]  leading-[22px] ".concat(e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?"bg-[#F7F7F7]":"bg-blue-100 rounded-[4px]"),children:(0,r.jsx)(C.UG,{rehypePlugins:[L.Z],children:e==null||(N=e.source_run)===null||N===void 0?void 0:N.summary})}),(0,r.jsx)(U,{id:f,message:e==null||(M=e.source_run)===null||M===void 0?void 0:M.summary})]}),e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[o.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),e==null?void 0:e.source_corrections.map(function(_,b){return(0,r.jsxs)("div",{className:"mb-[16px] last-of-type:mb-0",children:[(0,r.jsx)("div",{className:"rounded-[4px]  ".concat((e==null?void 0:e.source_corrections.length)-1!=b?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,r.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,r.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[o.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",_.user_prompt]}),(0,r.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[o.formatMessage({id:"app.summaryhistory.time"}),":"," ",pe(_.created_time)]}),(0,r.jsx)(C.UG,{rehypePlugins:[L.Z],children:_==null?void 0:_.corrected_summary})]})}),(0,r.jsx)(U,{id:f,message:_==null?void 0:_.corrected_summary})]},_.created_time)})]}):(0,r.jsx)(r.Fragment,{}),e!=null&&e.target_run?(0,r.jsxs)("div",{className:"py-[12px]",children:[(0,r.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[o.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,r.jsx)("span",{className:"font-[500] ",children:e!=null&&(P=e.target_run)!==null&&P!==void 0&&P.agent_id?"agent":"workflow"}),(0,r.jsx)("span",{className:"px-[6px]",children:":"}),(0,r.jsx)("span",{children:e==null||(g=e.target_run)===null||g===void 0||(g=g.app)===null||g===void 0?void 0:g.name})]})}),(0,r.jsx)("div",{children:e!=null&&(m=e.target_run)!==null&&m!==void 0&&(m=m.inputs)!==null&&m!==void 0&&m.properties?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[o.formatMessage({id:"app.summaryhistory.input"}),":"]}),T(e==null||(O=e.target_run)===null||O===void 0||(O=O.inputs)===null||O===void 0?void 0:O.properties).map(function(_){return(0,r.jsxs)("div",{className:"pb-[10px]",children:[(0,r.jsx)("div",{className:"pb-[8px] font-[600]",children:_.display_name||_.name}),(0,r.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:_.value})]})})]}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)("div",{children:e!=null&&(z=e.target_run)!==null&&z!==void 0&&z.raw_user_prompt?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[o.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,r.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:e==null||(V=e.target_run)===null||V===void 0?void 0:V.raw_user_prompt})]}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[o.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,r.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(e==null||(Y=e.target_run)===null||Y===void 0?void 0:Y.agent_id)!=0?(0,r.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,r.jsx)(C.UG,{rehypePlugins:[L.Z],children:e==null||(A=e.target_run)===null||A===void 0||(A=A.outputs)===null||A===void 0?void 0:A.value})}):(0,r.jsx)(H.Z,{status:e==null||(J=e.target_run)===null||J===void 0?void 0:J.status,icon:e==null||(Q=e.target_run)===null||Q===void 0?void 0:Q.icon,title:e==null||(X=e.target_run)===null||X===void 0?void 0:X.name,avatar:e==null||(q=e.target_run)===null||q===void 0?void 0:q.avatar,textDetails:(0,r.jsx)(w,{progressObj:{created_time:e==null||(ee=e.target_run)===null||ee===void 0?void 0:ee.created_time,elapsed_time:e==null||(re=e.target_run)===null||re===void 0?void 0:re.elapsed_time,app_name:e==null||(ne=e.target_run)===null||ne===void 0?void 0:ne.app.name,status:e==null||(se=e.target_run)===null||se===void 0?void 0:se.status}}),handleClick:function(){var b,S,te,le,oe,de,ue,ie,_e,ce;he({app_id:e==null||(b=e.target_run)===null||b===void 0||(b=b.app)===null||b===void 0?void 0:b.id,app_name:e==null||(S=e.target_run)===null||S===void 0||(S=S.app)===null||S===void 0?void 0:S.name,icon:e==null||(te=e.target_run)===null||te===void 0?void 0:te.icon,workflow_id:e==null||(le=e.target_run)===null||le===void 0?void 0:le.workflow_id,type:2,app_run_id:e==null||(oe=e.target_run)===null||oe===void 0?void 0:oe.id,run_name:e==null||(de=e.target_run)===null||de===void 0?void 0:de.name,status:e==null||(ue=e.target_run)===null||ue===void 0?void 0:ue.status,created_time:e==null||(ie=e.target_run)===null||ie===void 0?void 0:ie.created_time,elapsed_time:e==null||(_e=e.target_run)===null||_e===void 0?void 0:_e.elapsed_time,completed_progress:"".concat(e==null||(ce=e.target_run)===null||ce===void 0?void 0:ce.percentage,"%")})},progress:e==null||(ae=e.target_run)===null||ae===void 0?void 0:ae.percentage})})]})]}):(0,r.jsx)(r.Fragment,{})]})},e.source_run.id):(0,r.jsx)(r.Fragment,{})}):(0,r.jsx)(r.Fragment,{})})})};R.ZP=(0,d.memo)(B)}}]);
