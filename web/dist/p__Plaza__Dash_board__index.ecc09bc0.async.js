"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{11475:function(Q,A,a){a.d(A,{Z:function(){return D}});var T=a(1413),s=a(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},v=R,b=a(91146),f=function(S,G){return s.createElement(b.Z,(0,T.Z)((0,T.Z)({},S),{},{ref:G,icon:v}))},W=s.forwardRef(f),D=W},35790:function(Q,A,a){var T=a(1413),s=a(67294),R=a(19369),v=a(91146),b=function(D,M){return s.createElement(v.Z,(0,T.Z)((0,T.Z)({},D),{},{ref:M,icon:R.Z}))},f=s.forwardRef(b);A.Z=f},83510:function(Q,A,a){a.d(A,{LK:function(){return k},bs:function(){return K},go:function(){return C},uy:function(){return B}});var T=a(15009),s=a.n(T),R=a(99289),v=a.n(R),b=a(47520),f="/v1/apps/apps_list",W="/v1/agent/agent_delete/",D="/v1/workflow/workflow_app_delete/",M="/v1/vector/delete_dataset/",S="/v1/skill/delete_skill_by_app_id/",G="/v1/apps/apps_create",I="/v1/apps/app_update/",C=function(){var L=v()(s()().mark(function p(h){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.ZP)("".concat(f),{method:"GET",data:h});case 2:return P=t.sent,t.abrupt("return",P);case 4:case"end":return t.stop()}},p)}));return function(h){return L.apply(this,arguments)}}(),k=function(){var L=v()(s()().mark(function p(h){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(h),t.next=3,h.mode;case 3:if(t.t0=t.sent,t.t0!=1){t.next=8;break}t.t1=(0,b.ZP)("".concat(W).concat(h.app_id),{method:"DELETE"}),t.next=9;break;case 8:t.t1=h.mode==2?(0,b.ZP)("".concat(D).concat(h.app_id),{method:"DELETE"}):h.mode==3?(0,b.ZP)("".concat(M).concat(h.app_id),{method:"DELETE"}):(0,b.ZP)("".concat(S).concat(h.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return P=t.t1,t.abrupt("return",P);case 11:case"end":return t.stop()}},p)}));return function(h){return L.apply(this,arguments)}}(),B=function(){var L=v()(s()().mark(function p(h){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.ZP)("".concat(G),{method:"POST",data:h});case 2:return P=t.sent,t.abrupt("return",P);case 4:case"end":return t.stop()}},p)}));return function(h){return L.apply(this,arguments)}}(),K=function(){var L=v()(s()().mark(function p(h){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.ZP)("".concat(I).concat(h.app_id),{method:"PUT",data:h});case 2:return P=t.sent,t.abrupt("return",P);case 4:case"end":return t.stop()}},p)}));return function(h){return L.apply(this,arguments)}}()},43722:function(Q,A,a){a.d(A,{Gh:function(){return P},Gn:function(){return M},KH:function(){return K},Rp:function(){return L},cH:function(){return G},dB:function(){return S},j2:function(){return I},r5:function(){return k},rw:function(){return f},sI:function(){return C},sT:function(){return B},sh:function(){return h},vu:function(){return D},xM:function(){return Z},xT:function(){return p}});var T=a(15009),s=a.n(T),R=a(99289),v=a.n(R),b=a(47520),f=function(){var t=v()(s()().mark(function n(){var o;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,b.ZP)("/v1/index/",{method:"GET"});case 2:return o=u.sent,u.abrupt("return",o);case 4:case"end":return u.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),W=null,D=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/",{method:"GET",data:o});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),M=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/".concat(o.id),{method:"DELETE"});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),S=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/",{method:"POST",data:o});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),G=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/".concat(o.id,"/details"),{method:"GET"});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),I=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:o.id}});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),C=function(){var t=v()(s()().mark(function n(o,l){var u;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,b.ZP)("/v1/chatroom/".concat(l,"/update_chatroom"),{method:"POST",data:o});case 2:return u=c.sent,c.abrupt("return",u);case 4:case"end":return c.stop()}},n)}));return function(o,l){return t.apply(this,arguments)}}(),k=function(){var t=v()(s()().mark(function n(o,l){var u;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,b.ZP)("/v1/chatroom/".concat(l,"/smart_selection"),{method:"POST",data:o});case 2:return u=c.sent,c.abrupt("return",u);case 4:case"end":return c.stop()}},n)}));return function(o,l){return t.apply(this,arguments)}}(),B=function(){var t=v()(s()().mark(function n(o,l,u){var r;return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,b.ZP)("/v1/chatroom/".concat(l,"/agents/").concat(u,"/setting"),{method:"PUT",data:o});case 2:return r=E.sent,E.abrupt("return",r);case 4:case"end":return E.stop()}},n)}));return function(o,l,u){return t.apply(this,arguments)}}(),K=function(){var t=v()(s()().mark(function n(o,l){var u;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chatroom_message"),{method:"GET",data:l});case 2:return u=c.sent,c.abrupt("return",u);case 4:case"end":return c.stop()}},n)}));return function(o,l){return t.apply(this,arguments)}}(),L=function(){var t=v()(s()().mark(function n(o,l){var u;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chat_history_message_summary"),{method:"POST",data:l});case 2:return u=c.sent,c.abrupt("return",u);case 4:case"end":return c.stop()}},n)}));return function(o,l){return t.apply(this,arguments)}}(),p=function(){var t=v()(s()().mark(function n(o,l){var u;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chat_history_summary"),{method:"POST",data:l});case 2:return u=c.sent,c.abrupt("return",u);case 4:case"end":return c.stop()}},n)}));return function(o,l){return t.apply(this,arguments)}}(),h=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:o});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),P=function(){var t=v()(s()().mark(function n(o){var l;return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,b.ZP)("/v1/chatroom/chat_room_history_single",{method:"GET",data:o});case 2:return l=r.sent,r.abrupt("return",l);case 4:case"end":return r.stop()}},n)}));return function(o){return t.apply(this,arguments)}}(),Z=function(){var t=v()(s()().mark(function n(o,l){var u;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,b.ZP)("/v1/chatroom/".concat(o,"/chat_single_message_generation"),{method:"POST",data:l});case 2:return u=c.sent,c.abrupt("return",u);case 4:case"end":return c.stop()}},n)}));return function(o,l){return t.apply(this,arguments)}}()},86:function(Q,A,a){var T=a(5574),s=a.n(T),R=a(32332),v=a(38703),b=a(67294),f=a(85893),W=function(M){var S=M.subtitle,G=M.handleClick,I=M.lineClamp,C=I===void 0?2:I,k=M.textDetails,B=M.title,K=M.icon,L=M.iconType,p=L===void 0?"":L,h=M.operation,P=h===void 0?"":h,Z=M.progress,t=M.status,n=M.backlogTips,o=(0,b.useState)(0),l=s()(o,2),u=l[0],r=l[1],c=function(){r(Z)},E=function(){r(0)},ae=function(J){return"rounded-[4px] border-l-[4px] ".concat(J==1?"border-[#1B64F3]":J==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,f.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(t!==void 0?ae(t):"graphicbox"),onClick:G,onMouseEnter:function(){Z!=null&&c()},onMouseLeave:function(){Z!=null&&E()},children:[t!==void 0&&(0,f.jsx)("div",{style:{width:"".concat(u,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(t==1?"bg-[#1B64F3]/[.03]":t==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,f.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,f.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,f.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,f.jsx)("img",{src:(0,R.s9)("single",K),className:"w-[22px] h-[22px]"}),p&&(0,f.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,f.jsx)("img",{src:"/icons/".concat(p,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,f.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,f.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,f.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,f.jsx)("span",{className:"truncate",children:B}),(0,f.jsx)("span",{className:"flex items-center flex-1",children:S})]}),(0,f.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:k})]})}),n||(0,f.jsx)(f.Fragment,{}),P&&(0,f.jsx)("div",{className:"flex items-center w-[24px]",children:(0,f.jsx)("span",{className:"operation",children:P})}),Z!=null&&(0,f.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,f.jsx)(v.Z,{type:"circle",percent:Z,size:29})})]})]})};A.Z=W},21446:function(Q,A,a){var T=a(15009),s=a.n(T),R=a(97857),v=a.n(R),b=a(99289),f=a.n(b),W=a(5574),D=a.n(W),M=a(83510),S=a(29608),G=a(32332),I=a(35312),C=a(26915),k=a(28036),B=a(85576),K=a(67294),L=a(94840),p=a(85893),h=C.Z.TextArea,P=function(t){var n=t.setIsModalOpen,o=t.isModalOpen,l=t.transformData,u=t.CreationType,r=t.setcreationType,c=t.ModalType,E=(0,I.useIntl)(),ae=(0,K.useState)(""),e=D()(ae,2),J=e[0],de=e[1],pe=(0,K.useState)(""),oe=D()(pe,2),te=oe[0],me=oe[1],ie=(0,K.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),re=D()(ie,2),le=re[0],_e=re[1],ue=(0,S.Z)(),fe=ue.setAgentCreateOpen,he=ue.setSkillCreateOpen;(0,K.useEffect)(function(){},[]);var ve=function(x){de(x.target.value)},ge=function(x){me(x.target.value)},N=function(){var d=f()(s()().mark(function x(){var y,m;return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(y={name:J,mode:u.apps_mode,description:te,icon:JSON.stringify(le.id),icon_background:""},u.apps_mode!=2){j.next=8;break}return j.next=4,(0,M.uy)(y);case 4:m=j.sent,m.code===0&&(n(!1),i(m.data.app_id)),j.next=10;break;case 8:(0,G.Go)("SET",v()(v()({},y),{},{type:!1})),i();case 10:case"end":return j.stop()}},x)}));return function(){return d.apply(this,arguments)}}(),g=function(x){l.map(function(y){y.name==x.name&&(console.log(y,"item"),r(y))})},i=function(x){x?I.history.push("/".concat(u.path,"?app_id=").concat(x,"&&type=false")):I.history.push("/".concat(u.path,"?type=false"))},_=function(){return(0,p.jsxs)("div",{className:"flex justify-between",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[u.apps_mode==1&&(0,p.jsx)(k.ZP,{onClick:function(){fe(!0),n(!1)},children:E.formatMessage({id:"agent.creation.button.ai"})}),u.apps_mode==4&&(0,p.jsx)(k.ZP,{onClick:function(){he(!0),n(!1)},children:E.formatMessage({id:"agent.creation.button.skill.ai"})})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(k.ZP,{onClick:function(){return n(!1)},children:E.formatMessage({id:"agent.modal.button.cancel"})}),(0,p.jsx)(k.ZP,{disabled:J==="",onClick:N,type:"primary",children:E.formatMessage({id:"creation"})})]})]})};return(0,p.jsx)(B.Z,{title:E.formatMessage({id:"creation.addnewapp"}),open:o,okText:E.formatMessage({id:"creation"}),onOk:N,onCancel:function(){return n(!1)},okButtonProps:{disabled:J===""},width:820,footer:(0,p.jsx)(_,{}),children:(0,p.jsxs)("div",{className:"pb-1",children:[c?(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:E.formatMessage({id:"creation.appntype"})}),(0,p.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:l&&l.map(function(d){return(0,p.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:d.apps_mode===u.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){g(d)},children:[(0,p.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,p.jsx)("img",{className:"w-6 h-6",src:d.signicon,alt:""})}),(0,p.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:d.name})]})})})]}):null,(0,p.jsxs)("div",{className:" mt-5",children:[(0,p.jsxs)("div",{className:"mb-5",children:[(0,p.jsxs)("p",{className:"text-xs",children:[u.apps_mode==1?E.formatMessage({id:"creation.agent"}):u.apps_mode==2?E.formatMessage({id:"creation.workflow"}):u.apps_mode==3?E.formatMessage({id:"creation.repository"}):E.formatMessage({id:"creation.skill"}),E.formatMessage({id:"creation.appiconname"})]}),(0,p.jsxs)("div",{className:"flex items-center justify-around",children:[(0,p.jsx)(L.Z,{CardData:le,setCardData:_e}),(0,p.jsx)(C.Z,{showCount:!0,maxLength:50,placeholder:E.formatMessage({id:"creation.placeholder.appname"}),onChange:ve})]})]}),(0,p.jsxs)("div",{className:"mb-5 text-xs",children:[(0,p.jsxs)("p",{children:[u.apps_mode==1?E.formatMessage({id:"creation.agent"}):u.apps_mode==2?E.formatMessage({id:"creation.workflow"}):u.apps_mode==3?E.formatMessage({id:"creation.repository"}):E.formatMessage({id:"creation.skill"}),E.formatMessage({id:"creation.appdescribe"})]}),(0,p.jsx)(h,{showCount:!0,maxLength:1e3,rows:4,placeholder:E.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:ge})]})]})]})})};A.Z=P},94840:function(Q,A,a){var T=a(97857),s=a.n(T),R=a(32332),v=a(55241),b=a(67294),f=a(85893),W=function(M){var S=M.CardData,G=M.setCardData;(0,b.useEffect)(function(){},[]);var I=function(){return(0,f.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,R.s9)("all").map(function(B){return(0,f.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){C(B)},children:(0,f.jsx)("img",{src:B.image,alt:""})})})})},C=function(B){G(s()(s()({},S),{},{icon:B.image,id:B.id}))};return(0,f.jsx)(v.Z,{content:I,trigger:"click",placement:"bottomLeft",children:(0,f.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,f.jsx)("img",{src:(0,R.s9)("single",S.id?S.id:S.icon),alt:""})})})};A.Z=W},26621:function(Q,A,a){a.r(A),a.d(A,{default:function(){return ge}});var T=a(97857),s=a.n(T),R=a(15009),v=a.n(R),b=a(99289),f=a.n(b),W=a(5574),D=a.n(W),M=a(43722),S=a(21446),G=a(99702),I=a(86),C=a(29608),k=a(55927),B=a(32332),K=a(35790),L=a(11475),p=a(8751),h=a(35312),P=a(28036),Z=a(83062),t=a(32983),n=a(71230),o=a(15746),l=a(66309),u=a(74330),r=a(67294),c=a(42237),E=a(3917),ae=function(){var g=(0,r.useState)(null),i=D()(g,2),_=i[0],d=i[1],x=(0,k.Z)(function(U){return U.filterMessages("workflow_need_human_confirm")}),y=(0,k.Z)(function(U){return U.filterMessages("workflow_run_progress")}),m=(0,C.Z)(function(U){return U.prevConfirmDealtWith}),O=(0,E.Z)(f()(v()().mark(function U(){var V;return v()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,c.VE)({current:1,pageSize:10});case 2:return V=F.sent,F.abrupt("return",V.data);case 4:case"end":return F.stop()}},U)})),{refreshDeps:[x.length,y.length,m],onSuccess:function(V){d(V)}}),j=O.loading,z=O.runAsync;return{loading:j,data:_,refresh:z}},e=a(85893),J=function(g){var i,_=g.subtitle,d="pl-[10px] text-[#1B64F3] text-[12px] ".concat(_.need_human_confirm==1||_.need_human_confirm==null?"text-[#1B64F3]":"text-[#808183] ");return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:_.app_name}),(0,e.jsx)(K.Z,{}),(0,e.jsx)("span",{className:d,children:_.node_name||((i=_.node_exec_data)===null||i===void 0?void 0:i.node_name)})]})})},de=function(g){var i=g.progressObj,_=function(){return parseFloat(i.elapsed_time).toFixed(6)},d=function(y){var m=new Date(y),O=m.getFullYear(),j=(m.getMonth()+1).toString().padStart(2,"0"),z=m.getDate().toString().padStart(2,"0"),U=m.getHours().toString().padStart(2,"0"),V=m.getMinutes().toString().padStart(2,"0"),q=m.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(O,".").concat(j,".").concat(z," ").concat(U,":").concat(V,":").concat(q)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:i.created_time&&d(i.created_time)}),(0,e.jsx)("div",{className:"truncate",children:i.apps_name||i.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(i.status==1?"bg-blue-600":i.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[_(),"S"]})]})]})})},pe=function(g){var i=g.operationObj,_=(0,h.useIntl)(),d=(0,C.Z)(function(m){return m.setRunId}),x=(0,C.Z)(function(m){return m.setRunPanelLogRecord}),y=(0,C.Z)(function(m){return m.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(P.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:i.publish_status==0,icon:i!=null&&i.workflow_published_time?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Z.Z,{title:"".concat(i==null?void 0:i.workflow_published_time," ").concat(_.formatMessage({id:"creation.publish"})),children:(0,e.jsx)("img",{src:i.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"})})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("img",{src:i.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"})}),onClick:function(O){return O.stopPropagation(),x(!1),y(!1),d(i.app_id),!1}})})})},oe=function(g){var i=g.bindAdd,_=g.type;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:i,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:_})]})})})},te=function(g){var i=(0,h.useIntl)();return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(t.Z,{image:t.Z.PRESENTED_IMAGE_SIMPLE,description:i.formatMessage({id:"app.dashboard.None"})})})},me=function(g){var i=ae(),_=i.data,d=i.loading,x=(0,h.useIntl)(),y=(0,C.Z)(function(j){return j.setRunPanelLogRecord}),m=(0,C.Z)(function(j){return j.setDealtWithData}),O=(0,C.Z)(function(j){return j.setRunId});return(0,e.jsx)(e.Fragment,{children:_&&_.list.length?(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(n.Z,{gutter:[30,0],children:_.list.map(function(j,z){return(0,e.jsx)(o.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(I.Z,{icon:j.icon,title:j.node_name&&(0,e.jsx)(J,{subtitle:{app_name:j.app_name,node_name:j.node_name}}),textDetails:j.app_run_name,handleClick:function(){j.need_human_confirm!=0&&(m(j),O(null),y(!1))},backlogTips:(0,e.jsx)("div",{className:"flex items-center",children:j.need_human_confirm==1||j.need_human_confirm==null?(0,e.jsx)(Z.Z,{title:x.formatMessage({id:"app.workflow.needHumanConfirm"}),children:(0,e.jsx)(L.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(Z.Z,{title:x.formatMessage({id:"app.workflow.noHumanConfirm"}),children:(0,e.jsx)(p.Z,{className:"text-[#52C41C]"})})})})},z)})})}):(0,e.jsx)(te,{})})},ie=function(g){var i=g.data,_=g.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(n.Z,{gutter:[30,0],children:i.map(function(d,x){return(0,e.jsx)(o.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(I.Z,{icon:d.icon,title:d.name,textDetails:d.description,handleClick:function(){_=="my_agent"?h.history.push("/Agents?app_id=".concat(d.app_id,"&type=false")):h.history.push("/ReadOnlyAgent?app_id=".concat(d.app_id,"&type=true"))}})},x)})})})},re=function(g){var i=g.data,_=g.keyName;return(0,e.jsx)("div",{className:"cardbox",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(n.Z,{gutter:[30,0],children:i.map(function(d,x){return(0,e.jsx)(o.Z,{className:"graphicHoverbox",span:"12",children:(0,e.jsx)(I.Z,{icon:d.icon,title:d.name,textDetails:d.description,handleClick:function(){_=="my_workflow"?h.history.push("/workspace/workflow?app_id=".concat(d.app_id,"&type=false")):h.history.push("/workspace/workflow?app_id=".concat(d.app_id,"&type=true"))},operation:(0,e.jsx)(pe,{operationObj:d}),iconType:_=="my_workflow"?d.publish_status==0?"play_disable_icon":"play_icon":""})},x)})})})},le=function(g){var i=g.data,_=(0,h.useIntl)(),d=(0,C.Z)(function(w){return w.setRunPanelLogRecord}),x=(0,C.Z)(function(w){return w.setDealtWithData}),y=(0,C.Z)(function(w){return w.setRunId}),m=(0,r.useState)(i),O=D()(m,2),j=O[0],z=O[1],U=function(H,X){var ee=new Map;return X.reverse().forEach(function($){ee.set($.app_run_id,$)}),H.forEach(function($){ee.set($.app_run_id,$)}),Array.from(ee.values()).reverse()},V=function(H){return H.completed_progress?parseInt(H.completed_progress.slice(0,-1)):!1},q=function(){var w=f()(v()().mark(function H(){var X;return v()().wrap(function($){for(;;)switch($.prev=$.next){case 0:X=F==null?void 0:F.filter(function(ne){return ne.type=="workflow_run_progress"}).map(function(ne){var Y=ne.data;return Y}),X&&X.length&&z(U(X,j));case 2:case"end":return $.stop()}},H)}));return function(){return w.apply(this,arguments)}}(),F=(0,k.Z)(function(w){return w.flowMessage});return(0,r.useEffect)(function(){q()},[F]),(0,e.jsx)(e.Fragment,{children:j&&j.length?(0,e.jsx)("div",{className:"cardbox px-[10px]",style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(n.Z,{gutter:[30,20],children:j.map(function(w,H){return(0,e.jsx)(o.Z,{className:"graphicHoverbox",span:"24",children:(0,e.jsx)(I.Z,{status:w.status,icon:w.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:w.app_runs_name||w.run_name}),(w==null?void 0:w.need_human_confirm)==1?(0,e.jsx)(l.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:_.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)(de,{progressObj:w}),handleClick:function(){d(w),y(null),x(!1)},progress:w.percentage||V(w)})},H)})})}):(0,e.jsx)(te,{})})},_e=function(g){var i=g.item,_=g.data,d=function(m,O){return m&&m.length?O:(0,e.jsx)(te,{})},x={backlogs:function(m){return(0,e.jsx)(me,{data:m.data})},my_agent:function(m){return d(_,(0,e.jsx)(ie,{data:m.data,keyName:"my_agent"}))},my_workflow:function(m){return d(_,(0,e.jsx)(re,{data:m.data,keyName:"my_workflow"}))},workflow_log:function(m){return(0,e.jsx)(le,{data:m.data})},more_agent:function(m){return d(_,(0,e.jsx)(ie,{data:m.data}))},more_workflow:function(m){return d(_,(0,e.jsx)(re,{data:m.data}))}};return(0,e.jsx)(e.Fragment,{children:x[i.key]({data:_})})},ue=function(g){var i=g.item,_=(0,h.useIntl)(),d=function(){var y=i.key=="my_agent"||i.key=="more_agent"?1:2,m=i.key=="more_agent"||i.key=="more_workflow";(0,B.f1)("SET",y,m),h.history.push("/creation")};return(0,e.jsx)("div",{onClick:d,children:i.key!=="backlogs"&&i.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:_.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},fe=function(g){var i=(0,h.useIntl)(),_=g.item,d=g.setIsModalOpen,x=g.setCreationType,y=function(){var j=_.key=="my_agent"?{name:"Agent",path:"Agents",apps_mode:1}:{name:"WorkFlow",path:"workspace/workflow",apps_mode:2};x(function(z){return s()(s()({},z),j)}),d(!0)},m=_.key=="my_agent"?i.formatMessage({id:"app.dashboard.title_button_1.1"}):_.isAdd?i.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[_.isAdd&&(0,e.jsx)(oe,{bindAdd:y,type:_.isAdd&&m}),(0,e.jsx)(ue,{item:_})]})},he=function(){var g=(0,h.useIntl)(),i=[{title:g.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0},{title:g.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:g.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:g.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:g.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:g.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],_=(0,r.useState)(!1),d=D()(_,2),x=d[0],y=d[1],m=(0,r.useState)({}),O=D()(m,2),j=O[0],z=O[1],U=(0,r.useState)(!0),V=D()(U,2),q=V[0],F=V[1],w=(0,r.useState)({}),H=D()(w,2),X=H[0],ee=H[1],$=(0,r.useRef)(!1),ne=function(){var Y=f()(v()().mark(function ce(){var xe,je;return v()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,M.rw)();case 2:xe=se.sent,xe.code==0&&(je=xe.data,ee(je),$.current=!0,F(!0));case 4:case"end":return se.stop()}},ce)}));return function(){return Y.apply(this,arguments)}}();return(0,r.useEffect)(function(){$.current||ne()},[]),(0,e.jsxs)(e.Fragment,{children:[q&&i.map(function(Y,ce){return(0,e.jsx)(o.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:Y.title}),(0,e.jsx)("span",{children:(0,e.jsx)(fe,{item:Y,setIsModalOpen:y,setCreationType:z})})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:X[Y.key]?(0,e.jsx)(_e,{item:Y,data:X[Y.key]}):(0,e.jsx)(e.Fragment,{})})]})},ce)}),!q&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(u.Z,{size:"large"})}),(0,e.jsx)(S.Z,{setIsModalOpen:y,isModalOpen:x,ModalType:!1,CreationType:j})]})},ve=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"px-[30px] pb-[10px] flex flex-col pt-[30px]",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(n.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(he,{})})})}),(0,e.jsx)(G.Z,{})]})},ge=ve}}]);
