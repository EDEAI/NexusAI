"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[493],{11475:function(Q,A,t){t.d(A,{Z:function(){return b}});var k=t(1413),o=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},v=R,f=t(91146),E=function(S,U){return o.createElement(f.Z,(0,k.Z)((0,k.Z)({},S),{},{ref:U,icon:v}))},Z=o.forwardRef(E),b=Z},35790:function(Q,A,t){var k=t(1413),o=t(67294),R=t(19369),v=t(91146),f=function(b,L){return o.createElement(v.Z,(0,k.Z)((0,k.Z)({},b),{},{ref:L,icon:R.Z}))},E=o.forwardRef(f);A.Z=E},83510:function(Q,A,t){t.d(A,{LK:function(){return C},bs:function(){return x},go:function(){return X},uy:function(){return e}});var k=t(15009),o=t.n(k),R=t(99289),v=t.n(R),f=t(47520),E="/v1/apps/apps_list",Z="/v1/agent/agent_delete/",b="/v1/workflow/workflow_app_delete/",L="/v1/vector/delete_dataset/",S="/v1/skill/delete_skill_by_app_id/",U="/v1/apps/apps_create",G="/v1/apps/app_update/",X=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("".concat(E),{method:"GET",data:r});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),C=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(r),a.next=3,r.mode;case 3:if(a.t0=a.sent,a.t0!=1){a.next=8;break}a.t1=(0,f.ZP)("".concat(Z).concat(r.app_id),{method:"DELETE"}),a.next=9;break;case 8:a.t1=r.mode==2?(0,f.ZP)("".concat(b).concat(r.app_id),{method:"DELETE"}):r.mode==3?(0,f.ZP)("".concat(L).concat(r.app_id),{method:"DELETE"}):(0,f.ZP)("".concat(S).concat(r.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return s=a.t1,a.abrupt("return",s);case 11:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),e=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("".concat(U),{method:"POST",data:r});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),x=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("".concat(G).concat(r.app_id),{method:"PUT",data:r});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}()},43722:function(Q,A,t){t.d(A,{Gn:function(){return L},KH:function(){return x},cH:function(){return U},dB:function(){return S},gp:function(){return Z},j2:function(){return G},r5:function(){return C},rw:function(){return E},sI:function(){return X},sT:function(){return e},vu:function(){return b}});var k=t(15009),o=t.n(k),R=t(99289),v=t.n(R),f=t(47520),E=function(){var d=v()(o()().mark(function n(){var r;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,f.ZP)("/v1/index/",{method:"GET"});case 2:return r=p.sent,p.abrupt("return",r);case 4:case"end":return p.stop()}},n)}));return function(){return d.apply(this,arguments)}}(),Z=function(){var d=v()(o()().mark(function n(r,s){var p;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,f.ZP)(r,{method:"GET",data:s});case 2:return p=c.sent,c.abrupt("return",p);case 4:case"end":return c.stop()}},n)}));return function(r,s){return d.apply(this,arguments)}}(),b=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("/v1/chatroom/",{method:"GET",data:r});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),L=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("/v1/chatroom/".concat(r.id),{method:"DELETE"});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),S=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("/v1/chatroom/",{method:"POST",data:r});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),U=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("/v1/chatroom/".concat(r.id,"/details"),{method:"GET"});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),G=function(){var d=v()(o()().mark(function n(r){var s;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:r.id}});case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}},n)}));return function(r){return d.apply(this,arguments)}}(),X=function(){var d=v()(o()().mark(function n(r,s){var p;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,f.ZP)("/v1/chatroom/".concat(s,"/update_chatroom"),{method:"POST",data:r});case 2:return p=c.sent,c.abrupt("return",p);case 4:case"end":return c.stop()}},n)}));return function(r,s){return d.apply(this,arguments)}}(),C=function(){var d=v()(o()().mark(function n(r,s){var p;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,f.ZP)("/v1/chatroom/".concat(s,"/smart_selection"),{method:"POST",data:r});case 2:return p=c.sent,c.abrupt("return",p);case 4:case"end":return c.stop()}},n)}));return function(r,s){return d.apply(this,arguments)}}(),e=function(){var d=v()(o()().mark(function n(r,s,p){var a;return o()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,f.ZP)("/v1/chatroom/".concat(s,"/agents/").concat(p,"/setting"),{method:"PUT",data:r});case 2:return a=M.sent,M.abrupt("return",a);case 4:case"end":return M.stop()}},n)}));return function(r,s,p){return d.apply(this,arguments)}}(),x=function(){var d=v()(o()().mark(function n(r,s){var p;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,f.ZP)("/v1/chatroom/".concat(r,"/chatroom_message"),{method:"GET",data:s});case 2:return p=c.sent,c.abrupt("return",p);case 4:case"end":return c.stop()}},n)}));return function(r,s){return d.apply(this,arguments)}}()},21446:function(Q,A,t){var k=t(15009),o=t.n(k),R=t(97857),v=t.n(R),f=t(99289),E=t.n(f),Z=t(5574),b=t.n(Z),L=t(83510),S=t(32332),U=t(35312),G=t(26915),X=t(17788),C=t(67294),e=t(94840),x=t(85893),d=G.Z.TextArea,n=function(s){var p=s.setIsModalOpen,a=s.isModalOpen,c=s.transformData,M=s.CreationType,re=s.setcreationType,ne=s.ModalType,O=(0,U.useIntl)(),se=(0,C.useState)(""),oe=b()(se,2),ee=oe[0],pe=oe[1],me=(0,C.useState)(""),le=b()(me,2),_e=le[0],fe=le[1],ve=(0,C.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),ie=b()(ve,2),ce=ie[0],he=ie[1];(0,C.useEffect)(function(){},[]);var K=function(m){pe(m.target.value)},l=function(m){fe(m.target.value)},_=function(){var g=E()(o()().mark(function m(){var h,T;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(h={name:ee,mode:M.apps_mode,description:_e,icon:JSON.stringify(ce.id),icon_background:""},M.apps_mode!=2){i.next=8;break}return i.next=4,(0,L.uy)(h);case 4:T=i.sent,T.code===0&&(p(!1),y(T.data.app_id)),i.next=10;break;case 8:(0,S.Go)("SET",v()(v()({},h),{},{type:!1})),y();case 10:case"end":return i.stop()}},m)}));return function(){return g.apply(this,arguments)}}(),u=function(m){c.map(function(h){h.name==m.name&&(console.log(h,"item"),re(h))})},y=function(m){m?U.history.push("/".concat(M.path,"?app_id=").concat(m,"&&type=false")):U.history.push("/".concat(M.path,"?type=false"))};return(0,x.jsx)(X.Z,{title:O.formatMessage({id:"creation.addnewapp"}),open:a,okText:O.formatMessage({id:"creation"}),onOk:_,onCancel:function(){return p(!1)},okButtonProps:{disabled:ee===""},width:820,children:(0,x.jsxs)("div",{className:"pb-1",children:[ne?(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:O.formatMessage({id:"creation.appntype"})}),(0,x.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:c&&c.map(function(g){return(0,x.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:g.apps_mode===M.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){u(g)},children:[(0,x.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,x.jsx)("img",{className:"w-6 h-6",src:g.signicon,alt:""})}),(0,x.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:g.name})]})})})]}):null,(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"mb-5",children:[(0,x.jsxs)("p",{className:"text-xs mt-5",children:[M.apps_mode==1?O.formatMessage({id:"creation.agent"}):M.apps_mode==2?O.formatMessage({id:"creation.workflow"}):M.apps_mode==3?O.formatMessage({id:"creation.repository"}):O.formatMessage({id:"creation.skill"}),O.formatMessage({id:"creation.appiconname"})]}),(0,x.jsxs)("div",{className:"flex items-center justify-around",children:[(0,x.jsx)(e.Z,{CardData:ce,setCardData:he}),(0,x.jsx)(G.Z,{showCount:!0,maxLength:20,placeholder:O.formatMessage({id:"creation.placeholder.appname"}),onChange:K})]})]}),(0,x.jsxs)("div",{className:"mb-5 text-xs",children:[(0,x.jsxs)("p",{children:[M.apps_mode==1?O.formatMessage({id:"creation.agent"}):M.apps_mode==2?O.formatMessage({id:"creation.workflow"}):M.apps_mode==3?O.formatMessage({id:"creation.repository"}):O.formatMessage({id:"creation.skill"}),O.formatMessage({id:"creation.appdescribe"})]}),(0,x.jsx)(d,{showCount:!0,maxLength:100,rows:4,placeholder:O.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:l})]})]})]})})};A.Z=n},94840:function(Q,A,t){var k=t(97857),o=t.n(k),R=t(32332),v=t(55241),f=t(67294),E=t(85893),Z=function(L){var S=L.CardData,U=L.setCardData;(0,f.useEffect)(function(){},[]);var G=function(){return(0,E.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,R.s9)("all").map(function(e){return(0,E.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){X(e)},children:(0,E.jsx)("img",{src:e.image,alt:""})})})})},X=function(e){U(o()(o()({},S),{},{icon:e.image,id:e.id}))};return(0,E.jsx)(v.Z,{content:G,trigger:"click",placement:"bottomLeft",children:(0,E.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,E.jsx)("img",{src:(0,R.s9)("single",S.id?S.id:S.icon),alt:""})})})};A.Z=Z},33816:function(Q,A,t){t.r(A),t.d(A,{default:function(){return he}});var k=t(15009),o=t.n(k),R=t(99289),v=t.n(R),f=t(5574),E=t.n(f),Z=t(97857),b=t.n(Z),L=t(43722),S=t(21446),U=t(99702),G=t(32332),X=t(38703),C=t(67294),e=t(85893),x=function(l){var _=l.subtitle,u=l.handleClick,y=l.lineClamp,g=y===void 0?2:y,m=l.textDetails,h=l.title,T=l.icon,F=l.iconType,i=F===void 0?"":F,j=l.operation,H=j===void 0?"":j,Y=l.progress,J=l.status,ue=l.backlogTips,de=(0,C.useState)(0),ae=E()(de,2),xe=ae[0],te=ae[1],ge=function(){te(Y)},be=function(){te(0)},je=function(z){return"rounded-[4px] border-l-[4px] ".concat(z==1?"border-[#1B64F3]":z==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,e.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative ".concat(J!==void 0?je(J):"graphicbox"),onClick:u,onMouseEnter:function(){Y!=null&&ge()},onMouseLeave:function(){Y!=null&&be()},children:[J!==void 0&&(0,e.jsx)("div",{style:{width:"".concat(xe,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(J==1?"bg-[#1B64F3]/[.03]":J==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,e.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,e.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,e.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[(0,e.jsx)("img",{src:(0,G.s9)("single",T),className:"w-[22px] h-[22px]"}),i&&(0,e.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,e.jsx)("img",{src:"/icons/".concat(i,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,e.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,e.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,e.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,e.jsx)("span",{className:"truncate",children:h}),(0,e.jsx)("span",{className:"flex items-center flex-1",children:_})]}),(0,e.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:m})]})}),ue||(0,e.jsx)(e.Fragment,{}),H&&(0,e.jsx)("div",{className:"flex items-center w-[24px]",children:(0,e.jsx)("span",{className:"operation",children:H})}),Y!=null&&(0,e.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,e.jsx)(X.Z,{type:"circle",percent:Y,size:29})})]})]})},d=x,n=t(29608),r=t(55927),s=t(35790),p=t(11475),a=t(8751),c=t(35312),M=t(28036),re=t(71230),ne=t(15746),O=t(83062),se=t(32983),oe=t(74330),ee=function(l){var _,u=l.subtitle,y="pl-[10px] text-[#1B64F3] text-[12px] ".concat(u.need_human_confirm==1||u.need_human_confirm==null?"text-[#1B64F3]":"text-[#808183] ");return(0,e.jsx)("div",{className:"pr-4",children:(0,e.jsxs)("div",{className:"truncate w-full",children:[(0,e.jsx)("span",{className:"pr-[10px] text-[#666666] text-[12px]",children:u.app_name}),(0,e.jsx)(s.Z,{}),(0,e.jsx)("span",{className:y,children:u.node_name||((_=u.node_exec_data)===null||_===void 0?void 0:_.node_name)})]})})},pe=function(l){var _=l.progressObj,u=function(){return parseFloat(_.elapsed_time).toFixed(6)},y=function(m){var h=new Date(m),T=h.getFullYear(),F=(h.getMonth()+1).toString().padStart(2,"0"),i=h.getDate().toString().padStart(2,"0"),j=h.getHours().toString().padStart(2,"0"),H=h.getMinutes().toString().padStart(2,"0"),Y=h.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(T,".").concat(F,".").concat(i," ").concat(j,":").concat(H,":").concat(Y)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:_.created_time&&y(_.created_time)}),(0,e.jsx)("div",{className:"truncate",children:_.apps_name||_.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(_.status==1?"bg-blue-600":_.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[u(),"S"]})]})]})})},me=function(l){var _=l.operationObj,u=(0,n.Z)(function(m){return m.setRunId}),y=(0,n.Z)(function(m){return m.setRunPanelLogRecord}),g=(0,n.Z)(function(m){return m.setDealtWithData});return(0,e.jsx)("div",{className:"inline-flex justify-end flex-1",children:(0,e.jsx)("div",{className:"inline-flex gap-x-[10px] items-center",children:(0,e.jsx)(M.ZP,{type:"primary",size:"small",style:{boxShadow:"none",background:"transparent",border:"none"},disabled:_.publish_status==0,icon:(0,e.jsx)("img",{src:_.publish_status==0?"/icons/operation_disable_icon.svg":"/icons/operation_icon.svg"}),onClick:function(h){return h.stopPropagation(),y(!1),g(!1),u(_.app_id),!1}})})})},le=function(l){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{onClick:l.bindAdd,children:(0,e.jsxs)("a",{style:{color:"#0077ED",fontSize:"0"},className:"flex items-center  gap-x-[5px]",children:[(0,e.jsx)("img",{src:"/icons/plaza_add.svg",className:"w-[16px] h-[16px] shrink-0"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:l.type})]})})})},_e=function(l){var _=l.blocklsit,u=l.item,y=l.blockIndex,g=(0,n.Z)(function(i){return i.setRunPanelLogRecord}),m=(0,n.Z)(function(i){return i.setDealtWithData}),h=(0,n.Z)(function(i){return i.setRunId}),T=function(j){switch(u.key){case"my_agent":c.history.push("/Agents?app_id=".concat(u.list[j].app_id,"&type=false"));break;case"more_agent":c.history.push("/ReadOnlyAgent?app_id=".concat(u.list[j].app_id,"&type=true"));break;case"my_workflow":c.history.push("/workspace/workflow?app_id=".concat(u.list[j].app_id,"&type=false"));break;case"more_workflow":c.history.push("/workspace/workflow?app_id=".concat(u.list[j].app_id,"&type=true"));break;case"workflow_log":g(u.list[j]),h(null),m(!1);break;case"backlogs":if(u.list[j].need_human_confirm==0)return;m(u.list[j]),h(null),g(!1);break;default:break}},F=function(j){return j.completed_progress?parseInt(j.completed_progress.slice(0,-1)):!1};return(0,e.jsx)("div",{className:"".concat(u.key=="workflow_log"?"px-[10px] cardbox":"cardbox"),style:{overflowY:"auto",height:"100%",overflowX:"hidden"},children:(0,e.jsx)(re.Z,{gutter:[30,u.key=="workflow_log"?20:0],children:_.map(function(i,j){return(0,e.jsxs)(ne.Z,{className:"graphicHoverbox",span:u.biserial?12:24,children:[u.key=="backlogs"&&(0,e.jsx)(d,{icon:i.icon,title:i.node_name&&(0,e.jsx)(ee,{subtitle:i})||i.node_exec_data.node_name&&(0,e.jsx)(ee,{subtitle:i}),textDetails:i.app_run_name||i.run_name,handleClick:function(){T(j)},lineClamp:1,backlogTips:u.needHuman(i)}),(u.key=="my_agent"||u.key=="more_agent")&&(0,e.jsx)(d,{icon:i.icon,title:i.name,textDetails:i.description,handleClick:function(){T(j)},lineClamp:1}),(u.key=="my_workflow"||u.key=="more_workflow")&&(0,e.jsx)(d,{icon:i.icon,title:i.name,textDetails:i.description,handleClick:function(){T(j)},lineClamp:1,operation:(0,e.jsx)(me,{operationObj:i}),iconType:u.key=="my_workflow"?i.publish_status==0?"play_disable_icon":"play_icon":""}),u.key=="workflow_log"&&(0,e.jsx)(d,{status:i.status,icon:i.icon,title:i.app_runs_name||i.run_name,textDetails:(0,e.jsx)(pe,{progressObj:i}),handleClick:function(){T(j)},lineClamp:1,progress:i.percentage||F(i)})]},j)})})})},fe=function(l){var _=l.item,u=l.intl,y=function(){var m=_.key=="my_agent"||_.key=="more_agent"?1:2,h=_.key=="more_agent"||_.key=="more_workflow";(0,G.f1)("SET",m,h),c.history.push("/creation")};return(0,e.jsx)("div",{onClick:y,children:_.key!=="backlogs"&&_.key!=="workflow_log"?(0,e.jsxs)("a",{className:"flex items-center gap-x-[5px]",style:{color:"#0077ED",fontSize:"0"},children:[(0,e.jsx)("img",{src:"/icons/plaza_view.svg",className:"w-[16px] h-[16px]"}),(0,e.jsx)("span",{className:"text-[#1B64F3]",style:{fontSize:"12px"},children:u.formatMessage({id:"app.dashboard.title_button_2"})})]}):(0,e.jsx)(e.Fragment,{})})},ve=function(l,_,u,y){var g=function(){var T=l.key=="my_agent"?{name:"Agent",path:"Agents",apps_mode:1}:{name:"WorkFlow",path:"workspace/workflow",apps_mode:2};u(function(F){return b()(b()({},F),T)}),_(!0)},m=l.key=="my_agent"?y.formatMessage({id:"app.dashboard.title_button_1.1"}):l.isAdd?y.formatMessage({id:"app.dashboard.title_button_1.2"}):"";return(0,e.jsxs)("div",{className:"flex gap-x-[30px] items-center",children:[l.isAdd&&(0,e.jsx)(le,{bindAdd:g,type:l.isAdd&&m}),(0,e.jsx)(fe,{item:l,intl:y})]})},ie=function(){var l=(0,c.useIntl)(),_=[{title:l.formatMessage({id:"app.dashboard.backlog"}),key:"backlogs",substitle:!0,needHuman:function(w){return(0,e.jsx)("div",{className:"flex items-center",children:w.need_human_confirm==1||w.need_human_confirm==null?(0,e.jsx)(O.Z,{title:l.formatMessage({id:"app.workflow.needHumanConfirm"}),children:(0,e.jsx)(p.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(O.Z,{title:l.formatMessage({id:"app.workflow.noHumanConfirm"}),children:(0,e.jsx)(a.Z,{className:"text-[#808183]"})})})}},{title:l.formatMessage({id:"app.dashboard.myagent"}),key:"my_agent",isAdd:!0,biserial:!0},{title:l.formatMessage({id:"app.dashboard.workflow"}),key:"my_workflow",isAdd:!0,biserial:!0},{title:l.formatMessage({id:"app.dashboard.run_log"}),key:"workflow_log",progress:!0},{title:l.formatMessage({id:"app.dashboard.team_agent"}),key:"more_agent",biserial:!0},{title:l.formatMessage({id:"app.dashboard.team_workflow"}),key:"more_workflow",biserial:!0}],u=(0,C.useState)(!1),y=E()(u,2),g=y[0],m=y[1],h=(0,C.useState)({}),T=E()(h,2),F=T[0],i=T[1],j=(0,C.useState)(_),H=E()(j,2),Y=H[0],J=H[1],ue=(0,C.useState)(!1),de=E()(ue,2),ae=de[0],xe=de[1],te=(0,C.useRef)(!1),ge=function(){var P=v()(o()().mark(function w(){var N,I;return o()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,L.rw)();case 2:N=V.sent,N.code==0&&(I=N.data,te.current=!0,J(function($){return $.map(function(B){return b()(b()({},B),{},{list:I[B.key]})})}),xe(!0));case 4:case"end":return V.stop()}},w)}));return function(){return P.apply(this,arguments)}}(),be=function(w,N){var I=new Map;return N.reverse().forEach(function(D){I.set(D.app_run_id,D)}),w.forEach(function(D){I.set(D.app_run_id,D)}),Array.from(I.values()).reverse()},je=function(w,N){var I=new Map;return N.reverse().forEach(function(D){I.set(D.exec_id,D)}),w.forEach(function(D){var V,$;D.exec_id=(V=D.node_exec_data)===null||V===void 0?void 0:V.node_exec_id,($=D.node_exec_data)!==null&&$!==void 0&&$.node_exec_id&&I.set(D.exec_id,D)}),Array.from(I.values()).reverse()},q=function(){var P=v()(o()().mark(function w(){var N,I,D;return o()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(te.current){$.next=3;break}return $.next=3,ge();case 3:I=z==null||(N=z.filter(function(B){return B.type=="workflow_need_human_confirm"}).map(function(B){var W=B.data;return W}))===null||N===void 0?void 0:N.filter(function(B){return B.type!==1}),D=z==null?void 0:z.filter(function(B){return B.type=="workflow_run_progress"}).map(function(B){var W=B.data;return W}),(I&&I.length||D&&D.length)&&J(function(B){return B.map(function(W){return W.list?b()(b()({},W),{},{list:W.key=="backlogs"?je(I,W.list):W.key=="workflow_log"?be(D,W.list):W.list}):b()({},W)})});case 6:case"end":return $.stop()}},w)}));return function(){return P.apply(this,arguments)}}(),z=(0,r.Z)(function(P){return P.flowMessage});(0,C.useEffect)(function(){q()},[z]);var Ee=(0,n.Z)(function(P){return P.submitPromptId});return(0,C.useEffect)(function(){Ee&&J(function(P){return P.map(function(w){var N;return w.key=="backlogs"?b()(b()({},w),{},{list:(N=w.list)===null||N===void 0?void 0:N.filter(function(I){return I.exec_id!=Ee})}):b()({},w)})})},[Ee]),(0,e.jsxs)(e.Fragment,{children:[ae&&Y.map(function(P,w){return(0,e.jsx)(ne.Z,{span:8,xs:24,sm:24,md:24,lg:12,xl:8,style:{height:"calc(50% - 20px)"},children:(0,e.jsxs)("div",{className:"bg-[#fff] rounded-[8px] w-[100%] h-[100%]",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[(0,e.jsxs)("div",{className:"text-[14px] p-[20px] text-[#213044] flex",children:[(0,e.jsx)("span",{className:"flex-1 font-[500] text-[#213044]",children:P.title}),(0,e.jsx)("span",{children:ve(P,m,i,l)})]}),(0,e.jsx)("div",{className:"pt-[5px] pb-[20px] px-[10px]",style:{height:"calc(100% - 62px)"},children:P.list&&P.list.length?(0,e.jsx)(_e,{blocklsit:P.list,item:P,blockIndex:w}):(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(se.Z,{image:se.Z.PRESENTED_IMAGE_SIMPLE,description:l.formatMessage({id:"app.dashboard.None"})})})})]})},w)}),!ae&&(0,e.jsx)("div",{className:"w-full h-full flex items-center justify-center ",style:{height:"calc(100vh - 300px)"},children:(0,e.jsx)(oe.Z,{size:"large"})}),(0,e.jsx)(S.Z,{setIsModalOpen:m,isModalOpen:g,ModalType:!1,CreationType:F})]})},ce=function(){return(0,e.jsxs)("div",{className:"overflow-auto",style:{height:"calc(100vh - 56px)",maxHeight:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"px-[30px] pb-[10px] flex flex-col pt-[30px]",style:{width:"100%",height:"calc(100vh - 92px)",maxHeight:"calc(100vh - 92px)",margin:"0 auto"},children:(0,e.jsx)("div",{className:"flex-1",style:{minHeight:0},children:(0,e.jsx)(re.Z,{gutter:[20,20],className:"h-full",style:{overflowX:"hidden",alignContent:"flex-start"},children:(0,e.jsx)(ie,{})})})}),(0,e.jsx)(U.Z,{})]})},he=ce}}]);
