"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[178],{83510:function(Ht,Ge,s){s.d(Ge,{LK:function(){return Ke},bs:function(){return Ze},go:function(){return dt},uy:function(){return Ee}});var nt=s(15009),q=s.n(nt),it=s(99289),Z=s.n(it),fe=s(47520),ee="/v1/apps/apps_list",lt="/v1/agent/agent_delete/",t="/v1/workflow/workflow_app_delete/",rt="/v1/vector/delete_dataset/",p="/v1/skill/delete_skill_by_app_id/",H="/v1/apps/apps_create",ot="/v1/apps/app_update/",dt=function(){var ge=Z()(q()().mark(function W(A){var z;return q()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,fe.ZP)("".concat(ee),{method:"GET",data:A});case 2:return z=u.sent,u.abrupt("return",z);case 4:case"end":return u.stop()}},W)}));return function(A){return ge.apply(this,arguments)}}(),Ke=function(){var ge=Z()(q()().mark(function W(A){var z;return q()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log(A),u.next=3,A.mode;case 3:if(u.t0=u.sent,u.t0!=1){u.next=8;break}u.t1=(0,fe.ZP)("".concat(lt).concat(A.app_id),{method:"DELETE"}),u.next=9;break;case 8:u.t1=A.mode==2?(0,fe.ZP)("".concat(t).concat(A.app_id),{method:"DELETE"}):A.mode==3?(0,fe.ZP)("".concat(rt).concat(A.app_id),{method:"DELETE"}):(0,fe.ZP)("".concat(p).concat(A.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return z=u.t1,u.abrupt("return",z);case 11:case"end":return u.stop()}},W)}));return function(A){return ge.apply(this,arguments)}}(),Ee=function(){var ge=Z()(q()().mark(function W(A){var z;return q()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,fe.ZP)("".concat(H),{method:"POST",data:A});case 2:return z=u.sent,u.abrupt("return",z);case 4:case"end":return u.stop()}},W)}));return function(A){return ge.apply(this,arguments)}}(),Ze=function(){var ge=Z()(q()().mark(function W(A){var z;return q()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,fe.ZP)("".concat(ot).concat(A.app_id),{method:"PUT",data:A});case 2:return z=u.sent,u.abrupt("return",z);case 4:case"end":return u.stop()}},W)}));return function(A){return ge.apply(this,arguments)}}()},48528:function(Ht,Ge,s){s.r(Ge),s.d(Ge,{default:function(){return Na}});var nt=s(19632),q=s.n(nt),it=s(15009),Z=s.n(it),fe=s(99289),ee=s.n(fe),lt=s(97857),t=s.n(lt),rt=s(5574),p=s.n(rt),H=s(11551),ot=s(83510),dt=s(47520),Ke=s(29432),Ee=s(10759),Ze=s(32332),ge=s(2068),W=s(89035),A=s(15360),z=s(82826),Re=s(69243),u=s(35312),_=s(40741),O=s(45360),pe=s(28036),Xt=s(50136),ut=s(25409),Pt=s(74330),f=s(67294),he=s(92939),Yt=s(85750),Jt=s(5608),Qt=s(64599),qt=s.n(Qt),ea=s(73445),ta=s(42237),He=(0,ea.Ue)(function(ve){return{models:[],loading:!1,error:null,initialized:!1,fetchModels:function(){var i=ee()(Z()().mark(function k(){var M;return Z()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,ve({loading:!0}),v.next=4,(0,ta.fZ)();case 4:if(M=v.sent,M.code!==0){v.next=9;break}ve({models:Array.isArray(M.data.data)?M.data.data:[],initialized:!0}),v.next=10;break;case 9:throw new Error(M.message||"Failed to fetch models");case 10:v.next=16;break;case 12:v.prev=12,v.t0=v.catch(0),ve({error:v.t0.message}),O.ZP.error("Failed to fetch models");case 16:return v.prev=16,ve({loading:!1}),v.finish(16);case 19:case"end":return v.stop()}},k,null,[[0,12,16,19]])}));function R(){return i.apply(this,arguments)}return R}()}}),aa=function(){var i=He(function(v){return v.models}),R=He(function(v){return v.loading}),k=He(function(v){return v.initialized}),M=He(function(v){return v.fetchModels});(0,f.useEffect)(function(){k||M()},[k,M]);var j=(0,f.useMemo)(function(){var v=Array.isArray(i)?i:[],U=v.map(function(x){return{label:x.supplier_name,options:Array.isArray(x.model_list)?x.model_list.map(function(J){return t()({label:J.model_name,value:J.model_config_id},J)}):[]}}),Y,I=qt()(v),a;try{for(I.s();!(a=I.n()).done;){var P=a.value;if(Array.isArray(P.model_list)){var y=P.model_list.find(function(x){return x.model_default_used===1});if(y){Y=y.model_config_id;break}}}}catch(x){I.e(x)}finally{I.f()}return{options:U,defaultValue:Y}},[i]);return t()(t()({},j),{},{loading:R})},ke=s(26915),$e=s(72269),ct=s(34041),Ct=s(66309),X=s(78045),At=s(44010),We=s(51042),mt=s(82061),Dt=s(80459),e=s(85893),sa=ke.Z.TextArea,na=function(i){var R,k,M,j,v,U,Y=i.loading,I=i.FirstValue,a=i.Detaillist,P=i.setDetaillist,y=i.repository,x=i.setRepository,J=i.Operationbentate,ne=i.Ffromref,Ie=i.setFourthly_config_id,te=i.Fourthly_config_id,xe=i.Fourthly_select_list,_e=i.Newproperties,Fe=i.setNewproperties,b=i.pageKeyfun,ie=i.firstjudgingcondition,Me=i.setAgentmunudisabled,le=i.agentmenudisabled,g=(0,u.useIntl)(),ae=(0,f.useState)([]),F=p()(ae,2),Q=F[0],L=F[1],G=(0,f.useState)(!1),re=p()(G,2),Pe=re[0],oe=re[1],be=(0,f.useState)([]),Ce=p()(be,2),je=Ce[0],Ae=Ce[1],B=(0,f.useState)([]),N=p()(B,2),w=N[0],V=N[1],$=(0,f.useState)(!1),D=p()($,2),de=D[0],De=D[1],ft=(0,f.useState)(!1),Xe=p()(ft,2),Ye=Xe[0],ye=Xe[1],Te=(0,f.useState)({agent_id:0,data:{is_public:1,enable_api:0,obligations:null,input_variables:{},dataset_ids:[],attrs_are_visible:1}}),Je=p()(Te,2),K=Je[0],Oe=Je[1];(0,f.useEffect)(function(){jt(),a.agent.selected_skills&&Ae(a.agent.selected_skills),a.agent.selected_workflows&&V(a.agent.selected_workflows)},[a,a==null?void 0:a.agent]);var Tt=function(n){Ie(n)},gt=function(n){Oe(t()(t()({},K),{},{data:t()(t()({},K.data),{},{obligations:n.target.value})})),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{obligations:n.target.value})}))},pt=function(n,S){var T=new Set;return n.some(function(se){var ce=se[S];return T.has(ce)?T.add(ce):T.add(ce)&&!1})},Qe=function(n){P(t()(t()({},a),{},{app:t()(t()({},a.app),{},{is_public:n?1:0})})),Oe(t()(t()({},K),{},{data:t()(t()({},K.data),{},{is_public:n?1:0})}))},ht=function(n){P(t()(t()({},a),{},{app:t()(t()({},a.app),{},{enable_api:n?1:0})})),Oe(t()(t()({},K),{},{data:t()(t()({},K.data),{},{enable_api:n?1:0})}))},vt=function(n){P(t()(t()({},a),{},{app:t()(t()({},a.app),{},{attrs_are_visible:n?1:0})})),Oe(t()(t()({},K),{},{data:t()(t()({},K.data),{},{attrs_are_visible:n?1:0})}))},xt=function(n){P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{allow_upload_file:n?1:0})}))},Se=function(n){P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{mcp:n?1:0})}))},bt=function(n){Oe(t()(t()({},K),{},{data:t()(t()({},K.data),{},{dataset_ids:n})})),x(n)},jt=function(){var r=ee()(Z()().mark(function n(){var S;return Z()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,H.zl)();case 2:S=se.sent,L(S.data.data.map(function(ce){return{value:ce.dataset_id,label:ce.name}}));case 4:case"end":return se.stop()}},n)}));return function(){return r.apply(this,arguments)}}(),yt=function(n){Ae(n),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:n})}))},ue=function(n){V(n),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:n})}))},Ve=function(){var r=ee()(Z()().mark(function n(){return Z()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:ie()||(b("2"),Me(t()(t()({},le),{},{first:!1,second:!1})));case 1:case"end":return T.stop()}},n)}));return function(){return r.apply(this,arguments)}}(),St=function(n){P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{default_output_format:n.target.value})}))},qe=function(n){P(t()(t()({},a),{},{agent:t()(t()({},a==null?void 0:a.agent),{},{input_variables:n.free})}))},et=aa(),ze=et.options,Ot=et.defaultValue,tt=function(n){Ae(n.checkItem),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:n.checkItem})})),De(!1)},wt=function(n){V(n.checkItem),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:n.checkItem})})),ye(!1)},Nt=function(){De(!1)},_t=function(){ye(!1)},at=function(n){var S=je.filter(function(T){return T.app_id!==n.app_id});Ae(S),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:S})}))},Ft=function(n){var S=w.filter(function(T){return T.app_id!==n.app_id});V(S),P(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:S})}))};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:g.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:ne,children:[(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:g.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:J==="true"?g.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:g.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",name:g.formatMessage({id:"agent.teamvisibility"}),title:g.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)($e.Z,{size:"small",onChange:Qe,checked:!!(a&&((R=a.app)===null||R===void 0?void 0:R.is_public)===1)})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",name:g.formatMessage({id:"agent.attrVisible"}),title:g.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)($e.Z,{size:"small",onChange:vt,checked:a&&((k=a.app)===null||k===void 0?void 0:k.attrs_are_visible)===1})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:g.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)($e.Z,{size:"small",onChange:ht,checked:a&&((M=a.app)===null||M===void 0?void 0:M.enable_api)===1,disabled:(a==null||(j=a.app)===null||j===void 0?void 0:j.publish_status)!==1})]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:"MCP\u53EF\u8C03\u5EA6\u8D44\u6E90"}),(0,e.jsx)($e.Z,{size:"small",onChange:Se,checked:!!(a&&((v=a.agent)===null||v===void 0?void 0:v.allow_upload_file)==1)})]})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:[(0,e.jsx)("span",{className:"text-[#E80000]",children:"* "}),g.formatMessage({id:"agent.LLMmodel"})]}),(0,e.jsx)(ct.Z,{placeholder:g.formatMessage({id:"agent.pleaseselect"}),value:te==0?g.formatMessage({id:"agent.pleaseselect"}):te,variant:"filled",onChange:Tt,options:ze,optionRender:function(n){var S;return(0,e.jsxs)("div",{children:[n.label," ",(n==null||(S=n.data)===null||S===void 0?void 0:S.support_image)==1&&(0,e.jsx)(Ct.Z,{color:"blue",className:"text-xs",children:g.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})},labelRender:function(n){var S;return(0,e.jsxs)("div",{children:[n==null?void 0:n.label," ",((S=(0,Yt.ti)(n==null?void 0:n.value,{options:ze}))===null||S===void 0?void 0:S.support_image)==1&&(0,e.jsx)(Ct.Z,{color:"blue",className:"text-xs",children:g.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})}})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",required:!0,name:g.formatMessage({id:"agent.functiondescription"}),title:g.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(sa,{onChange:gt,value:a&&a.agent&&a.agent.obligations,placeholder:"Agent".concat(g.formatMessage({id:"agent.functiondescription"})),autoSize:{minRows:8,maxRows:10}})]})}),!Pe&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Jt.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",required:!0,name:g.formatMessage({id:"agent.inputvariable"}),title:g.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((a==null||(U=a.agent)===null||U===void 0||(U=U.input_variables)===null||U===void 0?void 0:U.properties)||{}),onChange:qe})}),(0,e.jsx)(_.Z.List,{name:"users",children:function(n,S){var T=S.add,se=S.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(he.Z,{className:"font-medium",name:g.formatMessage({id:"agent.associatedknowledgebase"}),title:g.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(ct.Z,{size:"large",mode:"multiple",showSearch:!0,style:{width:"100%",fontSize:"12px"},placeholder:g.formatMessage({id:"agent.pleaseselect"}),filterOption:function(Be,Le){var we;return((we=Le==null?void 0:Le.label)!==null&&we!==void 0?we:"").toLowerCase().includes(Be.toLowerCase())},value:y,onChange:bt,options:Q})]}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",g.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(X.ZP.Group,{value:a&&a.agent.default_output_format,onChange:function(Be){St(Be)},children:[(0,e.jsx)(X.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(X.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(X.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})]})})]})}}),(0,e.jsxs)(_.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:"MCP\u53EF\u8C03\u5EA6\u8D44\u6E90"}),(0,e.jsxs)("div",{className:"pl-4 ",children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",name:g.formatMessage({id:"agent.selectSkills"}),title:g.formatMessage({id:"agent.explain.selectSkills"})})}),(0,e.jsx)(pe.ZP,{type:"link",icon:(0,e.jsx)(We.Z,{}),onClick:function(){return De(!0)},className:"text-xs",children:g.formatMessage({id:"agent.addSkill"})})]}),je.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:je.map(function(r){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(Dt.Z,{rounded:"6px",data:r,bg:r.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:r.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:r.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(S){S.stopPropagation(),at(r)},children:(0,e.jsx)(mt.Z,{})})]},r.app_id)})}):(0,e.jsx)("div",{onClick:function(){return De(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(We.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:g.formatMessage({id:"agent.addSkill"})})]})}),(0,e.jsx)(At.Z,{show:de,popupClose:Nt,popupSave:tt,checkList:je,radio:!1,nodetype:"skill",zIndex:30})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(he.Z,{className:"font-medium",name:g.formatMessage({id:"agent.selectWorkflows"}),title:g.formatMessage({id:"agent.explain.selectWorkflows"})})}),(0,e.jsx)(pe.ZP,{type:"link",icon:(0,e.jsx)(We.Z,{}),onClick:function(){return ye(!0)},className:"text-xs",children:g.formatMessage({id:"agent.addWorkflow"})})]}),w.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:w.map(function(r){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(Dt.Z,{rounded:"6px",data:r,bg:r.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:r.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:r.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(S){S.stopPropagation(),Ft(r)},children:(0,e.jsx)(mt.Z,{})})]},r.app_id)})}):(0,e.jsx)("div",{onClick:function(){return ye(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(We.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:g.formatMessage({id:"agent.addWorkflow"})})]})}),(0,e.jsx)(At.Z,{show:Ye,popupClose:_t,popupSave:wt,checkList:w,radio:!1,nodetype:"workflow",zIndex:30})]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(pe.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){Ve()},children:g.formatMessage({id:"agent.btn.nextstep"})}),(0,e.jsx)(pe.ZP,{onClick:function(){history.back()},children:g.formatMessage({id:"agent.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},ia=na,la=s(13769),Et=s.n(la),ra=s(49677),oa=s.n(ra),da=s(92485),ua=s(85877),It=s(39944),ca=s(71471),ma=["key","name"],Ea=ca.Z.Title,Ia=ke.Z.TextArea,Ta=ke.Z.Search,fa=function(i){var R=i.handleBack,k=i.Detaillist,M=i.setDetaillist,j=i.Fourthly_select_list,v=i.setFourthly_config_id,U=i.Fourthly_config_id,Y=i.Fourthlyref,I=i.Fourthly_abilities_list,a=i.Operationbentate,P=i.callwordlist,y=i.newagentid,x=(0,u.useIntl)(),J=(0,f.useState)(0),ne=p()(J,2),Ie=ne[0],te=ne[1],xe=(0,f.useState)(""),_e=p()(xe,2),Fe=_e[0],b=_e[1],ie=(0,f.useState)(""),Me=p()(ie,2),le=Me[0],g=Me[1],ae=(0,f.useState)(!1),F=p()(ae,2),Q=F[0],L=F[1],G=function(N){var w={user:{value:be(N)}};b(new It.z(w))},re=function(N){var w={user:{value:N.target.value}};b(new It.z(w))},Pe=function(N){te(N)},oe=function(N){var w=N.users.filter(function(D,de){return D.type=="number"&&!Number(D.value)&&!!D.value});if(!Fe.user)O.ZP.warning(x.formatMessage({id:"agent.message.warning.callword"}));else if(w.length>0)O.ZP.warning(x.formatMessage({id:"agent.message.warning.datatype"}));else{L(!0);var V=new Ee.Kr("input","","");N.users.forEach(function(D){var de=new Ee._w(D.name,D.type?D.type:"string",D.type=="string"?D.value:Number(D.value),D.content,D.status);V.addProperty(D.name,de)});var $={agent_id:y||k.agent.agent_id,ability_id:Ie,input_dict:V,prompt:Fe};Ce($)}},be=function B(N){return N.map(function(w){return w.type==="mention"?w.id:w.children?B(w.children):w.text}).join("")},Ce=function(N){(0,H.LH)(N).then(function(w){O.ZP.success(x.formatMessage({id:"agent.message.success.runpublish"})),g(w.data.outputs.text),L(!1)}).catch(function(w){L(!1)})},je=function(){var B=ee()(Z()().mark(function N(){var w;return Z()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,H.Dh)(y||k.agent.agent_id);case 2:w=$.sent,w.code==0?O.ZP.success(x.formatMessage({id:"agent.message.success.publish"})):O.ZP.error(x.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return $.stop()}},N)}));return function(){return B.apply(this,arguments)}}(),Ae=function(){var B=ee()(Z()().mark(function N(){return Z()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:u.history.push("/Agents?app_id=".concat(k.app.app_id,"&type=false")),location.reload();case 2:case"end":return V.stop()}},N)}));return function(){return B.apply(this,arguments)}}();return(0,f.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:x.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(ct.Z,{placeholder:x.formatMessage({id:"agent.pleaseselect"}),defaultValue:x.formatMessage({id:"agent.allability"}),style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:Pe,options:I})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",onFinish:oe,style:{width:"100%"},autoComplete:"off",form:Y,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(_.Z.List,{name:"users",children:function(N,w){return oa()(w),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"mr-5 ml-2.5",children:x.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"",children:x.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:N.map(function(V){var $=V.key,D=V.name,de=Et()(V,ma);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(_.Z.Item,t()(t()({},de),{},{name:[D,"content"],children:(0,e.jsx)(ke.Z,{className:"mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(_.Z.Item,t()(t()({},de),{},{name:[D,"value"],rules:[{required:!!(Y.getFieldsValue()&&Y.getFieldsValue().users[$].status==!0),message:x.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(ke.Z,{placeholder:Y.getFieldsValue()&&Y.getFieldsValue().users[$].status==!0?x.formatMessage({id:"agent.variable.required.value"}):x.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(_.Z.Item,{rules:[{required:!0,message:x.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.runpreview"})}),(0,e.jsx)(Pt.Z,{spinning:Q,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:le?(0,e.jsx)(da.Z,{language:"python3",value:le&&JSON.stringify(le)}):null}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(ua.Z,{onChange:function(N){G(N)},options:P})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(pe.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})})]})]})}),(0,e.jsx)("div",{className:"w-28",children:(k==null?void 0:k.agent.publish_status)===1&&(k==null?void 0:k.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(pe.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:Ae,children:x.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(pe.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:a!="false",onClick:je,children:x.formatMessage({id:"agent.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},ga=fa,pa=["key","name"],ha=ke.Z.TextArea,va=function(i){var R=i.SecondValue,k=i.handleBack,M=i.Detaillist,j=i.setDetaillist,v=i.Sformref,U=i.Operationbentate,Y=i.pageKeyfun,I=i.secondjudgingcondition,a=i.SkillMenuClick,P=i.agentupdata,y=(0,u.useIntl)(),x=O.ZP.useMessage(),J=p()(x,2),ne=J[0],Ie=J[1],te=(0,f.useRef)(null),xe=(0,f.useState)({auto_match_ability:0,agent_abilities:[{agent_ability_id:0,name:"string",content:"string",status:0}]}),_e=p()(xe,2),Fe=_e[0],b=_e[1];(0,f.useEffect)(function(){});var ie=function(F){if(F.users.length==1&&(!F.users[0].content&&F.users[0].name||F.users[0].content&&!F.users[0].name))return O.ZP.warning(y.formatMessage({id:"agent.message.warning.selectknowledgebase"}));var Q=F.users.map(function(G){return t()(t()({},G),{},{status:G.status?1:2,agent_ability_id:G.agent_ability_id?G.agent_ability_id:0})}),L={agent_id:M.agent.agent_id,data:{auto_match_ability:M.agent.auto_match_ability,agent_abilities:F.users.length==1&&!F.users[0].content&&!F.users[0].name?[]:Q}};U=="false"&&Me(),R(t()({},Fe))},Me=function(){var ae=ee()(Z()().mark(function F(){return Z()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:I()||P();case 1:case"end":return L.stop()}},F)}));return function(){return ae.apply(this,arguments)}}(),le=function(F){j(t()(t()({},M),{},{agent:t()(t()({},M.agent),{},{auto_match_ability:F?1:0})}))},g=function(){setTimeout(function(){te.current&&te.current.scrollTo({top:te.current.scrollHeight,behavior:"smooth"})},100)};return(0,e.jsxs)("div",{style:{height:"100%"},className:"w-full flex-1 sticky top-0",children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:y.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(he.Z,{name:y.formatMessage({id:"agent.automatch"}),title:y.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)($e.Z,{size:"small",checked:!!(M&&M.agent.auto_match_ability==1),onChange:le})]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",onFinish:ie,style:{width:"100%"},autoComplete:"off",form:v,children:[(0,e.jsx)(_.Z.List,{name:"users",children:function(F,Q){var L=Q.add,G=Q.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:[(0,e.jsx)("div",{className:" text-[#555555] text-xs font-medium",children:y.formatMessage({id:"agent.capability"})}),(0,e.jsx)("div",{children:(0,e.jsx)(pe.ZP,{type:"link",onClick:function(){L(),g()},block:!0,icon:(0,e.jsx)(We.Z,{}),children:y.formatMessage({id:"agent.add"})})})]}),(0,e.jsx)("div",{style:{height:"calc(100vh - 206px)",overflowY:"auto"},className:"overflow-y-auto",ref:te,children:F.map(function(re){var Pe=re.key,oe=re.name,be=Et()(re,pa);return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(_.Z.Item,{className:"mb-0",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:y.formatMessage({id:"agent.capabilityname"})}),(0,e.jsxs)("div",{children:[" ",(0,e.jsx)(mt.Z,{onClick:function(){return G(oe)}})]})]})}),(0,e.jsx)(_.Z.Item,t()(t()({className:"mb-[20px]"},be),{},{name:[oe,"name"],rules:[{required:F.length!==1,message:y.formatMessage({id:"agent.capabilityname"})}],children:(0,e.jsx)(ke.Z,{placeholder:y.formatMessage({id:"agent.capabilityname"}),maxLength:50,className:"w-full"})})),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(he.Z,{className:"text-[#555555] text-xs font-medium",name:y.formatMessage({id:"agent.capabilitydescription"}),title:y.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(_.Z.Item,t()(t()({className:"w-full mb-[20px]"},be),{},{name:[oe,"content"],rules:[{required:F.length!==1,message:y.formatMessage({id:"agent.capabilitydescription"})}],children:(0,e.jsx)(ha,{placeholder:y.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},className:"w-full"})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:y.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(_.Z.Item,t()(t()({className:"mb-[20px]"},be),{},{name:[oe,"status"],children:(0,e.jsxs)(X.ZP.Group,{optionType:"button",buttonStyle:"solid",defaultValue:!0,children:[(0,e.jsx)(X.ZP,{value:!0,children:y.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(X.ZP,{value:!1,children:y.formatMessage({id:"agent.capabilitystatus.disable"})})]})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:y.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(_.Z.Item,{className:"mb-0",name:[oe,"output_format"],children:(0,e.jsxs)(X.ZP.Group,{defaultValue:0,children:[(0,e.jsx)(X.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:y.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(X.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(X.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(X.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})})]})})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},xa=va,ba=s(13085),ja=s(27842),ya=s(96486),Sa=s.n(ya),wa=function(){var i,R,k,M,j=(0,u.useIntl)(),v=(0,f.useRef)(null),U=_.Z.useForm(),Y=p()(U,1),I=Y[0],a=_.Z.useForm(),P=p()(a,1),y=P[0],x=_.Z.useForm(),J=p()(x,1),ne=J[0],Ie=_.Z.useForm(),te=p()(Ie,1),xe=te[0],_e=(0,f.useState)(null),Fe=p()(_e,2),b=Fe[0],ie=Fe[1],Me=(0,f.useState)(0),le=p()(Me,2),g=le[0],ae=le[1],F=(0,f.useState)(null),Q=p()(F,2),L=Q[0],G=Q[1],re=(0,f.useState)(null),Pe=p()(re,2),oe=Pe[0],be=Pe[1],Ce=(0,f.useState)(null),je=p()(Ce,2),Ae=je[0],B=je[1],N=(0,f.useState)(null),w=p()(N,2),V=w[0],$=w[1],D=(0,f.useState)(null),de=p()(D,2),De=de[0],ft=de[1],Xe=(0,f.useState)(null),Ye=p()(Xe,2),ye=Ye[0],Te=Ye[1],Je=(0,f.useState)(null),K=p()(Je,2),Oe=K[0],Tt=K[1],gt=(0,f.useState)(null),pt=p()(gt,2),Qe=pt[0],ht=pt[1],vt=(0,f.useState)(null),xt=p()(vt,2),Se=xt[0],bt=xt[1],jt=(0,f.useState)("1"),yt=p()(jt,2),ue=yt[0],Ve=yt[1],St=(0,f.useState)(null),qe=p()(St,2),et=qe[0],ze=qe[1],Ot=(0,f.useState)(null),tt=p()(Ot,2),wt=tt[0],Nt=tt[1],_t=(0,f.useState)(null),at=p()(_t,2),Ft=at[0],r=at[1],n=(0,f.useState)(null),S=p()(n,2),T=S[0],se=S[1],ce=(0,f.useState)(!0),Be=p()(ce,2),Le=Be[0],we=Be[1],_a=(0,f.useState)({first:!1,second:!1,fourthly:!1}),Vt=p()(_a,2),Ue=Vt[0],st=Vt[1],Fa=[{key:"1",icon:(0,e.jsx)(ge.Z,{}),label:j.formatMessage({id:"agent.menu.basicsetup"}),disabled:Ue.first,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",lineHeight:"22px",color:ue=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:Ue.second,icon:(0,e.jsx)(W.Z,{}),label:j.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:ue=="2"?"#1B64F3":"#213044"}},{key:"5",disabled:Ue.fourthly,icon:(0,e.jsx)(A.Z,{}),label:j.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:ue=="5"?"#1B64F3":"#213044"}}];(0,f.useEffect)(function(){var E=new URLSearchParams(window.location.search);E.get("app_id")||(st(t()(t()({},Ue),{},{first:!1,second:!0,fourthly:!0})),we(!1)),Mt()},[]);var Mt=function(){var E=ee()(Z()().mark(function c(d){var l,h,o,m,me,kt,Gt,Kt;return Z()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(h=new URLSearchParams(window.location.search),h.get("from")&&Nt(h.get("from")),o=null,!(h.get("app_id")||d)){Ne.next=10;break}return Ne.next=6,(0,H.ek)(d||h.get("app_id"),h.get("type"));case 6:o=Ne.sent,se(o.data.app.app_id),Ne.next=13;break;case 10:return Ne.next=12,(0,Ze.cI)();case 12:o=Ne.sent;case 13:m=o.data,me=(l=o.data)===null||l===void 0||(l=l.agent_dataset_relation_list)===null||l===void 0?void 0:l.map(function(C){return C.dataset_id}),G(me),o.data.callable_items&&(o.data.agent.selected_skills=[],o.data.agent.selected_workflows=[],o.data.callable_items.forEach(function(C){C.item_type==1?o.data.agent.selected_skills.push(t()(t()({},C),{},{mode:4})):o.data.agent.selected_workflows.push(t()(t()({},C),{},{mode:2}))})),ie(o.data),bt(o.data.agent.publish_status===0&&o.data.is_creator===1?"false":"true"),o.data.agent.publish_status===1&&O.ZP.warning(j.formatMessage({id:"agent.message.listwarning"}),5),I.setFieldsValue(Bt(m.agent.input_variables)),kt=o.data.agent_abilities_list.map(function(C){return C.status==1?t()(t()({},C),{},{status:!0}):t()(t()({},C),{},{status:!1})}),ne.setFieldsValue({users:kt[0]?kt:[{agent_ability_id:0,name:"",content:"",status:!0,output_format:0}]}),B(Zt(m.agent_abilities_list)),$(Zt(m.agent_abilities_list)),Gt=m.agent_abilities_list.filter(function(C){return C.output_format!==0}),y.setFieldsValue({users:Gt.map(function(C){return{agent_ability_id:C.agent_ability_id,output_format:C.output_format}})}),xe.setFieldsValue(Bt(m.agent.input_variables)),ft(m.m_configurations_list.map(function(C){return{value:C.m_config_id?C.m_config_id:C.model_config_id,label:C.m_name?C.m_name:C.model_name}})),m.agent.m_config_id||m.agent.model_config_id?Te(m.agent.m_config_id?m.agent.m_config_id:m.agent.model_config_id):Te(m.m_configurations_list[0].model_config_id),Kt=m.agent_abilities_list.filter(function(C,Va){return C.status===1}),ht(Zt(Kt).concat([{value:0,label:j.formatMessage({id:"agent.allability"})}])),we(!1);case 33:case"end":return Ne.stop()}},c)}));return function(d){return E.apply(this,arguments)}}(),Bt=function(c){var d={users:c&&c.properties?Object.values(c.properties).map(function(l){return t()({name:l.name,type:l.type,content:l.display_name,status:l.required},l)}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return d},Zt=function(c){return c.map(function(d){return{value:d.agent_ability_id,label:d.name}})},Ma=function(c){Ut(c,1),xe.setFieldsValue(I.getFieldsValue())},Za=function(){Mt()},Lt=function(c){ae(c)},ka=function(){u.history.back()},Rt=function(){if(!b.agent.input_variables)return O.ZP.warning(j.formatMessage({id:"agent.message.warning.variable"})),!0;if(Sa().isEmpty(b.agent.input_variables.properties))return O.ZP.warning(j.formatMessage({id:"agent.message.warning.variable"})),!0;if(ye)if(b.agent.obligations){if(Aa(I.getFieldsValue().users,"name"))return O.ZP.warning(j.formatMessage({id:"agent.message.warning.repetition"})),!0}else return O.ZP.warning(j.formatMessage({id:"agent.message.warning.functiondescribe"})),!0;else return O.ZP.warning(j.formatMessage({id:"agent.message.warning.LLM"})),!0;return!1},$t=function(){var c=ne.getFieldsValue().users.filter(function(l){return!!l}),d=c.filter(function(l){return!l.name||!l.content});return d.length!==0&&!(d.length==1&&d[0].name==""&&d[0].content=="")?(O.ZP.warning(j.formatMessage({id:"agent.message.warning.integritycapacity"})),!0):!1},Wt=function(c){if((c==null?void 0:c.key)=="4"){var d=I.getFieldsValue().users.map(function(l){return{value:"<<".concat(Ke.qX,".inputs.").concat(l.name,">>"),label:l.name}});ze(d)}Ve(c.key)},zt=function(){we(!0);var c=0;return new Promise(function(d){var l=function(o){return(0,H.ek)(o,!1).then(function(m){return c=m.data.agent.agent_id,Pa(c),T||u.history.replace("/Agents?app_id=".concat(o,"&type=false")),setTimeout(function(){Ca(c),O.ZP.success(j.formatMessage({id:"skill.conserve.success"}))},500),setTimeout(function(){if(Mt(o),!T){var me=t()(t()({},(0,Ze.Go)("GET")),{},{app_id:o});(0,Ze.Go)("SET",me)}},1e3),r(c),m}).catch(function(){return""})};T?l(T).then(function(h){return d(h)}).catch(function(h){console.error("Error during agent update:",h),d("")}):(0,ot.uy)((0,Ze.Go)("GET")).then(function(h){se(h.data.app_id),l(h.data.app_id).then(function(o){return d(o)}).catch(function(o){console.error("Error during agent creation:",o),d("")})}).catch(function(h){console.error("Error creating app:",h),we(!1),d("")})})},Pa=function(c,d){I.validateFields().then(function(l){var h=[].concat(q()(b.agent.selected_skills||[]),q()(b.agent.selected_workflows||[])).map(function(me){return{app_id:me.app_id,item_type:me.mode==4?1:2}}),o={agent_id:c,data:{is_public:b.app.is_public,enable_api:b.app.enable_api,attrs_are_visible:b.app.attrs_are_visible,obligations:b.agent.obligations,input_variables:b.agent.input_variables?b.agent.input_variables:Da(I.getFieldsValue()),dataset_ids:L,m_config_id:ye,allow_upload_file:b.agent.allow_upload_file,default_output_format:b.agent.default_output_format,callable_list:h}};Se=="false"&&Ut(o,1),xe.setFieldsValue(I.getFieldsValue());var m=I.getFieldsValue().users.map(function(me){return{value:"<<".concat(Ke.qX,".inputs.").concat(me.name,">>"),label:me.name}});ze(m),d&&Ve(d.key)}).catch(function(l){})},Ca=function(c){var d=ne.getFieldsValue().users.filter(function(o){return!!o}),l=d.map(function(o){return t()(t()({},o),{},{status:o.status==!1?2:1,agent_ability_id:o.agent_ability_id?o.agent_ability_id:0,output_format:o.output_format?o.output_format:0})}),h={agent_id:c,data:{auto_match_ability:b.agent.auto_match_ability,agent_abilities:l}};Se=="false"&&(l.length==1&&l[0].name==""&&l[0].content==""?st({first:!1,second:!1,fourthly:!1}):(0,H.Iw)(h).then(function(o){o.code==0&&st({first:!1,second:!1,fourthly:!1})}).catch(function(o){}))},Ut=function(){var E=ee()(Z()().mark(function c(d,l){var h;return Z()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(Se!=="false"){m.next=19;break}if(l!==1){m.next=7;break}return m.next=4,(0,H.XB)(d);case 4:m.t0=m.sent,m.next=17;break;case 7:if(l!==2){m.next=13;break}return m.next=10,(0,H.Iw)(d);case 10:m.t1=m.sent,m.next=16;break;case 13:return m.next=15,(0,H.Ce)(d);case 15:m.t1=m.sent;case 16:m.t0=m.t1;case 17:h=m.t0,h&&h.code===0&&we(!1);case 19:case"end":return m.stop()}},c)}));return function(d,l){return E.apply(this,arguments)}}(),Aa=function(c,d){var l=new Set;return c.some(function(h){var o=h[d];return l.has(o)?l.add(o):l.add(o)&&!1})},Da=function(c){var d=new Ee.Kr("input","","");return c.users.forEach(function(l){var h=new Ee._w(l.name,l.type?l.type:"string",l.value?l.value:"",l.content,l.status);d.addProperty(l.name,h)}),d};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(pe.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:ka,children:[(0,e.jsx)(z.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:wt=="chat_room"?j.formatMessage({id:"agent.back_meeting"}):j.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Xt.Z,{selectedKeys:[ue],onClick:Wt,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[ue],mode:"inline",items:Fa}),b&&((i=b.app)===null||i===void 0?void 0:i.enable_api)===1&&((R=b.app)===null||R===void 0?void 0:R.publish_status)===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:ee()(Z()().mark(function E(){var c,d;return Z()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(c=new URLSearchParams(window.location.search),d=null,!c.get("app_id")){h.next=6;break}return h.next=5,(0,H.ek)(c.get("app_id"),c.get("type"));case 5:d=h.sent;case 6:d!=null&&d.data.app.enable_api===1&&d.data.app.publish_status===1?window.open(dt._n+b.app.api_url):O.ZP.warning(j.formatMessage({id:"agent.save.and.click"}),5);case 7:case"end":return h.stop()}},E)})),children:(0,e.jsxs)("div",{className:"mr-[20px] text-base font-medium text-[#213044] -mt-1",children:[(0,e.jsx)(Re.Z,{className:"mr-3"}),j.formatMessage({id:"agent.visit"})," API"]})}):null]})]}),(0,e.jsx)("div",{className:"flex-1 relative w-[calc(100%-300px)]",children:(0,e.jsxs)(ut.Z,{style:{height:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,e.jsx)(ut.Z.Panel,{defaultSize:"50%",min:"40%",max:"70%",children:(0,e.jsx)(Pt.Z,{spinning:Le,size:"large",className:"mt-[112px] mr-4",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[(k=(0,Ze.Go)("GET"))!==null&&k!==void 0&&k.app_id?j.formatMessage({id:"agent.compile"}):j.formatMessage({id:"agent.created"})," ",j.formatMessage({id:"agent"})]}),(b==null||(M=b.app)===null||M===void 0?void 0:M.publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] px-[7px] text-[#fff] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:j.formatMessage({id:"agent.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE] px-[7px]  text-[#999] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:j.formatMessage({id:"agent.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:ue==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Le&&(0,e.jsx)(ia,{FirstValue:Ma,Ffromref:I,Detaillist:b,setDetaillist:ie,repository:L,setRepository:G,Newproperties:oe,setNewproperties:be,Operationbentate:Se,Fourthly_config_id:ye,setFourthly_config_id:Te,Fourthly_select_list:De,pageKeyfun:Ve,firstjudgingcondition:Rt,agentmenudisabled:Ue,setAgentmunudisabled:st})}),(0,e.jsx)("div",{style:{display:ue==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center",position:"sticky",top:"-150px"},children:(0,e.jsx)(xa,{SecondValue:Za,Detaillist:b,setDetaillist:ie,Sformref:ne,Operationbentate:Se,handleBack:Lt,pageKeyfun:Ve,SkillMenuClick:Wt,secondjudgingcondition:$t,agentupdata:zt})}),(0,e.jsx)("div",{style:{display:ue==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(ga,{handleBack:Lt,Detaillist:b,setDetaillist:ie,Fourthly_select_list:De,Fourthly_config_id:ye,setFourthly_config_id:Te,Fourthlyref:xe,Fourthly_abilities_list:Qe,Operationbentate:Se,callwordlist:et,newagentid:Ft})})]})})})}),(0,e.jsx)(ut.Z.Panel,{children:(0,e.jsx)("div",{children:(0,e.jsx)(ba.Z,{saveInfo:{firstjudgingcondition:Rt,secondjudgingcondition:$t,agentupdata:zt},operationbentate:Se,data:{abilitiesList:Qe,detailList:b}})})}),ue=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(ja.ZP,{agent_id:b.agent.agent_id})})]})})]})},Na=wa}}]);
