"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2049],{82826:function(R,_,e){e.d(_,{Z:function(){return n}});var m=e(1413),o=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},M=f,g=e(91146),i=function(v,d){return o.createElement(g.Z,(0,m.Z)((0,m.Z)({},v),{},{ref:d,icon:M}))},h=o.forwardRef(i),n=h},19171:function(R,_,e){e.r(_);var m=e(15009),o=e.n(m),f=e(99289),M=e.n(f),g=e(5574),i=e.n(g),h=e(82826),n=e(59586),E=e(45360),v=e(74330),d=e(83622),T=e(4393),D=e(55102),b=e(84567),P=e(67294),Z=e(76772),B=e(32060),s=e(85893),N=function(p){var K=p.permissionsList,l=p.roleDetail,w=p.onClose,a=(0,Z.useIntl)(),U=n.Z.useForm(),W=i()(U,1),O=W[0],y=(0,P.useState)(!1),A=i()(y,2),G=A[0],$=A[1],S=(0,P.useState)(!1),x=i()(S,2),L=x[0],I=x[1];(0,P.useEffect)(function(){if(l){var t=l.permissions.map(function(u){return u.id});O.setFieldsValue({name:l.name,description:l.description,permissions:t})}},[l,O]);var F=function(){var t=M()(o()().mark(function u(c){var j;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(l){r.next=2;break}return r.abrupt("return");case 2:return I(!0),r.prev=3,r.next=6,(0,B.ul)({id:l.id,name:c.name,description:c.description,list:c.permissions});case 6:j=r.sent,j.code===0?(E.ZP.success(a.formatMessage({id:"workflow.roleManagement.updateSuccess"})),w()):E.ZP.error(j.message||"Failed to update role"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),console.error("Failed to update role:",r.t0);case 13:return r.prev=13,I(!1),r.finish(13);case 16:case"end":return r.stop()}},u,null,[[3,10,13,16]])}));return function(c){return t.apply(this,arguments)}}(),C=function(){w()};return l?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)(d.ZP,{type:"text",icon:(0,s.jsx)(h.Z,{}),onClick:C,className:"mr-4",children:a.formatMessage({id:"workflow.roleManagement.back"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:a.formatMessage({id:"workflow.roleManagement.editRole"})})]}),(0,s.jsx)(T.Z,{children:(0,s.jsxs)(n.Z,{form:O,layout:"vertical",onFinish:F,disabled:L,children:[(0,s.jsx)(n.Z.Item,{name:"name",label:a.formatMessage({id:"workflow.roleManagement.roleName"}),rules:[{required:!0,message:a.formatMessage({id:"workflow.roleManagement.roleNameRequired"})},{max:50,message:a.formatMessage({id:"workflow.roleManagement.roleNameMaxLength"})}],children:(0,s.jsx)(D.Z,{placeholder:a.formatMessage({id:"workflow.roleManagement.roleNamePlaceholder"})})}),(0,s.jsx)(n.Z.Item,{name:"description",label:a.formatMessage({id:"workflow.roleManagement.description"}),rules:[{required:!0,message:a.formatMessage({id:"workflow.roleManagement.descriptionRequired"})},{max:200,message:a.formatMessage({id:"workflow.roleManagement.descriptionMaxLength"})}],children:(0,s.jsx)(D.Z.TextArea,{rows:4,placeholder:a.formatMessage({id:"workflow.roleManagement.descriptionPlaceholder"})})}),(0,s.jsx)(n.Z.Item,{name:"permissions",label:a.formatMessage({id:"workflow.roleManagement.permissions"}),rules:[{required:!0,message:a.formatMessage({id:"workflow.roleManagement.permissionsRequired"})}],children:(0,s.jsx)(b.Z.Group,{className:"w-full",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(function(t){return(0,s.jsx)(b.Z,{value:t.id,className:"whitespace-nowrap",children:t.title},t.id)})})})}),(0,s.jsx)(n.Z.Item,{className:"mb-0",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(d.ZP,{type:"primary",htmlType:"submit",loading:L,children:a.formatMessage({id:"workflow.roleManagement.update"})}),(0,s.jsx)(d.ZP,{onClick:C,children:a.formatMessage({id:"workflow.roleManagement.cancel"})})]})})]})})]}):(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)(v.Z,{size:"large"})})})};_.default=N}}]);
