"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{82114:function(De,ee,t){var te=t(1413),N=t(67294),oe=t(83707),s=t(91146),ce=function(u,K){return N.createElement(s.Z,(0,te.Z)((0,te.Z)({},u),{},{ref:K,icon:oe.Z}))},z=N.forwardRef(ce);ee.Z=z},14955:function(De,ee,t){t.r(ee),t.d(ee,{default:function(){return nt}});var te=t(15009),N=t.n(te),oe=t(97857),s=t.n(oe),ce=t(99289),z=t.n(ce),be=t(5574),u=t.n(be),K=t(11551),Ee=t(47520),Ie=t(29432),Ce=t(2068),Oe=t(89035),Te=t(15360),ze=t(82826),Le=t(69243),U=t(35312),l=t(40741),L=t(45360),ae=t(28036),Re=t(50136),Ne=t(74330),g=t(67294),R=t(92939),Ve=t(5608),V=t(26915),H=t(72269),ue=t(34041),D=t(78045),e=t(85893),Be=V.Z.TextArea,$e=function(i){var a=i.Detaillist,E=i.repository,m=i.Operationbentate,Z=i.Ffromref,J=i.Fourthly_config_id,I=i.Fourthly_select_list,n=(0,U.useIntl)(),Y=(0,g.useState)([]),B=u()(Y,2),d=B[0],k=B[1];(0,g.useEffect)(function(){_()},[]);var _=function(){var O=z()(N()().mark(function P(){var b;return N()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,K.zl)();case 2:b=p.sent,k(b.data.data.map(function(x){return{value:x.dataset_id,label:x.name}}));case 4:case"end":return p.stop()}},P)}));return function(){return O.apply(this,arguments)}}(),Q={readOnly:!0},M={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(l.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:Z,children:[a&&a.app.attrs_are_visible===0?(0,e.jsx)(l.Z.List,{name:"users",children:function(P,b){var C=b.add,p=b.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:m==="true"?n.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})})]})}}):(0,e.jsx)(l.Z.List,{name:"users",children:function(P,b){var C,p,x=b.add,$=b.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:m==="true"?n.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",name:n.formatMessage({id:"agent.teamvisibility"}),title:n.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(H.Z,s()(s()({},M),{},{size:"small",checked:!!(a&&a.app.is_public===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",name:n.formatMessage({id:"agent.attrVisible"}),title:n.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(H.Z,s()(s()({},M),{},{size:"small",checked:!!(a&&a.app.attrs_are_visible===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:n.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(H.Z,s()(s()({},M),{},{size:"small",checked:!!(a&&a.app.enable_api===1)}))]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:n.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(H.Z,s()(s()({},M),{},{size:"small",checked:!!(a&&a.agent.allow_upload_file==1)}))]})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:n.formatMessage({id:"agent.LLMmodel"})}),(0,e.jsx)(ue.Z,s()(s()({},M),{},{"aria-readonly":"true",style:{width:270},variant:"filled",value:J,options:I}))]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{name:n.formatMessage({id:"agent.functiondescription"}),title:n.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(Be,s()(s()({},M),{},{value:a&&a.agent&&a.agent.obligations,variant:"filled",autoSize:{minRows:8,maxRows:10}}))]})}),(a==null||(C=a.agent)===null||C===void 0?void 0:C.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Ve.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(R.Z,{className:"font-medium",required:!0,name:n.formatMessage({id:"agent.inputvariable"}),title:n.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((a==null||(p=a.agent)===null||p===void 0||(p=p.input_variables)===null||p===void 0?void 0:p.properties)||{})})}),(0,e.jsxs)(l.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(R.Z,{className:"font-medium",name:n.formatMessage({id:"agent.associatedknowledgebase"}),title:n.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(ue.Z,s()(s()({},M),{},{size:"large",mode:"tags",style:{width:"100%"},placeholder:n.formatMessage({id:"agent.pleaseselect"}),value:E,variant:"filled",options:d}))]}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",n.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsx)(D.ZP.Group,s()(s()({},M),{},{value:a&&a.agent.default_output_format,options:[{value:1,label:"text"},{value:2,label:"json"},{value:3,label:"code"}]}))]})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},We=$e,Ke=t(13769),_e=t.n(Ke),Ge=t(49677),Ue=t.n(Ge),He=t(92485),Xe=t(85877),Je=t(39944),Fe=t(10759),Ye=t(71471),ke=["key","name"],pt=Ye.Z.Title,ht=V.Z.TextArea,vt=V.Z.Search,Qe=function(i){var a=i.Detaillist,E=i.setDetaillist,m=i.Fourthly_select_list,Z=i.setFourthly_config_id,J=i.Fourthly_config_id,I=i.Fourthlyref,n=i.Fourthly_abilities_list,Y=i.Operationbentate,B=i.callwordlist,d=(0,U.useIntl)(),k=(0,g.useState)(0),_=u()(k,2),Q=_[0],M=_[1],O=(0,g.useState)(""),P=u()(O,2),b=P[0],C=P[1],p=(0,g.useState)(""),x=u()(p,2),$=x[0],xe=x[1],se=(0,g.useState)(!1),ie=u()(se,2),fe=ie[0],q=ie[1],ge={readOnly:!0},pe={disabled:!0},he=function(r){var f={user:{value:ne(r)}};C(new Je.z(f))},ve=function(r){M(r)},le=function(r){var f=r.users.filter(function(o,W){return o.type=="number"&&!Number(o.value)&&!!o.value});if(!b.user)L.ZP.warning(d.formatMessage({id:"agent.message.warning.callword"}));else if(f.length>0)L.ZP.warning(d.formatMessage({id:"agent.message.warning.datatype"}));else{q(!0);var j=new Fe.Kr("input","","");r.users.forEach(function(o){var W=new Fe._w(o.name,o.type?o.type:"string",o.type=="string"?o.value:Number(o.value),o.content,o.status);j.addProperty(o.name,W)});var h={agent_id:a.agent.agent_id,ability_id:Q,input_dict:j,prompt:b};re(h)}},ne=function v(r){return r.map(function(f){return f.type==="mention"?f.id:f.children?v(f.children):f.text}).join("")},re=function(){var v=z()(N()().mark(function r(f){return N()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:(0,K.LH)(f).then(function(o){L.ZP.success(d.formatMessage({id:"agent.message.success.runpublish"})),xe(o.data.outputs.text),q(!1)}).catch(function(o){q(!1)});case 1:case"end":return h.stop()}},r)}));return function(f){return v.apply(this,arguments)}}(),je=function(){var v=z()(N()().mark(function r(){var f;return N()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,K.Dh)(a.agent.agent_id);case 2:f=h.sent,f.code==0?L.ZP.success("success"):L.ZP.error("error");case 4:case"end":return h.stop()}},r)}));return function(){return v.apply(this,arguments)}}(),de=function(){var v=z()(N()().mark(function r(){return N()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:U.history.push("/Agents?app_id=".concat(a.app.app_id,"&type=false")),location.reload();case 2:case"end":return j.stop()}},r)}));return function(){return v.apply(this,arguments)}}();return(0,g.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:d.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:d.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(ue.Z,{placeholder:d.formatMessage({id:"agent.pleaseselect"}),defaultValue:d.formatMessage({id:"agent.allability"}),variant:"filled",style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:ve,options:n})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(l.Z,{name:"dynamic_form_nest_item",onFinish:le,style:{width:900},autoComplete:"off",form:I,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:d.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(l.Z.List,{name:"users",children:function(r,f){return Ue()(f),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:d.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52",children:d.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:r.map(function(j){var h=j.key,o=j.name,W=_e()(j,ke);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(l.Z.Item,s()(s()({},W),{},{name:[o,"content"],children:(0,e.jsx)(V.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(l.Z.Item,s()(s()({},W),{},{name:[o,"value"],rules:[{required:!!(I.getFieldsValue()&&I.getFieldsValue().users[h].status==!0),message:d.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(V.Z,{style:{width:"660px"},placeholder:I.getFieldsValue()&&I.getFieldsValue().users[h].status==!0?d.formatMessage({id:"agent.variable.required.value"}):d.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(l.Z.Item,{rules:[{required:!0,message:d.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:d.formatMessage({id:"agent.runpreview"})}),(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)(Ne.Z,{spinning:fe,children:(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:$?(0,e.jsx)(He.Z,{language:"python3",value:$&&JSON.stringify($)}):null})}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Xe.Z,{onChange:function(r){console.log(B),he(r)},options:B})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ae.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})]}),(0,e.jsx)(l.Z.Item,{children:(0,e.jsx)("div",{className:"w-28",children:(a==null?void 0:a.agent.publish_status)===1&&(a==null?void 0:a.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ae.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:de,children:d.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ae.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:Y!="false",onClick:je,children:d.formatMessage({id:"agent.publish"})})})})})]})}),(0,e.jsx)("div",{className:"h-10 w-1"})]})},qe=Qe,et=V.Z.TextArea,jt={readOnly:!0},X={disabled:!0},tt=function(i){var a=i.Detaillist,E=i.Sformref,m=(0,U.useIntl)();return(0,g.useEffect)(function(){}),(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:m.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(R.Z,{name:m.formatMessage({id:"agent.automatch"}),title:m.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(H.Z,s()(s()({},X),{},{size:"small",checked:!!(a&&a.agent.auto_match_ability==1)}))]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(l.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:E,children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.capability"})})}),E&&E.getFieldValue("users")&&E.getFieldValue("users").map(function(Z,J){return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(l.Z.Item,{className:"mb-0",children:(0,e.jsx)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.capabilityname"})})})}),(0,e.jsx)(l.Z.Item,{className:"mb-[20px]",children:(0,e.jsx)(V.Z,s()(s()({},X),{},{placeholder:m.formatMessage({id:"agent.capabilityname"}),value:Z.name,className:"w-full"}))}),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(R.Z,{className:"text-[#555555] text-xs font-medium",name:m.formatMessage({id:"agent.capabilitydescription"}),title:m.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(l.Z.Item,{className:"w-full mb-[20px]",children:(0,e.jsx)(et,s()(s()({value:Z.content},X),{},{placeholder:m.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},style:{width:"100%"}}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:m.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(l.Z.Item,{className:"mb-[20px]",children:(0,e.jsxs)(D.ZP.Group,s()(s()({value:Z.status,optionType:"button",buttonStyle:"solid"},X),{},{defaultValue:!0,children:[(0,e.jsx)(D.ZP,{value:!0,children:m.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(D.ZP,{value:!1,children:m.formatMessage({id:"agent.capabilitystatus.disable"})})]}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:m.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(l.Z.Item,{className:"mb-0",children:(0,e.jsxs)(D.ZP.Group,s()(s()({defaultValue:0,value:Z.output_format},X),{},{children:[(0,e.jsx)(D.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:m.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(D.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(D.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(D.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))})]})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},at=tt,st=t(13085),it=t(27842),lt=function(){var i=(0,U.useIntl)(),a=(0,g.useRef)(null),E=l.Z.useForm(),m=u()(E,1),Z=m[0],J=l.Z.useForm(),I=u()(J,1),n=I[0],Y=l.Z.useForm(),B=u()(Y,1),d=B[0],k=l.Z.useForm(),_=u()(k,1),Q=_[0],M=(0,g.useState)(!1),O=u()(M,2),P=O[0],b=O[1],C=(0,g.useState)(null),p=u()(C,2),x=p[0],$=p[1],xe=(0,g.useState)(null),se=u()(xe,2),ie=se[0],fe=se[1],q=(0,g.useState)(null),ge=u()(q,2),pe=ge[0],he=ge[1],ve=(0,g.useState)(null),le=u()(ve,2),ne=le[0],re=le[1],je=(0,g.useState)(null),de=u()(je,2),v=de[0],r=de[1],f=(0,g.useState)(null),j=u()(f,2),h=j[0],o=j[1],W=(0,g.useState)("1"),Ze=u()(W,2),w=Ze[0],rt=Ze[1],dt=(0,g.useState)(null),Me=u()(dt,2),ot=Me[0],ct=Me[1],ut=[{key:"1",icon:(0,e.jsx)(Ce.Z,{}),label:i.formatMessage({id:"agent.menu.basicsetup"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:w=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(Oe.Z,{}),label:i.formatMessage({id:"agent.menu.Capacityoutput"}),disabled:x&&x.app.attrs_are_visible===0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:w=="2"?"#1B64F3":"#213044"}},{key:"5",icon:(0,e.jsx)(Te.Z,{}),label:i.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:w=="5"?"#1B64F3":"#213044"}}];(0,g.useEffect)(function(){mt()},[]);var mt=function(){var G=z()(N()().mark(function S(){var A,c,T,we,ye,Ae,Pe;return N()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return b(!0),F.prev=1,A=new URLSearchParams(window.location.search),console.log(A.get("type")),F.next=6,(0,K.ek)(A.get("app_id"),A.get("type"));case 6:c=F.sent,T=c.data,c.data.agent_dataset_relation_list&&c.data.agent_dataset_relation_list.length&&(we=c.data.agent_dataset_relation_list.map(function(y){return y.dataset_id}),fe(we)),$(c.data),o(c.data.agent.publish_status===0&&c.data.is_creator===1?"false":"true"),c.data.agent.publish_status===1&&L.ZP.warning(i.formatMessage({id:"agent.message.listwarning"}),5),Z.setFieldsValue(xt(T.agent.input_variables)),c.data.agent_abilities_list&&(ye=c.data.agent_abilities_list.map(function(y){return y.status==1?s()(s()({},y),{},{status:!0}):s()(s()({},y),{},{status:!1})}),d.setFieldsValue({users:ye[0]?ye:[{agent_ability_id:0,name:"",content:"",status:!0}]}),Ae=T.agent_abilities_list.filter(function(y){return y.output_format!==0}),n.setFieldsValue({users:Ae.map(function(y){return{agent_ability_id:y.agent_ability_id,output_format:y.output_format}})})),T.m_configurations_list&&he(T.m_configurations_list.map(function(y){return{value:y.m_config_id,label:y.m_name}})),re(T.agent.m_config_id),T.agent_abilities_list&&(Pe=T.agent_abilities_list.filter(function(y,bt){return y.status===1}),r(ft(Pe).concat([{value:0,label:i.formatMessage({id:"agent.allability"})}]))),F.next=23;break;case 19:F.prev=19,F.t0=F.catch(1),console.error("Failed to fetch agent details:",F.t0),L.ZP.error(i.formatMessage({id:"agent.message.error"}));case 23:return F.prev=23,b(!1),F.finish(23);case 26:case"end":return F.stop()}},S,null,[[1,19,23,26]])}));return function(){return G.apply(this,arguments)}}(),xt=function(S){console.log(!!S&&!!S.properties,"obj");var A={users:S&&S.properties?Object.values(S.properties).map(function(c){return{name:c.name,type:c.type,content:c.display_name,status:c.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return A},ft=function(S){return S.map(function(A){return{value:A.agent_ability_id,label:A.name}})},gt=function(){Se({key:w,keyPath:[],item:void 0,domEvent:void 0}),history.back()},Se=function(S){try{if(w=="1"){var A=Z.getFieldsValue().users.map(function(c){return{value:"<<".concat(Ie.qX,".inputs.").concat(c.name,">>"),label:c.name}});Q.setFieldsValue(Z.getFieldsValue()),ct(A)}rt(S.key)}catch(c){console.log(c,"error")}};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ae.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:gt,children:[(0,e.jsx)(ze.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:i.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Re.Z,{selectedKeys:[w],onClick:Se,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[w],mode:"inline",items:ut}),x&&x.app.enable_api===1&&x.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:function(){window.open(Ee._n+x.app.api_url)},children:(0,e.jsxs)("div",{className:"mr-[20px]",children:[(0,e.jsx)(Le.Z,{className:"mr-2"}),i.formatMessage({id:"agent.visit"}),"API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)(Ne.Z,{spinning:P,className:"h-full",children:(0,e.jsx)("div",{className:"flex flex-col  ",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[x?x.creator_nickname:""," ",i.formatMessage({id:"agent.agents"})]})]})}),(0,e.jsx)("div",{style:{display:w==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(We,{Ffromref:Z,loading:P,Detaillist:x,repository:ie,Operationbentate:h,Fourthly_config_id:ne,Fourthly_select_list:pe})}),(0,e.jsx)("div",{style:{display:w==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(at,{Detaillist:x,Sformref:d})}),(0,e.jsx)("div",{style:{display:w==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(qe,{Detaillist:x,setDetaillist:$,Fourthly_select_list:pe,Fourthly_config_id:ne,setFourthly_config_id:re,Fourthlyref:Q,Fourthly_abilities_list:v,Operationbentate:h,callwordlist:ot})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(st.Z,{operationbentate:h,data:{abilitiesList:v,detailList:x}})}),w=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(it.ZP,{agent_id:x.agent.agent_id})})]})]})},nt=lt}}]);
