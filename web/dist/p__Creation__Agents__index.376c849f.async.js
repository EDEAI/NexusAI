"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[178],{83510:function(ga,Le,n){n.d(Le,{LK:function(){return _e},bs:function(){return $e},go:function(){return me},uy:function(){return Ue}});var He=n(15009),v=n.n(He),Ve=n(99289),$=n.n(Ve),le=n(47520),t="/v1/apps/apps_list",Ye="/v1/agent/agent_delete/",c="/v1/workflow/workflow_app_delete/",Q="/v1/vector/delete_dataset/",Re="/v1/skill/delete_skill_by_app_id/",We="/v1/apps/apps_create",Te="/v1/apps/app_update/",me=function(){var je=$()(v()().mark(function ce(X){var z;return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,le.ZP)("".concat(t),{method:"GET",data:X});case 2:return z=u.sent,u.abrupt("return",z);case 4:case"end":return u.stop()}},ce)}));return function(X){return je.apply(this,arguments)}}(),_e=function(){var je=$()(v()().mark(function ce(X){var z;return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log(X),u.next=3,X.mode;case 3:if(u.t0=u.sent,u.t0!=1){u.next=8;break}u.t1=(0,le.ZP)("".concat(Ye).concat(X.app_id),{method:"DELETE"}),u.next=9;break;case 8:u.t1=X.mode==2?(0,le.ZP)("".concat(c).concat(X.app_id),{method:"DELETE"}):X.mode==3?(0,le.ZP)("".concat(Q).concat(X.app_id),{method:"DELETE"}):(0,le.ZP)("".concat(Re).concat(X.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return z=u.t1,u.abrupt("return",z);case 11:case"end":return u.stop()}},ce)}));return function(X){return je.apply(this,arguments)}}(),Ue=function(){var je=$()(v()().mark(function ce(X){var z;return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,le.ZP)("".concat(We),{method:"POST",data:X});case 2:return z=u.sent,u.abrupt("return",z);case 4:case"end":return u.stop()}},ce)}));return function(X){return je.apply(this,arguments)}}(),$e=function(){var je=$()(v()().mark(function ce(X){var z;return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,le.ZP)("".concat(Te).concat(X.app_id),{method:"PUT",data:X});case 2:return z=u.sent,u.abrupt("return",z);case 4:case"end":return u.stop()}},ce)}));return function(X){return je.apply(this,arguments)}}()},39873:function(ga,Le,n){var He=n(5574),v=n.n(He),Ve=n(42881),$=n(67294),le=n(85893),t=function(c){var Q=c.children,Re=c.className,We=Re===void 0?"":Re,Te=c.dragDirection,me=Te===void 0?"left":Te,_e=c.minWidth,Ue=_e===void 0?415:_e,$e=c.maxWidth,je=$e===void 0?820:$e,ce=c.minHeight,X=ce===void 0?200:ce,z=c.maxHeight,Z=z===void 0?800:z,u=c.defaultWidth,ve=u===void 0?415:u,Je=c.defaultHeight,Pe=Je===void 0?300:Je,l=c.onChange,na=(0,$.useState)(ve),ze=v()(na,2),Ce=ze[0],Qe=ze[1],ia=(0,$.useState)(Pe),qe=v()(ia,2),la=qe[0],De=qe[1],oa=(0,$.useCallback)(function(Se,ke){Qe(Se),ke&&De(ke),l==null||l(Se,ke)},[Qe,De,l]),Be=(0,Ve.W)({direction:["left","right"].includes(me)?"horizontal":"vertical",triggerDirection:me,minWidth:Ue,maxWidth:je,minHeight:X,maxHeight:Z,onResize:oa}),Ie=Be.triggerRef,we=Be.containerRef;return(0,le.jsxs)("div",{ref:we,style:{width:["left","right"].includes(me)?"".concat(Ce,"px"):void 0,height:["top","bottom"].includes(me)?"".concat(la,"px"):void 0},className:"flex flex-col p-4 shadow-lg rounded-md border border-blue-300 bg-white z-10 wrapPanel ".concat(We),children:[me==="left"&&(0,le.jsx)("div",{ref:Ie,className:"absolute top-1/2 -translate-y-1/2 -left-2 w-3 h-6 cursor-col-resize resize-x",children:(0,le.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),me==="right"&&(0,le.jsx)("div",{ref:Ie,className:"absolute top-1/2 -translate-y-1/2 -right-2 flex justify-end w-3 h-6 cursor-col-resize resize-x",children:(0,le.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),me==="top"&&(0,le.jsx)("div",{ref:Ie,className:"absolute left-1/2 -translate-x-1/2 -top-2 h-3 w-6 cursor-row-resize resize-y",children:(0,le.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),me==="bottom"&&(0,le.jsx)("div",{ref:Ie,className:"absolute left-1/2 -translate-x-1/2 -bottom-2 h-3 w-6 cursor-row-resize resize-y",children:(0,le.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),Q]})};Le.Z=(0,$.memo)(t)},67862:function(ga,Le,n){n.r(Le),n.d(Le,{default:function(){return Nt}});var He=n(15009),v=n.n(He),Ve=n(99289),$=n.n(Ve),le=n(97857),t=n.n(le),Ye=n(5574),c=n.n(Ye),Q=n(11551),Re=n(83510),We=n(47520),Te=n(29432),me=n(10759),_e=n(32332),Ue=n(2068),$e=n(89035),je=n(15360),ce=n(82826),X=n(69243),z=n(35312),Z=n(40741),u=n(45360),ve=n(28036),Je=n(50136),Pe=n(74330),l=n(67294),na=n(13769),ze=n.n(na),Ce=n(92939),Qe=n(64599),ia=n.n(Qe),qe=n(73445),la=n(42237),De=(0,qe.Ue)(function(w){return{models:[],loading:!1,error:null,initialized:!1,fetchModels:function(){var s=$()(v()().mark(function a(){var p;return v()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,w({loading:!0}),f.next=4,(0,la.fZ)();case 4:if(p=f.sent,p.code!==0){f.next=9;break}w({models:Array.isArray(p.data.data)?p.data.data:[],initialized:!0}),f.next=10;break;case 9:throw new Error(p.message||"Failed to fetch models");case 10:f.next=16;break;case 12:f.prev=12,f.t0=f.catch(0),w({error:f.t0.message}),u.ZP.error("Failed to fetch models");case 16:return f.prev=16,w({loading:!1}),f.finish(16);case 19:case"end":return f.stop()}},a,null,[[0,12,16,19]])}));function d(){return s.apply(this,arguments)}return d}()}}),oa=function(){var s=De(function(f){return f.models}),d=De(function(f){return f.loading}),a=De(function(f){return f.initialized}),p=De(function(f){return f.fetchModels});(0,l.useEffect)(function(){a||p()},[a,p]);var K=(0,l.useMemo)(function(){var f=Array.isArray(s)?s:[],A=f.map(function(b){return{label:b.supplier_name,options:Array.isArray(b.model_list)?b.model_list.map(function(ie){return{label:ie.model_name,value:ie.model_config_id}}):[]}}),G,C=ia()(f),k;try{for(C.s();!(k=C.n()).done;){var re=k.value;if(Array.isArray(re.model_list)){var _=re.model_list.find(function(b){return b.model_default_used===1});if(_){G=_.model_config_id;break}}}}catch(b){C.e(b)}finally{C.f()}return{options:A,defaultValue:G}},[s]);return t()(t()({},K),{},{loading:d})},Be=n(82061),Ie=n(51042),we=n(26915),Se=n(72269),ke=n(34041),be=n(78045),e=n(85893),Ra=["key","name"],$a=we.Z.TextArea,za=function(s){var d=s.FirstValue,a=s.Detaillist,p=s.setDetaillist,K=s.repository,f=s.setRepository,A=s.Operationbentate,G=s.Ffromref,C=s.setFourthly_config_id,k=s.Fourthly_config_id,re=s.Fourthly_select_list,_=s.Newproperties,b=s.setNewproperties,ie=s.pageKeyfun,q=s.firstjudgingcondition,Y=s.setAgentmunudisabled,J=s.agentmenudisabled,m=(0,z.useIntl)(),N=(0,l.useState)([]),ee=c()(N,2),B=ee[0],O=ee[1],fe=(0,l.useState)({agent_id:0,data:{is_public:1,enable_api:0,obligations:null,input_variables:{},dataset_ids:[],attrs_are_visible:1}}),ae=c()(fe,2),y=ae[0],W=ae[1];(0,l.useEffect)(function(){he()},[]);var U=function(r){C(r)},te=function(r){W(t()(t()({},y),{},{data:t()(t()({},y.data),{},{obligations:r.target.value})})),p(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{obligations:r.target.value})}))},ue=function(r,o){var i=new Set;return r.some(function(M){var P=M[o];return i.has(P)?i.add(P):i.add(P)&&!1})},ye=function(r){p(t()(t()({},a),{},{app:t()(t()({},a.app),{},{is_public:r?1:0})})),W(t()(t()({},y),{},{data:t()(t()({},y.data),{},{is_public:r?1:0})}))},H=function(r){p(t()(t()({},a),{},{app:t()(t()({},a.app),{},{enable_api:r?1:0})})),W(t()(t()({},y),{},{data:t()(t()({},y.data),{},{enable_api:r?1:0})}))},ge=function(r){p(t()(t()({},a),{},{app:t()(t()({},a.app),{},{attrs_are_visible:r?1:0})})),W(t()(t()({},y),{},{data:t()(t()({},y.data),{},{attrs_are_visible:r?1:0})}))},xe=function(r){p(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{allow_upload_file:r?1:0})}))},pe=function(r){W(t()(t()({},y),{},{data:t()(t()({},y.data),{},{dataset_ids:r})})),f(r)},he=function(){var F=$()(v()().mark(function r(){var o;return v()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,Q.zl)();case 2:o=M.sent,O(o.data.data.map(function(P){return{value:P.dataset_id,label:P.name}}));case 4:case"end":return M.stop()}},r)}));return function(){return F.apply(this,arguments)}}(),Ne=function(){var F=$()(v()().mark(function r(){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:q()||(ie("2"),Y(t()(t()({},J),{},{first:!1,second:!1})));case 1:case"end":return i.stop()}},r)}));return function(){return F.apply(this,arguments)}}(),Ae=function(r){p(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{default_output_format:r.target.value})}))},se=oa(),j=se.options,L=se.defaultValue;return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:m.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(Z.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:G,children:[(0,e.jsx)(Z.Z.List,{name:"users",children:function(r,o){var i,M=o.add,P=o.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Z.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:m.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:A==="true"?m.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(Z.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:m.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})}),(0,e.jsx)(Z.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(Ce.Z,{className:"font-medium",name:m.formatMessage({id:"agent.teamvisibility"}),title:m.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(Se.Z,{size:"small",onChange:ye,checked:!!(a&&a.app.is_public===1)})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:m.formatMessage({id:"agent.attrVisible"})}),(0,e.jsx)(Se.Z,{size:"small",onChange:ge,checked:a&&a.app.attrs_are_visible===1})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:m.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(Se.Z,{size:"small",onChange:H,checked:a&&a.app.enable_api===1,disabled:(a==null||(i=a.app)===null||i===void 0?void 0:i.publish_status)!==1})]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:m.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(Se.Z,{size:"small",onChange:xe,checked:!!(a&&a.agent.allow_upload_file==1)})]})]})}),(0,e.jsx)(Z.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:[(0,e.jsx)("span",{className:"text-[#E80000]",children:"* "}),m.formatMessage({id:"agent.LLMmodel"})]}),(0,e.jsx)(ke.Z,{placeholder:m.formatMessage({id:"agent.pleaseselect"}),style:{width:270},value:k==0?m.formatMessage({id:"agent.pleaseselect"}):k,variant:"filled",onChange:U,options:j})]})}),(0,e.jsx)(Z.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(Ce.Z,{className:"font-medium",required:!0,name:m.formatMessage({id:"agent.functiondescription"}),title:m.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)($a,{onChange:te,value:a&&a.agent&&a.agent.obligations,placeholder:"Agent".concat(m.formatMessage({id:"agent.functiondescription"})),autoSize:{minRows:8,maxRows:10}})]})}),(0,e.jsx)("div",{className:"mb-[11px] text-xs font-bold flex justify-between items-center",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(Ce.Z,{className:"font-medium",required:!0,name:m.formatMessage({id:"agent.inputvariable"}),title:m.formatMessage({id:"agent.explain.inputvariable"})})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-[10px]",children:m.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:m.formatMessage({id:"agent.variable.display"})}),(0,e.jsx)("div",{className:"w-36 mr-[100px]",children:m.formatMessage({id:"agent.variable.type"})}),(0,e.jsx)("div",{className:"w-14 mr-[90px]",children:m.formatMessage({id:"agent.variable.required"})}),(0,e.jsx)("div",{children:m.formatMessage({id:"agent.variable.operation"})})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[r.map(function(T){var D=T.key,R=T.name,I=ze()(T,Ra);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(Z.Z.Item,t()(t()({className:"m-0"},I),{},{name:[R,"name"],rules:[{required:!0,message:m.formatMessage({id:"agent.rules.name"})},{pattern:/^[a-zA-Z0-9_]+$/,message:m.formatMessage({id:"agent.rules.verifydescription"})}],children:(0,e.jsx)(we.Z,{placeholder:m.formatMessage({id:"agent.variable.name"}),className:"mr-5"})})),(0,e.jsx)(Z.Z.Item,t()(t()({className:"m-0"},I),{},{name:[R,"content"],rules:[{required:!0,message:m.formatMessage({id:"agent.rules.displayname"})}],children:(0,e.jsx)(we.Z,{placeholder:m.formatMessage({id:"agent.variable.display"}),className:"mr-5"})})),(0,e.jsx)(Z.Z.Item,t()(t()({className:"w-36 mr-[110px] m-0"},I),{},{name:[R,"type"],children:(0,e.jsx)(ke.Z,{defaultValue:"string",options:[{value:"string",label:"string"},{value:"number",label:"number"}]})})),(0,e.jsx)(Z.Z.Item,t()(t()({className:"w-12 mr-[100px] m-0"},I),{},{name:[R,"status"],children:(0,e.jsx)(Se.Z,{size:"small"})})),G&&G.getFieldsValue().users.length>1?(0,e.jsx)(Z.Z.Item,{className:"m-0",children:(0,e.jsx)(Be.Z,{onClick:function(){return P(R)}})}):null]})}),(0,e.jsxs)("div",{onClick:function(){return M()},className:"w-full p-2 mt-4  flex items-center gap-1 justify-center border  border-transparent  hover:border-dashed  hover:border-[#1B64F3] hover:text-[#1B64F3] cursor-pointer bg-[#F7F7F7] rounded-lg mb-4",children:[(0,e.jsx)(Ie.Z,{})," ",m.formatMessage({id:"agent.add"})]})]}),(0,e.jsxs)(Z.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(Ce.Z,{className:"font-medium",name:m.formatMessage({id:"agent.associatedknowledgebase"}),title:m.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(ke.Z,{size:"large",mode:"tags",style:{width:"100%"},placeholder:m.formatMessage({id:"agent.pleaseselect"}),value:K,onChange:pe,options:B})]}),(0,e.jsx)(Z.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",m.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(be.ZP.Group,{value:a&&a.agent.default_output_format,onChange:function(D){Ae(D)},children:[(0,e.jsx)(be.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(be.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(be.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})]})})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ve.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){Ne()},children:m.formatMessage({id:"agent.btn.nextstep"})}),(0,e.jsxs)(ve.ZP,{onClick:function(){history.back()},children:[" ",m.formatMessage({id:"agent.btn.back"})]})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ba=za,Oa=n(49677),Ha=n.n(Oa),Va=n(92485),Wa=n(85877),da=n(39944),ea=n(71471),Ua=["key","name"],Xt=ea.Z.Title,Yt=we.Z.TextArea,Jt=we.Z.Search,Ga=function(s){var d=s.handleBack,a=s.Detaillist,p=s.setDetaillist,K=s.Fourthly_select_list,f=s.setFourthly_config_id,A=s.Fourthly_config_id,G=s.Fourthlyref,C=s.Fourthly_abilities_list,k=s.Operationbentate,re=s.callwordlist,_=s.newagentid,b=(0,z.useIntl)(),ie=(0,l.useState)(0),q=c()(ie,2),Y=q[0],J=q[1],m=(0,l.useState)(""),N=c()(m,2),ee=N[0],B=N[1],O=(0,l.useState)(""),fe=c()(O,2),ae=fe[0],y=fe[1],W=(0,l.useState)(!1),U=c()(W,2),te=U[0],ue=U[1],ye=function(j){var L={user:{value:pe(j)}};B(new da.z(L))},H=function(j){var L={user:{value:j.target.value}};B(new da.z(L))},ge=function(j){J(j)},xe=function(j){var L=j.users.filter(function(o,i){return o.type=="number"&&!Number(o.value)&&!!o.value});if(!ee.user)u.ZP.warning(b.formatMessage({id:"agent.message.warning.callword"}));else if(L.length>0)u.ZP.warning(b.formatMessage({id:"agent.message.warning.datatype"}));else{ue(!0);var F=new me.Kr("input","","");j.users.forEach(function(o){var i=new me._w(o.name,o.type?o.type:"string",o.type=="string"?o.value:Number(o.value),o.content,o.status);F.addProperty(o.name,i)});var r={agent_id:_||a.agent.agent_id,ability_id:Y,input_dict:F,prompt:ee};he(r)}},pe=function se(j){return j.map(function(L){return L.type==="mention"?L.id:L.children?se(L.children):L.text}).join("")},he=function(j){(0,Q.LH)(j).then(function(L){u.ZP.success(b.formatMessage({id:"agent.message.success.runpublish"})),y(L.data.outputs.text),ue(!1)}).catch(function(L){ue(!1)})},Ne=function(){var se=$()(v()().mark(function j(){var L;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Q.Dh)(_||a.agent.agent_id);case 2:L=r.sent,L.code==0?u.ZP.success(b.formatMessage({id:"agent.message.success.publish"})):u.ZP.error(b.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return r.stop()}},j)}));return function(){return se.apply(this,arguments)}}(),Ae=function(){var se=$()(v()().mark(function j(){return v()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:z.history.push("/Agents?app_id=".concat(a.app.app_id,"&type=false")),location.reload();case 2:case"end":return F.stop()}},j)}));return function(){return se.apply(this,arguments)}}();return(0,l.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:b.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:b.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(ke.Z,{placeholder:b.formatMessage({id:"agent.pleaseselect"}),defaultValue:b.formatMessage({id:"agent.allability"}),style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:ge,options:C})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(Z.Z,{name:"dynamic_form_nest_item",onFinish:xe,style:{width:"100%"},autoComplete:"off",form:G,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:b.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(Z.Z.List,{name:"users",children:function(j,L){return Ha()(L),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"mr-5 ml-2.5",children:b.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"",children:b.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:j.map(function(F){var r=F.key,o=F.name,i=ze()(F,Ua);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(Z.Z.Item,t()(t()({},i),{},{name:[o,"content"],children:(0,e.jsx)(we.Z,{className:"mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(Z.Z.Item,t()(t()({},i),{},{name:[o,"value"],rules:[{required:!!(G.getFieldsValue()&&G.getFieldsValue().users[r].status==!0),message:b.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(we.Z,{placeholder:G.getFieldsValue()&&G.getFieldsValue().users[r].status==!0?b.formatMessage({id:"agent.variable.required.value"}):b.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(Z.Z.Item,{rules:[{required:!0,message:b.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:b.formatMessage({id:"agent.runpreview"})}),(0,e.jsx)(Pe.Z,{spinning:te,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:ae?(0,e.jsx)(Va.Z,{language:"python3",value:ae&&JSON.stringify(ae)}):null}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Wa.Z,{onChange:function(j){ye(j)},options:re})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ve.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})})]})]})}),(0,e.jsx)("div",{className:"w-28",children:(a==null?void 0:a.agent.publish_status)===1&&(a==null?void 0:a.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ve.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:Ae,children:b.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ve.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:k!="false",onClick:Ne,children:b.formatMessage({id:"agent.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},Ka=Ga,Xa=["key","name"],Ya=we.Z.TextArea,Ja=function(s){var d=s.SecondValue,a=s.handleBack,p=s.Detaillist,K=s.setDetaillist,f=s.Sformref,A=s.Operationbentate,G=s.pageKeyfun,C=s.secondjudgingcondition,k=s.SkillMenuClick,re=s.agentupdata,_=(0,z.useIntl)(),b=u.ZP.useMessage(),ie=c()(b,2),q=ie[0],Y=ie[1],J=(0,l.useState)({auto_match_ability:0,agent_abilities:[{agent_ability_id:0,name:"string",content:"string",status:0}]}),m=c()(J,2),N=m[0],ee=m[1];(0,l.useEffect)(function(){});var B=function(y){if(y.users.length==1&&(!y.users[0].content&&y.users[0].name||y.users[0].content&&!y.users[0].name))return u.ZP.warning(_.formatMessage({id:"agent.message.warning.selectknowledgebase"}));var W=y.users.map(function(te){return t()(t()({},te),{},{status:te.status?1:2,agent_ability_id:te.agent_ability_id?te.agent_ability_id:0})}),U={agent_id:p.agent.agent_id,data:{auto_match_ability:p.agent.auto_match_ability,agent_abilities:y.users.length==1&&!y.users[0].content&&!y.users[0].name?[]:W}};A=="false"&&O(),d(t()({},N))},O=function(){var ae=$()(v()().mark(function y(){return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:C()||re();case 1:case"end":return U.stop()}},y)}));return function(){return ae.apply(this,arguments)}}(),fe=function(y){K(t()(t()({},p),{},{agent:t()(t()({},p.agent),{},{auto_match_ability:y?1:0})}))};return(0,e.jsxs)("div",{style:{height:"100%"},className:"w-full flex-1",children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:_.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(Ce.Z,{name:_.formatMessage({id:"agent.automatch"}),title:_.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(Se.Z,{size:"small",checked:!!(p&&p.agent.auto_match_ability==1),onChange:fe})]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(Z.Z,{name:"dynamic_form_nest_item",onFinish:B,style:{width:"100%"},autoComplete:"off",form:f,children:[(0,e.jsx)(Z.Z.List,{name:"users",children:function(y,W){var U=W.add,te=W.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:" text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.capability"})})}),y.map(function(ue){var ye=ue.key,H=ue.name,ge=ze()(ue,Xa);return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(Z.Z.Item,{className:"mb-0",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:_.formatMessage({id:"agent.capabilityname"})}),(0,e.jsxs)("div",{children:[" ",(0,e.jsx)(Be.Z,{onClick:function(){return te(H)}})]})]})}),(0,e.jsx)(Z.Z.Item,t()(t()({className:"mb-[20px]"},ge),{},{name:[H,"name"],rules:[{required:y.length!==1,message:_.formatMessage({id:"agent.capabilityname"})}],children:(0,e.jsx)(we.Z,{placeholder:_.formatMessage({id:"agent.capabilityname"}),maxLength:50,className:"w-full"})})),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(Ce.Z,{className:"text-[#555555] text-xs font-medium",name:_.formatMessage({id:"agent.capabilitydescription"}),title:_.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(Z.Z.Item,t()(t()({className:"w-full mb-[20px]"},ge),{},{name:[H,"content"],rules:[{required:y.length!==1,message:_.formatMessage({id:"agent.capabilitydescription"})}],children:(0,e.jsx)(Ya,{placeholder:_.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},className:"w-full"})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:_.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(Z.Z.Item,t()(t()({className:"mb-[20px]"},ge),{},{name:[H,"status"],children:(0,e.jsxs)(be.ZP.Group,{optionType:"button",buttonStyle:"solid",defaultValue:!0,children:[(0,e.jsx)(be.ZP,{value:!0,children:_.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(be.ZP,{value:!1,children:_.formatMessage({id:"agent.capabilitystatus.disable"})})]})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:_.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(Z.Z.Item,{className:"mb-0",name:[H,"output_format"],children:(0,e.jsxs)(be.ZP.Group,{defaultValue:0,children:[(0,e.jsx)(be.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:_.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(be.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(be.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(be.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})})]})}),(0,e.jsxs)("div",{onClick:function(){return U()},className:"w-full p-6  flex items-center gap-1 justify-center border  border-transparent  hover:border-dashed  hover:border-[#1B64F3] hover:text-[#1B64F3] cursor-pointer bg-[#F7F7F7] rounded-lg mb-4",children:[(0,e.jsx)(Ie.Z,{})," ",_.formatMessage({id:"agent.addAbility"})]})]})}}),(0,e.jsxs)("div",{children:[(0,e.jsx)(ve.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){O()},children:_.formatMessage({id:"agent.btn.savedebug"})}),(0,e.jsx)(ve.ZP,{onClick:function(){history.back()},children:_.formatMessage({id:"agent.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Qa=Ja,qa=n(19632),aa=n.n(qa),et=function(s){var d=s.children,a=s.onLoadMore,p=s.onLoadPrevious,K=s.hasMore,f=s.hasPrevious,A=f===void 0?!1:f,G=s.threshold,C=G===void 0?100:G,k=s.className,re=k===void 0?"":k,_=s.loadingComponent,b=_===void 0?(0,e.jsx)(Pe.Z,{size:"small"}):_,ie=s.errorComponent,q=s.initialScrollPosition,Y=q===void 0?"bottom":q,J=s.preserveScrollPosition,m=J===void 0?!0:J,N=s.scrollBehavior,ee=N===void 0?"smooth":N,B=(0,z.useIntl)(),O=(0,l.useRef)(null),fe=(0,l.useState)(!1),ae=c()(fe,2),y=ae[0],W=ae[1],U=(0,l.useState)(!1),te=c()(U,2),ue=te[0],ye=te[1],H=(0,l.useState)(null),ge=c()(H,2),xe=ge[0],pe=ge[1],he=(0,l.useRef)(!1),Ne=(0,l.useRef)(!0),Ae=function(){O.current&&(O.current.scrollTop=O.current.scrollHeight)};(0,l.useEffect)(function(){Ne.current&&O.current&&(O.current.scrollTop=O.current.scrollHeight,Ne.current=!1)},[]),(0,l.useEffect)(function(){var j=O.current;if(j){var L=function(){var r=$()(v()().mark(function o(){var i,M,P,T,D;return v()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!he.current){I.next=2;break}return I.abrupt("return");case 2:if(i=j.scrollTop,M=j.scrollHeight,P=j.clientHeight,!(A&&!ue&&i<C)){I.next=16;break}return I.prev=4,he.current=!0,ye(!0),T=j.scrollHeight,D=j.scrollTop,I.next=11,p==null?void 0:p();case 11:requestAnimationFrame(function(){var oe=j.scrollHeight,Ge=oe-T;j.scrollTop=D+Ge});case 12:return I.prev=12,he.current=!1,ye(!1),I.finish(12);case 16:if(!(K&&!y&&M-i-P<C)){I.next=27;break}return I.prev=17,he.current=!0,W(!0),I.next=22,a==null?void 0:a();case 22:j.scrollTop=j.scrollHeight;case 23:return I.prev=23,he.current=!1,W(!1),I.finish(23);case 27:case"end":return I.stop()}},o,null,[[4,,12,16],[17,,23,27]])}));return function(){return r.apply(this,arguments)}}(),F=se(L,150);return j.addEventListener("scroll",F),function(){return j.removeEventListener("scroll",F)}}},[K,A,a,p,C,y,ue]);function se(j,L){var F;return function(){for(var r=this,o=arguments.length,i=new Array(o),M=0;M<o;M++)i[M]=arguments[M];clearTimeout(F),F=setTimeout(function(){return j.apply(r,i)},L)}}return(0,e.jsxs)("div",{ref:O,className:"relative overflow-y-auto ".concat(re),children:[(0,e.jsxs)("div",{className:"flex flex-col-reverse min-h-full",children:[ue&&(0,e.jsx)("div",{className:"sticky top-0 left-0 right-0 flex justify-center py-2 bg-white/80 z-10",children:b}),d,y&&(0,e.jsx)("div",{className:"sticky bottom-0 left-0 right-0 flex justify-center py-2 bg-white/80 z-10",children:b})]}),xe&&(0,e.jsx)("div",{className:"sticky top-0 w-full text-center py-2 text-red-500",children:ie||xe.message})]})},at=et,pa=n(55927),tt=n(82114),st=n(27496),rt=n(34994),nt=n(64317),it=n(90672),lt=n(77598),ot=n(85576),dt=n(22683),ut=n(97807),ct=(0,l.memo)(function(w){var s=w.message;return(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)("div",{className:"max-w-[70%] rounded-lg p-3 bg-blue-100 text-blue-900",children:s.message})})}),mt=(0,l.memo)(function(w){var s,d=w.message,a=w.detailList,p=w.abilitiesList,K=(0,z.useIntl)(),f=p.find(function(A){return A.value===d.ability_id});return(0,e.jsx)("div",{className:"flex justify-start pb-4",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-sm font-bold mb-2",children:[a==null||(s=a.app)===null||s===void 0?void 0:s.name," ",(f==null?void 0:f.label)&&(0,e.jsxs)("span",{className:"text-gray-500 font-normal text-xs",children:["(",f==null?void 0:f.label,")"]})]}),(0,e.jsxs)("div",{className:"max-w-[90%] rounded-lg  relative bg-white text-gray-900 border border-gray-200",children:[d.message&&(0,e.jsx)("div",{className:"p-3",children:(0,e.jsx)(dt.U,{rehypePlugins:[ut.Z],children:d.message})}),d.error&&(0,e.jsxs)("div",{className:"p-3 text-red-500",children:[(0,e.jsx)("div",{children:K.formatMessage({id:"agent.chat.error.message"})}),d.error]}),(0,e.jsx)("div",{className:"absolute w-full mt-1",children:(0,e.jsxs)("div",{className:"text-xs text-gray-500 flex justify-between",children:[(0,e.jsx)("div",{children:d.created_time}),(0,e.jsxs)("div",{children:[K.formatMessage({id:"agent.chat.tokens"}),":"," ",(0,e.jsx)("span",{className:"text-blue-500",children:d.total_tokens||0})]})]})})]})]})})}),ft=(0,l.memo)(function(w){var s,d,a,p=(0,l.useState)([]),K=c()(p,2),f=K[0],A=K[1],G=(0,l.useState)(!0),C=c()(G,2),k=C[0],re=C[1],_=(0,l.useState)(1),b=c()(_,2),ie=b[0],q=b[1],Y=(0,l.useState)(!1),J=c()(Y,2),m=J[0],N=J[1],ee=(0,l.useState)(!1),B=c()(ee,2),O=B[0],fe=B[1],ae=(0,l.useState)(!1),y=c()(ae,2),W=y[0],U=y[1],te=(0,l.useRef)(),ue=(0,l.useRef)(null),ye=(0,l.useRef)(null),H=(0,z.useIntl)(),ge=(0,pa.Z)(function(r){return r.getTypedMessages("chat_message_llm_return")}),xe=(0,pa.Z)(function(r){return r.getTypedLastMessage("chat_message_llm_return")}),pe=!!((s=w.data)!==null&&s!==void 0&&(s=s.detailList)!==null&&s!==void 0&&(s=s.agent)!==null&&s!==void 0&&s.agent_id);(0,l.useEffect)(function(){console.log(m,W)},[m,W]);var he=function(){var o;(o=ue.current)===null||o===void 0||o.scrollIntoView({behavior:"smooth"})};(0,lt.Z)(function(){if(xe){var r=t()(t()({},xe.data),{},{id:xe.data.message_id});ge.length>0&&(A(function(o){return[].concat(aa()(o),[r])}),setTimeout(he,100))}},[ge]);var Ne=function(){var r=$()(v()().mark(function o(i){var M,P,T,D,R,I,oe,Ge,ua;return v()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(console.log(i),T=te.current.getFieldsValue(),D=w.data.detailList.agent.agent_id,R=w.data.detailList.agent.input_variables,I=T.ability_id,oe=new da.z({user:{value:T.content}}),(M=i.content)!==null&&M!==void 0&&M.trim()){Me.next=8;break}return Me.abrupt("return");case 8:return Ge={id:Date.now(),content:i.content,isUser:!0,ability_id:I,agent_id:D,agent_run_id:0,completion_tokens:0,created_time:new Date().toISOString(),message:T.content,prompt_tokens:0,total_tokens:0},Me.next=11,(0,Q.CY)({agent_id:D,input_dict:R,ability_id:I,prompt:oe});case 11:ua=Me.sent,A([].concat(aa()(f),[Ge])),(P=te.current)===null||P===void 0||P.resetFields(["content"]),setTimeout(he,100);case 15:case"end":return Me.stop()}},o)}));return function(i){return r.apply(this,arguments)}}(),Ae=function(){var r=$()(v()().mark(function o(){var i,M,P;return v()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,U(!0),D.next=4,(0,Q.CU)((i=w.data)===null||i===void 0||(i=i.detailList)===null||i===void 0||(i=i.agent)===null||i===void 0?void 0:i.agent_id,1);case 4:P=D.sent,(M=P.data)!==null&&M!==void 0&&M.list&&(A(P.data.list),re(P.data.total_pages>1),q(1)),D.next=11;break;case 8:D.prev=8,D.t0=D.catch(0),console.error("Failed to fetch initial messages:",D.t0);case 11:return D.prev=11,U(!1),D.finish(11);case 14:case"end":return D.stop()}},o,null,[[0,8,11,14]])}));return function(){return r.apply(this,arguments)}}(),se=function(){var r=$()(v()().mark(function o(){var i,M,P,T;return v()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(m||!((i=w.data)!==null&&i!==void 0&&(i=i.detailList)!==null&&i!==void 0&&(i=i.agent)!==null&&i!==void 0&&i.agent_id))){R.next=2;break}return R.abrupt("return");case 2:return R.prev=2,N(!0),P=ie+1,R.next=7,(0,Q.CU)(w.data.detailList.agent.agent_id,P);case 7:T=R.sent,((M=T.data)===null||M===void 0||(M=M.list)===null||M===void 0?void 0:M.length)>0?(A(function(I){return[].concat(aa()(T.data.list),aa()(I))}),q(P),re(P<T.data.total_pages)):re(!1),R.next=15;break;case 11:R.prev=11,R.t0=R.catch(2),console.error("Failed to load more messages:",R.t0),re(!1);case 15:return R.prev=15,N(!1),R.finish(15);case 18:case"end":return R.stop()}},o,null,[[2,11,15,18]])}));return function(){return r.apply(this,arguments)}}(),j=function(){var r=$()(v()().mark(function o(){var i;return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!(!((i=w.data)!==null&&i!==void 0&&(i=i.detailList)!==null&&i!==void 0&&(i=i.agent)!==null&&i!==void 0&&i.agent_id)||O)){P.next=2;break}return P.abrupt("return");case 2:ot.Z.confirm({title:H.formatMessage({id:"agent.chat.clear.memory.confirm.title"}),icon:(0,e.jsx)(tt.Z,{}),content:H.formatMessage({id:"agent.chat.clear.memory.confirm.content"}),okText:H.formatMessage({id:"agent.chat.clear.memory.confirm.ok"}),cancelText:H.formatMessage({id:"agent.chat.clear.memory.confirm.cancel"}),onOk:function(){var T=$()(v()().mark(function R(){return v()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,fe(!0),oe.next=4,(0,Q.Nj)(w.data.detailList.agent.agent_id,f[f.length-1].id);case 4:u.ZP.success(H.formatMessage({id:"agent.chat.clear.memory.success"})),oe.next=10;break;case 7:oe.prev=7,oe.t0=oe.catch(0),console.error("Failed to clear context memory:",oe.t0);case 10:return oe.prev=10,fe(!1),oe.finish(10);case 13:case"end":return oe.stop()}},R,null,[[0,7,10,13]])}));function D(){return T.apply(this,arguments)}return D}()});case 3:case"end":return P.stop()}},o)}));return function(){return r.apply(this,arguments)}}();(0,l.useEffect)(function(){var r;(r=w.data)!==null&&r!==void 0&&(r=r.detailList)!==null&&r!==void 0&&(r=r.agent)!==null&&r!==void 0&&r.agent_id&&Ae()},[(d=w.data)===null||d===void 0||(d=d.detailList)===null||d===void 0||(d=d.agent)===null||d===void 0?void 0:d.agent_id]),(0,l.useEffect)(function(){!W&&f.length>0&&he()},[W]);var L=function(){return(0,e.jsxs)("div",{className:"flex items-center justify-center py-2 bg-white/80",children:[(0,e.jsx)(Pe.Z,{size:"small"}),(0,e.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:H.formatMessage({id:"agent.chat.loading.more"})})]})};if(W)return(0,e.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,e.jsx)(Pe.Z,{})});var F=function(){var r=$()(v()().mark(function o(){var i,M;return v()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,Q.Dh)((i=w.data)===null||i===void 0||(i=i.detailList)===null||i===void 0||(i=i.agent)===null||i===void 0?void 0:i.agent_id);case 2:M=T.sent,M.code==0?u.ZP.success(H.formatMessage({id:"agent.message.success.publish"})):u.ZP.error(H.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return T.stop()}},o)}));return function(){return r.apply(this,arguments)}}();return(0,e.jsx)("div",{className:"!h-[calc(100vh-65px)] p-4 !pb-0 box-border",children:(0,e.jsxs)(rt.A,{formRef:te,submitter:!1,onFinish:Ne,layout:"horizontal",initialValues:{ability_id:0},style:{height:"calc(100vh - 57px - 16px)"},className:"m-0 flex flex-col overflow-y-auto ",children:[(0,e.jsxs)("div",{className:"pb-4 flex gap-[10px]",style:{paddingBottom:"16px"},children:[(0,e.jsx)(nt.Z,{label:H.formatMessage({id:"agent.selectivepower"}),name:"ability_id",options:(a=w.data)===null||a===void 0?void 0:a.abilitiesList,fieldProps:{placeholder:H.formatMessage({id:"agent.pleaseselect"}),disabled:!pe},formItemProps:{className:"mb-0 flex-1"}}),(0,e.jsx)(ve.ZP,{type:"primary",disabled:!pe,onClick:F,className:" min-w-40",children:H.formatMessage({id:"agent.publish"})})]}),(0,e.jsxs)("div",{className:"bg-gray-50 rounded-md border border-[#ccc] flex-1 overflow-y-auto flex flex-col",children:[(0,e.jsx)("div",{className:"flex-1 overflow-y-auto ",ref:ye,children:(0,e.jsx)(at,{className:"h-full",onLoadPrevious:se,hasPrevious:k,hasMore:!1,threshold:50,loadingComponent:(0,e.jsx)(L,{}),children:(0,e.jsxs)("div",{className:"px-4 py-2 space-y-4",children:[f.map(function(r){var o,i;return r.agent_run_id===0?(0,e.jsx)(ct,{message:r},r.id):(0,e.jsx)(mt,{detailList:w==null||(o=w.data)===null||o===void 0?void 0:o.detailList,abilitiesList:w==null||(i=w.data)===null||i===void 0?void 0:i.abilitiesList,message:r},r.id)}),(0,e.jsx)("div",{ref:ue})]})})}),(0,e.jsxs)("div",{className:"border-t border-gray-200  p-4 relative",children:[(0,e.jsx)("div",{style:{top:"-40px"},className:"flex items-center mb-2 justify-end absolute !-top-10 right-3",children:(0,e.jsx)(ve.ZP,{icon:(0,e.jsx)(Be.Z,{}),loading:O,disabled:!pe,onClick:j,children:H.formatMessage({id:"agent.chat.clear.memory"})})}),(0,e.jsxs)("div",{className:"flex items-center p-[12px] gap-[10px] box-border border bg-white rounded-[8px]",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsx)(it.Z,{name:"content",placeholder:pe?H.formatMessage({id:"agent.chat.input.placeholder"}):H.formatMessage({id:"agent.chat.input.disabled"}),fieldProps:{autoSize:{minRows:1,maxRows:4},variant:"borderless",onPressEnter:function(o){if(!o.shiftKey&&pe){var i;o.preventDefault(),(i=te.current)===null||i===void 0||i.submit()}},className:"",disabled:!pe},formItemProps:{className:"mb-0"},className:"mb-0"})}),(0,e.jsx)(ve.ZP,{onClick:function(){var o;return(o=te.current)===null||o===void 0?void 0:o.submit()},type:"primary",disabled:!pe,className:"min-w-[30px] h-[30px] flex items-center justify-center cursor-pointer rounded-[6px]",icon:(0,e.jsx)(st.Z,{})})]})]})]})]})})}),gt=n(29608),pt=n(32592),vt=n(28508),ht=n(29933),xt=n(3917),bt=n(66309),Oe=n(26412),va=n(12845),yt=n(39873),jt=(0,l.memo)(function(w){var s,d=w.data,a=w.onClose,p=(0,z.useIntl)(),K=(0,l.useState)(500),f=c()(K,2),A=f[0],G=f[1],C=(0,xt.Z)(function(){var q=$()(v()().mark(function Y(J,m){var N;return v()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,Q.pC)(J,m);case 2:return N=B.sent,B.abrupt("return",N.data);case 4:case"end":return B.stop()}},Y)}));return function(Y,J){return q.apply(this,arguments)}}(),{manual:!0}),k=C.data,re=C.loading,_=C.run;(0,l.useEffect)(function(){d!=null&&d.app_id&&d!==null&&d!==void 0&&d.app_run_id&&_(d.app_id,d.app_run_id)},[d==null?void 0:d.app_id,d==null?void 0:d.app_run_id,_]);var b=function(Y){var J={1:{color:"processing",text:p.formatMessage({id:"workflow.running"})},2:{color:"success",text:p.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:p.formatMessage({id:"workflow.runF"})}},m=J[Y]||{color:"default",text:"Unknown"};return(0,e.jsx)(bt.Z,{color:m.color,children:m.text})},ie=function(Y){G(Y)};return(0,e.jsx)(yt.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:A,onChange:ie,children:(0,e.jsx)(ht.Z,{className:"border-none h-full",style:{height:"calc(100vh - 10px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,e.jsx)(ve.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:a,icon:(0,e.jsx)(vt.Z,{})}),title:(0,e.jsx)(ea.Z.Title,{level:5,children:p.formatMessage({id:"agent.log.detail"})}),loading:re,children:(0,e.jsx)("div",{className:"space-y-6",children:re?(0,e.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,e.jsx)(Pe.Z,{})}):k?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Oe.Z,{column:1,bordered:!0,size:"small",children:[(0,e.jsx)(Oe.Z.Item,{label:p.formatMessage({id:"workflow.user"}),children:k.nickname}),(0,e.jsx)(Oe.Z.Item,{label:p.formatMessage({id:"workflow.status"}),children:b(k.status)}),(0,e.jsx)(Oe.Z.Item,{label:p.formatMessage({id:"workflow.created_time"}),children:k.created_time}),(0,e.jsxs)(Oe.Z.Item,{label:p.formatMessage({id:"workflow.elapsed_time"}),children:[k.elapsed_time,"s"]}),(0,e.jsx)(Oe.Z.Item,{label:"Tokens",children:k.total_tokens})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(ea.Z.Title,{level:5,children:p.formatMessage({id:"agent.log.output"})}),k.outputs?(0,e.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,e.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:((s=k.outputs)===null||s===void 0?void 0:s.value)||""})}):k.error?(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,e.jsx)("div",{className:"text-red-500 font-medium mb-2",children:p.formatMessage({id:"agent.log.error"})}),(0,e.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:k.error})]}):(0,e.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,e.jsx)("div",{className:"text-sm text-gray-500",children:p.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(k==null?void 0:k.prompt_data)&&k.prompt_data.length>0&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(ea.Z.Title,{level:5,children:p.formatMessage({id:"agent.log.conversation"})}),(0,e.jsx)(va.Z,{className:"mt-2",children:k.prompt_data.map(function(q,Y){var J=c()(q,2),m=J[0],N=J[1];return(0,e.jsx)(va.Z.Item,{color:m==="human"?"blue":"green",children:(0,e.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,e.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:m}),(0,e.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:N.value})]})},Y)})})]})]}):null})})})}),Qt=null,qt=null,wt=function(w){var s=w.agent_id,d=(0,z.useIntl)(),a=(0,z.useSearchParams)(),p=c()(a,1),K=p[0],f=(0,l.useRef)(null),A=(0,l.useState)(null),G=c()(A,2),C=G[0],k=G[1],re=(0,l.useState)(!1),_=c()(re,2),b=_[0],ie=_[1],q=K.get("app_id"),Y=function(){ie(!1)},J=function(B){k({app_id:q,app_run_id:B.id}),ie(!0)},m=[{dataIndex:"index",valueType:"indexBorder",width:48},{disable:!0,title:d.formatMessage({id:"workflow.status",defaultMessage:""}),dataIndex:"status",ellipsis:!0,search:!1,valueEnum:{1:{text:d.formatMessage({id:"workflow.running",defaultMessage:""}),status:"Processing"},2:{text:d.formatMessage({id:"workflow.runSc",defaultMessage:""}),status:"Success"},3:{text:d.formatMessage({id:"workflow.runF",defaultMessage:""}),status:"Error"}}},{title:d.formatMessage({id:"workflow.created_time",defaultMessage:""}),dataIndex:"created_time",ellipsis:!0,tooltip:d.formatMessage({id:"workflow.created_time_des",defaultMessage:d.formatMessage({id:"workflow.created_time_des",defaultMessage:""})}),search:!1},{title:"".concat(d.formatMessage({id:"workflow.elapsed_time",defaultMessage:""}),"S"),dataIndex:"elapsed_time",ellipsis:!0,tooltip:d.formatMessage({id:"workflow.run_time"}),search:!1},{title:"Tokens",key:"showTime",dataIndex:"total_tokens",hideInSearch:!0},{title:d.formatMessage({id:"workflow.user"}),dataIndex:"nickname",search:!1,ellipsis:!0,key:"user"}],N=(0,gt.Z)(function(ee){return ee.setRunPanelLogRecord});return(0,e.jsxs)("div",{className:"h-full",children:[(0,e.jsx)(pt.Z,{columns:m,formRef:f,form:{submitter:!1},cardBordered:!0,style:{height:"calc(100% - 20px)"},scroll:{y:"calc(100vh - 230px)"},request:function(){var ee=$()(v()().mark(function B(O,fe,ae){var y;return v()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return console.log(O,fe,ae),U.next=3,(0,Q.My)(q,{page:O.current,page_size:O.pageSize});case 3:return y=U.sent,console.log(y),U.abrupt("return",{data:y.data.list,success:!0,total:y.data.total_count});case 6:case"end":return U.stop()}},B)}));return function(B,O,fe){return ee.apply(this,arguments)}}(),onRow:function(B){return{onClick:function(){J(B)},className:(C==null?void 0:C.app_run_id)===B.id?"bg-blue-50":""}},editable:{type:"multiple"},rowKey:"app_runs_id",search:!1,options:{search:!1,setting:{listsHeight:600}},pagination:{pageSize:20,showSizeChanger:!1},dateFormatter:"string",headerTitle:d.formatMessage({id:"agent.log.list"})}),b&&(C==null?void 0:C.app_id)&&(C==null?void 0:C.app_run_id)&&(0,e.jsx)(jt,{data:C,onClose:Y})]})},_t=function(){var s,d,a=(0,z.useIntl)(),p=(0,l.useRef)(null),K=Z.Z.useForm(),f=c()(K,1),A=f[0],G=Z.Z.useForm(),C=c()(G,1),k=C[0],re=Z.Z.useForm(),_=c()(re,1),b=_[0],ie=Z.Z.useForm(),q=c()(ie,1),Y=q[0],J=(0,l.useState)(null),m=c()(J,2),N=m[0],ee=m[1],B=(0,l.useState)(0),O=c()(B,2),fe=O[0],ae=O[1],y=(0,l.useState)(null),W=c()(y,2),U=W[0],te=W[1],ue=(0,l.useState)(null),ye=c()(ue,2),H=ye[0],ge=ye[1],xe=(0,l.useState)(null),pe=c()(xe,2),he=pe[0],Ne=pe[1],Ae=(0,l.useState)(null),se=c()(Ae,2),j=se[0],L=se[1],F=(0,l.useState)(null),r=c()(F,2),o=r[0],i=r[1],M=(0,l.useState)(null),P=c()(M,2),T=P[0],D=P[1],R=(0,l.useState)(null),I=c()(R,2),oe=I[0],Ge=I[1],ua=(0,l.useState)(null),ca=c()(ua,2),Me=ca[0],Mt=ca[1],St=(0,l.useState)(null),ha=c()(St,2),Ee=ha[0],Ft=ha[1],Zt=(0,l.useState)("1"),xa=c()(Zt,2),Fe=xa[0],ta=xa[1],Pt=(0,l.useState)(null),ba=c()(Pt,2),Ct=ba[0],ya=ba[1],kt=(0,l.useState)(null),ja=c()(kt,2),At=ja[0],Tt=ja[1],Dt=(0,l.useState)(null),wa=c()(Dt,2),It=wa[0],_a=wa[1],Et=(0,l.useState)(null),Na=c()(Et,2),Ke=Na[0],Ma=Na[1],Lt=(0,l.useState)(!1),Sa=c()(Lt,2),Rt=Sa[0],Fa=Sa[1],$t=(0,l.useState)({first:!1,second:!1,fourthly:!1}),Za=c()($t,2),Xe=Za[0],sa=Za[1],zt=[{key:"1",icon:(0,e.jsx)(Ue.Z,{}),label:a.formatMessage({id:"agent.menu.basicsetup"}),disabled:Xe.first,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",lineHeight:"22px",color:Fe=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:Xe.second,icon:(0,e.jsx)($e.Z,{}),label:a.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:Fe=="2"?"#1B64F3":"#213044"}},{key:"5",disabled:Xe.fourthly,icon:(0,e.jsx)(je.Z,{}),label:"\u8FD0\u884C\u65E5\u5FD7",style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:Fe=="5"?"#1B64F3":"#213044"}}];(0,l.useEffect)(function(){var ne=new URLSearchParams(window.location.search);ne.get("app_id")||sa(t()(t()({},Xe),{},{first:!1,second:!0,fourthly:!0})),ra()},[]);var ra=function(){var ne=$()(v()().mark(function x(g){var h,V,E,S,Ia,fa,Ea,La;return v()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(V=new URLSearchParams(window.location.search),V.get("from")&&Tt(V.get("from")),E=null,!(V.get("app_id")||g)){Ze.next=10;break}return Ze.next=6,(0,Q.ek)(g||V.get("app_id"),V.get("type"));case 6:E=Ze.sent,Ma(E.data.app.app_id),Ze.next=13;break;case 10:return Ze.next=12,(0,_e.cI)();case 12:E=Ze.sent;case 13:S=E.data,Ia=(h=E.data)===null||h===void 0||(h=h.agent_dataset_relation_list)===null||h===void 0?void 0:h.map(function(de){return de.dataset_id}),te(Ia),ee(E.data),Ft(E.data.agent.publish_status===0&&E.data.is_creator===1?"false":"true"),E.data.agent.publish_status===1&&u.ZP.warning(a.formatMessage({id:"agent.message.listwarning"}),5),A.setFieldsValue(Pa(S.agent.input_variables)),fa=E.data.agent_abilities_list.map(function(de){return de.status==1?t()(t()({},de),{},{status:!0}):t()(t()({},de),{},{status:!1})}),b.setFieldsValue({users:fa[0]?fa:[{agent_ability_id:0,name:"",content:"",status:!0,output_format:0}]}),Ne(ma(S.agent_abilities_list)),L(ma(S.agent_abilities_list)),Ea=S.agent_abilities_list.filter(function(de){return de.output_format!==0}),k.setFieldsValue({users:Ea.map(function(de){return{agent_ability_id:de.agent_ability_id,output_format:de.output_format}})}),Y.setFieldsValue(Pa(S.agent.input_variables)),i(S.m_configurations_list.map(function(de){return{value:de.m_config_id?de.m_config_id:de.model_config_id,label:de.m_name?de.m_name:de.model_name}})),S.agent.m_config_id||S.agent.model_config_id?D(S.agent.m_config_id?S.agent.m_config_id:S.agent.model_config_id):D(S.m_configurations_list[0].model_config_id),La=S.agent_abilities_list.filter(function(de,as){return de.status===1}),Mt(ma(La).concat([{value:0,label:a.formatMessage({id:"agent.allability"})}]));case 31:case"end":return Ze.stop()}},x)}));return function(g){return ne.apply(this,arguments)}}(),Pa=function(x){var g={users:x&&x.properties?Object.values(x.properties).map(function(h){return{name:h.name,type:h.type,content:h.display_name,status:h.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return g},ma=function(x){return x.map(function(g){return{value:g.agent_ability_id,label:g.name}})},Bt=function(x){Da(x,1),Y.setFieldsValue(A.getFieldsValue())},Ot=function(){ra()},Ca=function(x){ae(x)},Ht=function(){z.history.back()},Vt=function(){var x=A.getFieldsValue().users.filter(function(g){return!g||!g.name||!g.content});if(A.getFieldsValue().users[0])if(T)if(N.agent.obligations){if(x.length!==0)return u.ZP.warning(a.formatMessage({id:"agent.message.warning.completevariable"})),!0;if(Gt(A.getFieldsValue().users,"name"))return u.ZP.warning(a.formatMessage({id:"agent.message.warning.repetition"})),!0}else return u.ZP.warning(a.formatMessage({id:"agent.message.warning.functiondescribe"})),!0;else return u.ZP.warning(a.formatMessage({id:"agent.message.warning.LLM"})),!0;else return u.ZP.warning(a.formatMessage({id:"agent.message.warning.variable"})),!0;return!1},Wt=function(){var x=b.getFieldsValue().users.filter(function(h){return!!h}),g=x.filter(function(h){return!h.name||!h.content});return g.length!==0&&!(g.length==1&&g[0].name==""&&g[0].content=="")?(u.ZP.warning(a.formatMessage({id:"agent.message.warning.integritycapacity"})),!0):!1},ka=function(x){if((x==null?void 0:x.key)=="4"){var g=A.getFieldsValue().users.map(function(h){return{value:"<<".concat(Te.qX,".inputs.").concat(h.name,">>"),label:h.name}});ya(g)}ta(x.key)},Ut=function(){Fa(!0);var x=0;Ke?(0,Q.ek)(Ke,!1).then(function(g){x=g.data.agent.agent_id,Aa(x),setTimeout(function(){Ta(x),u.ZP.success(a.formatMessage({id:"skill.conserve.success"}))},500),setTimeout(function(){ra(Ke)},1e3),_a(x)}).catch(function(g){}):(0,Re.uy)((0,_e.Go)("GET")).then(function(g){Ma(g.data.app_id),(0,Q.ek)(Ke||g.data.app_id,!1).then(function(h){x=h.data.agent.agent_id,Aa(x),setTimeout(function(){Ta(x),u.ZP.success(a.formatMessage({id:"skill.conserve.success"}))},500),setTimeout(function(){ra(g.data.app_id);var V=t()(t()({},(0,_e.Go)("GET")),{},{app_id:g.data.app_id});(0,_e.Go)("SET",V),z.history.replace("/Agents?type=false&app_id=".concat(g.data.app_id))},1e3),_a(x)}).catch(function(h){})}).catch(function(g){})},Aa=function(x,g){A.validateFields().then(function(h){var V={agent_id:x,data:{is_public:N.app.is_public,enable_api:N.app.enable_api,attrs_are_visible:N.app.attrs_are_visible,obligations:N.agent.obligations,input_variables:Kt(A.getFieldsValue()),dataset_ids:U,m_config_id:T,allow_upload_file:N.agent.allow_upload_file,default_output_format:N.agent.default_output_format}};Ee=="false"&&Da(V,1),Y.setFieldsValue(A.getFieldsValue());var E=A.getFieldsValue().users.map(function(S){return{value:"<<".concat(Te.qX,".inputs.").concat(S.name,">>"),label:S.name}});ya(E),g&&ta(g.key)}).catch(function(h){})},Ta=function(x){var g=b.getFieldsValue().users.filter(function(E){return!!E}),h=g.map(function(E){return t()(t()({},E),{},{status:E.status==!1?2:1,agent_ability_id:E.agent_ability_id?E.agent_ability_id:0,output_format:E.output_format?E.output_format:0})}),V={agent_id:x,data:{auto_match_ability:N.agent.auto_match_ability,agent_abilities:h}};Ee=="false"&&(h.length==1&&h[0].name==""&&h[0].content==""?sa({first:!1,second:!1,fourthly:!1}):(0,Q.Iw)(V).then(function(E){E.code==0&&sa({first:!1,second:!1,fourthly:!1})}).catch(function(E){}))},Da=function(){var ne=$()(v()().mark(function x(g,h){var V;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(Ee!=="false"){S.next=19;break}if(h!==1){S.next=7;break}return S.next=4,(0,Q.XB)(g);case 4:S.t0=S.sent,S.next=17;break;case 7:if(h!==2){S.next=13;break}return S.next=10,(0,Q.Iw)(g);case 10:S.t1=S.sent,S.next=16;break;case 13:return S.next=15,(0,Q.Ce)(g);case 15:S.t1=S.sent;case 16:S.t0=S.t1;case 17:V=S.t0,V&&V.code===0&&Fa(!1);case 19:case"end":return S.stop()}},x)}));return function(g,h){return ne.apply(this,arguments)}}(),Gt=function(x,g){var h=new Set;return x.some(function(V){var E=V[g];return h.has(E)?h.add(E):h.add(E)&&!1})},Kt=function(x){var g=new me.Kr("input","","");return x.users.forEach(function(h){var V=new me._w(h.name,h.type?h.type:"string",h.value?h.value:"",h.content,h.status);g.addProperty(h.name,V)}),g};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ve.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:Ht,children:[(0,e.jsx)(ce.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:At=="chat_room"?a.formatMessage({id:"agent.back_meeting"}):a.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Je.Z,{selectedKeys:[Fe],onClick:ka,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[Fe],mode:"inline",items:zt}),N&&N.app.enable_api===1&&N.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:$()(v()().mark(function ne(){var x,g;return v()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(x=new URLSearchParams(window.location.search),g=null,!x.get("app_id")){V.next=6;break}return V.next=5,(0,Q.ek)(x.get("app_id"),x.get("type"));case 5:g=V.sent;case 6:g!=null&&g.data.app.enable_api===1&&g.data.app.publish_status===1?window.open(We._n+N.app.api_url):u.ZP.warning(a.formatMessage({id:"agent.save.and.click"}),5);case 7:case"end":return V.stop()}},ne)})),children:(0,e.jsxs)("div",{className:"mr-[20px] text-base font-medium text-[#213044] -mt-1",children:[(0,e.jsx)(X.Z,{className:"mr-3"}),a.formatMessage({id:"agent.visit"})," API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)(Pe.Z,{spinning:Rt,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[(s=(0,_e.Go)("GET"))!==null&&s!==void 0&&s.app_id?a.formatMessage({id:"agent.compile"}):a.formatMessage({id:"agent.created"}),a.formatMessage({id:"agent"})]}),(N==null||(d=N.app)===null||d===void 0?void 0:d.publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] px-[7px] text-[#fff] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:a.formatMessage({id:"agent.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE] px-[7px]  text-[#999] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:a.formatMessage({id:"agent.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:Fe==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ba,{FirstValue:Bt,Ffromref:A,Detaillist:N,setDetaillist:ee,repository:U,setRepository:te,Newproperties:H,setNewproperties:ge,Operationbentate:Ee,Fourthly_config_id:T,setFourthly_config_id:D,Fourthly_select_list:o,pageKeyfun:ta,firstjudgingcondition:Vt,agentmenudisabled:Xe,setAgentmunudisabled:sa})}),(0,e.jsx)("div",{style:{display:Fe==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Qa,{SecondValue:Ot,Detaillist:N,setDetaillist:ee,Sformref:b,Operationbentate:Ee,handleBack:Ca,pageKeyfun:ta,SkillMenuClick:ka,secondjudgingcondition:Wt,agentupdata:Ut})}),(0,e.jsx)("div",{style:{display:Fe==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ka,{handleBack:Ca,Detaillist:N,setDetaillist:ee,Fourthly_select_list:o,Fourthly_config_id:T,setFourthly_config_id:D,Fourthlyref:Y,Fourthly_abilities_list:Me,Operationbentate:Ee,callwordlist:Ct,newagentid:It})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(ft,{operationbentate:Ee,data:{abilitiesList:Me,detailList:N}})}),Fe=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(wt,{agent_id:N.agent.agent_id})})]})]})},Nt=_t}}]);
