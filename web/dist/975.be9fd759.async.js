"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[975],{66212:function(H,m,r){var _=r(1413),v=r(67294),E=r(99011),p=r(91146),b=function(N,t){return v.createElement(p.Z,(0,_.Z)((0,_.Z)({},N),{},{ref:t,icon:E.Z}))},a=v.forwardRef(b);m.Z=a},11475:function(H,m,r){r.d(m,{Z:function(){return N}});var _=r(1413),v=r(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},p=E,b=r(91146),a=function(F,l){return v.createElement(b.Z,(0,_.Z)((0,_.Z)({},F),{},{ref:l,icon:p}))},D=v.forwardRef(a),N=D},2068:function(H,m,r){r.d(m,{Z:function(){return N}});var _=r(1413),v=r(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},p=E,b=r(91146),a=function(F,l){return v.createElement(b.Z,(0,_.Z)((0,_.Z)({},F),{},{ref:l,icon:p}))},D=v.forwardRef(a),N=D},86:function(H,m,r){var _=r(5574),v=r.n(_),E=r(32332),p=r(38703),b=r(67294),a=r(85893),D=function(t){var F=t.subtitle,l=t.handleClick,$=t.lineClamp,z=$===void 0?2:$,n=t.textDetails,V=t.title,k=t.icon,Z=t.iconType,G=Z===void 0?"":Z,M=t.operation,s=M===void 0?"":M,d=t.progress,o=t.status,g=t.backlogTips,O=t.avatar,i=(0,b.useState)(0),u=v()(i,2),I=u[0],h=u[1],C=function(){h(d)},x=function(){h(0)},P=function(K){return"rounded-[4px] border-l-[4px] ".concat(K==1?"border-[#1B64F3]":K==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,a.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(o!==void 0?P(o):"graphicbox"),onClick:l,onMouseEnter:function(){d!=null&&C()},onMouseLeave:function(){d!=null&&x()},children:[o!==void 0&&(0,a.jsx)("div",{style:{width:"".concat(I,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(o==1?"bg-[#1B64F3]/[.03]":o==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,a.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,a.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,a.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[O?(0,a.jsx)("img",{src:O,className:"w-[40px] h-[40px] rounded-[6px]"}):(0,a.jsx)("img",{src:(0,E.s9)("single",k),className:"w-[22px] h-[22px]"}),G&&(0,a.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,a.jsx)("img",{src:"/icons/".concat(G,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,a.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,a.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,a.jsx)("span",{className:"truncate",children:V}),(0,a.jsx)("span",{className:"flex items-center flex-1",children:F})]}),(0,a.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:n})]})}),g||(0,a.jsx)(a.Fragment,{}),s&&(0,a.jsx)("div",{className:"flex items-center w-[24px]",children:(0,a.jsx)("span",{className:"operation",children:s})}),d!=null&&(0,a.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,a.jsx)(p.Z,{type:"circle",percent:d,size:29})})]})]})};m.Z=D},38027:function(H,m,r){r.d(m,{p1:function(){return V},vw:function(){return Z}});var _=r(19632),v=r.n(_),E=r(5574),p=r.n(E),b=r(86),a=r(39e3),D=r(29608),N=r(87740),t=r(76772),F=r(28036),l=r(67294),$=r(22683),z=r(97807),n=r(85893),V=(0,l.memo)(function(M){var s=M.progressObj;console.log(s);var d=function(){return parseFloat(s.elapsed_time).toFixed(6)},o=function(O){var i=new Date(O),u=i.getFullYear(),I=(i.getMonth()+1).toString().padStart(2,"0"),h=i.getDate().toString().padStart(2,"0"),C=i.getHours().toString().padStart(2,"0"),x=i.getMinutes().toString().padStart(2,"0"),P=i.getSeconds().toString().padStart(2,"0");return(0,n.jsx)(n.Fragment,{children:"".concat(u,".").concat(I,".").concat(h," ").concat(C,":").concat(x,":").concat(P)})};return(0,n.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,n.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,n.jsx)("div",{className:"truncate min-w-[70px]",children:s.created_time&&o(s.created_time)}),(0,n.jsx)("div",{className:"truncate",children:s.apps_name||s.app_name}),(0,n.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,n.jsx)("div",{className:"shrink-0 rounded-full ".concat(s.status==1?"bg-blue-600":s.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,n.jsxs)("div",{className:"truncate",children:[d(),"S"]})]})]})})}),k=(0,l.memo)(function(M){var s=M.id,d=M.message,o=(0,t.useIntl)(),g=(0,a.Z)(function(x){return x.setSummaryClick}),O=(0,l.useState)(!0),i=p()(O,2),u=i[0],I=i[1],h=(0,a.Z)(function(x){return x.summaryClick}),C=(0,a.Z)(function(x){return x.setSummaryParams});return(0,l.useEffect)(function(){I(h)},[h]),(0,n.jsx)("div",{className:"flex flex-row-reverse",children:(0,n.jsxs)(F.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(P){u&&(C({id:s,message:d}),g(!1))},children:[(0,n.jsx)("span",{className:"text-[12px]",children:o.formatMessage({id:"app.summaryhistory.submitText"})}),(0,n.jsx)(N.Z,{className:"text-[14px]"})]})})}),Z=function(s){var d=Object.keys(s),o=[];return d.forEach(function(g){o.push(s[g])}),o},G=function(s){var d=s.list,o=s.scrollDom,g=s.historyHeight,O=s.id,i=s.runid,u=(0,t.useIntl)(),I=(0,l.useState)([]),h=p()(I,2),C=h[0],x=h[1],P=(0,l.useRef)("100%"),L=(0,l.useState)(0),K=p()(L,2),pe=K[0],me=K[1],he=(0,D.Z)(function(e){return e.setRunPanelLogRecord}),ge=function(W){var f=new Date(W),S=f.getMonth()+1,R=f.getDate(),T=f.getHours(),j=f.getMinutes(),y=f.getSeconds();return f.getFullYear()+"-"+(S<10?"0"+S:S)+"-"+(R<10?"0"+R:R)+" "+(T<10?"0"+T:T)+":"+(j<10?"0"+j:j)+":"+(y<10?"0"+y:y)};return(0,l.useEffect)(function(){if(o){var e;P.current=o==null||(e=o.current)===null||e===void 0?void 0:e.offsetHeight}},[o]),(0,l.useEffect)(function(){g&&(P.current="auto")},[g]),(0,l.useEffect)(function(){x(v()(d))},[d]),(0,l.useEffect)(function(){console.log(i),me(i)},[i]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"px-4",style:{minHeight:P.current},children:C&&C.length?C.map(function(e){var W,f,S,R,T,j,y,w,Y,J,Q,B,X,q,ee,ne,re,ae,se,te,le;return e!=null&&e.source_run&&e!==null&&e!==void 0&&e.source_run.summary&&(!pe||pe!=(e==null||(W=e.source_run)===null||W===void 0?void 0:W.id))?(0,n.jsx)("div",{className:"pt-[16px] border-b-[1px] border-color-[#eee] ",children:(0,n.jsxs)("div",{className:"pb-[60px]",children:[(0,n.jsx)("div",{className:"text-[16px] font-[600] pb-[8px] flex items-center",children:(0,n.jsx)("span",{className:"flex-1",children:u.formatMessage({id:"app.summary.title"})})}),(0,n.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:ge(e==null||(f=e.source_run)===null||f===void 0?void 0:f.created_time)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"p-[12px]  leading-[22px] ".concat(e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?"bg-[#F7F7F7]":"bg-blue-100 rounded-[4px]"),children:(0,n.jsx)($.U,{rehypePlugins:[z.Z],children:e==null||(S=e.source_run)===null||S===void 0?void 0:S.summary})}),(0,n.jsx)(k,{id:O,message:e==null||(R=e.source_run)===null||R===void 0?void 0:R.summary})]}),e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[u.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),e==null?void 0:e.source_corrections.map(function(c,A){return(0,n.jsxs)("div",{className:"mb-[16px] last-of-type:mb-0",children:[(0,n.jsx)("div",{className:"rounded-[4px]  ".concat((e==null?void 0:e.source_corrections.length)-1!=A?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,n.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,n.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[u.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",c.user_prompt]}),(0,n.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[u.formatMessage({id:"app.summaryhistory.time"}),":"," ",ge(c.created_time)]}),(0,n.jsx)($.U,{rehypePlugins:[z.Z],children:c==null?void 0:c.corrected_summary})]})}),(0,n.jsx)(k,{id:O,message:c==null?void 0:c.corrected_summary})]},c.created_time)})]}):(0,n.jsx)(n.Fragment,{}),e!=null&&e.target_run?(0,n.jsxs)("div",{className:"py-[12px]",children:[(0,n.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[u.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,n.jsx)("span",{className:"font-[500] ",children:e!=null&&(T=e.target_run)!==null&&T!==void 0&&T.agent_id?"agent":"workflow"}),(0,n.jsx)("span",{className:"px-[6px]",children:":"}),(0,n.jsx)("span",{children:e==null||(j=e.target_run)===null||j===void 0||(j=j.app)===null||j===void 0?void 0:j.name})]})}),(0,n.jsx)("div",{children:e!=null&&(y=e.target_run)!==null&&y!==void 0&&(y=y.inputs)!==null&&y!==void 0&&y.properties?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[u.formatMessage({id:"app.summaryhistory.input"}),":"]}),Z(e==null||(w=e.target_run)===null||w===void 0||(w=w.inputs)===null||w===void 0?void 0:w.properties).map(function(c){return(0,n.jsxs)("div",{className:"pb-[10px]",children:[(0,n.jsx)("div",{className:"pb-[8px] font-[600]",children:c.display_name||c.name}),(0,n.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:c.value})]})})]}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)("div",{children:e!=null&&(Y=e.target_run)!==null&&Y!==void 0&&Y.raw_user_prompt?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[u.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,n.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:e==null||(J=e.target_run)===null||J===void 0?void 0:J.raw_user_prompt})]}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[u.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,n.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(e==null||(Q=e.target_run)===null||Q===void 0?void 0:Q.agent_id)!=0?(0,n.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,n.jsx)($.U,{rehypePlugins:[z.Z],children:e==null||(B=e.target_run)===null||B===void 0||(B=B.outputs)===null||B===void 0?void 0:B.value})}):(0,n.jsx)(b.Z,{status:e==null||(X=e.target_run)===null||X===void 0?void 0:X.status,icon:e==null||(q=e.target_run)===null||q===void 0?void 0:q.icon,title:e==null||(ee=e.target_run)===null||ee===void 0?void 0:ee.name,avatar:e==null||(ne=e.target_run)===null||ne===void 0?void 0:ne.avatar,textDetails:(0,n.jsx)(V,{progressObj:{created_time:e==null||(re=e.target_run)===null||re===void 0?void 0:re.created_time,elapsed_time:e==null||(ae=e.target_run)===null||ae===void 0?void 0:ae.elapsed_time,app_name:e==null||(se=e.target_run)===null||se===void 0?void 0:se.app.name,status:e==null||(te=e.target_run)===null||te===void 0?void 0:te.status}}),handleClick:function(){var A,U,oe,ie,ue,de,ce,_e,ve,xe;he({app_id:e==null||(A=e.target_run)===null||A===void 0||(A=A.app)===null||A===void 0?void 0:A.id,app_name:e==null||(U=e.target_run)===null||U===void 0||(U=U.app)===null||U===void 0?void 0:U.name,icon:e==null||(oe=e.target_run)===null||oe===void 0?void 0:oe.icon,workflow_id:e==null||(ie=e.target_run)===null||ie===void 0?void 0:ie.workflow_id,type:2,app_run_id:e==null||(ue=e.target_run)===null||ue===void 0?void 0:ue.id,run_name:e==null||(de=e.target_run)===null||de===void 0?void 0:de.name,status:e==null||(ce=e.target_run)===null||ce===void 0?void 0:ce.status,created_time:e==null||(_e=e.target_run)===null||_e===void 0?void 0:_e.created_time,elapsed_time:e==null||(ve=e.target_run)===null||ve===void 0?void 0:ve.elapsed_time,completed_progress:"".concat(e==null||(xe=e.target_run)===null||xe===void 0?void 0:xe.percentage,"%")})},progress:e==null||(le=e.target_run)===null||le===void 0?void 0:le.percentage})})]})]}):(0,n.jsx)(n.Fragment,{})]})},e.source_run.id):(0,n.jsx)(n.Fragment,{})}):(0,n.jsx)(n.Fragment,{})})})};m.ZP=(0,l.memo)(G)}}]);
