"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[928],{83510:function(ke,re,a){a.d(re,{LK:function(){return N},bs:function(){return f},go:function(){return ae},uy:function(){return O}});var fe=a(15009),g=a.n(fe),oe=a(99289),d=a.n(oe),A=a(47520),M="/v1/apps/apps_list",Z="/v1/agent/agent_delete/",l="/v1/workflow/workflow_app_delete/",ie="/v1/vector/delete_dataset/",Q="/v1/skill/delete_skill_by_app_id/",K="/v1/apps/apps_create",le="/v1/apps/app_update/",ae=function(){var F=d()(g()().mark(function L(_){var C;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,A.ZP)("".concat(M),{method:"GET",data:_});case 2:return C=c.sent,c.abrupt("return",C);case 4:case"end":return c.stop()}},L)}));return function(_){return F.apply(this,arguments)}}(),N=function(){var F=d()(g()().mark(function L(_){var C;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log(_),c.next=3,_.mode;case 3:if(c.t0=c.sent,c.t0!=1){c.next=8;break}c.t1=(0,A.ZP)("".concat(Z).concat(_.app_id),{method:"DELETE"}),c.next=9;break;case 8:c.t1=_.mode==2?(0,A.ZP)("".concat(l).concat(_.app_id),{method:"DELETE"}):_.mode==3?(0,A.ZP)("".concat(ie).concat(_.app_id),{method:"DELETE"}):(0,A.ZP)("".concat(Q).concat(_.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return C=c.t1,c.abrupt("return",C);case 11:case"end":return c.stop()}},L)}));return function(_){return F.apply(this,arguments)}}(),O=function(){var F=d()(g()().mark(function L(_){var C;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,A.ZP)("".concat(K),{method:"POST",data:_});case 2:return C=c.sent,c.abrupt("return",C);case 4:case"end":return c.stop()}},L)}));return function(_){return F.apply(this,arguments)}}(),f=function(){var F=d()(g()().mark(function L(_){var C;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,A.ZP)("".concat(le).concat(_.app_id),{method:"PUT",data:_});case 2:return C=c.sent,c.abrupt("return",C);case 4:case"end":return c.stop()}},L)}));return function(_){return F.apply(this,arguments)}}()},72406:function(ke,re,a){var fe=a(58533),g=a(99702),oe=a(74330),d=a(85893),A=function(Z){var l=Z.children,ie=Z.elid,Q=Z.dataLength,K=Z.ishasMore,le=Z.upSlide,ae=Z.isFooter,N=Z.pageNumber,O=N===void 0?2:N;return(0,d.jsxs)("div",{className:"h-full flex flex-col",children:[(0,d.jsx)(fe.Z,{dataLength:Q,scrollableTarget:ie,next:le,hasMore:K,loader:(0,d.jsx)("div",{className:"flex justify-center h-[60px] items-center",children:O>1?(0,d.jsx)(oe.Z,{}):(0,d.jsx)(d.Fragment,{})}),children:l}),ae&&(0,d.jsx)("div",{className:"mt-[30px] flex-1 flex ",style:{alignItems:"flex-end"},children:(0,d.jsx)(g.Z,{className:"relative"})})]})};re.Z=A},21446:function(ke,re,a){var fe=a(15009),g=a.n(fe),oe=a(97857),d=a.n(oe),A=a(99289),M=a.n(A),Z=a(5574),l=a.n(Z),ie=a(83510),Q=a(32332),K=a(35312),le=a(26915),ae=a(17788),N=a(67294),O=a(94840),f=a(85893),F=le.Z.TextArea,L=function(C){var ce=C.setIsModalOpen,c=C.isModalOpen,de=C.transformData,s=C.CreationType,be=C.setcreationType,ge=C.ModalType,b=(0,K.useIntl)(),$e=(0,N.useState)(""),Ae=l()($e,2),Ze=Ae[0],Le=Ae[1],ue=(0,N.useState)(""),Be=l()(ue,2),He=Be[0],Ve=Be[1],Je=(0,N.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),e=l()(Je,2),Ue=e[0],oa=e[1];(0,N.useEffect)(function(){},[]);var Ye=function(I){Le(I.target.value)},Qe=function(I){Ve(I.target.value)},Re=function(){var z=M()(g()().mark(function I(){var m,Pe;return g()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(m={name:Ze,mode:s.apps_mode,description:He,icon:JSON.stringify(Ue.id),icon_background:""},s.apps_mode!=2){pe.next=8;break}return pe.next=4,(0,ie.uy)(m);case 4:Pe=pe.sent,Pe.code===0&&(ce(!1),We(Pe.data.app_id)),pe.next=10;break;case 8:(0,Q.Go)("SET",d()(d()({},m),{},{type:!1})),We();case 10:case"end":return pe.stop()}},I)}));return function(){return z.apply(this,arguments)}}(),Xe=function(I){de.map(function(m){m.name==I.name&&(console.log(m,"item"),be(m))})},We=function(I){I?K.history.push("/".concat(s.path,"?app_id=").concat(I,"&&type=false")):K.history.push("/".concat(s.path,"?type=false"))};return(0,f.jsx)(ae.Z,{title:b.formatMessage({id:"creation.addnewapp"}),open:c,okText:b.formatMessage({id:"creation"}),onOk:Re,onCancel:function(){return ce(!1)},okButtonProps:{disabled:Ze===""},width:820,children:(0,f.jsxs)("div",{className:"pb-1",children:[ge?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:b.formatMessage({id:"creation.appntype"})}),(0,f.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:de&&de.map(function(z){return(0,f.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:z.apps_mode===s.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){Xe(z)},children:[(0,f.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,f.jsx)("img",{className:"w-6 h-6",src:z.signicon,alt:""})}),(0,f.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:z.name})]})})})]}):null,(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"mb-5",children:[(0,f.jsxs)("p",{className:"text-xs mt-5",children:[s.apps_mode==1?b.formatMessage({id:"creation.agent"}):s.apps_mode==2?b.formatMessage({id:"creation.workflow"}):s.apps_mode==3?b.formatMessage({id:"creation.repository"}):b.formatMessage({id:"creation.skill"}),b.formatMessage({id:"creation.appiconname"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-around",children:[(0,f.jsx)(O.Z,{CardData:Ue,setCardData:oa}),(0,f.jsx)(le.Z,{showCount:!0,maxLength:20,placeholder:b.formatMessage({id:"creation.placeholder.appname"}),onChange:Ye})]})]}),(0,f.jsxs)("div",{className:"mb-5 text-xs",children:[(0,f.jsxs)("p",{children:[s.apps_mode==1?b.formatMessage({id:"creation.agent"}):s.apps_mode==2?b.formatMessage({id:"creation.workflow"}):s.apps_mode==3?b.formatMessage({id:"creation.repository"}):b.formatMessage({id:"creation.skill"}),b.formatMessage({id:"creation.appdescribe"})]}),(0,f.jsx)(F,{showCount:!0,maxLength:100,rows:4,placeholder:b.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Qe})]})]})]})})};re.Z=L},94840:function(ke,re,a){var fe=a(97857),g=a.n(fe),oe=a(32332),d=a(55241),A=a(67294),M=a(85893),Z=function(ie){var Q=ie.CardData,K=ie.setCardData;(0,A.useEffect)(function(){},[]);var le=function(){return(0,M.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,oe.s9)("all").map(function(O){return(0,M.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){ae(O)},children:(0,M.jsx)("img",{src:O.image,alt:""})})})})},ae=function(O){K(g()(g()({},Q),{},{icon:O.image,id:O.id}))};return(0,M.jsx)(d.Z,{content:le,trigger:"click",placement:"bottomLeft",children:(0,M.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,M.jsx)("img",{src:(0,oe.s9)("single",Q.id?Q.id:Q.icon),alt:""})})})};re.Z=Z},42:function(ke,re,a){a.r(re),a.d(re,{default:function(){return ka}});var fe=a(97857),g=a.n(fe),oe=a(15009),d=a.n(oe),A=a(99289),M=a.n(A),Z=a(5574),l=a.n(Z),ie=a(40110),Q=a(47389),K=a(82061),le=a(43425),ae=a(71471),N=a(26915),O=a(17788),f=a(2453),F=a(78045),L=a(74330),_=a(71230),C=a(15746),ce=a(4393),c=a(55241),de=a(28036),s=a(67294),be=a(83510),ge=a(42237),b=a(78697),$e=a(72406),Ae=a(13769),Ze=a.n(Ae),Le=a(51042),ue=a(35312),Be=a(78234),He=a(86738),Ve=a(34041),Je=a(66309),e=a(85893),Ue=["children"],oa=ae.Z.Paragraph,Ye=function(t){var B=t.children,u=Ze()(t,Ue),p=(0,ue.useIntl)(),W=u.modes,X=W===void 0?0:W,q=(0,s.useState)(!1),w=l()(q,2),P=w[0],k=w[1],he=(0,s.useState)(""),ve=l()(he,2),E=ve[0],je=ve[1],ne=(0,s.useState)([{label:p.formatMessage({id:"addTag.all",defaultMessage:"All"}),value:"All"}]),$=l()(ne,2),me=$[0],te=$[1];(0,Be.Z)(M()(d()().mark(function h(){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:G();case 1:case"end":return i.stop()}},h)})));var G=function(){var h=M()(d()().mark(function j(){var i,U;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ge.kV)(X);case 2:i=S.sent,i.code==0&&te((U=i.data)===null||U===void 0?void 0:U.map(function(V){return g()(g()({},V),{},{label:V.name,value:V.id})}));case 4:case"end":return S.stop()}},j)}));return function(){return h.apply(this,arguments)}}(),Me=function(){var h=M()(d()().mark(function j(i){var U,H;return d()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,ge.ln)(i,X);case 2:U=V.sent,U.code==0&&(je(""),G(),u==null||(H=u.onTagChange)===null||H===void 0||H.call(u));case 4:case"end":return V.stop()}},j)}));return function(i){return h.apply(this,arguments)}}(),Ee=function(){var h=M()(d()().mark(function j(i){var U;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ge.Pn)(i);case 2:U=S.sent,U.code==0&&G();case 4:case"end":return S.stop()}},j)}));return function(i){return h.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(O.Z,{title:p.formatMessage({id:"addTag.addTag",defaultMessage:"Add Tag"}),className:"z-[999]",open:P,onCancel:function(){return k(!1)},onOk:function(){E!=""&&Me(E),k(!1)},bodyProps:{className:"min-h-[200px] pt-4"},children:(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,e.jsx)(N.Z,{suffix:(0,e.jsx)(Le.Z,{onClick:function(){return Me(E)},className:"cursor-pointer mx-1"}),placeholder:p.formatMessage({id:"addTag.inputTagName",defaultMessage:"Enter tag name"}),maxLength:10,value:E,onChange:function(j){return je(j.target.value)},onPressEnter:function(j){Me(j.target.value)}}),me.map(function(h){return(0,e.jsxs)("div",{className:"p-0.5 cursor-pointer border border-gray-300 text-gray-600 hover:border-[#1B64F3] rounded-md flex flex-wrap items-center",children:[(0,e.jsx)("div",{className:"pl-3 pr-1",children:(0,e.jsx)(We,{onUpdate:function(i){console.log(i),(0,ge.Lp)(h.id,i).then(function(U){var H;G(),u==null||(H=u.onTagChange)===null||H===void 0||H.call(u)})},children:h.name})}),h.reference_count===0?(0,e.jsx)(de.ZP,{onClick:function(){return Ee(h.id)},type:"text",icon:(0,e.jsx)(K.Z,{})}):(0,e.jsx)(He.Z,{title:p.formatMessage({id:"addTag.deleteTag",defaultMessage:"Delete"}),description:"".concat(p.formatMessage({id:"addTag.deleteConfirmation1"})," ").concat(h.reference_count," ").concat(p.formatMessage({id:"addTag.deleteConfirmation2"})),onConfirm:function(){return Ee(h.id)},okText:p.formatMessage({id:"addTag.confirm",defaultMessage:"Confirm"}),cancelText:p.formatMessage({id:"addTag.cancel",defaultMessage:"Cancel"}),children:(0,e.jsx)(de.ZP,{type:"text",icon:(0,e.jsx)(K.Z,{})})})]},h.id)})]})}),(0,e.jsx)(de.ZP,{onClick:function(){return k(!0)},type:"text",className:"shrink-0",icon:(0,e.jsx)(Le.Z,{className:"cursor-pointer mr-1"})}),(0,e.jsx)(Re,g()({className:"!w-[160px]",options:me},u))]})},Qe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=(0,s.useState)([]),u=l()(B,2),p=u[0],W=u[1],X=(0,s.useState)(t),q=l()(X,2),w=q[0],P=q[1],k=(0,s.useCallback)(function(){var ve=M()(d()().mark(function E(je){var ne,$;return d()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,ge.kV)(je);case 2:ne=te.sent,ne.code===0&&W(($=ne.data)===null||$===void 0?void 0:$.map(function(G){return g()(g()({},G),{},{label:G.name,value:G.id})}));case 4:case"end":return te.stop()}},E)}));return function(E){return ve.apply(this,arguments)}}(),[]);(0,s.useEffect)(function(){k(w)},[w,k]);var he=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;P(E),k(E)};return{tagList:p,refreshTags:he}},Re=(0,s.memo)(function(R){var t=(0,ue.useIntl)();return(0,e.jsx)(Ve.Z,g()({mode:"multiple",size:"middle",placeholder:t.formatMessage({id:"addTag.pleaseSelect",defaultMessage:"Please select"}),maxTagCount:"responsive",onChange:function(u){var p;R==null||(p=R.onChange)===null||p===void 0||p.call(R,u)},tagRender:Xe,options:(R==null?void 0:R.options)||[]},R))}),Xe=function(t){var B=t.label,u=t.value,p=t.closable,W=t.onClose,X=function(w){w.preventDefault(),w.stopPropagation()};return(0,e.jsx)(Je.Z,{color:"blue",onMouseDown:X,style:{marginInlineEnd:4},children:B})},We=function(t){var B=t.children,u=t.onUpdate,p=t.maxLength,W=p===void 0?10:p,X=function(P){var k=P.currentTarget.textContent;k.length>W&&(P.currentTarget.textContent=k.substring(0,W))},q=function(P){var k=P.currentTarget.textContent;u(k)};return(0,e.jsx)("div",{contentEditable:!0,onInput:X,onBlur:q,suppressContentEditableWarning:!0,children:B})},z=(0,s.memo)(Ye),I=a(29608),m=a(32332),Pe=a(27484),ia=a.n(Pe),pe=a(21446),ya=a(47520),Ea=a(33914),Sa=a(57546),Na=a(46822),ba=function(t){var B=t.optionsModalId,u=(0,ue.useIntl)(),p=(0,s.useState)(!0),W=l()(p,2),X=W[0],q=W[1],w=N.Z.TextArea,P=[{name:u.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",unselected:"/icons/creation/unselectedrobot.svg",apps_mode:1},{name:u.formatMessage({id:"creation.workflow"}),path:"workspace/workflow",icon:"/icons/creation/gongzuoliu1.svg",pitchicon:"/icons/creation/pitchgongzuoliu.svg",signicon:"/icons/creation/signgongzuoliu.svg",unselected:"/icons/creation/unselectedprocess.svg",apps_mode:2},{name:u.formatMessage({id:"creation.skill"}),path:"Skill",icon:"/icons/creation/jienng1.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg",unselected:"/icons/creation/unselectedrepository.svg",apps_mode:4}];location.pathname=="/knowledgebase"&&P.push({name:u.formatMessage({id:"creation.repository"}),path:"Createkb",icon:"/icons/creation/jienng1.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg",unselected:"/icons/creation/unselectedrepository.svg",apps_mode:3});var k=(0,s.useState)(!1),he=l()(k,2),ve=he[0],E=he[1],je=(0,s.useState)({name:u.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1}),ne=l()(je,2),$=ne[0],me=ne[1],te=(0,s.useState)(""),G=l()(te,2),Me=G[0],Ee=G[1],h=(0,s.useState)(""),j=l()(h,2),i=j[0],U=j[1],H=(0,s.useState)({id:12,icon:"\u{1F612}"}),S=l()(H,2),V=S[0],ca=S[1];(0,s.useEffect)(function(){location.pathname=="/knowledgebase"&&q(!1)});var Ge=function(T){var y=P.filter(function(we){return we.apps_mode==T});E(!0),me(y[0]?y[0]:{name:"Agent",path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1})},qe=function(){E(!1)},ea=function(T){ue.history.push("/".concat($.path,"?app_id=").concat(T,"&type=false"))},aa=function(T){P.map(function(y){y.name==T.target.value&&(console.log(y,"item"),me(y))})},da=function(T){Ee(T.target.value)},na=function(T){U(T.target.value)},ua=function(){var v=M()(d()().mark(function T(){var y;return d()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,(0,be.uy)({name:Me,mode:$.apps_mode,description:i,icon:V.icon,icon_background:""});case 2:y=xe.sent,y.code===0&&(E(!1),ea(y.data.app_id));case 4:case"end":return xe.stop()}},T)}));return function(){return v.apply(this,arguments)}}(),Ke=(0,s.useState)(!1),Se=l()(Ke,2),ta=Se[0],Ne=Se[1],De=function(){console.log("Import cancelled"),Ne(!1)},sa=(0,s.memo)(function(){var v=(0,s.useState)([]),T=l()(v,2),y=T[0],we=T[1],xe={icon:(0,e.jsx)(Ea.Z,{}),title:u.formatMessage({id:"workflow.uploadFileText",defaultMessage:"Drag file here, or click to upload"}),description:"Upload the exported workflow yml file",accept:".yml,.yaml",fieldProps:{listType:"text",name:"file",multiple:!0,maxCount:1,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},action:ya._n+"/v1/workflow/import",beforeUpload:function(ee){return we([ee]),!1}},onChange:function(ee){var se=ee.file.status;if(se==="done"){var J;(ee==null||(J=ee.file)===null||J===void 0||(J=J.response)===null||J===void 0?void 0:J.code)===0?(f.ZP.success(u.formatMessage({id:"workflow.importSuccess"})),Ne(!1)):f.ZP.error(u.formatMessage({id:"workflow.importFailed"}))}else se==="error"&&f.ZP.error("".concat(ee.file.name," file upload failed."))}},Fe=function(){if(y.length>0){var ee=new FormData;ee.append("file",y[0]),(0,ge.Uq)(ee).then(function(se){if((se==null?void 0:se.code)==0){var J;ue.history.push("/workspace/workflow?app_id=".concat(se==null||(J=se.data)===null||J===void 0?void 0:J.app_id,"&type=false"))}})}Ne(!1)};return(0,e.jsx)(O.Z,{title:u.formatMessage({id:"creation.importWorkflow"}),open:ta,onOk:Fe,okButtonProps:{loading:!1},okText:u.formatMessage({id:"workflow.import"}),onCancel:De,children:(0,e.jsx)(Na.Z,g()({name:"file"},xe))})});return(0,e.jsxs)(ce.Z,{style:{minWidth:300,marginTop:10,backgroundColor:"#EFF0F2"},bodyStyle:{height:"100%"},hoverable:!1,children:[(0,e.jsx)(sa,{}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"194px"},children:[B===6?(0,e.jsxs)("div",{className:"flex justify-around items-start h-full w-full ",style:{flexDirection:"column",height:"calc(100% + 24px)"},children:[P.map(function(v,T){return(0,e.jsxs)("div",{className:"hover:bg-[#fff] w-full rounded-lg h-8 cursor-pointer flex items-center",onClick:function(){return Ge(v.apps_mode)},children:[(0,e.jsx)("img",{src:v.icon,style:{width:"16px",height:"16px",margin:"0 5px 0 10px"},alt:""}),(0,e.jsxs)("div",{style:{color:"#213044"},children:[u.formatMessage({id:"creation.new"}),v.name]})]})}),(0,e.jsxs)("div",{onClick:function(){return Ne(!0)},className:"hover:bg-[#fff] w-full rounded-lg h-8 cursor-pointer flex items-center text-[#213044]",children:[(0,e.jsx)(Sa.Z,{className:"size-4  mr-[5px] ml-[10px]"})," ",u.formatMessage({id:"creation.importWorkflow"})]})]}):null,(0,e.jsx)("div",{className:" flex-wrap h-full text-[#999] text-[12px] cursor-pointer",style:{width:B===6?"50%":"100%"},onClick:function(){return Ge(B)},children:B===6?(0,e.jsxs)("div",{className:"mt-[62px]",children:[(0,e.jsx)("div",{className:"h-[42px] flex justify-center",children:(0,e.jsx)("img",{src:"/icons/creation/add.svg",alt:""})}),(0,e.jsxs)("div",{className:"svg-container w-full text-center",children:[" ",u.formatMessage({id:"creation.addcreation"})]})]}):P.filter(function(v,T){return v.apps_mode==B}).map(function(v,T){return(0,e.jsxs)("div",{className:"mt-[50px]",children:[(0,e.jsx)("div",{className:"h-[42px] flex justify-center mb-[10px]",children:(0,e.jsx)("img",{src:v.unselected?v.unselected:"/icons/creation/add.svg",alt:""})}),(0,e.jsxs)("div",{className:"svg-container w-full text-center",children:[u.formatMessage({id:"creation.new"}),v.name?v.name:u.formatMessage({id:"creation.adhibition"})]})]})})})]}),(0,e.jsx)(pe.Z,{setIsModalOpen:E,isModalOpen:ve,ModalType:X,CreationType:$,setcreationType:me,transformData:P})]})},wa=ba,Pa=a(94840),la=ae.Z.Text,Da=ae.Z.Paragraph,Oa=N.Z.TextArea,Ia=function(){var t=(0,ue.useIntl)(),B=(0,s.useState)(null),u=l()(B,2),p=u[0],W=u[1],X=(0,s.useState)(1),q=l()(X,2),w=q[0],P=q[1],k=(0,s.useState)(!1),he=l()(k,2),ve=he[0],E=he[1],je=(0,s.useState)(""),ne=l()(je,2),$=ne[0],me=ne[1],te=(0,s.useState)(""),G=l()(te,2),Me=G[0],Ee=G[1],h=(0,s.useState)(null),j=l()(h,2),i=j[0],U=j[1],H=(0,s.useState)(!1),S=l()(H,2),V=S[0],ca=S[1],Ge=(0,s.useState)(!1),qe=l()(Ge,2),ea=qe[0],aa=qe[1],da=(0,s.useState)({name:"Agent",path:t.formatMessage({id:"creation.agent"}),icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1}),na=l()(da,2),ua=na[0],Ke=na[1],Se=[{apps_mode:6,name:t.formatMessage({id:"creation.all"}),path:"Agents",icon:"/icons/creation/quanbu.svg",unselected:"/icons/creation/quanbu.svg",pitchicon:"/icons/creation/pitchquanbu.svg",signicon:"/icons/creation/pitchquanbu.svg"},{apps_mode:1,name:t.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",unselected:"/icons/creation/unselectedrobot.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg"},{apps_mode:2,name:t.formatMessage({id:"creation.workflow"}),path:"workspace/workflow",icon:"/icons/creation/gongzuoliu1.svg",unselected:"/icons/creation/unselectedprocess.svg",pitchicon:"/icons/creation/pitchgongzuoliu.svg",signicon:"/icons/creation/signgongzuoliu.svg"},{apps_mode:4,name:t.formatMessage({id:"creation.skill"}),path:"Skill",icon:"/icons/creation/jienng1.svg",unselected:"/icons/creation/unselectedskill.svg",pitchicon:"/icons/creation/pitchskill.svg",signicon:"/icons/creation/signskill.svg"}],ta=(0,s.useState)(6),Ne=l()(ta,2),De=Ne[0],sa=Ne[1],v=(0,s.useState)(!1),T=l()(v,2),y=T[0],we=T[1],xe=(0,s.useState)(""),Fe=l()(xe,2),Ce=Fe[0],ee=Fe[1],se=(0,s.useState)(!1),J=l()(se,2),Aa=J[0],pa=J[1],Za=(0,s.useState)([{apps_mode:1,name:t.formatMessage({id:"creation.agent"}),path:"Agents",readOnlypath:"ReadOnlyAgent"},{apps_mode:2,name:t.formatMessage({id:"creation.workflow"}),path:"workspace/workflow"},{apps_mode:3,name:t.formatMessage({id:"creation.repository"}),path:"createkb"},{apps_mode:4,name:t.formatMessage({id:"creation.skill"}),path:"Skill",readOnlypath:"ReadOnlySkill"}]),ma=l()(Za,2),fa=ma[0],tn=ma[1],La=(0,s.useState)(!0),ga=l()(La,2),Ba=ga[0],ha=ga[1],Ua=(0,s.useState)(-1),va=l()(Ua,2),Ra=va[0],Oe=va[1],Wa=(0,s.useState)([]),xa=l()(Wa,2),_a=xa[0],Ga=xa[1],Te=function(){var n=M()(d()().mark(function r(x,Y,ye,o,D,ra,_e){var Ta,ze;return d()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ta={page:x||w,page_size:27,search_type:(0,m.f1)("GET").searchType==!0?2:1,apps_mode:(0,m.f1)("GET").optionsModalId,apps_name:o||o==""?o:Ce,tag_ids:_e?_e.join(","):""},ha(!0),Ie.next=4,(0,be.go)(Ta);case 4:ze=Ie.sent,pa(!0),W(D?{list:p.list.concat(ze.data.list)}:ze.data),ha(!1),ze.data.list.length<27&&pa(!1);case 9:case"end":return Ie.stop()}},r)}));return function(x,Y,ye,o,D,ra,_e){return n.apply(this,arguments)}}();(0,s.useEffect)(function(){if((0,m.op)(),location.pathname=="/knowledgebase"){var n={apps_mode:3,name:t.formatMessage({id:"creation.repository"}),path:"Createkb"};ja(n)}else ca(!0),Te(1,null)},[]);var Ka=function(){P(w+1),Te(w+1,y,null,null,!0)},ja=function(r){sa(r.apps_mode),(0,m.f1)("SET",r.apps_mode,JSON.parse((0,m.f1)("GET").searchType)),Te(1,y,r.apps_mode)},Fa=function(r){ee(r.target.value),Te(1,y,De,r.target.value)};(0,s.useEffect)(function(){Te(1,y,De,Ce,null,null,_a)},[_a]);var za=function(){E(!1)},$a=function(){var n=M()(d()().mark(function r(){var x,Y;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return x={name:$,description:Me,app_id:i.app_id,mode:i.mode,icon:i.id?JSON.stringify(i.id):i.icon,icon_background:""},o.next=3,(0,be.bs)(x);case 3:Y=o.sent,Y.code==0&&(E(!1),Te(1,y,null,null,null,w*27));case 5:case"end":return o.stop()}},r)}));return function(){return n.apply(this,arguments)}}(),Ha=function(r,x){Oe(x),E(!0),me(r.name),Ee(r.description),U(r)},Va=function(r){me(r.target.value)},Ja=function(r){Ee(r.target.value)},Ma=function(r){event.stopPropagation(),(0,m.Go)("SET",g()(g()({},r),{},{type:(0,m.f1)("GET").searchType}));var x=fa.filter(function(Y){return Y.apps_mode===r.mode});(r.mode===1||r.mode===4)&&(0,m.f1)("GET").searchType==!0?ue.history.push("/".concat(x[0].readOnlypath,"?app_id=").concat(r.app_id?r.app_id:r.apps_id,"&type=").concat((0,m.f1)("GET").searchType)):ue.history.push("/".concat(x[0].path,"?app_id=").concat(r.app_id?r.app_id:r.apps_id,"&type=").concat((0,m.f1)("GET").searchType))},Ya=function(r,x){Oe(x),O.Z.confirm({title:t.formatMessage({id:"creation.modal.returnconfirm"}),content:t.formatMessage({id:"creation.modal.deldescribe"}),onOk:function(){var Y=M()(d()().mark(function o(){var D;return d()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,(0,be.LK)(r);case 2:D=_e.sent,D&&D.code==0?(f.ZP.success(t.formatMessage({id:"creation.modal.delsuccess"})),Te(1,null,null,null,null,w*27)):f.ZP.error(t.formatMessage({id:"creation.modal.delerror"}));case 4:case"end":return _e.stop()}},o)}));function ye(){return Y.apply(this,arguments)}return ye}(),onCancel:function(){}})},Qa=function(r){var x=JSON.parse(r.target.value);we(x),(0,m.f1)("SET",null,x),Te(1,x)},Xa=function(){var r=Se.filter(function(x){return x.apps_mode==(0,m.f1)("GET").optionsModalId});aa(!0),Ke(r[0].apps_mode!==6?r[0]:{name:"Agent",path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1})},qa=(0,I.Z)(function(n){return n.setRunId}),sn=(0,I.Z)(function(n){return n.setRunPanelLogRecord}),rn=(0,I.Z)(function(n){return n.setDealtWithData}),en=function(r){qa(r.app_id)},Ca=Qe(),an=Ca.tagList,nn=Ca.refreshTags;return(0,s.useEffect)(function(){},[De]),(0,e.jsxs)("div",{className:" pb-[10px] flex flex-col",style:{height:"calc(-60px + 100vh)",width:"100%",margin:"0 auto"},children:[(0,e.jsxs)("div",{className:"flex px-[30px] py-[20px] mx-[8px] items-center justify-between",children:[(0,e.jsx)("div",{className:"flex items-center",children:V?Se.map(function(n,r){return(0,e.jsxs)("div",{onClick:function(){ja(n)},className:"flex justify-center items-center h-8 rounded-lg mr-4 cursor-pointer px-[10px]",style:(0,m.f1)("GET").optionsModalId==n.apps_mode?{color:"#1B64F3",backgroundColor:"#ffffff"}:{color:"#9097a1"},children:[(0,e.jsx)("div",{className:"mr-2",children:(0,e.jsx)("img",{src:(0,m.f1)("GET").optionsModalId==n.apps_mode?n.pitchicon:n.unselected,alt:""})}),(0,e.jsx)("div",{children:n.name})]})}):""}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"min-w-[200px] mr-4",children:(0,e.jsx)(z,{allowClear:!0,modes:(0,m.f1)("GET").optionsModalId,onTagChange:function(){nn()},onChange:function(r){Ga(r)}})}),(0,e.jsx)("div",{className:" mr-5",children:(0,e.jsxs)(F.ZP.Group,{onChange:Qa,defaultValue:JSON.stringify((0,m.f1)("GET").searchType),children:[(0,e.jsx)(F.ZP.Button,{value:"true",children:t.formatMessage({id:"creation.team"})}),(0,e.jsx)(F.ZP.Button,{value:"false",children:t.formatMessage({id:"creation.individual"})})]})}),(0,e.jsx)(N.Z,{style:{width:300},prefix:(0,e.jsx)(ie.Z,{}),placeholder:t.formatMessage({id:"creation.placeholder.searchname"}),variant:"filled",onChange:Fa})]})]}),(0,e.jsx)(L.Z,{spinning:Ba,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{id:"Creation",style:{overflowY:"auto",height:"calc(100vh - 128px)"},children:p&&p.list&&p.list.length>0?(0,e.jsx)($e.Z,{dataLength:p.list.length,elid:"Creation",ishasMore:Aa,upSlide:Ka,isFooter:!0,children:(0,e.jsxs)(_.Z,{gutter:[16,8],wrap:!0,style:{margin:0},className:"px-[30px]",children:[(0,e.jsx)(C.Z,{sm:24,md:12,lg:12,xl:8,xxl:6,children:(0,e.jsx)(wa,{optionsModalId:(0,m.f1)("GET").optionsModalId})}),p&&p.list&&p.list.length?p.list.map(function(n,r){var x,Y,ye;return(0,e.jsx)(C.Z,{className:"gutter-row",sm:24,md:12,lg:12,xl:8,xxl:6,children:(0,e.jsx)(ce.Z,{className:" cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",style:{marginTop:10,minWidth:300},hoverable:!1,styles:{body:{padding:"20px"}},children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{onClick:function(){return Ma(n)},children:(0,e.jsx)(ce.Z.Meta,{title:[(0,e.jsxs)("div",{className:"flex w-full",children:[(0,e.jsx)("div",{className:"mr-[17px] shrink-0",children:(0,e.jsx)(b.Z,{Image:(0,m.s9)("single",n.icon),icon:(0,m.f1)("GET").optionsModalId===6?(x=Se.filter(function(o){return o.apps_mode===n.mode})[0])===null||x===void 0?void 0:x.signicon:null})}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[" ",(0,e.jsx)("div",{style:{maxWidth:"160px"},className:"text-sm text-[#213044] font-medium truncate",children:(0,e.jsx)(la,{ellipsis:{tooltip:n.name},children:n.name})}),(0,e.jsxs)("div",{className:" leading-6 flex items-center justify-end text-xs font-normal text-[#999999]",children:[(0,e.jsxs)("div",{children:[t.formatMessage({id:"creation.numberofcitation"}),":"," "]}),(0,e.jsxs)("div",{className:"text-[#1B64F3] ml-2",children:[" ",n.execution_times?n.execution_times:0]})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between w-full text-xs font-normal text-[#999999]",children:[(0,e.jsx)("div",{className:"text-xs font-normal text-[#999999] mt-[7px]",children:fa.map(function(o,D){return o.apps_mode===n.mode?o.name:null})}),(0,e.jsxs)("div",{className:" flex items-center justify-end mt-[7px]",children:[(0,e.jsx)("div",{className:"max-w-[56px] mr-2 ",children:(0,e.jsx)(la,{ellipsis:{tooltip:n.published_creator},className:"text-base",children:(0,e.jsx)("div",{className:" text-[#999999] text-xs",children:n.published_creator})})}),(0,e.jsx)("div",{children:n.published_time?(0,e.jsxs)("span",{children:[ia()(n.published_time).format("YYYY-MM-DD HH:mm:ss")," ",t.formatMessage({id:"creation.publish"})]}):n.mode!==3?(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("img",{src:"/icons/unpublish.svg",alt:"",className:"mr-[5px]"}),t.formatMessage({id:"creation.unpublish"})]}):null})]})]})]})]})],description:(0,e.jsxs)("div",{style:{height:100,margin:"20px 0 20px 0"},children:[(0,e.jsx)(Da,{ellipsis:{rows:4,tooltip:n.description},className:"!mb-0",children:(0,e.jsx)("div",{style:{color:"#999999"},children:n.description})}),(0,e.jsx)("div",{onClick:function(D){D.stopPropagation()},className:"not_has_down_select hover:bg-gray-100 rounded-md",children:(0,e.jsx)(Re,{onBlur:function(D){(0,ge.v_)(n.changeTags,[n.app_id])},onChange:function(D){n.changeTags=D},placeholder:t.formatMessage({id:"addTag.addTag"}),defaultValue:(Y=n.tags)===null||Y===void 0?void 0:Y.map(function(o){return o.id}),maxTagCount:5,options:an,className:"!w-full",variant:"borderless"},n.app_id)})]})})}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("div",{className:"flex items-center justify-start",style:{height:"24px"},children:n.list&&n.list.length?(0,e.jsx)(c.Z,{placement:"bottomLeft",content:(0,e.jsx)("div",{className:" overflow-auto",children:n.list.map(function(o,D){return(0,e.jsxs)("div",{className:"w-80 flex items-center justify-start p-1.5 rounded-md  cursor-pointer hover:bg-[#fafafa]",onClick:function(){return Ma(o)},children:[(0,e.jsx)("div",{className:"mr-3.5",children:(0,e.jsx)("div",{className:"w-[36px] h-[36px] bg-[#EDF3FE] rounded-lg mr-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:(0,m.s9)("single",o.icon),alt:""})})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs font-normal text-[#213044]",children:o.name}),(0,e.jsx)("div",{className:"text-xs font-normal text-[#666]",children:(o==null?void 0:o.mode)==1?t.formatMessage({id:"workflow.agent"}):(o==null?void 0:o.mode)==2?t.formatMessage({id:"component.menu.workflow"}):(o==null?void 0:o.mode)==3?t.formatMessage({id:"component.menu.knowledgeBase"}):t.formatMessage({id:"workflow.skill"})})]})]},D)})}),children:(0,e.jsxs)("div",{className:"flex items-center justify-around text-xs font-normal",children:[t.formatMessage({id:"creation.relevancy.app"})," ",":",n.list.slice(0,4).map(function(o,D){return(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"w-8 h-8 bg-[#EDF3FE] rounded-lg ml-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:(0,m.s9)("single",o.icon),alt:""})})},D)}),n.list.length>4?(0,e.jsx)("div",{className:"w-8 h-8 bg-[#EDF3FE] rounded-lg ml-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:"/icons/more.svg",alt:""})}):null]})}):null}),(n==null?void 0:n.mode)===2?(0,e.jsx)("div",{className:"flex-1 flex justify-end items-center",children:(n==null?void 0:n.publish_status)==1?(0,e.jsx)("img",{onClick:function(){return en(n)},src:"/icons/operation_icon.svg",className:"mr-2"}):(0,e.jsx)("img",{src:"/icons/operation_disable_icon.svg",className:"mr-2"})}):null,(0,e.jsx)("div",{children:JSON.parse((ye=(0,m.f1)("GET"))===null||ye===void 0?void 0:ye.searchType)?null:(0,e.jsx)(c.Z,{placement:"rightTop",open:Ra==r,onOpenChange:function(D){Oe(-1)},content:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsxs)(de.ZP,{type:"link",className:"text-[#213044]",onClick:function(){Ha(n,-1)},children:[(0,e.jsx)(Q.Z,{}),t.formatMessage({id:"creation.redact"})]})}),(0,e.jsx)("div",{children:(0,e.jsxs)(de.ZP,{type:"link",className:"text-[#E12222]",onClick:function(){return Ya(n,-1)},children:[(0,e.jsx)(K.Z,{}),t.formatMessage({id:"creation.delete"})]})})]}),children:(0,e.jsx)("div",{onMouseEnter:function(){Oe(r)},className:"w-[26px] h-[26px] flex items-center justify-center",children:(0,e.jsx)(le.Z,{onClick:function(){Oe(r)}},"setting")})})})]})]})})},r)}):null]})}):p&&p.list&&p.list.length==0?(0,e.jsxs)("div",{className:"w-full flex items-center flex-wrap justify-center mt-48",children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-center mb-2.5",children:(0,e.jsx)("img",{src:"/icons/default.svg",alt:""})}),Ce&&Ce!==""?(0,e.jsxs)("div",{children:["\u201C",Ce,"\u201D"]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"w-full text-center mb-3 text-[#666] text-sm",children:[t.formatMessage({id:"creation.margindescribe"})," ~"]}),(0,e.jsxs)("div",{className:"w-full text-center",children:[" ",(0,e.jsx)(de.ZP,{color:"primary",onClick:function(){Xa()},children:t.formatMessage({id:"creation.addnewapp"})})," "]})]})]}):null})}),(0,e.jsxs)(O.Z,{title:"",open:ve,okText:t.formatMessage({id:"creation.conserve"}),onOk:$a,onCancel:za,children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"mb-[15px]",children:[(i==null?void 0:i.mode)==1?t.formatMessage({id:"creation.agent"}):(i==null?void 0:i.mode)==2?t.formatMessage({id:"creation.workflow"}):(i==null?void 0:i.mode)==3?t.formatMessage({id:"creation.repository"}):t.formatMessage({id:"creation.skill"}),t.formatMessage({id:"creation.appiconname"})]}),(0,e.jsxs)("div",{className:"flex items-center justify-around",children:[(0,e.jsx)(Pa.Z,{CardData:i,setCardData:U}),(0,e.jsx)(N.Z,{showCount:!0,maxLength:20,placeholder:t.formatMessage({id:"creation.placeholder.appname"}),onChange:Va,value:$})]})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"mb-[15px]",children:[(i==null?void 0:i.mode)==1?t.formatMessage({id:"creation.agent"}):(i==null?void 0:i.mode)==2?t.formatMessage({id:"creation.workflow"}):(i==null?void 0:i.mode)==3?t.formatMessage({id:"creation.repository"}):t.formatMessage({id:"creation.skill"}),t.formatMessage({id:"creation.appdescribe"})]}),(0,e.jsx)(Oa,{showCount:!0,maxLength:100,rows:4,placeholder:t.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Ja,value:Me})]})]}),(0,e.jsx)(pe.Z,{setIsModalOpen:aa,isModalOpen:ea,ModalType:!0,CreationType:ua,setcreationType:Ke,transformData:Se.filter(function(n){return n.apps_mode!==6})})]})},ka=Ia}}]);
