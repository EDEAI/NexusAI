"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[316],{11475:function(Re,re,a){a.d(re,{Z:function(){return O}});var P=a(1413),u=a(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},y=f,m=a(91146),b=function(ve,G){return u.createElement(m.Z,(0,P.Z)((0,P.Z)({},ve),{},{ref:G,icon:y}))},ne=u.forwardRef(b),O=ne},35790:function(Re,re,a){var P=a(1413),u=a(67294),f=a(19369),y=a(91146),m=function(O,oe){return u.createElement(y.Z,(0,P.Z)((0,P.Z)({},O),{},{ref:oe,icon:f.Z}))},b=u.forwardRef(m);re.Z=b},11551:function(Re,re,a){a.d(re,{CU:function(){return d},CY:function(){return Ce},Ce:function(){return de},Dh:function(){return he},Iw:function(){return se},LH:function(){return Pe},My:function(){return ue},Nj:function(){return I},XB:function(){return we},ek:function(){return $e},pC:function(){return le},zl:function(){return fe}});var P=a(15009),u=a.n(P),f=a(99289),y=a.n(f),m=a(47520),b="/v1/agent/agent_info/",ne="/v1/vector/dataset_list/2",O="/v1/agent/agent_base_update/",oe="/v1/agent/agent_abilities_set/",ve="/v1/agent/agent_output_set/",G="/v1/agent/agent_engine_set/",pe="/v1/agent/agent_publish/",$="/v1/agent/agent_run",$e=function(){var v=y()(u()().mark(function t(r,s){var l;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("".concat(b).concat(r),{method:"GET",data:{publish_status:s=="true"?1:0}});case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}},t)}));return function(r,s){return v.apply(this,arguments)}}(),fe=function(){var v=y()(u()().mark(function t(){var r;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.ZP)("".concat(ne),{method:"GET"});case 2:return r=l.sent,l.abrupt("return",r);case 4:case"end":return l.stop()}},t)}));return function(){return v.apply(this,arguments)}}(),we=function(){var v=y()(u()().mark(function t(r){var s;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(O).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),se=function(){var v=y()(u()().mark(function t(r){var s;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(oe).concat(r.agent_id),{method:"PUT",data:r.data});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),de=function(){var v=y()(u()().mark(function t(r){var s;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(ve).concat(r.agent_id),{method:"PUT",data:r});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),V=null,he=function(){var v=y()(u()().mark(function t(r){var s;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat(pe).concat(r),{method:"PUT"});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),Pe=function(){var v=y()(u()().mark(function t(r){var s;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("".concat($),{method:"POST",data:r});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),Ce=function(){var v=y()(u()().mark(function t(r){var s;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,m.ZP)("/v1/agent/agent_chat_message",{method:"POST",data:r});case 2:return s=i.sent,i.abrupt("return",s);case 4:case"end":return i.stop()}},t)}));return function(r){return v.apply(this,arguments)}}(),d=function(){var v=y()(u()().mark(function t(r,s){var l;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_message_list"),{method:"GET",data:{page:s,page_size:20}});case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}},t)}));return function(r,s){return v.apply(this,arguments)}}(),ue=function(){var v=y()(u()().mark(function t(r,s){var l;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_log_list"),{method:"GET",data:s});case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}},t)}));return function(r,s){return v.apply(this,arguments)}}(),le=function(){var v=y()(u()().mark(function t(r,s){var l;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/agent_log_details"),{method:"GET",data:{app_run_id:s}});case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}},t)}));return function(r,s){return v.apply(this,arguments)}}(),I=function(){var v=y()(u()().mark(function t(r,s){var l;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.ZP)("/v1/agent/".concat(r,"/clear_agent_chat_memory"),{method:"POST",data:{message_id:s,agent_id:r}});case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}},t)}));return function(r,s){return v.apply(this,arguments)}}()},85422:function(Re,re,a){var P=a(15009),u=a.n(P),f=a(99289),y=a.n(f),m=a(5574),b=a.n(m),ne=a(11551),O=a(39873),oe=a(28508),ve=a(29933),G=a(35312),pe=a(3917),$=a(66309),$e=a(28036),fe=a(71471),we=a(74330),se=a(26412),de=a(12845),V=a(67294),he=a(22683),Pe=a(97807),Ce=a(92485),d=a(85893);re.Z=(0,V.memo)(function(ue){var le,I,v,t=ue.data,r=ue.onClose,s=(0,G.useIntl)(),l=(0,V.useState)(500),i=b()(l,2),e=i[0],ce=i[1],Y=(0,pe.Z)(function(){var k=y()(u()().mark(function A(ge,xe){var _e;return u()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,ne.pC)(ge,xe);case 2:return _e=q.sent,q.abrupt("return",_e.data);case 4:case"end":return q.stop()}},A)}));return function(A,ge){return k.apply(this,arguments)}}(),{manual:!0}),j=Y.data,Q=Y.loading,ie=Y.run;(0,V.useEffect)(function(){t!=null&&t.app_id&&t!==null&&t!==void 0&&t.app_run_id&&ie(t.app_id,t.app_run_id)},[t==null?void 0:t.app_id,t==null?void 0:t.app_run_id,ie]);var N=function(A){var ge={1:{color:"processing",text:s.formatMessage({id:"workflow.running"})},2:{color:"success",text:s.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:s.formatMessage({id:"workflow.runF"})}},xe=ge[A]||{color:"default",text:"Unknown"};return(0,d.jsx)($.Z,{color:xe.color,children:xe.text})},me=function(A){ce(A)};return(0,d.jsx)(O.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:e,onChange:me,children:(0,d.jsx)(ve.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,d.jsx)($e.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:r,icon:(0,d.jsx)(oe.Z,{})}),title:(0,d.jsx)(fe.Z.Title,{level:5,children:s.formatMessage({id:"agent.log.detail"})}),loading:Q,children:(0,d.jsx)("div",{className:"space-y-6",children:Q?(0,d.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,d.jsx)(we.Z,{})}):j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(se.Z,{column:1,bordered:!0,size:"small",children:[(0,d.jsx)(se.Z.Item,{label:s.formatMessage({id:"workflow.user"}),children:j.nickname}),(0,d.jsx)(se.Z.Item,{label:s.formatMessage({id:"workflow.status"}),children:N(j.status)}),(0,d.jsx)(se.Z.Item,{label:s.formatMessage({id:"workflow.created_time"}),children:j.created_time}),(0,d.jsxs)(se.Z.Item,{label:s.formatMessage({id:"workflow.elapsed_time"}),children:[j.elapsed_time,"s"]}),(0,d.jsx)(se.Z.Item,{label:"Tokens",children:j.total_tokens})]}),(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(fe.Z.Title,{level:5,children:s.formatMessage({id:"agent.log.output"})}),j.outputs?(0,d.jsx)("div",{children:(j==null||(le=j.outputs)===null||le===void 0?void 0:le.type)=="json"?(0,d.jsx)("div",{className:"h-80",children:(0,d.jsx)(Ce.Z,{language:"python3",value:JSON.parse((I=j.outputs)===null||I===void 0?void 0:I.value)||"{}",readOnly:!0,isJSONStringifyBeauty:!0,onChange:function(){},title:"JSON"})}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)(he.U,{rehypePlugins:[Pe.Z],children:((v=j.outputs)===null||v===void 0?void 0:v.value)||""})})}):j.error?(0,d.jsxs)("div",{className:"bg-gray-50 p-4 rounded mt-2 border-l-4 border-red-500",children:[(0,d.jsx)("div",{className:"text-red-500 font-medium mb-2",children:s.formatMessage({id:"agent.log.error"})}),(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-red-500",children:j.error})]}):(0,d.jsx)("div",{className:"bg-gray-50 p-4 rounded mt-2",children:(0,d.jsx)("div",{className:"text-sm text-gray-500",children:s.formatMessage({id:"agent.log.no.output"})})})]}),Array.isArray(j==null?void 0:j.prompt_data)&&j.prompt_data.length>0&&(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)(fe.Z.Title,{level:5,children:s.formatMessage({id:"agent.log.conversation"})}),(0,d.jsx)(de.Z,{className:"mt-2",children:j.prompt_data.map(function(k,A){var ge=b()(k,2),xe=ge[0],_e=ge[1];return(0,d.jsx)(de.Z.Item,{color:xe==="human"?"blue":"green",children:(0,d.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:xe}),(0,d.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:_e.value})]})},A)})})]})]}):null})})})})},39873:function(Re,re,a){var P=a(5574),u=a.n(P),f=a(42881),y=a(67294),m=a(85893),b=function(O){var oe=O.children,ve=O.className,G=ve===void 0?"":ve,pe=O.dragDirection,$=pe===void 0?"left":pe,$e=O.minWidth,fe=$e===void 0?415:$e,we=O.maxWidth,se=we===void 0?820:we,de=O.minHeight,V=de===void 0?200:de,he=O.maxHeight,Pe=he===void 0?800:he,Ce=O.defaultWidth,d=Ce===void 0?415:Ce,ue=O.defaultHeight,le=ue===void 0?300:ue,I=O.onChange,v=(0,y.useState)(d),t=u()(v,2),r=t[0],s=t[1],l=(0,y.useState)(le),i=u()(l,2),e=i[0],ce=i[1],Y=(0,y.useCallback)(function(N,me){s(N),me&&ce(me),I==null||I(N,me)},[s,ce,I]),j=(0,f.W)({direction:["left","right"].includes($)?"horizontal":"vertical",triggerDirection:$,minWidth:fe,maxWidth:se,minHeight:V,maxHeight:Pe,onResize:Y}),Q=j.triggerRef,ie=j.containerRef;return(0,m.jsxs)("div",{ref:ie,style:{width:["left","right"].includes($)?"".concat(r,"px"):void 0,height:["top","bottom"].includes($)?"".concat(e,"px"):void 0},className:"flex flex-col p-4 shadow-lg rounded-md border border-blue-300 bg-white z-10 wrapPanel ".concat(G),children:[$==="left"&&(0,m.jsx)("div",{ref:Q,className:"absolute top-1/2 -translate-y-1/2 -left-2 w-3 h-6 cursor-col-resize resize-x",children:(0,m.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),$==="right"&&(0,m.jsx)("div",{ref:Q,className:"absolute top-1/2 -translate-y-1/2 -right-2 flex justify-end w-3 h-6 cursor-col-resize resize-x",children:(0,m.jsx)("div",{className:"w-1 h-6 bg-gray-300 rounded-sm"})}),$==="top"&&(0,m.jsx)("div",{ref:Q,className:"absolute left-1/2 -translate-x-1/2 -top-2 h-3 w-6 cursor-row-resize resize-y",children:(0,m.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),$==="bottom"&&(0,m.jsx)("div",{ref:Q,className:"absolute left-1/2 -translate-x-1/2 -bottom-2 h-3 w-6 cursor-row-resize resize-y",children:(0,m.jsx)("div",{className:"h-1 w-6 bg-gray-300 rounded-sm"})}),oe]})};re.Z=(0,y.memo)(b)},57329:function(Re,re,a){a.r(re),a.d(re,{default:function(){return lt}});var P=a(56264),u=a(64456),f=a(67294),y=a(15009),m=a.n(y),b=a(99289),ne=a.n(b),O=a(97857),oe=a.n(O),ve=a(5574),G=a.n(ve),pe=a(42237),$=a(29608),$e=a(35790),fe=a(11475),we=a(8751),se=a(97578),de=a(77598),V=a(97582),he=a(22638),Pe=a(3917),Ce=function(z,_){var w;_===void 0&&(_={});var Z=_.defaultPageSize,p=Z===void 0?10:Z,C=_.defaultCurrent,D=C===void 0?1:C,B=(0,V._T)(_,["defaultPageSize","defaultCurrent"]),K=(0,Pe.Z)(z,(0,V.pi)({defaultParams:[{current:D,pageSize:p}],refreshDepsAction:function(){De(1)}},B)),S=K.params[0]||{},R=S.current,E=R===void 0?1:R,W=S.pageSize,ae=W===void 0?p:W,L=((w=K.data)===null||w===void 0?void 0:w.total)||0,Te=(0,f.useMemo)(function(){return Math.ceil(L/ae)},[ae,L]),X=function(ee,M){var be=ee<=0?1:ee,F=M<=0?1:M,Ne=Math.ceil(L/F);be>Ne&&(be=Math.max(1,Ne));var Oe=(0,V.CR)(K.params||[]),J=Oe[0],Ee=J===void 0?{}:J,n=Oe.slice(1);K.run.apply(K,(0,V.ev)([(0,V.pi)((0,V.pi)({},Ee),{current:be,pageSize:F})],(0,V.CR)(n),!1))},De=function(ee){X(ee,ae)},U=function(ee){X(E,ee)};return(0,V.pi)((0,V.pi)({},K),{pagination:{current:E,pageSize:ae,total:L,totalPage:Te,onChange:(0,he.Z)(X),changeCurrent:(0,he.Z)(De),changePageSize:(0,he.Z)(U)}})},d=Ce,ue=a(78697),le=a(32332),I=a(35312),v=a(74330),t=a(83062),r=a(32983),s=a(29432),l=a(72252),i=a(71471),e=a(85893),ce=function(_){var w=_.iconSrc,Z=_.titleText,p=_.pagination,C=_.showTotal,D=C===void 0?!0:C,B=_.titleAfter,K=B===void 0?null:B,S=(0,I.useIntl)();return(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)("img",{src:w,alt:""}),(0,e.jsx)("div",{children:Z}),(0,e.jsx)("div",{children:(0,e.jsx)(l.Z,{size:"small",simple:!0,showTotal:function(E,W){return D?"".concat(S.formatMessage({id:"app.workflow.title.1"})).concat(W[0],"-").concat(W[1]).concat(S.formatMessage({id:"app.workflow.title.2"})," / ").concat(S.formatMessage({id:"app.workflow.title.3"})).concat(E," ").concat(S.formatMessage({id:"app.workflow.title.2"})):null},current:p.current,pageSize:p.pageSize,onShowSizeChange:null,total:p.total,onChange:p.onChange})}),K]})},Y=function(_){var w=_.item;console.log(w);var Z=(0,I.useIntl)(),p="/icons/creation/",C="",D="";switch(w.type){case 1:D=Z.formatMessage({id:"app.itemHeader.agent"}),C="Agent";break;case 2:D=Z.formatMessage({id:"app.itemHeader.chatRoom"}),C="ChatRoom";break;case 3:D=Z.formatMessage({id:"app.itemHeader.workFlow"}),C="WorkFlow";break;default:break}return p+=s.Le[C],(0,e.jsxs)("div",{className:"flex gap-5 shrink-0",children:[(0,e.jsx)("div",{className:"shrink-0",children:(0,e.jsx)(ue.Z,{Image:w.type==2?"/icons/chat_room.svg":(0,le.s9)("single",w.icon),icon:"".concat(p,".svg")})}),(0,e.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,e.jsx)("div",{className:"text-sm text-[#213044]",children:(0,e.jsx)(i.Z.Paragraph,{ellipsis:{rows:2,tooltip:w.name},className:"!mb-0",children:w.name})}),(0,e.jsx)("div",{className:"text-xs text-[#999999]",children:D})]})]})},j=function(){var z,_,w=(0,$.Z)(function(h){return h.setDealtWithData}),Z=(0,$.Z)(function(h){return h.prevConfirmDealtWith}),p=(0,$.Z)(function(h){return h.dealtWithData}),C=(0,$.Z)(function(h){return h.setRunPanelLogRecord}),D=(0,$.Z)(function(h){return h.submitPromptId}),B=(0,I.useIntl)(),K=(0,f.useRef)(null),S=(0,f.useState)(null),R=G()(S,2),E=R[0],W=R[1],ae=(0,se.Z)("pageNumber"),L=G()(ae,2),Te=L[0],X=L[1],De=function(H){console.log(H),w(H)};(0,de.Z)(function(){var h=J.list.map(function(H){return H.exec_id==Z.exec_id&&(H.need_human_confirm=0),H});Ee(oe()(oe()({},J),{},{list:h}))},[Z]);var U=function(){var h=ne()(m()().mark(function H(Ze){var Ae,g,c;return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Ae=Ze.current,g=Ze.pageSize,o.next=3,(0,pe.VE)({current:Ae,pageSize:g});case 3:return c=o.sent,o.abrupt("return",{list:c.data.list,success:!0,total:c.data.total_count});case 5:case"end":return o.stop()}},H)}));return function(Ze){return h.apply(this,arguments)}}(),ee=d(U,{defaultPageSize:10}),M=ee.data,be=ee.loading,F=ee.pagination,Ne=(0,f.useState)(M),Oe=G()(Ne,2),J=Oe[0],Ee=Oe[1];(0,f.useEffect)(function(){Ee(M)},[M]),(0,de.Z)(function(){K.current&&K.current.reload()},[D]);var n=(0,f.useCallback)(function(h){var H=h.item;return(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{children:H.app_name})," ",(0,e.jsx)($e.Z,{}),(0,e.jsx)("span",{className:H.need_human_confirm==1?"text-[#1B64F3]":"text-[#808183]",children:H.node_name})]}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate",children:H.app_run_name})]})},[J]);return(0,e.jsx)(v.Z,{spinning:be,children:(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(ce,{iconSrc:"/icons/back_log.svg",titleText:B.formatMessage({id:"app.workflow.backlogs.title"}),pagination:F}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-2.5 mt-4 overflow-y-auto h-full",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[J==null||(z=J.list)===null||z===void 0?void 0:z.map(function(h,H){return h.type=3,(0,e.jsxs)("div",{onClick:function(){console.log(h),h.need_human_confirm&&(w(h),W(h),C(!1))},className:"flex items-center gap-5 cursor-pointer duration-200 rounded-lg  p-2.5 hover:bg-[#fafafa]",children:[(0,e.jsx)(ue.Z,{Image:(0,le.s9)("single",h.icon)}),(0,e.jsx)(n,{item:h}),(0,e.jsx)("div",{children:h.need_human_confirm?(0,e.jsx)(t.Z,{title:B.formatMessage({id:"workflow.needHumanConfirm"}),children:(0,e.jsx)(fe.Z,{className:"text-[#1B64F3]"})}):(0,e.jsx)(t.Z,{title:B.formatMessage({id:"workflow.noHumanConfirm"}),children:(0,e.jsx)(we.Z,{className:"text-[#52C41C]"})})})]},h.exec_id)}),!be&&(J==null||(_=J.list)===null||_===void 0?void 0:_.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(r.Z,{image:"/images/empty.svg",description:B.formatMessage({id:"app.workflow.backlogs.empty"})})})]})]})})},Q=a(29933),ie=a(4393),N=ie.Z.Meta,me=function(){var z,_,w=(0,I.useIntl)(),Z=function(R){console.log(R);var E=R.app_id||R.apps_id;switch(R.type){case 1:I.history.push("/Agents?app_id=".concat(E));break;case 2:I.history.push("/chat_room/".concat(R.chatroom_id));break;case 3:I.history.push("/workspace/workflow?app_id=".concat(E));break;default:break}},p=function(){var S=ne()(m()().mark(function R(E){var W,ae,L;return m()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return W=E.current,ae=E.pageSize,X.next=3,(0,pe.vu)({current:W,pageSize:ae});case 3:return L=X.sent,X.abrupt("return",{list:L.data.list,success:!0,total:L.data.total_count});case 5:case"end":return X.stop()}},R)}));return function(E){return S.apply(this,arguments)}}(),C=d(p,{defaultPageSize:8}),D=C.data,B=C.loading,K=C.pagination;return console.log(B),(0,e.jsxs)("div",{className:"flex-grow-0",children:[(0,e.jsx)(ce,{iconSrc:"/icons/recently_active.svg",titleText:w.formatMessage({id:"app.workflow.ra.title"}),pagination:K}),(0,e.jsx)("div",{className:"grid grid-cols-4  gap-4 mt-4",children:D==null||(z=D.list)===null||z===void 0?void 0:z.map(function(S,R){var E=S.type==3?S.process_name:S.last_agent_name;return(0,e.jsx)(Q.Z,{className:"h-[160px] cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",title:(0,e.jsx)(Y,{item:S}),onClick:function(){return Z(S)},bodyStyle:{padding:"15px 20px"},children:(0,e.jsx)(i.Z.Paragraph,{ellipsis:{rows:2,tooltip:E},children:E})},S.app_id)})}),!(D!=null&&(_=D.list)!==null&&_!==void 0&&_.length)&&(0,e.jsxs)("div",{className:"h-[400px] w-full flex items-center justify-center",children:[!B&&(0,e.jsx)(r.Z,{imageStyle:{display:"flex",justifyContent:"center"},image:"/images/empty.svg",description:w.formatMessage({id:"app.workflow.ra.empty"})}),(0,e.jsx)(v.Z,{spinning:B})]})]})},k=a(68672),A=a(43722),ge=a(39873),xe=a(28508),_e=a(66309),Ue=a(28036),q=a(26412),Le=a(22683),T=a(97807),Ie=a(86),We=a(38027),Ke=(0,f.memo)(function(z){var _,w,Z,p,C,D,B,K,S,R,E,W,ae,L,Te,X,De,U=z.data,ee=z.onClose,M=(0,I.useIntl)(),be=(0,f.useState)(500),F=G()(be,2),Ne=F[0],Oe=F[1],J=(0,$.Z)(function(g){return g.setRunPanelLogRecord}),Ee=(0,Pe.Z)(function(){var g=ne()(m()().mark(function c(x,o){var je;return m()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,A.Gh)({chatroom_id:x,app_run_id:o});case 2:return je=te.sent,te.abrupt("return",je.data);case 4:case"end":return te.stop()}},c)}));return function(c,x){return g.apply(this,arguments)}}(),{manual:!0}),n=Ee.data,h=Ee.loading,H=Ee.run;(0,f.useEffect)(function(){U!=null&&U.chatroom_id&&U!==null&&U!==void 0&&U.app_run_id&&H(U.chatroom_id,U.app_run_id)},[U==null?void 0:U.chatroom_id,U==null?void 0:U.app_run_id,H]);var Ze=function(c){var x={1:{color:"processing",text:M.formatMessage({id:"workflow.running"})},2:{color:"success",text:M.formatMessage({id:"workflow.runSc"})},3:{color:"error",text:M.formatMessage({id:"workflow.runF"})}},o=x[c]||{color:"default",text:"Unknown"};return(0,e.jsx)(_e.Z,{color:o.color,children:o.text})},Ae=function(c){Oe(c)};return(0,e.jsx)(ge.Z,{className:"fixed top-[65px] right-2 p-0",dragDirection:"left",minWidth:400,maxWidth:800,defaultWidth:Ne,onChange:Ae,children:(0,e.jsx)(Q.Z,{className:"border-none h-full",style:{height:"calc(100vh - 50px - 60px)"},bodyStyle:{overflowY:"auto",padding:"16px"},extra:(0,e.jsx)(Ue.ZP,{type:"text",className:"-mr-4 -mt-8",onClick:ee,icon:(0,e.jsx)(xe.Z,{})}),title:(0,e.jsx)(i.Z.Title,{level:5,children:M.formatMessage({id:"app.chatroom.log.title"})}),loading:h,children:(0,e.jsx)("div",{className:"space-y-6",children:h?(0,e.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,e.jsx)(v.Z,{})}):n!=null&&n.source_run?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(q.Z,{column:1,bordered:!0,size:"small",children:[(0,e.jsx)(q.Z.Item,{label:M.formatMessage({id:"app.chatroom.log.name"}),children:n.source_run.name}),(0,e.jsx)(q.Z.Item,{label:M.formatMessage({id:"workflow.created_time"}),children:n.source_run.created_time}),(0,e.jsx)(q.Z.Item,{label:M.formatMessage({id:"workflow.finished_time"}),children:n.source_run.finished_time}),(0,e.jsxs)(q.Z.Item,{label:M.formatMessage({id:"workflow.elapsed_time"}),children:[n.source_run.elapsed_time,"s"]}),(0,e.jsx)(q.Z.Item,{label:"Tokens",children:n.source_run.total_tokens})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)(i.Z.Title,{level:5,children:"\u8BA8\u8BBA\u603B\u7ED3"}),(0,e.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:n.source_run.created_time}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"p-[12px]  leading-[22px] bg-gray-50 rounded mt-2",children:(0,e.jsx)(Le.U,{rehypePlugins:[T.Z],children:n==null||(_=n.source_run)===null||_===void 0?void 0:_.summary})})})]}),n!=null&&n.source_corrections&&(n==null?void 0:n.source_corrections.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[M.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),n==null?void 0:n.source_corrections.map(function(g,c){return(0,e.jsx)("div",{className:"mb-[16px] last-of-type:mb-0",children:(0,e.jsx)("div",{className:"rounded-[4px]  ".concat((n==null?void 0:n.source_corrections.length)-1!=c?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[M.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",g.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[M.formatMessage({id:"app.summaryhistory.time"}),": ",g.created_time]}),(0,e.jsx)(Le.U,{rehypePlugins:[T.Z],children:g==null?void 0:g.corrected_summary})]})})},g.created_time)})]}):(0,e.jsx)(e.Fragment,{}),n!=null&&n.target_run?(0,e.jsxs)("div",{className:"py-[12px]",children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[M.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,e.jsx)("span",{className:"font-[500] ",children:n!=null&&(w=n.target_run)!==null&&w!==void 0&&w.agent_id?"agent":"workflow"}),(0,e.jsx)("span",{className:"px-[6px]",children:":"}),(0,e.jsx)("span",{children:n==null||(Z=n.target_run)===null||Z===void 0||(Z=Z.app)===null||Z===void 0?void 0:Z.name})]})}),(0,e.jsx)("div",{children:n!=null&&(p=n.target_run)!==null&&p!==void 0&&(p=p.inputs)!==null&&p!==void 0&&p.properties?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[M.formatMessage({id:"app.summaryhistory.input"}),":"]}),(0,We.vw)(n==null||(C=n.target_run)===null||C===void 0||(C=C.inputs)===null||C===void 0?void 0:C.properties).map(function(g){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:g.display_name||g.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:g.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsx)("div",{children:n!=null&&(D=n.target_run)!==null&&D!==void 0&&D.raw_user_prompt?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[M.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:n==null||(B=n.target_run)===null||B===void 0?void 0:B.raw_user_prompt})]}):(0,e.jsx)(e.Fragment,{})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[M.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(n==null||(K=n.target_run)===null||K===void 0?void 0:K.agent_id)!=0?(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(Le.U,{rehypePlugins:[T.Z],children:n==null||(S=n.target_run)===null||S===void 0||(S=S.outputs)===null||S===void 0?void 0:S.value})}):(0,e.jsx)(Ie.Z,{status:n==null||(R=n.target_run)===null||R===void 0?void 0:R.status,icon:n==null||(E=n.target_run)===null||E===void 0?void 0:E.icon,title:n==null||(W=n.target_run)===null||W===void 0?void 0:W.name,textDetails:(0,e.jsx)(We.p1,{progressObj:{created_time:n==null||(ae=n.target_run)===null||ae===void 0?void 0:ae.created_time,elapsed_time:n==null||(L=n.target_run)===null||L===void 0?void 0:L.elapsed_time,app_name:n==null||(Te=n.target_run)===null||Te===void 0?void 0:Te.app.name,status:n==null||(X=n.target_run)===null||X===void 0?void 0:X.status}}),handleClick:function(){var c,x,o,je,Me,te,Se,ze,ye,Be;J({app_id:n==null||(c=n.target_run)===null||c===void 0||(c=c.app)===null||c===void 0?void 0:c.id,app_name:n==null||(x=n.target_run)===null||x===void 0||(x=x.app)===null||x===void 0?void 0:x.name,icon:n==null||(o=n.target_run)===null||o===void 0?void 0:o.icon,workflow_id:n==null||(je=n.target_run)===null||je===void 0?void 0:je.workflow_id,type:2,app_run_id:n==null||(Me=n.target_run)===null||Me===void 0?void 0:Me.id,run_name:n==null||(te=n.target_run)===null||te===void 0?void 0:te.name,status:n==null||(Se=n.target_run)===null||Se===void 0?void 0:Se.status,created_time:n==null||(ze=n.target_run)===null||ze===void 0?void 0:ze.created_time,elapsed_time:n==null||(ye=n.target_run)===null||ye===void 0?void 0:ye.elapsed_time,completed_progress:"".concat(n==null||(Be=n.target_run)===null||Be===void 0?void 0:Be.percentage,"%")})},progress:n==null||(De=n.target_run)===null||De===void 0?void 0:De.percentage})})]})]}):(0,e.jsx)(e.Fragment,{})]}):null})})})}),Fe=a(85422),He=a(1413),Ge=a(99011),Ve=a(91146),Xe=function(_,w){return f.createElement(Ve.Z,(0,He.Z)((0,He.Z)({},_),{},{ref:w,icon:Ge.Z}))},Je=f.forwardRef(Xe),Ye=Je,Qe=a(88284),ke=a(28058),qe=a(2068),et=a(44720),tt=a(38703),at=a(55241),rt=a(34041),nt=(0,f.memo)(function(){var z,_,w=(0,$.Z)(function(g){return g.setDealtWithData}),Z=(0,$.Z)(function(g){return g.setRunPanelLogRecord}),p=(0,I.useIntl)(),C=(0,f.useState)(0),D=G()(C,2),B=D[0],K=D[1],S=function(c){var x=c.text;switch(x){case 1:return(0,e.jsx)(Ye,{className:"text-blue-500"});case 2:return(0,e.jsx)(Qe.Z,{className:"text-green-500"});case 3:return(0,e.jsx)(ke.Z,{className:"text-red-500"})}return(0,e.jsx)("span",{children:x})},R=function(){var g=ne()(m()().mark(function c(x){var o,je,Me,te,Se;return m()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return o=x.current,je=x.pageSize,Me=x.showStatus,te=Me===void 0?0:Me,ye.next=3,(0,pe.PE)({current:o,pageSize:je,showStatus:te});case 3:return Se=ye.sent,ye.abrupt("return",{list:Se.data.list,success:!0,total:Se.data.total_count});case 5:case"end":return ye.stop()}},c)}));return function(x){return g.apply(this,arguments)}}(),E=d(function(g){var c=g.current,x=g.pageSize;return R({current:c,pageSize:x,showStatus:B})},{defaultPageSize:10,refreshDeps:[B]}),W=E.data,ae=E.loading,L=E.pagination,Te=E.run,X=(0,f.useState)(!1),De=G()(X,2),U=De[0],ee=De[1],M=(0,f.useState)(null),be=G()(M,2),F=be[0],Ne=be[1],Oe=(0,f.useState)(!1),J=G()(Oe,2),Ee=J[0],n=J[1],h=function(){ee(!1),n(!1)},H=function(c){switch(c.show_status){case 1:Ne(c),ee(!1),n(!0);break;case 2:Ne(c),n(!1),ee(!0);break;case 3:Z(c),w(null);break;default:break}},Ze=function(c){var x=c.type;switch(x){case 1:return(0,e.jsx)(_e.Z,{color:"blue",children:p.formatMessage({id:"app.workflow.log.type.roundtable"})});case 2:return(0,e.jsx)(_e.Z,{color:"green",children:p.formatMessage({id:"app.workflow.log.type.agent"})});case 3:return(0,e.jsx)(_e.Z,{color:"purple",children:p.formatMessage({id:"app.workflow.log.type.workflow"})})}},Ae=(0,f.memo)(function(g){var c,x,o=g.item,je=o.status==1?"#1B64F3":o.status==2?"#22C55F":"#F04444",Me=o.status==1?"#f9fafe":o.status==2?"#f6fcf3":"#fafafa",te=(0,f.useRef)(null),Se=(0,et.Z)(te),ze=function(){return o.show_status==1?o.chat_room_name:o.show_status==2?o.app_runs_name:o.show_status==3&&o.associated_chat_room_name!=""?p.formatMessage({id:"app.workflow.log.roundtable.guidance"},{name:o.associated_chat_room_name}):o.apps_name},ye=function(){return o.show_status==1&&o.apps_name?p.formatMessage({id:"app.workflow.log.guidance.execution"},{type:o.model==1?p.formatMessage({id:"app.workflow.log.type.agent.simple"}):p.formatMessage({id:"app.workflow.log.type.workflow.simple"}),name:o.apps_name}):o.apps_name};return(0,e.jsxs)("div",{onClick:function(){H(o)},ref:te,className:"flex relative rounded truncate gap-5  items-center shrink-0 cursor-pointer duration-200  box-border py-2.5 pr-5 ",children:[(0,e.jsx)("div",{style:{backgroundColor:Se?Me:"",width:Se?"".concat(o.completed_steps/o.total_steps*100,"%"):"0%",transition:"0.5s"},className:"w-full h-full absolute left-0 duration-500"}),(0,e.jsx)("div",{style:{backgroundColor:je},className:"w-[4px] h-full z-10 mr-[10px] absolute"}),(0,e.jsx)("div",{className:"ml-5",children:(0,e.jsx)(ue.Z,{Image:(0,le.s9)("single",o.icon)})}),(0,e.jsxs)("div",{className:"flex flex-col gap-1 truncate flex-1  z-10",children:[(0,e.jsx)("div",{children:(0,e.jsxs)("span",{children:[(0,e.jsx)(Ze,{type:o.show_status}),(0,e.jsx)(ze,{})]})}),(0,e.jsx)("div",{className:"text-[#999999] text-xs truncate  max-w-7/8",children:(0,e.jsxs)("div",{className:"flex items-center truncate",children:[(0,e.jsxs)("span",{children:[" ",o.created_time," "]}),(0,e.jsx)("span",{style:{maxWidth:"calc(100% - 200px)"},className:"truncate ml-2 ",children:(0,e.jsx)(ye,{})}),(o.show_status==3||o.show_status==2)&&(0,e.jsxs)("span",{className:"inline-flex items-center ml-2 gap-2",children:[(0,e.jsx)("span",{style:{backgroundColor:je},className:"inline-block w-1 h-1 rounded-sm"}),(c=o.elapsed_time)===null||c===void 0?void 0:c.toFixed(6),"S"]})]})})]}),o.total_steps!=o.completed_steps&&(0,e.jsx)("div",{className:"flex items-center justify-center",children:(0,e.jsx)(tt.Z,{type:"circle",size:30,percent:parseInt(o.completed_steps/o.total_steps*100)})}),o.show_status==3&&(o==null||(x=o.file_list)===null||x===void 0?void 0:x.length)>0&&(0,e.jsx)("div",{className:"flex items-center justify-center z-20",children:(0,e.jsx)(at.Z,{content:(0,e.jsx)(k.Z,{files:o==null?void 0:o.file_list}),placement:"leftTop",title:p.formatMessage({id:"app.workflow.log.output.files"}),children:(0,e.jsx)(qe.Z,{className:"text-[22px] text-green-600"})})})]},o.app_run_id)});return(0,e.jsxs)("div",{className:"min-h-[300px]",style:{height:"calc(100vh - 596px)"},children:[(0,e.jsx)(ce,{iconSrc:"/icons/workflows.svg",titleText:p.formatMessage({id:"app.workflow.log.title"}),pagination:L,showTotal:!1,titleAfter:(0,e.jsx)("div",{className:"flex-1 flex justify-end",children:(0,e.jsx)(rt.Z,{defaultValue:0,className:"w-full max-w-[120px]",allowClear:!0,style:{maxWidth:"120px"},onChange:function(c){var x;K(c),(x=L.onChange)===null||x===void 0||x.call(L,1,L.pageSize)},size:"small",options:[{label:p.formatMessage({id:"app.workflow.log.filter.all"}),value:0},{label:p.formatMessage({id:"app.workflow.log.filter.roundtable"}),value:1},{label:p.formatMessage({id:"app.workflow.log.filter.agent"}),value:2},{label:p.formatMessage({id:"app.workflow.log.filter.workflow"}),value:3}]})})}),(0,e.jsxs)("div",{className:"bg-white rounded-lg p-4 h-full mt-4 overflow-y-auto box-border relative flex flex-col gap-5",style:{boxShadow:" 0px 2px 4px 0px rgba(0,0,0,0.05)"},children:[W==null||(z=W.list)===null||z===void 0?void 0:z.map(function(g,c){return(0,e.jsx)(Ae,{item:g})}),!ae&&(W==null||(_=W.list)===null||_===void 0?void 0:_.length)===0&&(0,e.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,e.jsx)(r.Z,{image:"/images/empty.svg",description:p.formatMessage({id:"app.workflow.log.empty"})})})]}),U&&(F==null?void 0:F.app_run_id)&&(0,e.jsx)(Fe.Z,{data:F,onClose:h}),Ee&&(0,e.jsx)(Ke,{data:{chatroom_id:F==null?void 0:F.chatroom_id,app_run_id:F==null?void 0:F.app_run_id},onClose:h})]})}),st=function(){return(0,e.jsxs)("div",{style:{height:"calc(100vh - 56px)"},className:"w-full p-[30px] flex flex-col gap-6 overflow-x-auto box-border",children:[(0,e.jsx)(me,{}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-6 flex-1",children:[(0,e.jsx)(j,{}),(0,e.jsx)(nt,{})]}),(0,e.jsx)(P.$_,{}),(0,e.jsx)(u.Z,{})]})},lt=st},12845:function(Re,re,a){a.d(re,{Z:function(){return v}});var P=a(67294),u=a(93967),f=a.n(u),y=a(53124),m=a(35792),b=a(861),ne=a(14747),O=a(83559),oe=a(83262);const ve=t=>{const{componentCls:r,calc:s}=t;return{[r]:Object.assign(Object.assign({},(0,ne.Wf)(t)),{margin:0,padding:0,listStyle:"none",[`${r}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:s(s(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,b.unit)(t.itemHeadSize)})`,borderInlineStart:`${(0,b.unit)(t.tailWidth)} ${t.lineType} ${t.tailColor}`},"&-pending":{[`${r}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${r}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${(0,b.unit)(t.dotBorderWidth)} ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:s(t.itemHeadSize).div(2).equal(),insetInlineStart:s(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:s(s(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:s(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${r}-item-tail`]:{display:"none"},[`> ${r}-item-content`]:{minHeight:s(t.controlHeightLG).mul(1.2).equal()}}},[`&${r}-alternate,
        &${r}-right,
        &${r}-label`]:{[`${r}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:s(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:s(t.tailWidth).div(2).equal()}},"&-left":{[`${r}-item-content`]:{insetInlineStart:`calc(50% - ${(0,b.unit)(t.marginXXS)})`,width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,textAlign:"start"}},"&-right":{[`${r}-item-content`]:{width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${r}-right`]:{[`${r}-item-right`]:{[`${r}-item-tail,
            ${r}-item-head,
            ${r}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,b.unit)(s(s(t.itemHeadSize).add(t.tailWidth)).div(2).equal())})`},[`${r}-item-content`]:{width:`calc(100% - ${(0,b.unit)(s(t.itemHeadSize).add(t.marginXS).equal())})`}}},[`&${r}-pending
        ${r}-item-last
        ${r}-item-tail`]:{display:"block",height:`calc(100% - ${(0,b.unit)(t.margin)})`,borderInlineStart:`${(0,b.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`&${r}-reverse
        ${r}-item-last
        ${r}-item-tail`]:{display:"none"},[`&${r}-reverse ${r}-item-pending`]:{[`${r}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${(0,b.unit)(t.margin)})`,borderInlineStart:`${(0,b.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`${r}-item-content`]:{minHeight:s(t.controlHeightLG).mul(1.2).equal()}},[`&${r}-label`]:{[`${r}-item-label`]:{position:"absolute",insetBlockStart:s(s(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,textAlign:"end"},[`${r}-item-right`]:{[`${r}-item-label`]:{insetInlineStart:`calc(50% + ${(0,b.unit)(t.marginSM)})`,width:`calc(50% - ${(0,b.unit)(t.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${r}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},G=t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25});var pe=(0,O.I$)("Timeline",t=>{const r=(0,oe.mergeToken)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[ve(r)]},G),$=function(t,r){var s={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&r.indexOf(l)<0&&(s[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(t);i<l.length;i++)r.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(t,l[i])&&(s[l[i]]=t[l[i]]);return s},fe=t=>{var{prefixCls:r,className:s,color:l="blue",dot:i,pending:e=!1,position:ce,label:Y,children:j}=t,Q=$(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:ie}=P.useContext(y.E_),N=ie("timeline",r),me=f()(`${N}-item`,{[`${N}-item-pending`]:e},s),k=/blue|red|green|gray/.test(l||"")?void 0:l,A=f()(`${N}-item-head`,{[`${N}-item-head-custom`]:!!i,[`${N}-item-head-${l}`]:!k});return P.createElement("li",Object.assign({},Q,{className:me}),Y&&P.createElement("div",{className:`${N}-item-label`},Y),P.createElement("div",{className:`${N}-item-tail`}),P.createElement("div",{className:A,style:{borderColor:k,color:k}},i),P.createElement("div",{className:`${N}-item-content`},j))},we=a(74902),se=a(19267),de=function(t,r){var s={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&r.indexOf(l)<0&&(s[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(t);i<l.length;i++)r.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(t,l[i])&&(s[l[i]]=t[l[i]]);return s},he=t=>{var{prefixCls:r,className:s,pending:l=!1,children:i,items:e,rootClassName:ce,reverse:Y=!1,direction:j,hashId:Q,pendingDot:ie,mode:N=""}=t,me=de(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const k=(T,Ie)=>N==="alternate"?T==="right"?`${r}-item-right`:T==="left"?`${r}-item-left`:Ie%2===0?`${r}-item-left`:`${r}-item-right`:N==="left"?`${r}-item-left`:N==="right"?`${r}-item-right`:T==="right"?`${r}-item-right`:"",A=(0,we.Z)(e||[]),ge=typeof l=="boolean"?null:l;l&&A.push({pending:!!l,dot:ie||P.createElement(se.Z,null),children:ge}),Y&&A.reverse();const xe=A.length,_e=`${r}-item-last`,Ue=A.filter(T=>!!T).map((T,Ie)=>{var We;const Ke=Ie===xe-2?_e:"",Fe=Ie===xe-1?_e:"",{className:He}=T,Ge=de(T,["className"]);return P.createElement(fe,Object.assign({},Ge,{className:f()([He,!Y&&l?Ke:Fe,k((We=T==null?void 0:T.position)!==null&&We!==void 0?We:"",Ie)]),key:(T==null?void 0:T.key)||Ie}))}),q=A.some(T=>!!(T!=null&&T.label)),Le=f()(r,{[`${r}-pending`]:!!l,[`${r}-reverse`]:!!Y,[`${r}-${N}`]:!!N&&!q,[`${r}-label`]:q,[`${r}-rtl`]:j==="rtl"},s,ce,Q);return P.createElement("ul",Object.assign({},me,{className:Le}),Ue)},Pe=a(50344);function Ce(t,r){return t&&Array.isArray(t)?t:(0,Pe.Z)(r).map(s=>{var l,i;return Object.assign({children:(i=(l=s==null?void 0:s.props)===null||l===void 0?void 0:l.children)!==null&&i!==void 0?i:""},s.props)})}var d=Ce,ue=function(t,r){var s={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&r.indexOf(l)<0&&(s[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(t);i<l.length;i++)r.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(t,l[i])&&(s[l[i]]=t[l[i]]);return s};const le=t=>{const{getPrefixCls:r,direction:s,timeline:l}=P.useContext(y.E_),{prefixCls:i,children:e,items:ce,className:Y,style:j}=t,Q=ue(t,["prefixCls","children","items","className","style"]),ie=r("timeline",i),N=(0,m.Z)(ie),[me,k,A]=pe(ie,N),ge=d(ce,e);return me(P.createElement(he,Object.assign({},Q,{className:f()(l==null?void 0:l.className,Y,A,N),style:Object.assign(Object.assign({},l==null?void 0:l.style),j),prefixCls:ie,direction:s,items:ge,hashId:k})))};le.Item=fe;var I=le,v=I}}]);
