(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{89035:function(G,P,a){"use strict";a.d(P,{Z:function(){return u}});var x=a(1413),g=a(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},l=O,H=a(91146),c=function(J,Y){return g.createElement(H.Z,(0,x.Z)((0,x.Z)({},J),{},{ref:Y,icon:l}))},K=g.forwardRef(c),u=K},69243:function(G,P,a){"use strict";a.d(P,{Z:function(){return u}});var x=a(1413),g=a(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},l=O,H=a(91146),c=function(J,Y){return g.createElement(H.Z,(0,x.Z)((0,x.Z)({},J),{},{ref:Y,icon:l}))},K=g.forwardRef(c),u=K},15360:function(G,P,a){"use strict";a.d(P,{Z:function(){return u}});var x=a(1413),g=a(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},l=O,H=a(91146),c=function(J,Y){return g.createElement(H.Z,(0,x.Z)((0,x.Z)({},J),{},{ref:Y,icon:l}))},K=g.forwardRef(c),u=K},5785:function(G,P,a){"use strict";var x=a(1413),g=a(67294),O=a(44685),l=a(91146),H=function(u,L){return g.createElement(l.Z,(0,x.Z)((0,x.Z)({},u),{},{ref:L,icon:O.Z}))},c=g.forwardRef(H);P.Z=c},14955:function(G,P,a){"use strict";a.r(P),a.d(P,{default:function(){return mt}});var x=a(15009),g=a.n(x),O=a(97857),l=a.n(O),H=a(99289),c=a.n(H),K=a(5574),u=a.n(K),L=a(11551),J=a(47520),Y=a(29432),Te=a(2068),De=a(89035),tt=a(15360),Ze=a(82826),Be=a(69243),le=a(35312),r=a(40741),ae=a(45360),ge=a(28036),He=a(50136),Me=a(74330),v=a(67294),V=a(92939),$e=a(5608),Q=a(26915),ne=a(72269),t=a(34041),s=a(78045),n=a(80459),e=a(85893),d=Q.Z.TextArea,re=function(m){var i=m.Detaillist,q=m.repository,y=m.Operationbentate,T=m.Ffromref,je=m.Fourthly_config_id,ee=m.Fourthly_select_list,o=(0,le.useIntl)(),ye=(0,v.useState)([]),ue=u()(ye,2),p=ue[0],Ne=ue[1];(0,v.useEffect)(function(){pe()},[]);var pe=function(){var N=c()(g()().mark(function U(){var A;return g()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,L.zl)();case 2:A=$.sent,Ne(A.data.data.map(function(S){return{value:S.dataset_id,label:S.name}}));case 4:case"end":return $.stop()}},U)}));return function(){return N.apply(this,arguments)}}(),Se={readOnly:!0},D={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:o.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(r.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:T,children:[i&&i.app.attrs_are_visible===0?(0,e.jsx)(r.Z.List,{name:"users",children:function(U,A){var te=A.add,$=A.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:o.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[i&&i.app&&i.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:y==="true"?o.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:o.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:i&&i.app&&i.app.description})]})})]})}}):(0,e.jsx)(r.Z.List,{name:"users",children:function(U,A){var te,$,S=A.add,fe=A.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:o.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[i&&i.app&&i.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:y==="true"?o.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:o.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:i&&i.app&&i.app.description})]})}),(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(V.Z,{className:"font-medium",name:o.formatMessage({id:"agent.teamvisibility"}),title:o.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(ne.Z,l()(l()({},D),{},{size:"small",checked:!!(i&&i.app.is_public===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(V.Z,{className:"font-medium",name:o.formatMessage({id:"agent.attrVisible"}),title:o.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(ne.Z,l()(l()({},D),{},{size:"small",checked:!!(i&&i.app.attrs_are_visible===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:o.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(ne.Z,l()(l()({},D),{},{size:"small",checked:!!(i&&i.app.enable_api===1)}))]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:o.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(ne.Z,l()(l()({},D),{},{size:"small",checked:!!(i&&i.agent.allow_upload_file==1)}))]})]})}),(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.LLMmodel"})}),(0,e.jsx)(t.Z,l()(l()({},D),{},{"aria-readonly":"true",style:{width:270},variant:"filled",value:je,options:ee}))]})}),(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(V.Z,{name:o.formatMessage({id:"agent.functiondescription"}),title:o.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(d,l()(l()({},D),{},{value:i&&i.agent&&i.agent.obligations,variant:"filled",autoSize:{minRows:8,maxRows:10}}))]})}),(i==null||(te=i.agent)===null||te===void 0?void 0:te.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)($e.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(V.Z,{className:"font-medium",required:!0,name:o.formatMessage({id:"agent.inputvariable"}),title:o.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((i==null||($=i.agent)===null||$===void 0||($=$.input_variables)===null||$===void 0?void 0:$.properties)||{})})}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(V.Z,{className:"font-medium",name:o.formatMessage({id:"agent.associatedknowledgebase"}),title:o.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(t.Z,l()(l()({},D),{},{size:"large",mode:"tags",style:{width:"100%"},placeholder:o.formatMessage({id:"agent.pleaseselect"}),value:q,variant:"filled",options:p}))]}),(0,e.jsx)(r.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",o.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsx)(s.ZP.Group,l()(l()({},D),{},{value:i&&i.agent.default_output_format,options:[{value:1,label:"text"},{value:2,label:"json"},{value:3,label:"code"}]}))]})})]})}}),i&&i.app.attrs_are_visible===1&&i.agent.selected_skills&&(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:o.formatMessage({id:"agent.mcp.resources"})}),(0,e.jsxs)("div",{className:"pl-4",children:[i.agent.selected_skills&&i.agent.selected_skills.length>0&&(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(V.Z,{className:"font-medium",name:o.formatMessage({id:"agent.selectSkills"}),title:o.formatMessage({id:"agent.explain.selectSkills"})})})}),(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:i.agent.selected_skills.map(function(N){return(0,e.jsxs)("div",{className:"flex items-center w-full p-2 bg-white rounded-lg shadow-sm",children:[(0,e.jsx)(n.Z,{rounded:"6px",data:N,bg:N.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:N.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:N.description})]})]},N.app_id)})})]}),i.agent.selected_workflows&&i.agent.selected_workflows.length>0&&(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(V.Z,{className:"font-medium",name:o.formatMessage({id:"agent.selectWorkflows"}),title:o.formatMessage({id:"agent.explain.selectWorkflows"})})})}),(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:i.agent.selected_workflows.map(function(N){return(0,e.jsxs)("div",{className:"flex items-center w-full p-2 bg-white rounded-lg shadow-sm",children:[(0,e.jsx)(n.Z,{rounded:"6px",data:N,bg:N.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:N.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:N.description})]})]},N.app_id)})})]}),!i.agent.selected_skills&&!i.agent.selected_workflows&&(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:o.formatMessage({id:"agent.noResources"})})]})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},he=re,X=a(13769),de=a.n(X),oe=a(49677),_=a.n(oe),Z=a(24216),ce=a(85877),k=a(39944),z=a(10759),be=a(71471),we=["key","name"],Le=be.Z.Title,at=Q.Z.TextArea,Ve=Q.Z.Search,We=function(m){var i=m.Detaillist,q=m.setDetaillist,y=m.Fourthly_select_list,T=m.setFourthly_config_id,je=m.Fourthly_config_id,ee=m.Fourthlyref,o=m.Fourthly_abilities_list,ye=m.Operationbentate,ue=m.callwordlist,p=(0,le.useIntl)(),Ne=(0,v.useState)(0),pe=u()(Ne,2),Se=pe[0],D=pe[1],N=(0,v.useState)(""),U=u()(N,2),A=U[0],te=U[1],$=(0,v.useState)(""),S=u()($,2),fe=S[0],Ue=S[1],Ce=(0,v.useState)(!1),Ie=u()(Ce,2),Je=Ie[0],Fe=Ie[1],Ye={readOnly:!0},Qe={disabled:!0},_e=function(h){var F={user:{value:Ae(h)}};te(new k.z(F))},ke=function(h){D(h)},Pe=function(h){var F=h.users.filter(function(b,xe){return b.type=="number"&&!Number(b.value)&&!!b.value});if(!A.user)ae.ZP.warning(p.formatMessage({id:"agent.message.warning.callword"}));else if(F.length>0)ae.ZP.warning(p.formatMessage({id:"agent.message.warning.datatype"}));else{Fe(!0);var I=new z.Kr("input","","");h.users.forEach(function(b){var xe=new z._w(b.name,b.type?b.type:"string",b.type=="string"?b.value:Number(b.value),b.content,b.status);I.addProperty(b.name,xe)});var w={agent_id:i.agent.agent_id,ability_id:Se,input_dict:I,prompt:A};Ee(w)}},Ae=function C(h){return h.map(function(F){return F.type==="mention"?F.id:F.children?C(F.children):F.text}).join("")},Ee=function(){var C=c()(g()().mark(function h(F){return g()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:(0,L.LH)(F).then(function(b){ae.ZP.success(p.formatMessage({id:"agent.message.success.runpublish"})),Ue(b.data.outputs.text),Fe(!1)}).catch(function(b){Fe(!1)});case 1:case"end":return w.stop()}},h)}));return function(F){return C.apply(this,arguments)}}(),qe=function(){var C=c()(g()().mark(function h(){var F;return g()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,L.Dh)(i.agent.agent_id);case 2:F=w.sent,F.code==0?ae.ZP.success("success"):ae.ZP.error("error");case 4:case"end":return w.stop()}},h)}));return function(){return C.apply(this,arguments)}}(),ze=function(){var C=c()(g()().mark(function h(){return g()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:le.history.push("/Agents?app_id=".concat(i.app.app_id,"&type=false")),location.reload();case 2:case"end":return I.stop()}},h)}));return function(){return C.apply(this,arguments)}}();return(0,v.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:p.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:p.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(t.Z,{placeholder:p.formatMessage({id:"agent.pleaseselect"}),defaultValue:p.formatMessage({id:"agent.allability"}),variant:"filled",style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:ke,options:o})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(r.Z,{name:"dynamic_form_nest_item",onFinish:Pe,style:{width:900},autoComplete:"off",form:ee,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:p.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(r.Z.List,{name:"users",children:function(h,F){return _()(F),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:p.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52",children:p.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:h.map(function(I){var w=I.key,b=I.name,xe=de()(I,we);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(r.Z.Item,l()(l()({},xe),{},{name:[b,"content"],children:(0,e.jsx)(Q.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(r.Z.Item,l()(l()({},xe),{},{name:[b,"value"],rules:[{required:!!(ee.getFieldsValue()&&ee.getFieldsValue().users[w].status==!0),message:p.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(Q.Z,{style:{width:"660px"},placeholder:ee.getFieldsValue()&&ee.getFieldsValue().users[w].status==!0?p.formatMessage({id:"agent.variable.required.value"}):p.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(r.Z.Item,{rules:[{required:!0,message:p.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:p.formatMessage({id:"agent.runpreview"})}),(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)(Me.Z,{spinning:Je,children:(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:fe?(0,e.jsx)(Z.Z,{language:"python3",value:fe&&JSON.stringify(fe)}):null})}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(ce.Z,{onChange:function(h){console.log(ue),_e(h)},options:ue})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ge.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})]}),(0,e.jsx)(r.Z.Item,{children:(0,e.jsx)("div",{className:"w-28",children:(i==null?void 0:i.agent.publish_status)===1&&(i==null?void 0:i.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ge.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:ze,children:p.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ge.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:ye!="false",onClick:qe,children:p.formatMessage({id:"agent.publish"})})})})})]})}),(0,e.jsx)("div",{className:"h-10 w-1"})]})},j=We,se=Q.Z.TextArea,Oe={readOnly:!0},me={disabled:!0},Re=function(m){var i=m.Detaillist,q=m.Sformref,y=(0,le.useIntl)();return(0,v.useEffect)(function(){}),(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:y.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(V.Z,{name:y.formatMessage({id:"agent.automatch"}),title:y.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(ne.Z,l()(l()({},me),{},{size:"small",checked:!!(i&&i.agent.auto_match_ability==1)}))]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(r.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:q,children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:y.formatMessage({id:"agent.capability"})})}),q&&q.getFieldValue("users")&&q.getFieldValue("users").map(function(T,je){return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(r.Z.Item,{className:"mb-0",children:(0,e.jsx)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:y.formatMessage({id:"agent.capabilityname"})})})}),(0,e.jsx)(r.Z.Item,{className:"mb-[20px]",children:(0,e.jsx)(Q.Z,l()(l()({},me),{},{placeholder:y.formatMessage({id:"agent.capabilityname"}),value:T.name,className:"w-full"}))}),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(V.Z,{className:"text-[#555555] text-xs font-medium",name:y.formatMessage({id:"agent.capabilitydescription"}),title:y.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(r.Z.Item,{className:"w-full mb-[20px]",children:(0,e.jsx)(se,l()(l()({value:T.content},me),{},{placeholder:y.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},style:{width:"100%"}}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:y.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(r.Z.Item,{className:"mb-[20px]",children:(0,e.jsxs)(s.ZP.Group,l()(l()({value:T.status,optionType:"button",buttonStyle:"solid"},me),{},{defaultValue:!0,children:[(0,e.jsx)(s.ZP,{value:!0,children:y.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(s.ZP,{value:!1,children:y.formatMessage({id:"agent.capabilitystatus.disable"})})]}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:y.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(r.Z.Item,{className:"mb-0",children:(0,e.jsxs)(s.ZP.Group,l()(l()({defaultValue:0,value:T.output_format},me),{},{children:[(0,e.jsx)(s.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:y.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(s.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(s.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(s.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))})]})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ge=Re,Ke=a(68709),ot=a(27842),ct=function(){var m=(0,le.useIntl)(),i=(0,v.useRef)(null),q=r.Z.useForm(),y=u()(q,1),T=y[0],je=r.Z.useForm(),ee=u()(je,1),o=ee[0],ye=r.Z.useForm(),ue=u()(ye,1),p=ue[0],Ne=r.Z.useForm(),pe=u()(Ne,1),Se=pe[0],D=(0,v.useState)(!1),N=u()(D,2),U=N[0],A=N[1],te=(0,v.useState)(null),$=u()(te,2),S=$[0],fe=$[1],Ue=(0,v.useState)(null),Ce=u()(Ue,2),Ie=Ce[0],Je=Ce[1],Fe=(0,v.useState)(null),Ye=u()(Fe,2),Qe=Ye[0],_e=Ye[1],ke=(0,v.useState)(null),Pe=u()(ke,2),Ae=Pe[0],Ee=Pe[1],qe=(0,v.useState)(null),ze=u()(qe,2),C=ze[0],h=ze[1],F=(0,v.useState)(null),I=u()(F,2),w=I[0],b=I[1],xe=(0,v.useState)("1"),st=u()(xe,2),W=st[0],ut=st[1],ft=(0,v.useState)(null),it=u()(ft,2),xt=it[0],gt=it[1],ht=[{key:"1",icon:(0,e.jsx)(Te.Z,{}),label:m.formatMessage({id:"agent.menu.basicsetup"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:W=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(De.Z,{}),label:m.formatMessage({id:"agent.menu.Capacityoutput"}),disabled:S&&S.app.attrs_are_visible===0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:W=="2"?"#1B64F3":"#213044"}},{key:"5",icon:(0,e.jsx)(tt.Z,{}),label:m.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:W=="5"?"#1B64F3":"#213044"}}];(0,v.useEffect)(function(){pt()},[]);var pt=function(){var ve=c()(g()().mark(function B(){var R,f,ie,nt,et,rt,dt;return g()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return A(!0),E.prev=1,R=new URLSearchParams(window.location.search),console.log(R.get("type")),E.next=6,(0,L.ek)(R.get("app_id"),R.get("type"));case 6:f=E.sent,ie=f.data,f.data.agent_dataset_relation_list&&f.data.agent_dataset_relation_list.length&&(nt=f.data.agent_dataset_relation_list.map(function(M){return M.dataset_id}),Je(nt)),f.data.callable_items&&(f.data.agent.selected_skills=[],f.data.agent.selected_workflows=[],f.data.callable_items.forEach(function(M){M.item_type==1?f.data.agent.selected_skills.push(l()(l()({},M),{},{mode:4})):f.data.agent.selected_workflows.push(l()(l()({},M),{},{mode:2}))})),fe(f.data),b(f.data.agent.publish_status===0&&f.data.is_creator===1?"false":"true"),f.data.agent.publish_status===1&&ae.ZP.warning(m.formatMessage({id:"agent.message.listwarning"}),5),T.setFieldsValue(vt(ie.agent.input_variables)),f.data.agent_abilities_list&&(et=f.data.agent_abilities_list.map(function(M){return M.status==1?l()(l()({},M),{},{status:!0}):l()(l()({},M),{},{status:!1})}),p.setFieldsValue({users:et[0]?et:[{agent_ability_id:0,name:"",content:"",status:!0}]}),rt=ie.agent_abilities_list.filter(function(M){return M.output_format!==0}),o.setFieldsValue({users:rt.map(function(M){return{agent_ability_id:M.agent_ability_id,output_format:M.output_format}})})),ie.m_configurations_list&&_e(ie.m_configurations_list.map(function(M){return{value:M.m_config_id,label:M.m_name}})),Ee(ie.agent.m_config_id),ie.agent_abilities_list&&(dt=ie.agent_abilities_list.filter(function(M,Nt){return M.status===1}),h(bt(dt).concat([{value:0,label:m.formatMessage({id:"agent.allability"})}]))),E.next=24;break;case 20:E.prev=20,E.t0=E.catch(1),console.error("Failed to fetch agent details:",E.t0),ae.ZP.error(m.formatMessage({id:"agent.message.error"}));case 24:return E.prev=24,A(!1),E.finish(24);case 27:case"end":return E.stop()}},B,null,[[1,20,24,27]])}));return function(){return ve.apply(this,arguments)}}(),vt=function(B){console.log(!!B&&!!B.properties,"obj");var R={users:B&&B.properties?Object.values(B.properties).map(function(f){return{name:f.name,type:f.type,content:f.display_name,status:f.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return R},bt=function(B){return B.map(function(R){return{value:R.agent_ability_id,label:R.name}})},jt=function(){lt({key:W,keyPath:[],item:void 0,domEvent:void 0}),history.back()},lt=function(B){try{if(W=="1"){var R=T.getFieldsValue().users.map(function(f){return{value:"<<".concat(Y.qX,".inputs.").concat(f.name,">>"),label:f.name}});Se.setFieldsValue(T.getFieldsValue()),gt(R)}ut(B.key)}catch(f){console.log(f,"error")}};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ge.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:jt,children:[(0,e.jsx)(Ze.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:m.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(He.Z,{selectedKeys:[W],onClick:lt,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[W],mode:"inline",items:ht}),S&&S.app.enable_api===1&&S.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:function(){window.open(J._n+S.app.api_url)},children:(0,e.jsxs)("div",{className:"mr-[20px]",children:[(0,e.jsx)(Be.Z,{className:"mr-2"}),m.formatMessage({id:"agent.visit"}),"API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)(Me.Z,{spinning:U,className:"h-full",children:(0,e.jsx)("div",{className:"flex flex-col  ",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[S?S.creator_nickname:""," ",m.formatMessage({id:"agent.agents"})]})]})}),(0,e.jsx)("div",{style:{display:W==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(he,{Ffromref:T,loading:U,Detaillist:S,repository:Ie,Operationbentate:w,Fourthly_config_id:Ae,Fourthly_select_list:Qe})}),(0,e.jsx)("div",{style:{display:W==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ge,{Detaillist:S,Sformref:p})}),(0,e.jsx)("div",{style:{display:W==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(j,{Detaillist:S,setDetaillist:fe,Fourthly_select_list:Qe,Fourthly_config_id:Ae,setFourthly_config_id:Ee,Fourthlyref:Se,Fourthly_abilities_list:C,Operationbentate:w,callwordlist:xt})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(Ke.Z,{operationbentate:w,data:{abilitiesList:C,detailList:S}})}),W=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(ot.ZP,{agent_id:S.agent.agent_id})})]})]})},mt=ct},12845:function(G,P,a){"use strict";a.d(P,{Z:function(){return ne}});var x=a(67294),g=a(93967),O=a.n(g),l=a(53124),H=a(35792),c=a(861),K=a(14747),u=a(83559),L=a(83262);const J=t=>{const{componentCls:s,calc:n}=t;return{[s]:Object.assign(Object.assign({},(0,K.Wf)(t)),{margin:0,padding:0,listStyle:"none",[`${s}-item`]:{position:"relative",margin:0,paddingBottom:t.itemPaddingBottom,fontSize:t.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:t.itemHeadSize,insetInlineStart:n(n(t.itemHeadSize).sub(t.tailWidth)).div(2).equal(),height:`calc(100% - ${(0,c.unit)(t.itemHeadSize)})`,borderInlineStart:`${(0,c.unit)(t.tailWidth)} ${t.lineType} ${t.tailColor}`},"&-pending":{[`${s}-item-head`]:{fontSize:t.fontSizeSM,backgroundColor:"transparent"},[`${s}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:t.itemHeadSize,height:t.itemHeadSize,backgroundColor:t.dotBg,border:`${(0,c.unit)(t.dotBorderWidth)} ${t.lineType} transparent`,borderRadius:"50%","&-blue":{color:t.colorPrimary,borderColor:t.colorPrimary},"&-red":{color:t.colorError,borderColor:t.colorError},"&-green":{color:t.colorSuccess,borderColor:t.colorSuccess},"&-gray":{color:t.colorTextDisabled,borderColor:t.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:n(t.itemHeadSize).div(2).equal(),insetInlineStart:n(t.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:t.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:n(n(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.lineWidth).equal(),marginInlineStart:n(t.margin).add(t.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${s}-item-tail`]:{display:"none"},[`> ${s}-item-content`]:{minHeight:n(t.controlHeightLG).mul(1.2).equal()}}},[`&${s}-alternate,
        &${s}-right,
        &${s}-label`]:{[`${s}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:n(t.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:n(t.tailWidth).div(2).equal()}},"&-left":{[`${s}-item-content`]:{insetInlineStart:`calc(50% - ${(0,c.unit)(t.marginXXS)})`,width:`calc(50% - ${(0,c.unit)(t.marginSM)})`,textAlign:"start"}},"&-right":{[`${s}-item-content`]:{width:`calc(50% - ${(0,c.unit)(t.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${s}-right`]:{[`${s}-item-right`]:{[`${s}-item-tail,
            ${s}-item-head,
            ${s}-item-head-custom`]:{insetInlineStart:`calc(100% - ${(0,c.unit)(n(n(t.itemHeadSize).add(t.tailWidth)).div(2).equal())})`},[`${s}-item-content`]:{width:`calc(100% - ${(0,c.unit)(n(t.itemHeadSize).add(t.marginXS).equal())})`}}},[`&${s}-pending
        ${s}-item-last
        ${s}-item-tail`]:{display:"block",height:`calc(100% - ${(0,c.unit)(t.margin)})`,borderInlineStart:`${(0,c.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`&${s}-reverse
        ${s}-item-last
        ${s}-item-tail`]:{display:"none"},[`&${s}-reverse ${s}-item-pending`]:{[`${s}-item-tail`]:{insetBlockStart:t.margin,display:"block",height:`calc(100% - ${(0,c.unit)(t.margin)})`,borderInlineStart:`${(0,c.unit)(t.tailWidth)} dotted ${t.tailColor}`},[`${s}-item-content`]:{minHeight:n(t.controlHeightLG).mul(1.2).equal()}},[`&${s}-label`]:{[`${s}-item-label`]:{position:"absolute",insetBlockStart:n(n(t.fontSize).mul(t.lineHeight).sub(t.fontSize)).mul(-1).add(t.tailWidth).equal(),width:`calc(50% - ${(0,c.unit)(t.marginSM)})`,textAlign:"end"},[`${s}-item-right`]:{[`${s}-item-label`]:{insetInlineStart:`calc(50% + ${(0,c.unit)(t.marginSM)})`,width:`calc(50% - ${(0,c.unit)(t.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${s}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},Y=t=>({tailColor:t.colorSplit,tailWidth:t.lineWidthBold,dotBorderWidth:t.wireframe?t.lineWidthBold:t.lineWidth*3,dotBg:t.colorBgContainer,itemPaddingBottom:t.padding*1.25});var Te=(0,u.I$)("Timeline",t=>{const s=(0,L.mergeToken)(t,{itemHeadSize:10,customHeadPaddingVertical:t.paddingXXS,paddingInlineEnd:2});return[J(s)]},Y),De=function(t,s){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,e=Object.getOwnPropertySymbols(t);d<e.length;d++)s.indexOf(e[d])<0&&Object.prototype.propertyIsEnumerable.call(t,e[d])&&(n[e[d]]=t[e[d]]);return n},Ze=t=>{var{prefixCls:s,className:n,color:e="blue",dot:d,pending:re=!1,position:he,label:X,children:de}=t,oe=De(t,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:_}=x.useContext(l.E_),Z=_("timeline",s),ce=O()(`${Z}-item`,{[`${Z}-item-pending`]:re},n),k=/blue|red|green|gray/.test(e||"")?void 0:e,z=O()(`${Z}-item-head`,{[`${Z}-item-head-custom`]:!!d,[`${Z}-item-head-${e}`]:!k});return x.createElement("li",Object.assign({},oe,{className:ce}),X&&x.createElement("div",{className:`${Z}-item-label`},X),x.createElement("div",{className:`${Z}-item-tail`}),x.createElement("div",{className:z,style:{borderColor:k,color:k}},d),x.createElement("div",{className:`${Z}-item-content`},de))},Be=a(74902),le=a(19267),r=function(t,s){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,e=Object.getOwnPropertySymbols(t);d<e.length;d++)s.indexOf(e[d])<0&&Object.prototype.propertyIsEnumerable.call(t,e[d])&&(n[e[d]]=t[e[d]]);return n},ge=t=>{var{prefixCls:s,className:n,pending:e=!1,children:d,items:re,rootClassName:he,reverse:X=!1,direction:de,hashId:oe,pendingDot:_,mode:Z=""}=t,ce=r(t,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const k=(j,se)=>Z==="alternate"?j==="right"?`${s}-item-right`:j==="left"?`${s}-item-left`:se%2===0?`${s}-item-left`:`${s}-item-right`:Z==="left"?`${s}-item-left`:Z==="right"?`${s}-item-right`:j==="right"?`${s}-item-right`:"",z=(0,Be.Z)(re||[]),be=typeof e=="boolean"?null:e;e&&z.push({pending:!!e,dot:_||x.createElement(le.Z,null),children:be}),X&&z.reverse();const we=z.length,Le=`${s}-item-last`,at=z.filter(j=>!!j).map((j,se)=>{var Oe;const me=se===we-2?Le:"",Re=se===we-1?Le:"",{className:Ge}=j,Ke=r(j,["className"]);return x.createElement(Ze,Object.assign({},Ke,{className:O()([Ge,!X&&e?me:Re,k((Oe=j==null?void 0:j.position)!==null&&Oe!==void 0?Oe:"",se)]),key:(j==null?void 0:j.key)||se}))}),Ve=z.some(j=>!!(j!=null&&j.label)),We=O()(s,{[`${s}-pending`]:!!e,[`${s}-reverse`]:!!X,[`${s}-${Z}`]:!!Z&&!Ve,[`${s}-label`]:Ve,[`${s}-rtl`]:de==="rtl"},n,he,oe);return x.createElement("ul",Object.assign({},ce,{className:We}),at)},He=a(50344);function Me(t,s){return t&&Array.isArray(t)?t:(0,He.Z)(s).map(n=>{var e,d;return Object.assign({children:(d=(e=n==null?void 0:n.props)===null||e===void 0?void 0:e.children)!==null&&d!==void 0?d:""},n.props)})}var v=Me,V=function(t,s){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.indexOf(e)<0&&(n[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,e=Object.getOwnPropertySymbols(t);d<e.length;d++)s.indexOf(e[d])<0&&Object.prototype.propertyIsEnumerable.call(t,e[d])&&(n[e[d]]=t[e[d]]);return n};const $e=t=>{const{getPrefixCls:s,direction:n,timeline:e}=x.useContext(l.E_),{prefixCls:d,children:re,items:he,className:X,style:de}=t,oe=V(t,["prefixCls","children","items","className","style"]),_=s("timeline",d),Z=(0,H.Z)(_),[ce,k,z]=Te(_,Z),be=v(he,re);return ce(x.createElement(ge,Object.assign({},oe,{className:O()(e==null?void 0:e.className,X,z,Z),style:Object.assign(Object.assign({},e==null?void 0:e.style),de),prefixCls:_,direction:n,items:be,hashId:k})))};$e.Item=Ze;var Q=$e,ne=Q},49677:function(G){function P(a){if(a==null)throw new TypeError("Cannot destructure "+a)}G.exports=P,G.exports.__esModule=!0,G.exports.default=G.exports}}]);
