(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{68262:function(Me,Q,e){"use strict";e.d(Q,{U:function(){return le}});var Z=e(1413),M=e(91),se=e(10915),N=e(21532),ie=e(93967),X=e.n(ie),Y=e(67294),J=e(34994),D=e(4942),k=e(98082),oe=function(p){return(0,D.Z)((0,D.Z)({},p.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:p.colorTextSecondary,fontSize:p.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,D.Z)({},"".concat(p.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function q(g){return(0,k.Xj)("LoginForm",function(p){var C=(0,Z.Z)((0,Z.Z)({},p),{},{componentCls:".".concat(g)});return[oe(C)]})}var a=e(85893),v=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function le(g){var p,C=g.logo,ue=g.message,ce=g.contentStyle,U=g.title,R=g.subTitle,I=g.actions,_=g.children,de=g.containerStyle,E=g.otherStyle,x=(0,M.Z)(g,v),ge=(0,se.YB)(),fe=x.submitter===!1?!1:(0,Z.Z)((0,Z.Z)({searchConfig:{submitText:ge.getMessage("loginForm.submitText","\u767B\u5F55")}},x.submitter),{},{submitButtonProps:(0,Z.Z)({size:"large",style:{width:"100%"}},(p=x.submitter)===null||p===void 0?void 0:p.submitButtonProps),render:function(H,te){var O,pe=te.pop();if(typeof(x==null||(O=x.submitter)===null||O===void 0?void 0:O.render)=="function"){var F,W;return x==null||(F=x.submitter)===null||F===void 0||(W=F.render)===null||W===void 0?void 0:W.call(F,H,te)}return pe}}),me=(0,Y.useContext)(N.ZP.ConfigContext),t=me.getPrefixCls("pro-form-login"),ee=q(t),ve=ee.wrapSSR,G=ee.hashId,T=function(H){return"".concat(t,"-").concat(H," ").concat(G)},i=(0,Y.useMemo)(function(){return C?typeof C=="string"?(0,a.jsx)("img",{src:C}):C:null},[C]);return ve((0,a.jsxs)("div",{className:X()(T("container"),G),style:de,children:[(0,a.jsxs)("div",{className:"".concat(T("top")," ").concat(G).trim(),children:[U||i?(0,a.jsxs)("div",{className:"".concat(T("header")),children:[i?(0,a.jsx)("span",{className:T("logo"),children:i}):null,U?(0,a.jsx)("span",{className:T("title"),children:U}):null]}):null,R?(0,a.jsx)("div",{className:T("desc"),children:R}):null]}),(0,a.jsxs)("div",{className:T("main"),style:(0,Z.Z)({width:328},ce),children:[(0,a.jsxs)(J.A,(0,Z.Z)((0,Z.Z)({isKeyPressSubmit:!0},x),{},{submitter:fe,children:[ue,_]})),I?(0,a.jsx)("div",{className:T("main-other"),style:E,children:I}):null]})]}))}},28232:function(Me,Q,e){"use strict";e.r(Q),e.d(Q,{default:function(){return Le}});var Z=e(15009),M=e.n(Z),se=e(99289),N=e.n(se),ie=e(5574),X=e.n(ie),Y=e(56264),J=e(32060),D=e(99058),k=e(32332),oe=e(87547),q=e(94149),a=e(1413),v=e(67294),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},g=le,p=e(91146),C=function(f,y){return v.createElement(p.Z,(0,a.Z)((0,a.Z)({},f),{},{ref:y,icon:g}))},ue=v.forwardRef(C),ce=ue,U=e(68262),R=e(5966),I=e(74165),_=e(15861),de=e(91),E=e(97685),x=e(40741),ge=e(26915),fe=e(28036),me=e(90789),t=e(85893),ee=["rules","name","phoneName","fieldProps","onTiming","captchaTextRender","captchaProps"],ve=v.forwardRef(function(l,f){var y=x.Z.useFormInstance(),b=(0,v.useState)(l.countDown||60),$=(0,E.Z)(b,2),V=$[0],ae=$[1],K=(0,v.useState)(!1),ne=(0,E.Z)(K,2),B=ne[0],z=ne[1],Se=(0,v.useState)(),re=(0,E.Z)(Se,2),xe=re[0],u=re[1],je=l.rules,Ze=l.name,w=l.phoneName,L=l.fieldProps,h=l.onTiming,c=l.captchaTextRender,n=c===void 0?function(r,S){return r?"".concat(S," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:c,P=l.captchaProps,d=(0,de.Z)(l,ee),o=function(){var r=(0,_.Z)((0,I.Z)().mark(function S(A){return(0,I.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,u(!0),j.next=4,d.onGetCaptcha(A);case 4:u(!1),z(!0),j.next=13;break;case 8:j.prev=8,j.t0=j.catch(0),z(!1),u(!1),console.log(j.t0);case 13:case"end":return j.stop()}},S,null,[[0,8]])}));return function(A){return r.apply(this,arguments)}}();return(0,v.useImperativeHandle)(f,function(){return{startTiming:function(){return z(!0)},endTiming:function(){return z(!1)}}}),(0,v.useEffect)(function(){var r=0,S=l.countDown;return B&&(r=window.setInterval(function(){ae(function(A){return A<=1?(z(!1),clearInterval(r),S||60):A-1})},1e3)),function(){return clearInterval(r)}},[B]),(0,v.useEffect)(function(){h&&h(V)},[V,h]),(0,t.jsxs)("div",{style:(0,a.Z)((0,a.Z)({},L==null?void 0:L.style),{},{display:"flex",alignItems:"center"}),ref:f,children:[(0,t.jsx)(ge.Z,(0,a.Z)((0,a.Z)({},L),{},{style:(0,a.Z)({flex:1,transition:"width .3s",marginRight:8},L==null?void 0:L.style)})),(0,t.jsx)(fe.ZP,(0,a.Z)((0,a.Z)({style:{display:"block"},disabled:B,loading:xe},P),{},{onClick:(0,_.Z)((0,I.Z)().mark(function r(){var S;return(0,I.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,!w){s.next=9;break}return s.next=4,y.validateFields([w].flat(1));case 4:return S=y.getFieldValue([w].flat(1)),s.next=7,o(S);case 7:s.next=11;break;case 9:return s.next=11,o("");case 11:s.next=16;break;case 13:s.prev=13,s.t0=s.catch(0),console.log(s.t0);case 16:case"end":return s.stop()}},r,null,[[0,13]])})),children:n(B,V)}))]})}),G=(0,me.G)(ve),T=G,i=e(76772),he=e(40056),H=e(45360),te=e(11941),O=e(14521),pe=e(67610),F=(0,O.kc)(function(l){var f=l.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:f.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:f.borderRadius,":hover":{backgroundColor:f.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),W=function(){var f=F(),y=f.styles,b=function(){return(0,t.jsx)("img",{src:"/icons/lang.svg"})};return(0,t.jsx)("div",{className:y.lang,"data-lang":!0,children:i.SelectLang&&(0,t.jsx)(i.SelectLang,{icon:(0,t.jsx)(b,{})})})},ye=function(f){var y=f.content;return(0,t.jsx)(he.Z,{style:{marginBottom:24},message:y,type:"error",showIcon:!0})},Te=function(){var f=(0,v.useState)({}),y=X()(f,2),b=y[0],$=y[1],V=(0,v.useState)("account"),ae=X()(V,2),K=ae[0],ne=ae[1],B=(0,i.useModel)("@@initialState"),z=B.initialState,Se=B.setInitialState,re=F(),xe=re.styles,u=(0,i.useIntl)(),je=function(){var h=N()(M()().mark(function c(){var n;return M()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,J.ug)();case 2:n=d.sent,console.log("user",n.data),(0,k.Qy)("SET",n.data),(0,k.f1)("SET",6,!1,""),setTimeout(function(){var o;(0,i.setLocale)((n==null||(o=n.data)===null||o===void 0?void 0:o.language)=="en"?"en-US":"zh-CN")},100);case 7:case"end":return d.stop()}},c)}));return function(){return h.apply(this,arguments)}}(),Ze=function(){var h=N()(M()().mark(function c(n){var P,d,o,r,S,A,s;return M()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,P=n.autoLogin,d=n.password,o=n.username,m.next=4,(0,J.x4)({password:d,username:o});case 4:if(r=m.sent,console.log(r),!(r!=null&&r.access_token)){m.next=13;break}return S=u.formatMessage({id:"pages.login.success",defaultMessage:"\uFF01"}),m.next=10,je();case 10:return A=new URL(window.location.href).searchParams,i.history.push("/"),m.abrupt("return");case 13:console.log(r),$({status:"error",type:"account"}),m.next=22;break;case 17:m.prev=17,m.t0=m.catch(0),s=u.formatMessage({id:"pages.login.failure",defaultMessage:"\uFF0C\uFF01"}),console.log(m.t0),H.ZP.error(s);case 22:case"end":return m.stop()}},c,null,[[0,17]])}));return function(n){return h.apply(this,arguments)}}(),w=b.status,L=b.type;return(0,t.jsxs)("div",{className:xe.container,children:[(0,t.jsx)(i.Helmet,{children:(0,t.jsxs)("title",{children:[u.formatMessage({id:"menu.login",defaultMessage:""}),"- ",pe.Z.title]})}),(0,t.jsx)(W,{}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(U.U,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"NexusAI",subTitle:u.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var h=N()(M()().mark(function c(n){return M()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Ze(n);case 2:case"end":return d.stop()}},c)}));return function(c){return h.apply(this,arguments)}}(),children:[(0,t.jsx)(te.Z,{activeKey:K,onChange:ne,centered:!0,items:[]}),w==="error"&&L==="account"&&(0,t.jsx)(ye,{content:u.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:""})}),K==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(oe.Z,{})},placeholder:u.formatMessage({id:"pages.login.username.placeholder",defaultMessage:":"}),rules:[{required:!0,message:(0,t.jsx)(i.FormattedMessage,{id:"pages.login.username.required"})}]}),(0,t.jsx)(R.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(q.Z,{})},placeholder:u.formatMessage({id:"pages.login.password.placeholder"}),rules:[{required:!0,message:(0,t.jsx)(i.FormattedMessage,{id:"pages.login.password.required"})}]})]}),w==="error"&&L==="mobile"&&(0,t.jsx)(ye,{content:""}),K==="mobile"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Z,{fieldProps:{size:"large",prefix:(0,t.jsx)(ce,{})},name:"mobile",placeholder:u.formatMessage({id:"pages.login.phoneNumber.placeholder"}),rules:[{required:!0,message:(0,t.jsx)(i.FormattedMessage,{id:"pages.login.phoneNumber.required"})},{pattern:/^1\d{10}$/,message:(0,t.jsx)(i.FormattedMessage,{id:"pages.login.phoneNumber.invalid"})}]}),(0,t.jsx)(T,{fieldProps:{size:"large",prefix:(0,t.jsx)(q.Z,{})},captchaProps:{size:"large"},placeholder:u.formatMessage({id:"pages.login.captcha.placeholder"}),captchaTextRender:function(c,n){return c?"".concat(n," ").concat(u.formatMessage({id:"pages.getCaptchaSecondText"})):u.formatMessage({id:"pages.login.phoneLogin.getVerificationCode"})},name:"captcha",rules:[{required:!0,message:(0,t.jsx)(i.FormattedMessage,{id:"pages.login.captcha.required"})}],onGetCaptcha:function(){var h=N()(M()().mark(function c(n){var P;return M()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,D.getFakeCaptcha)({phone:n});case 2:if(P=o.sent,P){o.next=5;break}return o.abrupt("return");case 5:case"end":return o.stop()}},c)}));return function(c){return h.apply(this,arguments)}}()})]}),(0,t.jsx)("div",{style:{marginTop:-14,marginBottom:8,textAlign:"right"},children:(0,t.jsx)("a",{onClick:function(){i.history.push("/user/forgot-password")},style:{color:"#1890ff",textDecoration:"none"},children:u.formatMessage({id:"pages.login.forgotPassword",defaultMessage:"Forgot Password ?"})})})]})}),(0,t.jsx)(Y.$_,{})]})},Le=Te},99058:function(){}}]);
