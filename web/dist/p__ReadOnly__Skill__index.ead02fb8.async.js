(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[630],{82826:function(D,F,t){"use strict";t.d(F,{Z:function(){return j}});var g=t(1413),n=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},h=R,N=t(91146),u=function(A,E){return n.createElement(N.Z,(0,g.Z)((0,g.Z)({},A),{},{ref:E,icon:h}))},w=n.forwardRef(u),j=w},89035:function(D,F,t){"use strict";t.d(F,{Z:function(){return j}});var g=t(1413),n=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"code",theme:"outlined"},h=R,N=t(91146),u=function(A,E){return n.createElement(N.Z,(0,g.Z)((0,g.Z)({},A),{},{ref:E,icon:h}))},w=n.forwardRef(u),j=w},81644:function(D,F,t){"use strict";t.d(F,{Z:function(){return j}});var g=t(1413),n=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},h=R,N=t(91146),u=function(A,E){return n.createElement(N.Z,(0,g.Z)((0,g.Z)({},A),{},{ref:E,icon:h}))},w=n.forwardRef(u),j=w},2068:function(D,F,t){"use strict";t.d(F,{Z:function(){return j}});var g=t(1413),n=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"},h=R,N=t(91146),u=function(A,E){return n.createElement(N.Z,(0,g.Z)((0,g.Z)({},A),{},{ref:E,icon:h}))},w=n.forwardRef(u),j=w},15360:function(D,F,t){"use strict";t.d(F,{Z:function(){return j}});var g=t(1413),n=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},h=R,N=t(91146),u=function(A,E){return n.createElement(N.Z,(0,g.Z)((0,g.Z)({},A),{},{ref:E,icon:h}))},w=n.forwardRef(u),j=w},24805:function(D,F,t){"use strict";t.d(F,{Hb:function(){return A},Ur:function(){return fe},cN:function(){return me},ej:function(){return E}});var g=t(15009),n=t.n(g),R=t(99289),h=t.n(R),N=t(47520),u="/v1/skill/skill_info/",w="/v1/skill/skill_update/",j="/v1/skill/skill_publish/",K="/v1/skill/skill_run",A=function(){var C=h()(n()().mark(function a(m,Z){var _;return n()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,N.ZP)("".concat(u).concat(m),{method:"GET",data:{publish_status:Z=="true"?1:0}});case 2:return _=J.sent,J.abrupt("return",_);case 4:case"end":return J.stop()}},a)}));return function(m,Z){return C.apply(this,arguments)}}(),E=function(){var C=h()(n()().mark(function a(m){var Z;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,N.ZP)("".concat(w).concat(m.app_id),{method:"PUT",data:m.data});case 2:return Z=r.sent,r.abrupt("return",Z);case 4:case"end":return r.stop()}},a)}));return function(m){return C.apply(this,arguments)}}(),me=function(){var C=h()(n()().mark(function a(m){var Z;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,N.ZP)("".concat(j).concat(m),{method:"PUT"});case 2:return Z=r.sent,r.abrupt("return",Z);case 4:case"end":return r.stop()}},a)}));return function(m){return C.apply(this,arguments)}}(),fe=function(){var C=h()(n()().mark(function a(m){var Z;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,N.ZP)("".concat(K),{method:"POST",data:m});case 2:return Z=r.sent,r.abrupt("return",Z);case 4:case"end":return r.stop()}},a)}));return function(m){return C.apply(this,arguments)}}()},23924:function(D,F,t){"use strict";t.r(F),t.d(F,{default:function(){return Ge}});var g=t(15009),n=t.n(g),R=t(99289),h=t.n(R),N=t(5574),u=t.n(N),w=t(24805),j=t(10759),K=t(2068),A=t(89035),E=t(81644),me=t(15360),fe=t(82826),C=t(35312),a=t(40741),m=t(45360),Z=t(28036),_=t(50136),r=t(67294),J=t(97857),o=t.n(J),le=t(92939),L=t(26915),ve=t(72269),xe=t(34041),e=t(85893),rt=L.Z.TextArea,Oe=function(s){var q=s.FirstValue,y=s.FirstSkillref,c=s.Skillinfo,p=s.setSkillInfo,U=s.Operationbentate,l=(0,C.useIntl)();(0,r.useEffect)(function(){},[]);var f={readOnly:!0},P={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:l.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsx)(a.Z,{name:"dynamic_form_nest_item",onFinish:function(B){q(B)},style:{width:900},autoComplete:"off",form:y,children:c&&c.attrs_are_visible==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:l.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[c&&c.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:U==="true"?l.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:l.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:c&&c.description})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:l.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[c&&c.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:U==="true"?l.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:l.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:c&&c.description})]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(le.Z,{className:"font-medium text-xs text-[#555555]",name:l.formatMessage({id:"skill.teamvisibility"}),title:l.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(ve.Z,o()(o()({},P),{},{size:"small",checked:!!(c&&c.is_public==1)}))]}),(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(le.Z,{className:"font-medium",name:l.formatMessage({id:"agent.attrVisible"}),title:l.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(ve.Z,o()(o()({},P),{},{size:"small",checked:!!(c&&c.attrs_are_visible==1)}))]}),(0,e.jsx)("div",{className:"mb-[15px] text-xs font-bold flex justify-between items-center",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:(0,e.jsx)(le.Z,{name:l.formatMessage({id:"skill.inputvariable"}),title:l.formatMessage({id:"skill.Callword.inputvariable"})})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-[300px] ml-2.5",children:l.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-[300px]",children:l.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"w-[230px]",children:l.formatMessage({id:"skill.variable.type"})}),(0,e.jsx)("div",{className:"w-[70px]",children:l.formatMessage({id:"skill.variable.required"})})]}),(0,e.jsx)("div",{children:y&&y.getFieldValue().users&&y.getFieldValue().users.map(function(M,B){return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,{className:"m-0",rules:[{required:!0,message:""},{pattern:/^[a-zA-Z0-9_]+$/,message:""}],children:(0,e.jsx)(L.Z,o()(o()({},P),{},{value:M.name,className:"w-[280px] mr-[20px]"}))}),(0,e.jsx)(a.Z.Item,{className:"m-0",rules:[{required:!0,message:""}],children:(0,e.jsx)(L.Z,o()(o()({},P),{},{value:M.content,className:"w-[270px] mr-[20px]"}))}),(0,e.jsx)(a.Z.Item,{className:" mr-[80px] m-0",children:(0,e.jsx)(xe.Z,o()(o()({},P),{},{style:{width:"150px"},defaultValue:"string",value:M.type,options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"}]}))}),(0,e.jsx)(a.Z.Item,{className:"w-12 mr-14 m-0",children:(0,e.jsx)(ve.Z,o()(o()({},P),{},{size:"small",checked:M.status}))})]},B)})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ie=Oe,ye=t(92485),Ce=function(s){var q=s.SecondValue,y=s.handleBack,c=s.Skillinfo,p=s.setSkillInfo,U=s.SkillRelyOn,l=s.setSkillRelyOn,f=s.Secondref,P=s.setskillcodestate,M=s.setNewcode,B=(0,C.useIntl)();(0,r.useEffect)(function(){},[]);var ne={readOnly:!0},X={disabled:!0},G=function(ee){console.log(ee),l(ee)};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:B.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:f,children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(le.Z,{name:B.formatMessage({id:"skill.dependency"}),title:B.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(xe.Z,o()(o()({},X),{},{mode:"tags",variant:"filled",style:{width:"100%"},value:U,tokenSeparators:[","]}))]}),(0,e.jsxs)(a.Z.Item,{children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:B.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(ye.Z,{readOnly:!0,language:"python3",value:c&&c.code?JSON.parse(c.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,title:"python3"})})]})]})]})},Pe=Ce,ie=t(78045),it=L.Z.TextArea,nt=L.Z.Search,Te=function(s){var q=s.ThirdlyValue,y=s.Thirdlyref,c=s.handleBack,p=s.Skillinfo,U=s.setSkillInfo,l=s.Operationbentate,f=(0,C.useIntl)(),P=(0,r.useState)(null),M=u()(P,2),B=M[0],ne=M[1],X={readOnly:!0},G={disabled:!0};(0,r.useEffect)(function(){},[]);var Y=function(Q){U(o()(o()({},p),{},{output_type:Q.target.value}))},ee=function(Q){var H=new j.Kr("output","","");Q.users.forEach(function($){var W=new j._w($.name,$.type?$.type:"string","",$.content,!1);H.addProperty($.name,W)});var b={output_type:p.output_type,output_variables:H};q(b)};return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:f.formatMessage({id:"skill.menu.output"})})}),(0,e.jsx)(a.Z,{name:"dynamic_form_nest_item",onFinish:ee,style:{width:900},autoComplete:"off",form:y,children:(0,e.jsx)(a.Z.List,{name:"users",children:function(Q,H){var b=H.add,$=H.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(le.Z,{name:f.formatMessage({id:"skill.outputvariable"}),title:f.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(ie.ZP.Group,o()(o()({},G),{},{value:p&&p.output_type,children:[(0,e.jsx)(ie.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(ie.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(ie.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(ie.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:f.formatMessage({id:"skill.radio.file"})})})]}))]}),(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium flex justify-between items-center",children:(0,e.jsx)("div",{children:(0,e.jsx)(le.Z,{name:f.formatMessage({id:"skill.outputv"}),title:f.formatMessage({id:"skill.Callword.outputv"})})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-[300px] mr-[60px] ml-2.5",children:f.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-[300px] mr-[50px]",children:f.formatMessage({id:"skill.variable.display"})}),(0,e.jsx)("div",{className:"",children:f.formatMessage({id:"skill.variable.type"})})]}),y&&y.getFieldValue("users")&&y.getFieldValue("users").map(function(W,de){return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,{className:"m-0",children:(0,e.jsx)(L.Z,o()(o()({},G),{},{placeholder:f.formatMessage({id:"skill.variable.name"}),value:W.name,className:"w-[280px] mr-[80px]"}))}),(0,e.jsx)(a.Z.Item,{className:"m-0",rules:[{required:!0,message:f.formatMessage({id:"skill.rules.name"})}],children:(0,e.jsx)(L.Z,o()(o()({},G),{},{placeholder:f.formatMessage({id:"skill.variable.display"}),value:W.content,className:"w-[270px] mr-[80px]"}))}),(0,e.jsx)(a.Z.Item,{className:"w-36 mr-16 m-0",children:(0,e.jsx)(xe.Z,o()(o()({},G),{},{style:{width:"150px"},value:W.type,placeholder:"Please select",defaultValue:"string",options:[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"json",label:"Object"},{value:"file",label:"File"}]}))})]})})]})}})})]})},Ve=Te,Re=t(13769),Ae=t.n(Re),Ee=t(49677),Be=t.n(Ee),ze=t(68672),De=t(74330),Le=["key","name"],dt=L.Z.TextArea,ut=L.Z.Search,He=function(s){var q=s.FourthlyValue,y=s.Fourthlyref,c=s.handleBack,p=s.Skillinfo,U=s.Operationbentate,l=(0,C.useIntl)(),f=(0,r.useState)(null),P=u()(f,2),M=P[0],B=P[1],ne=(0,r.useState)(!1),X=u()(ne,2),G=X[0],Y=X[1];(0,r.useEffect)(function(){},[]);var ee=function(){var S=h()(n()().mark(function k(){var z;return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,w.cN)(p.app_id);case 2:z=O.sent,z.code==0?m.ZP.success(l.formatMessage({id:"skill.publishsuccess"})):m.ZP.error(l.formatMessage({id:"skill.select.value"}));case 4:case"end":return O.stop()}},k)}));return function(){return S.apply(this,arguments)}}(),re=function(k){var z=k.users.filter(function(v,te){return v.type=="number"&&!Number(v.value)&&!!v.value});if(z.length>0)m.ZP.warning(l.formatMessage({id:"skill.message.warning.vlaue"}));else{Y(!0);var I=new j.Kr("output","","");k.users.forEach(function(v){var te=new j._w(v.name,v.type,v.type=="string"?v.value:Number(v.value),v.content,v.status);I.addProperty(v.name,te)});var O={skill_id:p.id,input_dict:I};W(O)}},Q=(0,r.useState)([]),H=u()(Q,2),b=H[0],$=H[1],W=function(){var S=h()(n()().mark(function k(z){return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:(0,w.Ur)(z).then(function(v){m.ZP.success(l.formatMessage({id:"skill.run.success"})),B(v.data.outputs),$(v.data.file_list||[]),Y(!1)}).catch(function(v){Y(!1)});case 1:case"end":return O.stop()}},k)}));return function(z){return S.apply(this,arguments)}}(),de=function(){var S=h()(n()().mark(function k(){return n()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:C.history.push("/Skill?app_id=".concat(p==null?void 0:p.app_id,"&type=false")),location.reload();case 2:case"end":return I.stop()}},k)}));return function(){return S.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:l.formatMessage({id:"skill.operationrun"})})}),(0,e.jsxs)(a.Z,{name:"dynamic_form_nest_item",onFinish:re,style:{width:900},autoComplete:"off",form:y,children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:(0,e.jsx)("div",{children:l.formatMessage({id:"skill.inputvariable"})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:l.formatMessage({id:"skill.variable.name"})}),(0,e.jsx)("div",{className:"w-52 mr-5",children:l.formatMessage({id:"skill.variable.display"})})]}),(0,e.jsx)(a.Z.List,{name:"users",children:function(k,z){return Be()(z),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-[30px]",children:k.map(function(I){var O=I.key,v=I.name,te=Ae()(I,Le);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(a.Z.Item,o()(o()({},te),{},{name:[v,"content"],children:(0,e.jsx)(L.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(a.Z.Item,o()(o()({},te),{},{name:[v,"value"],rules:[{required:!!(y.getFieldsValue()&&y.getFieldsValue().users[O].status==!0),message:l.formatMessage({id:"skill.message.variantcontent"})}],children:(0,e.jsx)(L.Z,{placeholder:y.getFieldsValue()&&y.getFieldsValue().users[O].status==!0?l.formatMessage({id:"skill.variantcontent.required"}):l.formatMessage({id:"skill.variantcontent"}),style:{width:"660px"}})}))]})})})})}}),(0,e.jsxs)(a.Z.Item,{rules:[{required:!0,message:l.formatMessage({id:"skill.rules.callword"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:l.formatMessage({id:"skill.runpreview"})}),(0,e.jsx)(De.Z,{spinning:G,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsxs)("div",{className:"h-[345px] mb-[30px]",children:[" ",M?(0,e.jsx)(ye.Z,{language:"python3",value:M&&JSON.stringify(M)}):null]}),b.length>0&&(0,e.jsx)(ze.Z,{files:b,title:l.formatMessage({id:"agent.file.output"}),className:"mb-4"}),(0,e.jsx)("div",{className:"w-full flex justify-end items-center",children:(0,e.jsx)("div",{className:" h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(Z.ZP,{className:"bg-[#fff]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0,children:l.formatMessage({id:"skill.run"})})})})]})})]}),(0,e.jsx)("div",{className:"w-28",children:(p==null?void 0:p.publish_status)===1&&(p==null?void 0:p.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(Z.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:de,children:l.formatMessage({id:"skill.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(Z.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:ee,disabled:U!="false",children:l.formatMessage({id:"skill.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})]})},$e=He,Ue=function(){var s=(0,C.useIntl)(),q=a.Z.useForm(),y=u()(q,1),c=y[0],p=a.Z.useForm(),U=u()(p,1),l=U[0],f=a.Z.useForm(),P=u()(f,1),M=P[0],B=a.Z.useForm(),ne=u()(B,1),X=ne[0],G=(0,r.useState)(0),Y=u()(G,2),ee=Y[0],re=Y[1],Q=(0,r.useState)("1"),H=u()(Q,2),b=H[0],$=H[1],W=(0,r.useState)(null),de=u()(W,2),S=de[0],k=de[1],z=(0,r.useState)(null),I=u()(z,2),O=I[0],v=I[1],te=(0,r.useState)(null),be=u()(te,2),he=be[0],ke=be[1],We=(0,r.useState)(null),Se=u()(We,2),ce=Se[0],Ke=Se[1],Je=(0,r.useState)(!1),Fe=u()(Je,2),ot=Fe[0],Xe=Fe[1],Ye=(0,r.useState)(null),Ne=u()(Ye,2),ct=Ne[0],Qe=Ne[1],_e=[{key:"1",icon:(0,e.jsx)(K.Z,{}),label:s.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(A.Z,{}),label:s.formatMessage({id:"skill.menu.code"}),disabled:he&&S.attrs_are_visible==0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="2"?"#1B64F3":"#213044"}},{key:"3",icon:(0,e.jsx)(E.Z,{}),label:s.formatMessage({id:"skill.menu.output"}),disabled:he&&S.attrs_are_visible!==1,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="3"?"#1B64F3":"#213044"}},{key:"4",icon:(0,e.jsx)(me.Z,{}),label:s.formatMessage({id:"skill.menu.debug"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:b=="4"?"#1B64F3":"#213044"}}];(0,r.useEffect)(function(){we()},[]);var we=function(){var T=h()(n()().mark(function d(){var x,i,V,se;return n()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return x=new URLSearchParams(window.location.search),v(x.get("app_id")),ue.next=4,(0,w.Hb)(x.get("app_id"),x.get("type"));case 4:i=ue.sent,console.log(i,"res-===>"),i.code==0?(k(i.data),Ke(i.data.publish_status===1?"true":"false"),i.data.publish_status==1&&m.ZP.warning(s.formatMessage({id:"skill.message.listwarning"}),5),V=pe(i.data.input_variables),c.setFieldsValue(V),ke(i.data.dependencies?i.data.dependencies.python3:[]),se=pe(i.data.output_variables),M.setFieldsValue(se)):m.ZP.error(s.formatMessage({id:"skill.message.listerror"}));case 7:case"end":return ue.stop()}},d)}));return function(){return T.apply(this,arguments)}}(),pe=function(d){console.log(!!d&&!!d.properties,"obj");var x={users:d&&d.properties?Object.values(d.properties).map(function(i){return{name:i.name,type:i.type,content:i.display_name,status:i.required}}):[{name:"",content:"",output_format:0,status:!0,type:"string"}]};return x},ge=function(){var T=h()(n()().mark(function d(x){var i,V;return n()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(ce!=="false"){ae.next=7;break}return i={app_id:O,data:x},ae.next=4,(0,w.ej)(i);case 4:V=ae.sent,console.log(V),V.code==0&&we();case 7:case"end":return ae.stop()}},d)}));return function(x){return T.apply(this,arguments)}}(),qe=function(){Me({key:b,keyPath:[],item:void 0,domEvent:void 0}),history.back()},Ze=function(d){var x=pe(d.input_variables);X.setFieldsValue(x)},et=function(d){ge(d)},tt=function(d){ge(d)},st=function(d){ge(d)},je=function(d){re(d)},Me=function(d){if(b=="1"){var x={input_variables:lt(c.getFieldValue()),is_public:S.is_public};Ze(x),$(d.key)}$(d.key)},mt=function(d,x){console.log(d,"users");var i=d.filter(function(V){return!V||!V.name||!V.content});if(console.log("firstusers",i,!d[0]),d[0]){if(i.length!==0)return m.ZP.warning("".concat(x===1?s.formatMessage({id:"skill.message.inputerror3"}):s.formatMessage({id:"skill.message.inputerror4"}))),!0}else return m.ZP.warning("".concat(x===1?s.formatMessage({id:"skill.message.inputerror1"}):s.formatMessage({id:"skill.message.inputerror2"}))),!0;return at(d,"name")?(m.ZP.warning(s.formatMessage({id:"skill.message.inputerror5"})),!0):!1},at=function(d,x){var i=new Set;return d.some(function(V){var se=V[x];return i.has(se)?i.add(se):i.add(se)&&!1})},lt=function(d){var x=new j.Kr("output","","");return d.users.forEach(function(i){var V=new j._w(i.name,i.type?i.type:"string",i.value?i.value:"",i.content,i.status?i.status:!1);x.addProperty(i.name,V)}),x};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col h-full w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(Z.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:qe,children:[(0,e.jsx)(fe.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:s.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(_.Z,{selectedKeys:[b],onClick:Me,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[b],mode:"inline",items:_e})})]}),(0,e.jsx)("div",{className:"flex flex-col ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px]",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px]  text-lg text-[#213044] font-medium",children:[S?S.nickname:"",s.formatMessage({id:"skill.skills"})]})]})}),(0,e.jsx)("div",{style:{display:b==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ie,{FirstValue:Ze,Skillinfo:S,setSkillInfo:k,FirstSkillref:c,Operationbentate:ce})}),(0,e.jsx)("div",{style:{display:b==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Pe,{SecondValue:et,handleBack:je,Skillinfo:S,setSkillInfo:k,SkillRelyOn:he,setSkillRelyOn:ke,Secondref:l,setskillcodestate:Xe,setNewcode:Qe})}),(0,e.jsx)("div",{style:{display:b==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ve,{ThirdlyValue:tt,handleBack:je,Thirdlyref:M,Skillinfo:S,setSkillInfo:k,Operationbentate:ce})}),(0,e.jsx)("div",{style:{display:b==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)($e,{FourthlyValue:st,handleBack:je,Fourthlyref:X,Skillinfo:S,Operationbentate:ce})})]})})]})},Ge=Ue},49677:function(D){function F(t){if(t==null)throw new TypeError("Cannot destructure "+t)}D.exports=F,D.exports.__esModule=!0,D.exports.default=D.exports}}]);
