"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2630],{54605:function(rt,q,t){t.r(q),t.d(q,{default:function(){return Ke}});var je=t(15009),$=t.n(je),Se=t(99289),_=t.n(Se),ke=t(5574),u=t.n(ke),ee=t(24805),z=t(10759),be=t(18449),Ne=t(2068),Fe=t(89035),Ze=t(81644),Me=t(82826),O=t(76772),r=t(40741),W=t(45360),we=t(28036),Oe=t(33456),G=t(25409),Ie=t(74330),c=t(67294),Te=t(97857),p=t.n(Te),F=t(92939),te=t(75486),se=t(72269),le=t(22683),ae=t(97807),ie=t(4958),e=t(85893),Ve=function(l){var j,Z=l.FirstValue,h=l.FirstSkillref,a=l.Skillinfo,M=l.setSkillInfo,b=l.Operationbentate,n=(0,O.useIntl)();(0,c.useEffect)(function(){},[]);var T={readOnly:!0},g={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"skill.inputsetting"})})}),(0,e.jsx)(r.Z,{name:"dynamic_form_nest_item",onFinish:function(V){Z(V)},style:{width:"100%"},autoComplete:"off",form:h,children:a&&a.attrs_are_visible==0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:n.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:b==="true"?n.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:n.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] text-xs bg-[#F7F7F7] rounded-lg markdown-body",children:(0,e.jsx)(le.U,{rehypePlugins:[ae.Z],remarkPlugins:[ie.Z],children:a&&a.description||""})})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium  mb-[15px]",children:n.formatMessage({id:"skill.appname"})}),(0,e.jsxs)("div",{className:"text-[#555555] w-full my-2 p-[15px] flex text-xs  items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:b==="true"?n.formatMessage({id:"skill.toast.waring"}):""})]})]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs  mb-[15px]",children:n.formatMessage({id:"skill.appdescription"})}),(0,e.jsx)("div",{className:"text-[#555555] w-full my-2 p-[15px] text-xs bg-[#F7F7F7] rounded-lg markdown-body",children:(0,e.jsx)(le.U,{rehypePlugins:[ae.Z],remarkPlugins:[ie.Z],children:a&&a.description||""})})]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(F.Z,{className:"font-medium text-xs text-[#555555]",name:n.formatMessage({id:"skill.teamvisibility"}),title:n.formatMessage({id:"skill.Callword.title"})})}),(0,e.jsx)(se.Z,p()(p()({},g),{},{size:"small",checked:!!(a&&a.is_public==1)}))]}),(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(F.Z,{className:"font-medium",name:n.formatMessage({id:"agent.attrVisible"}),title:n.formatMessage({id:"skill.explain.attrVisible"})})}),(0,e.jsx)(se.Z,p()(p()({},g),{},{size:"small",checked:!!(a&&a.attrs_are_visible==1)}))]}),(a==null?void 0:a.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(te.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(F.Z,{className:"font-medium",required:!0,name:n.formatMessage({id:"skill.inputvariable"}),title:n.formatMessage({id:"skill.Callword.inputvariable"})})}),variableTypes:["string","number","json"],variables:Object.values((a==null||(j=a.input_variables)===null||j===void 0?void 0:j.properties)||{})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ce=Ve,Pe=t(34041),Be=t(620),Re=function(l){var j=l.SecondValue,Z=l.handleBack,h=l.Skillinfo,a=l.setSkillInfo,M=l.SkillRelyOn,b=l.setSkillRelyOn,n=l.Secondref,T=l.setskillcodestate,g=l.setNewcode,S=(0,O.useIntl)();(0,c.useEffect)(function(){},[]);var V={readOnly:!0},C={disabled:!0},A=function(P){console.log(P),b(P)};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:S.formatMessage({id:"skill.codesetting"})})}),(0,e.jsxs)(r.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:n,children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(F.Z,{name:S.formatMessage({id:"skill.dependency"}),title:S.formatMessage({id:"skill.Callword.dependency"})})}),(0,e.jsx)(Pe.Z,p()(p()({},C),{},{mode:"tags",variant:"filled",style:{width:"100%"},value:M,tokenSeparators:[","]}))]}),(0,e.jsxs)(r.Z.Item,{children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:S.formatMessage({id:"skill.code"})}),(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(Be.Z,{readOnly:!0,language:"python3",value:h&&h.code?JSON.parse(h.code).python3:`def main(arg1: int) -> dict:
    return {
        "result": (arg1 + 2) * 3,
    }`,title:"python3"})})]})]})]})},Ee=Re,ne=t(26915),I=t(78045),dt=ne.Z.TextArea,ot=ne.Z.Search,$e=function(l){var j=l.ThirdlyValue,Z=l.Thirdlyref,h=l.handleBack,a=l.Skillinfo,M=l.setSkillInfo,b=l.Operationbentate,n=(0,O.useIntl)(),T=(0,c.useState)(null),g=u()(T,2),S=g[0],V=g[1],C={readOnly:!0},A={disabled:!0};(0,c.useEffect)(function(){},[]);var K=function(w){M(p()(p()({},a),{},{output_type:w.target.value}))},P=function(w){var k=new z.Kr("output","","");w.users.forEach(function(v){var B=new z._w(v.name,v.type?v.type:"string","",v.content,!1);v.description!==void 0&&(B.description=v.description),k.addProperty(v.name,B)});var d={output_type:a.output_type,output_variables:k};j(d)};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"skill.menu.output"})})}),(0,e.jsx)(r.Z,{name:"dynamic_form_nest_item",onFinish:P,style:{width:"100%"},autoComplete:"off",form:Z,children:(0,e.jsx)(r.Z.List,{name:"users",children:function(w,k){var d,v=k.add,B=k.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(r.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px] font-medium",children:(0,e.jsx)(F.Z,{name:n.formatMessage({id:"skill.outputvariable"}),title:n.formatMessage({id:"skill.Callword.outputvariable"})})}),(0,e.jsxs)(I.ZP.Group,p()(p()({},A),{},{value:a&&a.output_type,children:[(0,e.jsx)(I.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.text"})})}),(0,e.jsx)(I.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.database"})})}),(0,e.jsx)(I.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.code"})})}),(0,e.jsx)(I.ZP,{value:4,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:n.formatMessage({id:"skill.radio.file"})})})]}))]}),(a==null?void 0:a.output_variables)&&(0,e.jsx)("div",{className:"",children:(0,e.jsx)(te.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(F.Z,{className:"font-medium",required:!0,name:n.formatMessage({id:"skill.outputv"}),title:n.formatMessage({id:"skill.Callword.outputv"})})}),variableTypes:["string","number","json","file"],variables:Object.values((a==null||(d=a.output_variables)===null||d===void 0?void 0:d.properties)||{})})})]})}})})]})},ze=$e,Ae=function(){var l=(0,O.useIntl)(),j=r.Z.useForm(),Z=u()(j,1),h=Z[0],a=r.Z.useForm(),M=u()(a,1),b=M[0],n=r.Z.useForm(),T=u()(n,1),g=T[0],S=r.Z.useForm(),V=u()(S,1),C=V[0],A=(0,c.useState)(0),K=u()(A,2),P=K[0],L=K[1],w=(0,c.useState)("1"),k=u()(w,2),d=k[0],v=k[1],B=(0,c.useState)(null),re=u()(B,2),f=re[0],R=re[1],Le=(0,c.useState)(null),de=u()(Le,2),oe=de[0],De=de[1],We=(0,c.useState)(null),ue=u()(We,2),Ge=ue[0],Ue=ue[1],He=(0,c.useState)(null),ce=u()(He,2),H=ce[0],me=ce[1],Je=(0,c.useState)(null),xe=u()(Je,2),D=xe[0],Xe=xe[1],Ye=(0,c.useState)(!1),ve=u()(Ye,2),ut=ve[0],Qe=ve[1],qe=(0,c.useState)(null),fe=u()(qe,2),ct=fe[0],_e=fe[1],et=(0,c.useState)(!0),pe=u()(et,2),J=pe[0],he=pe[1],tt=[{key:"1",icon:(0,e.jsx)(Ne.Z,{}),label:l.formatMessage({id:"skill.menu.input"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(Fe.Z,{}),label:l.formatMessage({id:"skill.menu.code"}),disabled:H&&f.attrs_are_visible==0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="2"?"#1B64F3":"#213044"}},{key:"3",icon:(0,e.jsx)(Ze.Z,{}),label:l.formatMessage({id:"skill.menu.output"}),disabled:H&&f.attrs_are_visible!==1,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:d=="3"?"#1B64F3":"#213044"}}];(0,c.useEffect)(function(){ge()},[]);var ge=function(){var m=_()($()().mark(function i(){var o,s,x,N;return $()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return o=new URLSearchParams(window.location.search),he(!0),De(o.get("app_id")),E.next=5,(0,ee.Hb)(o.get("app_id"),o.get("type"));case 5:s=E.sent,console.log(s,"res-===>"),he(!1),s.code==0?(R(s.data),Ue(s.data.id),Xe(s.data.publish_status===1?"true":"false"),s.data.publish_status==1&&W.ZP.warning(l.formatMessage({id:"skill.message.listwarning"}),5),x=X(s.data.input_variables),h.setFieldsValue(x),me(s.data.dependencies?s.data.dependencies.python3:[]),N=X(s.data.output_variables),g.setFieldsValue(N)):W.ZP.error(l.formatMessage({id:"skill.message.listerror"}));case 9:case"end":return E.stop()}},i)}));return function(){return m.apply(this,arguments)}}(),X=function(i){console.log(!!i&&!!i.properties,"obj");var o={users:i&&i.properties?Object.values(i.properties).map(function(s){return{name:s.name,type:s.type,content:s.display_name,status:s.required,description:s.description}}):[{name:"",content:"",output_format:0,status:!0,type:"string",description:""}]};return o},Y=function(){var m=_()($()().mark(function i(o){var s,x;return $()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(D!=="false"){y.next=8;break}return s={app_id:oe,data:o},y.next=4,(0,ee.ej)(s);case 4:return x=y.sent,console.log(x),x.code===0&&(W.ZP.success(l.formatMessage({id:"skill.conserve.success"})),ge()),y.abrupt("return",x);case 8:return y.abrupt("return",{code:-1,message:"Operation not allowed"});case 9:case"end":return y.stop()}},i)}));return function(o){return m.apply(this,arguments)}}(),st=function(){ye({key:d,keyPath:[],item:void 0,domEvent:void 0}),O.history.back()},lt=function(i){var o=X(i.input_variables);C.setFieldsValue(o)},at=function(i){Y(i)},it=function(i){Y(i)},nt=function(i){Y(i)},Q=function(i){L(i)},ye=function(i){d=="1"&&v(i.key),v(i.key)},mt=function(i,o){var s=new Set;return i.some(function(x){var N=x[o];return s.has(N)?s.add(N):s.add(N)&&!1})},xt=function(i){var o=new z.Kr("output","","");return i.users.forEach(function(s){var x=new z._w(s.name,s.type?s.type:"string",s.value?s.value:"",s.content,s.status?s.status:!1);s.description!==void 0&&(x.description=s.description),o.addProperty(s.name,x)}),o};return(0,e.jsxs)("div",{className:"flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(we.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:st,children:[(0,e.jsx)(Me.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:l.formatMessage({id:"skill.back"})})]})}),(0,e.jsx)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:(0,e.jsx)(Oe.Z,{selectedKeys:[d],onClick:ye,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[d],mode:"inline",items:tt})})]}),(0,e.jsx)("div",{className:"flex-1 relative w-[calc(100%-300px)]",children:(0,e.jsxs)(G.Z,{style:{height:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,e.jsx)(G.Z.Panel,{defaultSize:"50%",min:"40%",max:"70%",children:(0,e.jsx)(Ie.Z,{spinning:J,size:"large",className:"mt-[112px] mr-4",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px]",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[f?f.nickname:"",l.formatMessage({id:"skill.skills"}),(0,e.jsxs)("span",{className:"ml-2 text-sm text-gray-500 font-normal",children:["(",l.formatMessage({id:"readonly.mode"}),")"]})]}),(f==null?void 0:f.app_publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] text-[#fff] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:l.formatMessage({id:"skill.havepublished"})}):(0,e.jsx)("div",{className:"bg-[#EEE] text-[#999] px-[7px] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:l.formatMessage({id:"skill.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:d==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!J&&(0,e.jsx)(Ce,{FirstValue:lt,Skillinfo:f,setSkillInfo:R,FirstSkillref:h,Operationbentate:D})}),(0,e.jsx)("div",{style:{display:d==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ee,{SecondValue:at,handleBack:Q,Skillinfo:f,setSkillInfo:R,SkillRelyOn:H,setSkillRelyOn:me,Secondref:b,setskillcodestate:Qe,setNewcode:_e})}),(0,e.jsx)("div",{style:{display:d==="3"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!J&&(0,e.jsx)(ze,{ThirdlyValue:it,handleBack:Q,Thirdlyref:g,Skillinfo:f,setSkillInfo:R,Operationbentate:D})})]})})})}),(0,e.jsx)(G.Z.Panel,{children:(0,e.jsx)(be.Z,{FourthlyValue:nt,handleBack:Q,Fourthlyref:C,Skillinfo:f,skillid:Ge,app_id:oe,Operationbentate:D,skillupdata:function(){return Promise.resolve({code:0})},isCreate:!1,setSkillInfo:R,readOnly:!0})})]})})]})},Ke=Ae}}]);
