"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[375],{43722:function(ce,B,s){s.d(B,{Gh:function(){return q},Gn:function(){return W},KH:function(){return J},Rp:function(){return X},cH:function(){return Z},dB:function(){return L},j2:function(){return b},r5:function(){return N},rw:function(){return v},sI:function(){return G},sT:function(){return H},sh:function(){return Y},vu:function(){return K},xM:function(){return ee},xT:function(){return F}});var U=s(15009),c=s.n(U),k=s(99289),l=s.n(k),x=s(47520),v=function(){var o=l()(c()().mark(function a(){var n;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,x.ZP)("/v1/index/",{method:"GET"});case 2:return n=u.sent,u.abrupt("return",n);case 4:case"end":return u.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),P=null,K=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/",{method:"GET",data:n});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),W=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/".concat(n.id),{method:"DELETE"});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),L=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/",{method:"POST",data:n});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),Z=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/".concat(n.id,"/details"),{method:"GET"});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),b=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:n.id}});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),G=function(){var o=l()(c()().mark(function a(n,t){var u;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(t,"/update_chatroom"),{method:"POST",data:n});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},a)}));return function(n,t){return o.apply(this,arguments)}}(),N=function(){var o=l()(c()().mark(function a(n,t){var u;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(t,"/smart_selection"),{method:"POST",data:n});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},a)}));return function(n,t){return o.apply(this,arguments)}}(),H=function(){var o=l()(c()().mark(function a(n,t,u){var r;return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,x.ZP)("/v1/chatroom/".concat(t,"/agents/").concat(u,"/setting"),{method:"PUT",data:n});case 2:return r=O.sent,O.abrupt("return",r);case 4:case"end":return O.stop()}},a)}));return function(n,t,u){return o.apply(this,arguments)}}(),J=function(){var o=l()(c()().mark(function a(n,t){var u;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(n,"/chatroom_message"),{method:"GET",data:t});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},a)}));return function(n,t){return o.apply(this,arguments)}}(),X=function(){var o=l()(c()().mark(function a(n,t){var u;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(n,"/chat_history_message_summary"),{method:"POST",data:t});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},a)}));return function(n,t){return o.apply(this,arguments)}}(),F=function(){var o=l()(c()().mark(function a(n,t){var u;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(n,"/chat_history_summary"),{method:"POST",data:t});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},a)}));return function(n,t){return o.apply(this,arguments)}}(),Y=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:n});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),q=function(){var o=l()(c()().mark(function a(n){var t;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.ZP)("/v1/chatroom/chat_room_history_single",{method:"GET",data:n});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}},a)}));return function(n){return o.apply(this,arguments)}}(),ee=function(){var o=l()(c()().mark(function a(n,t){var u;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(n,"/chat_single_message_generation"),{method:"POST",data:t});case 2:return u=e.sent,e.abrupt("return",u);case 4:case"end":return e.stop()}},a)}));return function(n,t){return o.apply(this,arguments)}}()},72406:function(ce,B,s){var U=s(58533),c=s(99702),k=s(74330),l=s(85893),x=function(P){var K=P.children,W=P.elid,L=P.dataLength,Z=P.ishasMore,b=P.upSlide,G=P.isFooter,N=P.pageNumber,H=N===void 0?2:N;return(0,l.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,l.jsx)(U.Z,{dataLength:L,scrollableTarget:W,next:b,hasMore:Z,loader:(0,l.jsx)("div",{className:"flex justify-center h-[60px] items-center",children:H>1?(0,l.jsx)(k.Z,{}):(0,l.jsx)(l.Fragment,{})}),children:K}),G&&(0,l.jsx)("div",{className:"mt-[30px] flex-1 flex ",style:{alignItems:"flex-end"},children:(0,l.jsx)(c.Z,{className:"relative"})})]})};B.Z=x},44010:function(ce,B,s){var U=s(15009),c=s.n(U),k=s(19632),l=s.n(k),x=s(97857),v=s.n(x),P=s(99289),K=s.n(P),W=s(9783),L=s.n(W),Z=s(5574),b=s.n(Z),G=s(72406),N=s(32332),H=s(28508),J=s(82061),X=s(35312),F=s(78045),Y=s(26915),q=s(74330),ee=s(71230),o=s(15746),a=s(32983),n=s(28036),t=s(67294),u=s(42237),r=s(22352),e=s(85893),O=function(A){var re=A.show,ye=A.popupClose,je=A.popupSave,te=A.checkList,le=A.zIndex,ie=le===void 0?"":le,oe=A.nodetype,f=oe===void 0?"agent":oe,C=A.radio,j=(0,X.useIntl)(),M=(0,t.useRef)([]),Me=(0,t.useState)([]),_e=b()(Me,2),I=_e[0],Q=_e[1],be=(0,t.useState)(3),pe=b()(be,2),$=pe[0],de=pe[1],Pe=(0,t.useState)(!0),me=b()(Pe,2),De=me[0],Ie=me[1],Te=(0,t.useState)([]),fe=b()(Te,2),T=fe[0],z=fe[1],we=(0,t.useState)([]),he=b()(we,2),w=he[0],S=he[1],Oe=(0,t.useState)(!0),xe=b()(Oe,2),Ce=xe[0],Ne=xe[1],Ae=(0,t.useRef)(null),Le=(0,t.useState)(""),ve=b()(Le,2),Se=ve[0],Re=ve[1],g=(0,t.useRef)({page:1,page_size:999999,search_type:3,apps_name:"",tag_ids:""}),ge=function(_){return M.current.filter(function(d){return d.type==_}).length},Ee=L()(L()({},"my_".concat(f),ge("my_".concat(f))),"more_".concat(f),ge("more_".concat(f))),ne=function(){return $==3?T&&T.length>0?T:[]:w&&w.length>0?w:[]},Be=function(_){de(_.target.value),g.current.search_type=_.target.value,R(g.current,!0)},R=function(){var i=K()(c()().mark(function _(d){var p,h,E,m,y=arguments;return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=y.length>1&&y[1]!==void 0?y[1]:!1,p&&(g.current.page=1),D.next=4,(0,u.RE)(f,d);case 4:h=D.sent,(h==null?void 0:h.code)==0&&(E=h.data.list.map(function(ue){return v()(v()({},ue),{},{check:We(ue,d.search_type)})}),m=function(Fe,$e){$e(p?l()(E):[].concat(l()(Fe),l()(E)))},d.search_type==3?(m(T,z),Ie(h.data.total_pages>g.current.page)):(m(w,S),Ne(h.data.total_pages>g.current.page)));case 6:case"end":return D.stop()}},_)}));return function(d){return i.apply(this,arguments)}}(),Ue=function(_){g.current.apps_name=_.target.value,g.current.page=1,R(g.current,!0)},ke=function(_,d){var p=_==3;d.type=p?"my_".concat(f):"more_".concat(f),M.current=[d];var h=function(m,y){return m.map(function(V){return v()(v()({},V),{},{check:y(V.app_id)})})};z(function(E){return h(E,function(m){return m==d.app_id&&p})}),S(function(E){return h(E,function(m){return m==d.app_id&&!p})})},Ke=function(_,d){d.type=_==3?"my_".concat(f):"more_".concat(f);var p=M.current,h=p.find(function(m){return m.app_id==d.app_id});h?p.splice(p.findIndex(function(m){return m.app_id==d.app_id}),1):p.push(d);var E=function(y,V){return y.map(function(D){return v()(v()({},D),{},{check:D.app_id==V?!D.check:D.check})})};_==3?z(function(m){return E(m,d.app_id)}):S(function(m){return E(m,d.app_id)})},We=function(_,d){var p=M.current;return C&&p.length>1?0:p.some(function(h){return h.app_id==_.app_id})?1:0},ae=function(){ye(),M.current=[],Q([]),S([]),de(3)},Ze=function(){je({checkItem:l()(M.current)}),ae()},Ge=function(){var _=g.current.search_type==3,d=_?T:w,p=_?"my":"more",h=d.map(function(y){return v()(v()({},y),{},{type:"".concat(p,"_").concat(f)})}),E=M.current.filter(function(y){return y.type!="".concat(p,"_").concat(f)});M.current=[].concat(l()(E),l()(h));var m=d.map(function(y){return v()(v()({},y),{},{check:1})});_?z(function(){return m}):S(function(){return m})};(0,t.useEffect)(function(){re&&(g.current.search_type=3,g.current.apps_name="",te.length&&(M.current=l()(te),Q(l()(te))),R(v()(v()({},g.current),{},{search_type:3}),!0),R(v()(v()({},g.current),{},{search_type:2}),!0))},[re]),(0,t.useEffect)(function(){Q(l()(M.current))},[T,w]);var se=(0,t.useRef)(!1);(0,t.useEffect)(function(){if(M.current.length!==I.length&&se.current){var i=function(h,E){return h.map(function(m){return v()(v()({},m),{},{check:E.some(function(y){return m.app_id===y.app_id})?1:0})})};M.current=l()(I);var _=I.filter(function(p){return p.type==="my_agent"}),d=I.filter(function(p){return p.type==="more_agent"});z(function(p){return i(p,_)}),S(function(p){return i(p,d)}),se.current=!1}},[I]);var He=function(_){se.current=!0,Q(function(d){return d.filter(function(p){return _.some(function(h){return p.app_id!=h.app_id})})})};return re?(0,e.jsx)("div",{ref:Ae,style:ie?{zIndex:ie}:{zIndex:30},className:'transition  w-full h-full fixed top-[0] left-[0] bg-[rgba(0,0,0,0.5)] flex items-center justify-center z-30"',children:(0,e.jsx)("div",{className:"w-[980px] h-[646px] bg-[#fff] rounded-[6px] transition",children:(0,e.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,e.jsxs)("div",{className:"text-[16px] flex items-center p-[20px]",style:{borderBottom:"1px solid #ebebeb"},children:[(0,e.jsx)("span",{className:"flex-1 text-[14px] font-[500] text-[#213044]",children:j.formatMessage({id:"app.check_".concat(f,"_popup.title")})}),(0,e.jsx)(H.Z,{className:"text-[16px] cursor-pointer",onClick:ae})]}),(0,e.jsxs)("div",{className:"flex flex-1 overflow-x-hidden w-full min-w-0",children:[(0,e.jsxs)("div",{className:"pt-[20px] h-full flex-1 min-w-0",children:[(0,e.jsxs)("div",{className:"flex items-center pt-[0] p-[20px]",children:[(0,e.jsxs)("span",{className:"text-[#999]",children:[j.formatMessage({id:"app.check_".concat(f,"_popup.chenck_text")}),"\uFF1A"]}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[12px]",children:[(0,e.jsxs)("span",{className:"text-[#213044] text-[14px]",children:[j.formatMessage({id:"app.check_".concat(f,"_popup.select_1")}),":"," ",Ee["my_".concat(f)]]}),(0,e.jsxs)("span",{className:"text-[#213044] text-[14px]",children:[j.formatMessage({id:"app.check_".concat(f,"_popup.select_2")}),":"," ",Ee["more_".concat(f)]]})]})]}),(0,e.jsxs)("div",{className:"flex gap-x-[20px] pt-[0] p-[20px]",children:[(0,e.jsxs)(F.ZP.Group,{onChange:Be,defaultValue:"3",size:"large",children:[(0,e.jsx)(F.ZP.Button,{value:"3",children:(0,e.jsx)("span",{className:"text-[14px]",children:j.formatMessage({id:"app.check_".concat(f,"_popup.select_1")})})}),(0,e.jsx)(F.ZP.Button,{value:"2",children:(0,e.jsx)("span",{className:"text-[14px]",children:j.formatMessage({id:"app.check_".concat(f,"_popup.select_2")})})})]}),(0,e.jsx)(Y.Z,{className:"w-[320px] text-[14px] flex-1",style:{fontSize:"14px !important"},onPressEnter:Ue,size:"large",placeholder:j.formatMessage({id:"app.check_".concat(f,"_popup.search")}),onChange:function(_){return Re(_.target.value)},value:Se,prefix:(0,e.jsx)("img",{src:"/icons/search_icon.svg",className:"w-[16px] h-[16px] mr-[10px]"})}),(0,e.jsx)(r.Z,{allowClear:!0,onChange:function(_){g.current.tag_ids=_?_.join(","):"",g.current.page=1,R(g.current,!0)},showAddButton:!1,size:"large",className:"min-w-[240px] flex-1",listStyle:"horizontal"})]}),(0,e.jsxs)("div",{className:"overflow-y-auto  px-[20px]",id:"agentScroll",style:{height:"calc(100% - 100px)"},children:[T.length||w.length?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)("div",{className:"h-full w-full absolute top-0 left-0 flex justify-center items-center z-[100] bg-[rgba(255,255,255,0.5)]",children:(0,e.jsx)(q.Z,{size:"large"})}),(0,e.jsx)(G.Z,{dataLength:$==3?T.length:w.length,elid:"agentScroll",ishasMore:$==3?De:Ce,upSlide:function(){g.current.page+=1,R(g.current)},children:(0,e.jsx)("div",{className:"w-full overflow-x-hidden",children:(0,e.jsx)(ee.Z,{gutter:[15,15],children:ne()&&ne().length?ne().map(function(i,_){return(0,e.jsx)(o.Z,{span:I.length&&!C?8:6,children:(0,e.jsxs)("div",{className:"bg-[#fff] flex gap-x-[20px] p-[10px] cursor-pointer border-solid border-[1px] rounded-[4px] ".concat(i.check?C?"border-[#1b64f3]":"border-gray-100":"border-[#eee]"),onClick:function(){C?ke($,i):Ke($,i)},children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] relative flex items-center justify-center shrink-0",children:(0,e.jsx)("img",{src:(0,N.s9)("single",i.icon),alt:"",className:"w-[20px]  h-[20px]"})}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("div",{className:"text-[12px] font-[500] w-full truncate ".concat(i.check?C?"text-[#213044]":"text-gray-300":"text-[#213044]"),children:i.name}),(0,e.jsx)("div",{className:"text-[12px] w-full truncate ".concat(i.check?C?"text-[#999]":"text-gray-300":"text-[#999]"),children:i.description})]})]})},i.app_id)}):(0,e.jsx)("div",{className:"w-full h-[380px] flex justify-center items-center",children:(0,e.jsx)(a.Z,{style:{margin:"0px",fontSize:"16px"},imageStyle:{width:"60px",margin:"0 auto",marginBottom:"2px"},description:j.formatMessage({id:"app.dashboard.None"}),image:a.Z.PRESENTED_IMAGE_SIMPLE})})})})})]})]}),!C&&(T.length||w.length)&&I&&I.length?(0,e.jsxs)("div",{className:"h-full flex flex-col",style:{boxShadow:"rgba(0, 0, 0, 0.1) 0px 0px 3px 0px"},children:[(0,e.jsxs)("div",{className:"py-[10px] px-[10px] text-[14px]",children:[j.formatMessage({id:"app.check_popup.add"}),j.formatMessage({id:"app.check_".concat(f,"_popup.name")})]}),(0,e.jsx)("div",{className:"w-[260px]  overflow-y-auto flex-1 min-w-0 min-h-0",children:(0,e.jsx)("div",{className:"flex gap-[6px] p-4 pt-[6px] flex-wrap w-full",children:I.map(function(i){return(0,e.jsxs)("div",{className:"w-full cursor-pointer relative",children:[(0,e.jsx)("div",{className:"flex items-center gap-x-[5px] bg-[#FAFAFA] transition p-[10px] slider_agent_box",children:(0,e.jsxs)("div",{className:"flex gap-x-[15px] flex-1 min-w-[0]",children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] flex items-center justify-center shrink-0",children:(0,e.jsx)("img",{src:(0,N.s9)("single",i.icon),alt:"",className:"w-[18px]  h-[18px]"})}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("span",{className:"text-[#213044] text-[12px] font-[500] truncate w-full",children:i.name}),(0,e.jsx)("span",{className:"text-[#999999] text-[12px] truncate",children:i.description})]})]})}),(0,e.jsx)("div",{className:"text-[#f73131] transition text-[14px] absolute top-[6px] right-[6px]",children:(0,e.jsx)(J.Z,{})}),(0,e.jsx)("div",{className:"hover:opacity-100 opacity-0 transition absolute w-full h-full flex items-center justify-center top-0 left-0 bg-[rgba(255,255,255,0.8)]",onClick:function(){He([i])},children:(0,e.jsx)("div",{className:"text-[#1b64f3] transition text-[24px]",children:(0,e.jsx)(J.Z,{})})})]},i.app_id)})})})]}):(0,e.jsx)(e.Fragment,{})]}),(0,e.jsxs)("div",{className:"p-[20px] flex gap-x-[20px] justify-end",style:{borderTop:"1px solid #e8e8e8"},children:[C?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsx)(n.ZP,{htmlType:"submit",onClick:Ge,children:j.formatMessage({id:"app.check_popup.check"})})}),(0,e.jsx)(n.ZP,{className:"text-[14px] text-[#213044] w-[88px] h-[40px]",style:{border:"1px solid #D8D8D8"},onClick:ae,children:j.formatMessage({id:"app.check_".concat(f,"_popup.cancel")})}),(0,e.jsx)(n.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px]",htmlType:"submit",onClick:Ze,children:j.formatMessage({id:"app.check_".concat(f,"_popup.save")})})]})]})})}):(0,e.jsx)(e.Fragment,{})};B.Z=O}}]);
