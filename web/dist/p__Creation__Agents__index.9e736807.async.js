"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[178],{83510:function(Xt,He,n){n.d(He,{LK:function(){return Xe},bs:function(){return Fe},go:function(){return mt},uy:function(){return Ae}});var rt=n(15009),ee=n.n(rt),ot=n(99289),N=n.n(ot),ue=n(47520),K="/v1/apps/apps_list",dt="/v1/agent/agent_delete/",t="/v1/workflow/workflow_app_delete/",ut="/v1/vector/delete_dataset/",f="/v1/skill/delete_skill_by_app_id/",H="/v1/apps/apps_create",ct="/v1/apps/app_update/",mt=function(){var ce=N()(ee()().mark(function $(M){var W;return ee()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.ZP)("".concat(K),{method:"GET",data:M});case 2:return W=c.sent,c.abrupt("return",W);case 4:case"end":return c.stop()}},$)}));return function(M){return ce.apply(this,arguments)}}(),Xe=function(){var ce=N()(ee()().mark(function $(M){var W;return ee()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log(M),c.next=3,M.mode;case 3:if(c.t0=c.sent,c.t0!=1){c.next=8;break}c.t1=(0,ue.ZP)("".concat(dt).concat(M.app_id),{method:"DELETE"}),c.next=9;break;case 8:c.t1=M.mode==2?(0,ue.ZP)("".concat(t).concat(M.app_id),{method:"DELETE"}):M.mode==3?(0,ue.ZP)("".concat(ut).concat(M.app_id),{method:"DELETE"}):(0,ue.ZP)("".concat(f).concat(M.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return W=c.t1,c.abrupt("return",W);case 11:case"end":return c.stop()}},$)}));return function(M){return ce.apply(this,arguments)}}(),Ae=function(){var ce=N()(ee()().mark(function $(M){var W;return ee()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.ZP)("".concat(H),{method:"POST",data:M});case 2:return W=c.sent,c.abrupt("return",W);case 4:case"end":return c.stop()}},$)}));return function(M){return ce.apply(this,arguments)}}(),Fe=function(){var ce=N()(ee()().mark(function $(M){var W;return ee()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.ZP)("".concat(ct).concat(M.app_id),{method:"PUT",data:M});case 2:return W=c.sent,c.abrupt("return",W);case 4:case"end":return c.stop()}},$)}));return function(M){return ce.apply(this,arguments)}}()},6180:function(Xt,He,n){n.r(He),n.d(He,{default:function(){return ya}});var rt=n(19632),ee=n.n(rt),ot=n(15009),N=n.n(ot),ue=n(99289),K=n.n(ue),dt=n(97857),t=n.n(dt),ut=n(5574),f=n.n(ut),H=n(11551),ct=n(83510),mt=n(47520),Xe=n(29432),Ae=n(10759),Fe=n(32332),ce=n(2068),$=n(89035),M=n(15360),W=n(82826),Re=n(69243),c=n(35312),_=n(40741),I=n(45360),me=n(28036),Yt=n(50136),pt=n(25409),Pt=n(74330),Jt=n(96486),Qt=n.n(Jt),g=n(67294),pe=n(92939),Ct=n(80459),qt=n(85750),ea=n(5608),ta=n(58299),$e=n(51042),ft=n(82061),Ze=n(26915),Ye=n(72269),gt=n(34041),At=n(66309),X=n(78045),Dt=n(44010),e=n(85893),aa=Ze.Z.TextArea,sa=function(o){var ie,D,B,y,le,We=o.loading,fe=o.FirstValue,a=o.Detaillist,A=o.setDetaillist,Me=o.repository,S=o.setRepository,F=o.Operationbentate,we=o.Ffromref,re=o.setFourthly_config_id,ke=o.Fourthly_config_id,ge=o.Fourthly_select_list,he=o.Newproperties,Se=o.setNewproperties,ve=o.pageKeyfun,v=o.firstjudgingcondition,oe=o.setAgentmunudisabled,_e=o.agentmenudisabled,d=(0,c.useIntl)(),De=(0,g.useState)([]),Y=f()(De,2),Z=Y[0],J=Y[1],L=(0,g.useState)(!1),O=f()(L,2),xe=O[0],Ee=O[1],te=(0,g.useState)([]),de=f()(te,2),be=de[0],je=de[1],Je=(0,g.useState)([]),E=f()(Je,2),b=E[0],w=E[1],R=(0,g.useState)(!1),V=f()(R,2),P=V[0],U=V[1],Qe=(0,g.useState)(!1),qe=f()(Qe,2),vt=qe[0],Pe=qe[1],Ie=(0,g.useState)({agent_id:0,data:{is_public:1,enable_api:0,obligations:null,input_variables:{},dataset_ids:[],attrs_are_visible:1}}),Ce=f()(Ie,2),Q=Ce[0],Ne=Ce[1];(0,g.useEffect)(function(){var i,s;if(jt(),a!=null&&(i=a.agent)!==null&&i!==void 0&&i.selected_skills&&je(a.agent.selected_skills),a!=null&&(s=a.agent)!==null&&s!==void 0&&s.selected_workflows){var x;w(a==null||(x=a.agent)===null||x===void 0?void 0:x.selected_workflows)}},[a,a==null?void 0:a.agent]);var Tt=function(s){re(s)},Bt=function(s){Ne(t()(t()({},Q),{},{data:t()(t()({},Q.data),{},{obligations:s.target.value})})),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{obligations:s.target.value})}))},Lt=function(s,x){var T=new Set;return s.some(function(z){var se=z[x];return T.has(se)?T.add(se):T.add(se)&&!1})},et=function(s){A(t()(t()({},a),{},{app:t()(t()({},a.app),{},{is_public:s?1:0})})),Ne(t()(t()({},Q),{},{data:t()(t()({},Q.data),{},{is_public:s?1:0})}))},tt=function(s){A(t()(t()({},a),{},{app:t()(t()({},a.app),{},{enable_api:s?1:0})})),Ne(t()(t()({},Q),{},{data:t()(t()({},Q.data),{},{enable_api:s?1:0})}))},xt=function(s){A(t()(t()({},a),{},{app:t()(t()({},a.app),{},{attrs_are_visible:s?1:0})})),Ne(t()(t()({},Q),{},{data:t()(t()({},Q.data),{},{attrs_are_visible:s?1:0})}))},Vt=function(s){A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{allow_upload_file:s?1:0})}))},bt=function(s){A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{mcp:s?1:0})}))},ye=function(s){Ne(t()(t()({},Q),{},{data:t()(t()({},Q.data),{},{dataset_ids:s})})),S(s)},jt=function(){var i=K()(N()().mark(function s(){var x;return N()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,H.zl)();case 2:x=z.sent,J(x.data.data.map(function(se){return{value:se.dataset_id,label:se.name}}));case 4:case"end":return z.stop()}},s)}));return function(){return i.apply(this,arguments)}}(),Ot=function(s){je(s),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:s})}))},yt=function(s){w(s),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:s})}))},ae=function(){var i=K()(N()().mark(function s(){return N()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:v()||(ve("2"),oe(t()(t()({},_e),{},{first:!1,second:!1})));case 1:case"end":return T.stop()}},s)}));return function(){return i.apply(this,arguments)}}(),Te=function(s){A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{default_output_format:s.target.value})}))},wt=function(s){A(t()(t()({},a),{},{agent:t()(t()({},a==null?void 0:a.agent),{},{input_variables:s.free})}))},Ue=(0,ta.m)(),at=Ue.options,St=Ue.defaultValue,_t=function(s){je(s.checkItem),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:s.checkItem})})),U(!1)},st=function(s){w(s.checkItem),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:s.checkItem})})),Pe(!1)},Nt=function(){U(!1)},Ft=function(){Pe(!1)},Zt=function(s){var x=be.filter(function(T){return T.app_id!==s.app_id});je(x),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_skills:x})}))},nt=function(s){var x=b.filter(function(T){return T.app_id!==s.app_id});w(x),A(t()(t()({},a),{},{agent:t()(t()({},a.agent),{},{selected_workflows:x})}))};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:d.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:we,children:[(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:d.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[a&&a.app&&a.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:F==="true"?d.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:d.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-[15px] flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:a&&a.app&&a.app.description})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(pe.Z,{className:"font-medium",name:d.formatMessage({id:"agent.teamvisibility"}),title:d.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(Ye.Z,{size:"small",onChange:et,checked:!!(a&&((ie=a.app)===null||ie===void 0?void 0:ie.is_public)===1)})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(pe.Z,{className:"font-medium",name:d.formatMessage({id:"agent.attrVisible"}),title:d.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(Ye.Z,{size:"small",onChange:xt,checked:a&&((D=a.app)===null||D===void 0?void 0:D.attrs_are_visible)===1})]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:d.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(Ye.Z,{size:"small",onChange:tt,checked:a&&((B=a.app)===null||B===void 0?void 0:B.enable_api)===1,disabled:(a==null||(y=a.app)===null||y===void 0?void 0:y.publish_status)!==1})]})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:[(0,e.jsx)("span",{className:"text-[#E80000]",children:"* "}),d.formatMessage({id:"agent.LLMmodel"})]}),(0,e.jsx)(gt.Z,{placeholder:d.formatMessage({id:"agent.pleaseselect"}),value:ke==0?d.formatMessage({id:"agent.pleaseselect"}):ke,variant:"filled",onChange:Tt,options:at,optionRender:function(s){var x;return(0,e.jsxs)("div",{children:[s.label," ",(s==null||(x=s.data)===null||x===void 0?void 0:x.support_image)==1&&(0,e.jsx)(At.Z,{color:"blue",className:"text-xs",children:d.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})},labelRender:function(s){var x;return(0,e.jsxs)("div",{children:[s==null?void 0:s.label," ",((x=(0,qt.ti)(s==null?void 0:s.value,{options:at}))===null||x===void 0?void 0:x.support_image)==1&&(0,e.jsx)(At.Z,{color:"blue",className:"text-xs",children:d.formatMessage({id:"workflow.tag.imageUnderstanding",defaultMessage:"Image Understanding"})})]})}})]})}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(pe.Z,{className:"font-medium",required:!0,name:d.formatMessage({id:"agent.functiondescription"}),title:d.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(aa,{onChange:Bt,value:a&&a.agent&&a.agent.obligations,placeholder:"Agent".concat(d.formatMessage({id:"agent.functiondescription"})),autoSize:{minRows:8,maxRows:10}})]})}),!xe&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(ea.Z,{title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(pe.Z,{className:"font-medium",required:!0,name:d.formatMessage({id:"agent.inputvariable"}),title:d.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((a==null||(le=a.agent)===null||le===void 0||(le=le.input_variables)===null||le===void 0?void 0:le.properties)||{}),onChange:wt})}),(0,e.jsx)(_.Z.List,{name:"users",children:function(s,x){var T=x.add,z=x.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(pe.Z,{className:"font-medium",name:d.formatMessage({id:"agent.associatedknowledgebase"}),title:d.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(gt.Z,{size:"large",mode:"multiple",showSearch:!0,style:{width:"100%",fontSize:"12px"},placeholder:d.formatMessage({id:"agent.pleaseselect"}),filterOption:function(ze,Be){var Le;return((Le=Be==null?void 0:Be.label)!==null&&Le!==void 0?Le:"").toLowerCase().includes(ze.toLowerCase())},value:Me,onChange:ye,options:Z})]}),(0,e.jsx)(_.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",d.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(X.ZP.Group,{value:a&&a.agent.default_output_format,onChange:function(ze){Te(ze)},children:[(0,e.jsx)(X.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(X.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(X.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})]})})]})}}),(0,e.jsxs)(_.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-base mb-[15px]",children:d.formatMessage({id:"agent.mcp.resources"})}),(0,e.jsxs)("div",{className:"pl-4 ",children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(pe.Z,{className:"font-medium",name:d.formatMessage({id:"agent.selectSkills"}),title:d.formatMessage({id:"agent.explain.selectSkills"})})}),(0,e.jsx)(me.ZP,{type:"link",icon:(0,e.jsx)($e.Z,{}),onClick:function(){return U(!0)},className:"text-xs",children:d.formatMessage({id:"agent.addSkill"})})]}),be.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:be.map(function(i){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(Ct.Z,{rounded:"6px",data:i,bg:i.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:i.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:i.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(x){x.stopPropagation(),Zt(i)},children:(0,e.jsx)(ft.Z,{})})]},i.app_id)})}):(0,e.jsx)("div",{onClick:function(){return U(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)($e.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:d.formatMessage({id:"agent.addSkill"})})]})}),(0,e.jsx)(Dt.Z,{show:P,popupClose:Nt,popupSave:_t,checkList:be,radio:!1,nodetype:"skill",zIndex:30})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(pe.Z,{className:"font-medium",name:d.formatMessage({id:"agent.selectWorkflows"}),title:d.formatMessage({id:"agent.explain.selectWorkflows"})})}),(0,e.jsx)(me.ZP,{type:"link",icon:(0,e.jsx)($e.Z,{}),onClick:function(){return Pe(!0)},className:"text-xs",children:d.formatMessage({id:"agent.addWorkflow"})})]}),b.length>0?(0,e.jsx)("div",{className:"flex flex-col gap-4 mb-4",children:b.map(function(i){return(0,e.jsxs)("div",{className:"group relative flex items-center cursor-pointer w-full p-2 bg-white rounded-lg shadow-sm transition-shadow",children:[(0,e.jsx)(Ct.Z,{rounded:"6px",data:i,bg:i.icon_background}),(0,e.jsxs)("div",{className:"flex flex-col ml-2 truncate",children:[(0,e.jsx)("span",{className:"text-sm font-medium text-[#333333]",children:i.name}),(0,e.jsx)("span",{className:"text-xs text-[#666666] truncate",children:i.description})]}),(0,e.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer hover:text-red-500",onClick:function(x){x.stopPropagation(),nt(i)},children:(0,e.jsx)(ft.Z,{})})]},i.app_id)})}):(0,e.jsx)("div",{onClick:function(){return Pe(!0)},className:"w-full h-[120px] flex items-center justify-center border border-dashed border-[#e8e8e8] rounded-lg bg-[#fafafa] cursor-pointer hover:border-[#1b64f3] transition-colors",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)($e.Z,{className:"text-[#999999] text-lg"}),(0,e.jsx)("span",{className:"text-[#999999] text-sm",children:d.formatMessage({id:"agent.addWorkflow"})})]})}),(0,e.jsx)(Dt.Z,{show:vt,popupClose:Ft,popupSave:st,checkList:b,radio:!1,nodetype:"workflow",zIndex:30})]})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(me.ZP,{type:"primary",className:"mr-[20px]",onClick:function(){ae()},children:d.formatMessage({id:"agent.btn.nextstep"})}),(0,e.jsx)(me.ZP,{onClick:function(){history.back()},children:d.formatMessage({id:"agent.btn.back"})})]}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},na=sa,ia=n(13769),Et=n.n(ia),la=n(49677),ra=n.n(la),oa=n(24216),da=n(85877),It=n(39944),ua=n(71471),ca=["key","name"],Ca=ua.Z.Title,Aa=Ze.Z.TextArea,Da=Ze.Z.Search,ma=function(o){var ie=o.handleBack,D=o.Detaillist,B=o.setDetaillist,y=o.Fourthly_select_list,le=o.setFourthly_config_id,We=o.Fourthly_config_id,fe=o.Fourthlyref,a=o.Fourthly_abilities_list,A=o.Operationbentate,Me=o.callwordlist,S=o.newagentid,F=(0,c.useIntl)(),we=(0,g.useState)(0),re=f()(we,2),ke=re[0],ge=re[1],he=(0,g.useState)(""),Se=f()(he,2),ve=Se[0],v=Se[1],oe=(0,g.useState)(""),_e=f()(oe,2),d=_e[0],De=_e[1],Y=(0,g.useState)(!1),Z=f()(Y,2),J=Z[0],L=Z[1],O=function(b){var w={user:{value:de(b)}};v(new It.z(w))},xe=function(b){var w={user:{value:b.target.value}};v(new It.z(w))},Ee=function(b){ge(b)},te=function(b){var w=b.users.filter(function(P,U){return P.type=="number"&&!Number(P.value)&&!!P.value});if(!ve.user)I.ZP.warning(F.formatMessage({id:"agent.message.warning.callword"}));else if(w.length>0)I.ZP.warning(F.formatMessage({id:"agent.message.warning.datatype"}));else{L(!0);var R=new Ae.Kr("input","","");b.users.forEach(function(P){var U=new Ae._w(P.name,P.type?P.type:"string",P.type=="string"?P.value:Number(P.value),P.content,P.status);R.addProperty(P.name,U)});var V={agent_id:S||D.agent.agent_id,ability_id:ke,input_dict:R,prompt:ve};be(V)}},de=function E(b){return b.map(function(w){return w.type==="mention"?w.id:w.children?E(w.children):w.text}).join("")},be=function(b){(0,H.LH)(b).then(function(w){I.ZP.success(F.formatMessage({id:"agent.message.success.runpublish"})),De(w.data.outputs.text),L(!1)}).catch(function(w){L(!1)})},je=function(){var E=K()(N()().mark(function b(){var w;return N()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,H.Dh)(S||D.agent.agent_id);case 2:w=V.sent,w.code==0?I.ZP.success(F.formatMessage({id:"agent.message.success.publish"})):I.ZP.error(F.formatMessage({id:"agent.message.fail.publish"}));case 4:case"end":return V.stop()}},b)}));return function(){return E.apply(this,arguments)}}(),Je=function(){var E=K()(N()().mark(function b(){return N()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:c.history.push("/Agents?app_id=".concat(D.app.app_id,"&type=false")),location.reload();case 2:case"end":return R.stop()}},b)}));return function(){return E.apply(this,arguments)}}();return(0,g.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:F.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:F.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(gt.Z,{placeholder:F.formatMessage({id:"agent.pleaseselect"}),defaultValue:F.formatMessage({id:"agent.allability"}),style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:Ee,options:a})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",onFinish:te,style:{width:"100%"},autoComplete:"off",form:fe,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:F.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(_.Z.List,{name:"users",children:function(b,w){return ra()(w),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"mr-5 ml-2.5",children:F.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"",children:F.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:b.map(function(R){var V=R.key,P=R.name,U=Et()(R,ca);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(_.Z.Item,t()(t()({},U),{},{name:[P,"content"],children:(0,e.jsx)(Ze.Z,{className:"mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(_.Z.Item,t()(t()({},U),{},{name:[P,"value"],rules:[{required:!!(fe.getFieldsValue()&&fe.getFieldsValue().users[V].status==!0),message:F.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(Ze.Z,{placeholder:fe.getFieldsValue()&&fe.getFieldsValue().users[V].status==!0?F.formatMessage({id:"agent.variable.required.value"}):F.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(_.Z.Item,{rules:[{required:!0,message:F.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:F.formatMessage({id:"agent.runpreview"})}),(0,e.jsx)(Pt.Z,{spinning:J,children:(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:d?(0,e.jsx)(oa.Z,{language:"python3",value:d&&JSON.stringify(d)}):null}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(da.Z,{onChange:function(b){O(b)},options:Me})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(me.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})})]})]})}),(0,e.jsx)("div",{className:"w-28",children:(D==null?void 0:D.agent.publish_status)===1&&(D==null?void 0:D.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(me.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:Je,children:F.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(me.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:A!="false",onClick:je,children:F.formatMessage({id:"agent.publish"})})})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})},pa=ma,fa=["key","name"],ga=Ze.Z.TextArea,ha=function(o){var ie=o.SecondValue,D=o.handleBack,B=o.Detaillist,y=o.setDetaillist,le=o.Sformref,We=o.Operationbentate,fe=o.pageKeyfun,a=o.secondjudgingcondition,A=o.SkillMenuClick,Me=o.agentupdata,S=(0,c.useIntl)(),F=I.ZP.useMessage(),we=f()(F,2),re=we[0],ke=we[1],ge=(0,g.useRef)(null),he=(0,g.useState)({auto_match_ability:0,agent_abilities:[{agent_ability_id:0,name:"string",content:"string",status:0}]}),Se=f()(he,2),ve=Se[0],v=Se[1];(0,g.useEffect)(function(){});var oe=function(Z){if(Z.users.length==1&&(!Z.users[0].content&&Z.users[0].name||Z.users[0].content&&!Z.users[0].name))return I.ZP.warning(S.formatMessage({id:"agent.message.warning.selectknowledgebase"}));var J=Z.users.map(function(O){return t()(t()({},O),{},{status:O.status?1:2,agent_ability_id:O.agent_ability_id?O.agent_ability_id:0})}),L={agent_id:B.agent.agent_id,data:{auto_match_ability:B.agent.auto_match_ability,agent_abilities:Z.users.length==1&&!Z.users[0].content&&!Z.users[0].name?[]:J}};We=="false"&&_e(),ie(t()({},ve))},_e=function(){var Y=K()(N()().mark(function Z(){return N()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:a()||Me();case 1:case"end":return L.stop()}},Z)}));return function(){return Y.apply(this,arguments)}}(),d=function(Z){y(t()(t()({},B),{},{agent:t()(t()({},B.agent),{},{auto_match_ability:Z?1:0})}))},De=function(){setTimeout(function(){ge.current&&ge.current.scrollTo({top:ge.current.scrollHeight,behavior:"smooth"})},100)};return(0,e.jsxs)("div",{style:{height:"100%"},className:"w-full flex-1 sticky top-0",children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:S.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(pe.Z,{name:S.formatMessage({id:"agent.automatch"}),title:S.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(Ye.Z,{size:"small",checked:!!(B&&B.agent.auto_match_ability==1),onChange:d})]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(_.Z,{name:"dynamic_form_nest_item",onFinish:oe,style:{width:"100%"},autoComplete:"off",form:le,children:[(0,e.jsx)(_.Z.List,{name:"users",children:function(Z,J){var L=J.add,O=J.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:[(0,e.jsx)("div",{className:" text-[#555555] text-xs font-medium",children:S.formatMessage({id:"agent.capability"})}),(0,e.jsx)("div",{children:(0,e.jsx)(me.ZP,{type:"link",onClick:function(){L(),De()},block:!0,icon:(0,e.jsx)($e.Z,{}),children:S.formatMessage({id:"agent.add"})})})]}),(0,e.jsx)("div",{style:{height:"calc(100vh - 206px)",overflowY:"auto"},className:"overflow-y-auto",ref:ge,children:Z.map(function(xe){var Ee=xe.key,te=xe.name,de=Et()(xe,fa);return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(_.Z.Item,{className:"mb-0",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:S.formatMessage({id:"agent.capabilityname"})}),(0,e.jsxs)("div",{children:[" ",(0,e.jsx)(ft.Z,{onClick:function(){return O(te)}})]})]})}),(0,e.jsx)(_.Z.Item,t()(t()({className:"mb-[20px]"},de),{},{name:[te,"name"],rules:[{required:Z.length!==1,message:S.formatMessage({id:"agent.capabilityname"})}],children:(0,e.jsx)(Ze.Z,{placeholder:S.formatMessage({id:"agent.capabilityname"}),maxLength:50,className:"w-full"})})),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(pe.Z,{className:"text-[#555555] text-xs font-medium",name:S.formatMessage({id:"agent.capabilitydescription"}),title:S.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(_.Z.Item,t()(t()({className:"w-full mb-[20px]"},de),{},{name:[te,"content"],rules:[{required:Z.length!==1,message:S.formatMessage({id:"agent.capabilitydescription"})}],children:(0,e.jsx)(ga,{placeholder:S.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},className:"w-full"})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:S.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(_.Z.Item,t()(t()({className:"mb-[20px]"},de),{},{name:[te,"status"],children:(0,e.jsxs)(X.ZP.Group,{optionType:"button",buttonStyle:"solid",defaultValue:!0,children:[(0,e.jsx)(X.ZP,{value:!0,children:S.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(X.ZP,{value:!1,children:S.formatMessage({id:"agent.capabilitystatus.disable"})})]})})),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:S.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(_.Z.Item,{className:"mb-0",name:[te,"output_format"],children:(0,e.jsxs)(X.ZP.Group,{defaultValue:0,children:[(0,e.jsx)(X.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:S.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(X.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(X.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(X.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]})})]})})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},va=ha,xa=n(68709),ba=n(27842),ja=function(){var o,ie,D,B,y=(0,c.useIntl)(),le=(0,g.useRef)(null),We=_.Z.useForm(),fe=f()(We,1),a=fe[0],A=_.Z.useForm(),Me=f()(A,1),S=Me[0],F=_.Z.useForm(),we=f()(F,1),re=we[0],ke=_.Z.useForm(),ge=f()(ke,1),he=ge[0],Se=(0,g.useState)(null),ve=f()(Se,2),v=ve[0],oe=ve[1],_e=(0,g.useState)(0),d=f()(_e,2),De=d[0],Y=d[1],Z=(0,g.useState)(null),J=f()(Z,2),L=J[0],O=J[1],xe=(0,g.useState)(null),Ee=f()(xe,2),te=Ee[0],de=Ee[1],be=(0,g.useState)(null),je=f()(be,2),Je=je[0],E=je[1],b=(0,g.useState)(null),w=f()(b,2),R=w[0],V=w[1],P=(0,g.useState)(null),U=f()(P,2),Qe=U[0],qe=U[1],vt=(0,g.useState)(null),Pe=f()(vt,2),Ie=Pe[0],Ce=Pe[1],Q=(0,g.useState)(null),Ne=f()(Q,2),Tt=Ne[0],Bt=Ne[1],Lt=(0,g.useState)(null),et=f()(Lt,2),tt=et[0],xt=et[1],Vt=(0,g.useState)(null),bt=f()(Vt,2),ye=bt[0],jt=bt[1],Ot=(0,g.useState)("1"),yt=f()(Ot,2),ae=yt[0],Te=yt[1],wt=(0,g.useState)(null),Ue=f()(wt,2),at=Ue[0],St=Ue[1],_t=(0,g.useState)(null),st=f()(_t,2),Nt=st[0],Ft=st[1],Zt=(0,g.useState)(null),nt=f()(Zt,2),i=nt[0],s=nt[1],x=(0,g.useState)(null),T=f()(x,2),z=T[0],se=T[1],ze=(0,g.useState)(!0),Be=f()(ze,2),Le=Be[0],Ge=Be[1],wa=(0,g.useState)({first:!1,second:!1,fourthly:!1}),Rt=f()(wa,2),Ke=Rt[0],it=Rt[1],Sa=[{key:"1",icon:(0,e.jsx)(ce.Z,{}),label:y.formatMessage({id:"agent.menu.basicsetup"}),disabled:Ke.first,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",lineHeight:"22px",color:ae=="1"?"#1B64F3":"#213044"}},{key:"2",disabled:Ke.second,icon:(0,e.jsx)($.Z,{}),label:y.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:ae=="2"?"#1B64F3":"#213044"}},{key:"5",disabled:Ke.fourthly,icon:(0,e.jsx)(M.Z,{}),label:y.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:ae=="5"?"#1B64F3":"#213044"}}];(0,g.useEffect)(function(){var k=new URLSearchParams(window.location.search);k.get("app_id")||(it(t()(t()({},Ke),{},{first:!1,second:!0,fourthly:!0})),Ge(!1)),Mt()},[]);var Mt=function(){var k=K()(N()().mark(function m(r){var l,h,p,u,C,G,Ve,ne;return N()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(h=new URLSearchParams(window.location.search),h.get("from")&&Ft(h.get("from")),p=null,!(h.get("app_id")||r)){q.next=10;break}return q.next=6,(0,H.ek)(r||h.get("app_id"),h.get("type"));case 6:p=q.sent,se(p.data.app.app_id),q.next=13;break;case 10:return q.next=12,(0,Fe.cI)();case 12:p=q.sent;case 13:u=p.data,C=(l=p.data)===null||l===void 0||(l=l.agent_dataset_relation_list)===null||l===void 0?void 0:l.map(function(j){return j.dataset_id}),O(C),p.data.callable_items&&(p.data.agent.selected_skills=[],p.data.agent.selected_workflows=[],p.data.callable_items.forEach(function(j){j.item_type==1?p.data.agent.selected_skills.push(t()(t()({},j),{},{mode:4})):p.data.agent.selected_workflows.push(t()(t()({},j),{},{mode:2}))})),oe(p.data),jt(p.data.agent.publish_status===0&&p.data.is_creator===1?"false":"true"),p.data.agent.publish_status===1&&I.ZP.warning(y.formatMessage({id:"agent.message.listwarning"}),5),a.setFieldsValue($t(u.agent.input_variables)),G=p.data.agent_abilities_list.map(function(j){return j.status==1?t()(t()({},j),{},{status:!0}):t()(t()({},j),{},{status:!1})}),re.setFieldsValue({users:G[0]?G:[{agent_ability_id:0,name:"",content:"",status:!0,output_format:0}]}),E(kt(u.agent_abilities_list)),V(kt(u.agent_abilities_list)),Ve=u.agent_abilities_list.filter(function(j){return j.output_format!==0}),S.setFieldsValue({users:Ve.map(function(j){return{agent_ability_id:j.agent_ability_id,output_format:j.output_format}})}),he.setFieldsValue($t(u.agent.input_variables)),qe(u.m_configurations_list.map(function(j){return{value:j.m_config_id?j.m_config_id:j.model_config_id,label:j.m_name?j.m_name:j.model_name}})),u.agent.m_config_id||u.agent.model_config_id?Ce(u.agent.m_config_id?u.agent.m_config_id:u.agent.model_config_id):Ce(u.m_configurations_list[0].model_config_id),ne=u.agent_abilities_list.filter(function(j,Oe){return j.status===1}),xt(kt(ne).concat([{value:0,label:y.formatMessage({id:"agent.allability"})}])),Ge(!1);case 33:case"end":return q.stop()}},m)}));return function(r){return k.apply(this,arguments)}}(),$t=function(m){var r={users:m&&m.properties?Object.values(m.properties).map(function(l){return t()({name:l.name,type:l.type,content:l.display_name,status:l.required},l)}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return r},kt=function(m){return m.map(function(r){return{value:r.agent_ability_id,label:r.name}})},_a=function(m){Ht(m,1),he.setFieldsValue(a.getFieldsValue())},Na=function(){Mt()},Wt=function(m){Y(m)},Fa=function(){c.history.back()},Ut=function(){if(!v.agent.input_variables)return I.ZP.warning(y.formatMessage({id:"agent.message.warning.variable"})),!0;if(Qt().isEmpty(v.agent.input_variables.properties))return I.ZP.warning(y.formatMessage({id:"agent.message.warning.variable"})),!0;if(Ie)if(v.agent.obligations){if(ka(a.getFieldsValue().users,"name"))return I.ZP.warning(y.formatMessage({id:"agent.message.warning.repetition"})),!0}else return I.ZP.warning(y.formatMessage({id:"agent.message.warning.functiondescribe"})),!0;else return I.ZP.warning(y.formatMessage({id:"agent.message.warning.LLM"})),!0;return!1},zt=function(){var m=re.getFieldsValue().users.filter(function(l){return!!l}),r=m.filter(function(l){return!l.name||!l.content});return r.length!==0&&!(r.length==1&&r[0].name==""&&r[0].content=="")?(I.ZP.warning(y.formatMessage({id:"agent.message.warning.integritycapacity"})),!0):!1},Gt=function(m){if((m==null?void 0:m.key)=="4"){var r=a.getFieldsValue().users.map(function(l){return{value:"<<".concat(Xe.qX,".inputs.").concat(l.name,">>"),label:l.name}});St(r)}Te(m.key)},Kt=function(){Ge(!0);var m=0;return new Promise(function(r){var l=function(p){return(0,H.ek)(p,!1).then(function(){var u=K()(N()().mark(function C(G){return N()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return m=G.data.agent.agent_id,ne.next=3,Za(m);case 3:return z||c.history.replace("/Agents?app_id=".concat(p,"&type=false")),Ma(m).then(function(lt){I.ZP.success(y.formatMessage({id:"skill.conserve.success"})),setTimeout(function(){if(Mt(p),!z){var q=t()(t()({},(0,Fe.Go)("GET")),{},{app_id:p});(0,Fe.Go)("SET",q)}},1e3),s(m)}),ne.abrupt("return",G);case 6:case"end":return ne.stop()}},C)}));return function(C){return u.apply(this,arguments)}}()).catch(function(){return""})};z?l(z).then(function(h){return r(h)}).catch(function(h){console.error("Error during agent update:",h),r("")}):(0,ct.uy)((0,Fe.Go)("GET")).then(function(h){se(h.data.app_id),l(h.data.app_id).then(function(p){return r(p)}).catch(function(p){console.error("Error during agent creation:",p),r("")})}).catch(function(h){console.error("Error creating app:",h),Ge(!1),r("")})})},Za=function(m,r){return new Promise(function(l,h){a.validateFields().then(function(){var p=K()(N()().mark(function u(C){var G,Ve,ne,lt;return N()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(Ve=[].concat(ee()(v.agent.selected_skills||[]),ee()(v.agent.selected_workflows||[])).map(function(Oe){return{app_id:Oe.app_id,item_type:Oe.mode==4?1:2}}),ne={agent_id:m,data:{is_public:v.app.is_public,enable_api:v.app.enable_api,attrs_are_visible:v.app.attrs_are_visible,obligations:v.agent.obligations,input_variables:v.agent.input_variables?v.agent.input_variables:Pa(a.getFieldsValue()),dataset_ids:L,m_config_id:Ie,allow_upload_file:v.agent.allow_upload_file,default_output_format:v.agent.default_output_format,callable_list:Ve}},ye!="false"){j.next=5;break}return j.next=5,Ht(ne,1);case 5:he.setFieldsValue(a.getFieldsValue()),lt=((G=a.getFieldsValue())===null||G===void 0||(G=G.users)===null||G===void 0?void 0:G.map(function(Oe){return{value:"<<".concat(Xe.qX,".inputs.").concat(Oe.name,">>"),label:Oe.name}}))||[],St(lt),r&&Te(r.key),l();case 10:case"end":return j.stop()}},u)}));return function(u){return p.apply(this,arguments)}}()).catch(function(p){h(p)})})},Ma=function(m){return new Promise(function(r,l){var h=re.getFieldsValue().users.filter(function(C){return!!C}),p=h.map(function(C){return t()(t()({},C),{},{status:C.status==!1?2:1,agent_ability_id:C.agent_ability_id?C.agent_ability_id:0,output_format:C.output_format?C.output_format:0})}),u={agent_id:m,data:{auto_match_ability:v.agent.auto_match_ability,agent_abilities:p}};ye=="false"?p.length==1&&p[0].name==""&&p[0].content==""?(it({first:!1,second:!1,fourthly:!1}),r()):(0,H.Iw)(u).then(function(C){C.code==0?(it({first:!1,second:!1,fourthly:!1}),r()):l(new Error("API call failed with code: ".concat(C.code)))}).catch(function(C){l(C)}):r()})},Ht=function(){var k=K()(N()().mark(function m(r,l){var h;return N()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(ye!=="false"){u.next=19;break}if(l!==1){u.next=7;break}return u.next=4,(0,H.XB)(r);case 4:u.t0=u.sent,u.next=17;break;case 7:if(l!==2){u.next=13;break}return u.next=10,(0,H.Iw)(r);case 10:u.t1=u.sent,u.next=16;break;case 13:return u.next=15,(0,H.Ce)(r);case 15:u.t1=u.sent;case 16:u.t0=u.t1;case 17:h=u.t0,h&&h.code===0&&Ge(!1);case 19:return u.abrupt("return",!0);case 20:case"end":return u.stop()}},m)}));return function(r,l){return k.apply(this,arguments)}}(),ka=function(m,r){var l=new Set;return m.some(function(h){var p=h[r];return l.has(p)?l.add(p):l.add(p)&&!1})},Pa=function(m){var r=new Ae.Kr("input","","");return m.users.forEach(function(l){var h=new Ae._w(l.name,l.type?l.type:"string",l.value?l.value:"",l.content,l.status);r.addProperty(l.name,h)}),r};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(me.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:Fa,children:[(0,e.jsx)(W.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:Nt=="chat_room"?y.formatMessage({id:"agent.back_meeting"}):y.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Yt.Z,{selectedKeys:[ae],onClick:Gt,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[ae],mode:"inline",items:Sa}),v&&((o=v.app)===null||o===void 0?void 0:o.enable_api)===1&&((ie=v.app)===null||ie===void 0?void 0:ie.publish_status)===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:K()(N()().mark(function k(){var m,r;return N()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(m=new URLSearchParams(window.location.search),r=null,!m.get("app_id")){h.next=6;break}return h.next=5,(0,H.ek)(m.get("app_id"),m.get("type"));case 5:r=h.sent;case 6:r!=null&&r.data.app.enable_api===1&&r.data.app.publish_status===1?window.open(mt._n+v.app.api_url):I.ZP.warning(y.formatMessage({id:"agent.save.and.click"}),5);case 7:case"end":return h.stop()}},k)})),children:(0,e.jsxs)("div",{className:"mr-[20px] text-base font-medium text-[#213044] -mt-1",children:[(0,e.jsx)(Re.Z,{className:"mr-3"}),y.formatMessage({id:"agent.visit"})," API"]})}):null]})]}),(0,e.jsx)("div",{className:"flex-1 relative w-[calc(100%-300px)]",children:(0,e.jsxs)(pt.Z,{style:{height:"100%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)"},children:[(0,e.jsx)(pt.Z.Panel,{defaultSize:"50%",min:"40%",max:"70%",children:(0,e.jsx)(Pt.Z,{spinning:Le,size:"large",className:"mt-[112px] mr-4",children:(0,e.jsx)("div",{className:"flex flex-col",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center  mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center w-full ",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[(D=(0,Fe.Go)("GET"))!==null&&D!==void 0&&D.app_id?y.formatMessage({id:"agent.compile"}):y.formatMessage({id:"agent.created"})," ",y.formatMessage({id:"agent"})]}),(v==null||(B=v.app)===null||B===void 0?void 0:B.publish_status)===1?(0,e.jsx)("div",{className:"bg-[#1B64F3] px-[7px] text-[#fff] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:y.formatMessage({id:"agent.havepublished"})}):(0,e.jsx)("div",{className:" bg-[#EEE] px-[7px]  text-[#999] rounded font-normal text-xs flex items-center justify-center h-[18px]",children:y.formatMessage({id:"agent.unpublish"})})]})]})}),(0,e.jsx)("div",{style:{display:ae==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:!Le&&(0,e.jsx)(na,{FirstValue:_a,Ffromref:a,Detaillist:v,setDetaillist:oe,repository:L,setRepository:O,Newproperties:te,setNewproperties:de,Operationbentate:ye,Fourthly_config_id:Ie,setFourthly_config_id:Ce,Fourthly_select_list:Qe,pageKeyfun:Te,firstjudgingcondition:Ut,agentmenudisabled:Ke,setAgentmunudisabled:it})}),(0,e.jsx)("div",{style:{display:ae==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center",position:"sticky",top:"-150px"},children:(0,e.jsx)(va,{SecondValue:Na,Detaillist:v,setDetaillist:oe,Sformref:re,Operationbentate:ye,handleBack:Wt,pageKeyfun:Te,SkillMenuClick:Gt,secondjudgingcondition:zt,agentupdata:Kt})}),(0,e.jsx)("div",{style:{display:ae==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(pa,{handleBack:Wt,Detaillist:v,setDetaillist:oe,Fourthly_select_list:Qe,Fourthly_config_id:Ie,setFourthly_config_id:Ce,Fourthlyref:he,Fourthly_abilities_list:tt,Operationbentate:ye,callwordlist:at,newagentid:i})})]})})})}),(0,e.jsx)(pt.Z.Panel,{children:(0,e.jsx)("div",{children:(0,e.jsx)(xa.Z,{saveInfo:{firstjudgingcondition:Ut,secondjudgingcondition:zt,agentupdata:Kt},operationbentate:ye,data:{abilitiesList:tt,detailList:v}})})}),ae=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(ba.ZP,{agent_id:v.agent.agent_id})})]})})]})},ya=ja}}]);
