"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[27],{86:function(ge,U,s){var K=s(5574),W=s.n(K),H=s(32332),I=s(38703),Z=s(67294),n=s(85893),G=function(l){var k=l.subtitle,u=l.handleClick,P=l.lineClamp,B=P===void 0?2:P,r=l.textDetails,R=l.title,L=l.icon,S=l.iconType,w=S===void 0?"":S,h=l.operation,a=h===void 0?"":h,i=l.progress,t=l.status,v=l.backlogTips,f=l.avatar,o=(0,Z.useState)(0),d=W()(o,2),E=d[0],x=d[1],j=function(){x(i)},c=function(){x(0)},y=function(F){return"rounded-[4px] border-l-[4px] ".concat(F==1?"border-[#1B64F3]":F==2?"border-[#52C41C]":"border-[#F04444]"," ")};return(0,n.jsxs)("div",{className:"flex  p-[10px] cursor-pointer overflow-hidden relative bg-[#fff] ".concat(t!==void 0?y(t):"graphicbox"),onClick:u,onMouseEnter:function(){i!=null&&j()},onMouseLeave:function(){i!=null&&c()},children:[t!==void 0&&(0,n.jsx)("div",{style:{width:"".concat(E,"%"),transition:"width 0.5s "},className:"absolute bottom-0 left-0 top-0 bottom-0 h-full ".concat(t==1?"bg-[#1B64F3]/[.03]":t==2?"bg-[#52c41c]/[.05]":"bg-[#FAFAFA]"," ")}),(0,n.jsxs)("div",{className:"flex gap-x-[20px] w-full relative z-20",children:[(0,n.jsx)("div",{className:"shrink-0 flex gap-x-[7px] items-center",style:{fontSize:0},children:(0,n.jsxs)("div",{className:"w-[40px] h-[40px] rounded-[6px] flex items-center justify-center bg-[#F4F8F1] relative",children:[f?(0,n.jsx)("img",{src:f,className:"w-[40px] h-[40px] rounded-[6px]"}):(0,n.jsx)("img",{src:(0,H.s9)("single",L),className:"w-[22px] h-[22px]"}),w&&(0,n.jsx)("div",{className:"w-[16px] h-[16px] absolute top-[28px] left-[28px] flex items-center justify-center bg-[#fff] rounded-[3px]",style:{boxShadow:"0px 0px 4px 0px rgba(0,0,0,0.1)"},children:(0,n.jsx)("img",{src:"/icons/".concat(w,".svg"),alt:"",className:"w-[12px] h-[12px]"})})]})}),(0,n.jsx)("div",{className:"flex flex-1 min-w-0",children:(0,n.jsxs)("div",{className:"flex justify-center flex-col gap-y-[5px] flex-1 min-w-0",children:[(0,n.jsxs)("span",{className:"text-[12px] flex items-center",style:{color:"#213044"},children:[(0,n.jsx)("span",{className:"truncate",children:R}),(0,n.jsx)("span",{className:"flex items-center flex-1",children:k})]}),(0,n.jsx)("span",{className:"text-[12px] max-w-full truncate",style:{color:"#999999"},children:r})]})}),v||(0,n.jsx)(n.Fragment,{}),a&&(0,n.jsx)("div",{className:"flex items-center w-[24px]",children:(0,n.jsx)("span",{className:"operation",children:a})}),i!=null&&(0,n.jsx)("div",{className:"graphic_progress flex items-center pl-[30px]",children:(0,n.jsx)(I.Z,{type:"circle",percent:i,size:29})})]})]})};U.Z=G},38027:function(ge,U,s){s.d(U,{p1:function(){return R},vw:function(){return S}});var K=s(19632),W=s.n(K),H=s(5574),I=s.n(H),Z=s(86),n=s(39e3),G=s(29608),ve=s(87740),l=s(35312),k=s(28036),u=s(67294),P=s(22683),B=s(97807),r=s(85893),R=(0,u.memo)(function(h){var a=h.progressObj;console.log(a);var i=function(){return parseFloat(a.elapsed_time).toFixed(6)},t=function(f){var o=new Date(f),d=o.getFullYear(),E=(o.getMonth()+1).toString().padStart(2,"0"),x=o.getDate().toString().padStart(2,"0"),j=o.getHours().toString().padStart(2,"0"),c=o.getMinutes().toString().padStart(2,"0"),y=o.getSeconds().toString().padStart(2,"0");return(0,r.jsx)(r.Fragment,{children:"".concat(d,".").concat(E,".").concat(x," ").concat(j,":").concat(c,":").concat(y)})};return(0,r.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,r.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,r.jsx)("div",{className:"truncate min-w-[70px]",children:a.created_time&&t(a.created_time)}),(0,r.jsx)("div",{className:"truncate",children:a.apps_name||a.app_name}),(0,r.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,r.jsx)("div",{className:"shrink-0 rounded-full ".concat(a.status==1?"bg-blue-600":a.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,r.jsxs)("div",{className:"truncate",children:[i(),"S"]})]})]})})}),L=(0,u.memo)(function(h){var a=h.id,i=h.message,t=(0,l.useIntl)(),v=(0,n.Z)(function(c){return c.setSummaryClick}),f=(0,u.useState)(!0),o=I()(f,2),d=o[0],E=o[1],x=(0,n.Z)(function(c){return c.summaryClick}),j=(0,n.Z)(function(c){return c.setSummaryParams});return(0,u.useEffect)(function(){E(x)},[x]),(0,r.jsx)("div",{className:"flex flex-row-reverse",children:(0,r.jsxs)(k.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(y){d&&(j({id:a,message:i}),v(!1))},children:[(0,r.jsx)("span",{className:"text-[12px]",children:t.formatMessage({id:"app.summaryhistory.submitText"})}),(0,r.jsx)(ve.Z,{className:"text-[14px]"})]})})}),S=function(a){var i=Object.keys(a),t=[];return i.forEach(function(v){t.push(a[v])}),t},w=function(a){var i=a.list,t=a.scrollDom,v=a.historyHeight,f=a.id,o=a.runid,d=(0,l.useIntl)(),E=(0,u.useState)([]),x=I()(E,2),j=x[0],c=x[1],y=(0,u.useRef)("100%"),O=(0,u.useState)(0),F=I()(O,2),xe=F[0],me=F[1],he=(0,G.Z)(function(e){return e.setRunPanelLogRecord}),pe=function($){var p=new Date($),N=p.getMonth()+1,M=p.getDate(),D=p.getHours(),g=p.getMinutes(),m=p.getSeconds();return p.getFullYear()+"-"+(N<10?"0"+N:N)+"-"+(M<10?"0"+M:M)+" "+(D<10?"0"+D:D)+":"+(g<10?"0"+g:g)+":"+(m<10?"0"+m:m)};return(0,u.useEffect)(function(){if(t){var e;y.current=t==null||(e=t.current)===null||e===void 0?void 0:e.offsetHeight}},[t]),(0,u.useEffect)(function(){v&&(y.current="auto")},[v]),(0,u.useEffect)(function(){c(W()(i))},[i]),(0,u.useEffect)(function(){console.log(o),me(o)},[o]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"px-4",style:{minHeight:y.current},children:j&&j.length?j.map(function(e){var $,p,N,M,D,g,m,C,z,V,Y,T,J,Q,X,q,ee,re,ne,se,ae;return e!=null&&e.source_run&&e!==null&&e!==void 0&&e.source_run.summary&&(!xe||xe!=(e==null||($=e.source_run)===null||$===void 0?void 0:$.id))?(0,r.jsx)("div",{className:"pt-[16px] border-b-[1px] border-color-[#eee] ",children:(0,r.jsxs)("div",{className:"pb-[60px]",children:[(0,r.jsx)("div",{className:"text-[16px] font-[600] pb-[8px] flex items-center",children:(0,r.jsx)("span",{className:"flex-1",children:d.formatMessage({id:"app.summary.title"})})}),(0,r.jsx)("p",{className:"text-[12px] color-[#eee] mb-[8px]",children:pe(e==null||(p=e.source_run)===null||p===void 0?void 0:p.created_time)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"p-[12px]  leading-[22px] ".concat(e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?"bg-[#F7F7F7]":"bg-blue-100 rounded-[4px]"),children:(0,r.jsx)(P.U,{rehypePlugins:[B.Z],children:e==null||(N=e.source_run)===null||N===void 0?void 0:N.summary})}),(0,r.jsx)(L,{id:f,message:e==null||(M=e.source_run)===null||M===void 0?void 0:M.summary})]}),e!=null&&e.source_corrections&&(e==null?void 0:e.source_corrections.length)>0?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[d.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),e==null?void 0:e.source_corrections.map(function(_,b){return(0,r.jsxs)("div",{className:"mb-[16px] last-of-type:mb-0",children:[(0,r.jsx)("div",{className:"rounded-[4px]  ".concat((e==null?void 0:e.source_corrections.length)-1!=b?"bg-[#F7F7F7]":"bg-blue-100"),children:(0,r.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,r.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[d.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",_.user_prompt]}),(0,r.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[d.formatMessage({id:"app.summaryhistory.time"}),":"," ",pe(_.created_time)]}),(0,r.jsx)(P.U,{rehypePlugins:[B.Z],children:_==null?void 0:_.corrected_summary})]})}),(0,r.jsx)(L,{id:f,message:_==null?void 0:_.corrected_summary})]},_.created_time)})]}):(0,r.jsx)(r.Fragment,{}),e!=null&&e.target_run?(0,r.jsxs)("div",{className:"py-[12px]",children:[(0,r.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[d.formatMessage({id:"app.summaryhistory.runapp"}),":"]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"text-[14px] py-[6px]",children:[(0,r.jsx)("span",{className:"font-[500] ",children:e!=null&&(D=e.target_run)!==null&&D!==void 0&&D.agent_id?"agent":"workflow"}),(0,r.jsx)("span",{className:"px-[6px]",children:":"}),(0,r.jsx)("span",{children:e==null||(g=e.target_run)===null||g===void 0||(g=g.app)===null||g===void 0?void 0:g.name})]})}),(0,r.jsx)("div",{children:e!=null&&(m=e.target_run)!==null&&m!==void 0&&(m=m.inputs)!==null&&m!==void 0&&m.properties?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[d.formatMessage({id:"app.summaryhistory.input"}),":"]}),S(e==null||(C=e.target_run)===null||C===void 0||(C=C.inputs)===null||C===void 0?void 0:C.properties).map(function(_){return(0,r.jsxs)("div",{className:"pb-[10px]",children:[(0,r.jsx)("div",{className:"pb-[8px] font-[600]",children:_.display_name||_.name}),(0,r.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] h-[]",children:_.value})]})})]}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsx)("div",{children:e!=null&&(z=e.target_run)!==null&&z!==void 0&&z.raw_user_prompt?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px] pb-[6px]",children:[d.formatMessage({id:"app.summaryhistory.prompt"}),":"]}),(0,r.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:e==null||(V=e.target_run)===null||V===void 0?void 0:V.raw_user_prompt})]}):(0,r.jsx)(r.Fragment,{})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[d.formatMessage({id:"app.summaryhistory.results"}),":"]}),(0,r.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7]",children:(e==null||(Y=e.target_run)===null||Y===void 0?void 0:Y.agent_id)!=0?(0,r.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,r.jsx)(P.U,{rehypePlugins:[B.Z],children:e==null||(T=e.target_run)===null||T===void 0||(T=T.outputs)===null||T===void 0?void 0:T.value})}):(0,r.jsx)(Z.Z,{status:e==null||(J=e.target_run)===null||J===void 0?void 0:J.status,icon:e==null||(Q=e.target_run)===null||Q===void 0?void 0:Q.icon,title:e==null||(X=e.target_run)===null||X===void 0?void 0:X.name,avatar:e==null||(q=e.target_run)===null||q===void 0?void 0:q.avatar,textDetails:(0,r.jsx)(R,{progressObj:{created_time:e==null||(ee=e.target_run)===null||ee===void 0?void 0:ee.created_time,elapsed_time:e==null||(re=e.target_run)===null||re===void 0?void 0:re.elapsed_time,app_name:e==null||(ne=e.target_run)===null||ne===void 0?void 0:ne.app.name,status:e==null||(se=e.target_run)===null||se===void 0?void 0:se.status}}),handleClick:function(){var b,A,te,le,oe,de,ue,ie,_e,ce;he({app_id:e==null||(b=e.target_run)===null||b===void 0||(b=b.app)===null||b===void 0?void 0:b.id,app_name:e==null||(A=e.target_run)===null||A===void 0||(A=A.app)===null||A===void 0?void 0:A.name,icon:e==null||(te=e.target_run)===null||te===void 0?void 0:te.icon,workflow_id:e==null||(le=e.target_run)===null||le===void 0?void 0:le.workflow_id,type:2,app_run_id:e==null||(oe=e.target_run)===null||oe===void 0?void 0:oe.id,run_name:e==null||(de=e.target_run)===null||de===void 0?void 0:de.name,status:e==null||(ue=e.target_run)===null||ue===void 0?void 0:ue.status,created_time:e==null||(ie=e.target_run)===null||ie===void 0?void 0:ie.created_time,elapsed_time:e==null||(_e=e.target_run)===null||_e===void 0?void 0:_e.elapsed_time,completed_progress:"".concat(e==null||(ce=e.target_run)===null||ce===void 0?void 0:ce.percentage,"%")})},progress:e==null||(ae=e.target_run)===null||ae===void 0?void 0:ae.percentage})})]})]}):(0,r.jsx)(r.Fragment,{})]})},e.source_run.id):(0,r.jsx)(r.Fragment,{})}):(0,r.jsx)(r.Fragment,{})})})};U.ZP=(0,u.memo)(w)}}]);
