"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[375],{43722:function(se,S,s){s.d(S,{Gn:function(){return W},KH:function(){return J},Rp:function(){return H},cH:function(){return k},dB:function(){return C},j2:function(){return M},r5:function(){return L},rw:function(){return g},sI:function(){return Z},sT:function(){return G},sh:function(){return X},vu:function(){return K},xM:function(){return Y},xT:function(){return Q}});var B=s(15009),c=s.n(B),U=s(99289),o=s.n(U),x=s(47520),g=function(){var l=o()(c()().mark(function t(){var r;return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,x.ZP)("/v1/index/",{method:"GET"});case 2:return r=u.sent,u.abrupt("return",r);case 4:case"end":return u.stop()}},t)}));return function(){return l.apply(this,arguments)}}(),y=null,K=function(){var l=o()(c()().mark(function t(r){var a;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/",{method:"GET",data:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t)}));return function(r){return l.apply(this,arguments)}}(),W=function(){var l=o()(c()().mark(function t(r){var a;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(r.id),{method:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t)}));return function(r){return l.apply(this,arguments)}}(),C=function(){var l=o()(c()().mark(function t(r){var a;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/",{method:"POST",data:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t)}));return function(r){return l.apply(this,arguments)}}(),k=function(){var l=o()(c()().mark(function t(r){var a;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/".concat(r.id,"/details"),{method:"GET"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t)}));return function(r){return l.apply(this,arguments)}}(),M=function(){var l=o()(c()().mark(function t(r){var a;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/recent",{method:"GET",data:{chatroom_id:r.id}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t)}));return function(r){return l.apply(this,arguments)}}(),Z=function(){var l=o()(c()().mark(function t(r,a){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)("/v1/chatroom/".concat(a,"/update_chatroom"),{method:"POST",data:r});case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}},t)}));return function(r,a){return l.apply(this,arguments)}}(),L=function(){var l=o()(c()().mark(function t(r,a){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)("/v1/chatroom/".concat(a,"/smart_selection"),{method:"POST",data:r});case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}},t)}));return function(r,a){return l.apply(this,arguments)}}(),G=function(){var l=o()(c()().mark(function t(r,a,u){var e;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,x.ZP)("/v1/chatroom/".concat(a,"/agents/").concat(u,"/setting"),{method:"PUT",data:r});case 2:return e=j.sent,j.abrupt("return",e);case 4:case"end":return j.stop()}},t)}));return function(r,a,u){return l.apply(this,arguments)}}(),J=function(){var l=o()(c()().mark(function t(r,a){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)("/v1/chatroom/".concat(r,"/chatroom_message"),{method:"GET",data:a});case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}},t)}));return function(r,a){return l.apply(this,arguments)}}(),H=function(){var l=o()(c()().mark(function t(r,a){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)("/v1/chatroom/".concat(r,"/chat_history_message_summary"),{method:"POST",data:a});case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}},t)}));return function(r,a){return l.apply(this,arguments)}}(),Q=function(){var l=o()(c()().mark(function t(r,a){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)("/v1/chatroom/".concat(r,"/chat_history_summary"),{method:"POST",data:a});case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}},t)}));return function(r,a){return l.apply(this,arguments)}}(),X=function(){var l=o()(c()().mark(function t(r){var a;return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.ZP)("/v1/chatroom/chat_room_history",{method:"GET",data:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},t)}));return function(r){return l.apply(this,arguments)}}(),Y=function(){var l=o()(c()().mark(function t(r,a){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.ZP)("/v1/chatroom/".concat(r,"/chat_single_message_generation"),{method:"POST",data:a});case 2:return u=n.sent,n.abrupt("return",u);case 4:case"end":return n.stop()}},t)}));return function(r,a){return l.apply(this,arguments)}}()},72406:function(se,S,s){var B=s(58533),c=s(99702),U=s(74330),o=s(85893),x=function(y){var K=y.children,W=y.elid,C=y.dataLength,k=y.ishasMore,M=y.upSlide,Z=y.isFooter,L=y.pageNumber,G=L===void 0?2:L;return(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[(0,o.jsx)(B.Z,{dataLength:C,scrollableTarget:W,next:M,hasMore:k,loader:(0,o.jsx)("div",{className:"flex justify-center h-[60px] items-center",children:G>1?(0,o.jsx)(U.Z,{}):(0,o.jsx)(o.Fragment,{})}),children:K}),Z&&(0,o.jsx)("div",{className:"mt-[30px] flex-1 flex ",style:{alignItems:"flex-end"},children:(0,o.jsx)(c.Z,{className:"relative"})})]})};S.Z=x},44010:function(se,S,s){var B=s(15009),c=s.n(B),U=s(19632),o=s.n(U),x=s(97857),g=s.n(x),y=s(99289),K=s.n(y),W=s(9783),C=s.n(W),k=s(5574),M=s.n(k),Z=s(72406),L=s(32332),G=s(28508),J=s(35312),H=s(78045),Q=s(26915),X=s(71230),Y=s(15746),l=s(32983),t=s(28036),r=s(67294),a=s(42237),u=s(4346),e=s(85893),n=function(T){var q=T.show,ge=T.popupClose,Ee=T.popupSave,ee=T.checkList,ue=T.zIndex,ce=ue===void 0?"":ue,_e=T.nodetype,p=_e===void 0?"agent":_e,re=T.radio,P=(0,J.useIntl)(),D=(0,r.useRef)([]),I=(0,r.useRef)([]),Me=(0,r.useState)(C()(C()({},"my_".concat(p),0),"more_".concat(p),0)),oe=M()(Me,2),le=oe[0],ie=oe[1],Pe=(0,r.useState)(3),pe=M()(Pe,2),$=pe[0],de=pe[1],ye=(0,r.useState)(!0),me=M()(ye,2),be=me[0],De=me[1],Ie=(0,r.useState)([]),he=M()(Ie,2),A=he[0],V=he[1],je=(0,r.useState)([]),fe=M()(je,2),w=fe[0],z=fe[1],Te=(0,r.useState)(!0),ve=M()(Te,2),Oe=ve[0],Ce=ve[1],Le=(0,r.useRef)(null),Ae=(0,r.useState)(""),xe=M()(Ae,2),we=xe[0],Ne=xe[1],f=(0,r.useRef)({page:1,page_size:999999,search_type:3,apps_name:"",tag_ids:""}),te=function(){return $==3?A&&A.length>0?A:[]:w&&w.length>0?w:[]},Re=function(_){de(_.target.value),f.current.search_type=_.target.value,N(f.current,!0)},N=function(){var m=K()(c()().mark(function _(i){var d,v,E,h,O=arguments;return c()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d=O.length>1&&O[1]!==void 0?O[1]:!1,d&&(f.current.page=1),b.next=4,(0,a.RE)(p,i);case 4:v=b.sent,(v==null?void 0:v.code)==0&&(E=v.data.list.map(function(ae){return g()(g()({},ae),{},{check:Ke(ae,i.search_type)})}),h=function(Ze,Ge){Ge(d?o()(E):[].concat(o()(Ze),o()(E)))},i.search_type==3?(h(A,V),De(v.data.total_pages>f.current.page),R("my_".concat(p),i.search_type)):(h(w,z),Ce(v.data.total_pages>f.current.page),R("more_".concat(p),i.search_type)));case 6:case"end":return b.stop()}},_)}));return function(i){return m.apply(this,arguments)}}(),Se=function(_){f.current.apps_name=_.target.value,f.current.page=1,N(f.current,!0)},R=function(_,i){var d=0;i==3?D.current.length&&(d=D.current.length):I.current.length&&(d=I.current.length),ie(function(v){return v[_]=d,v})},Be=function(_,i){var d=_==3;i.type=d?"my_".concat(p):"more_".concat(p),D.current=d?[i]:[],I.current=d?[]:[i];var v=function(h,O){return h.map(function(F){return g()(g()({},F),{},{check:O(F.app_id)})})};V(function(E){return v(E,function(h){return h==i.app_id&&d})}),z(function(E){return v(E,function(h){return h==i.app_id&&!d})}),R("my_".concat(p),3),R("more_".concat(p),2)},Ue=function(_,i){i.type=_==3?"my_".concat(p):"more_".concat(p);var d=_==3?D.current:I.current,v=d.filter(function(h){return h.app_id!==i.app_id});v.length==d.length?d.push(i):d.splice(d.indexOf(i),1);var E=function(O,F){return O.map(function(b){return g()(g()({},b),{},{check:b.app_id==F?!b.check:b.check})})};_==3?V(function(h){return E(h,i.app_id)}):z(function(h){return E(h,i.app_id)}),R(_==3?"my_".concat(p):"more_".concat(p),_)},Ke=function(_,i){var d=i==3?D.current:I.current;return re&&d.length>1?0:d.filter(function(v){return v.app_id==_.app_id}).length},ne=function(){ge(),D.current=[],I.current=[],z([]),de(3),ie({my_agent:0,more_agent:0})},We=function(){Ee({checkItem:[].concat(o()(D.current),o()(I.current))}),ne()},ke=function(){var _=f.current.search_type==3,i=_?A:w,d=_?"my":"more",v=_?D:I;v.current=i.map(function(h){return g()(g()({},h),{},{type:"".concat(d,"_").concat(p)})});var E=i.map(function(h){return g()(g()({},h),{},{check:1})});_?V(function(){return E}):z(function(){return E}),R("".concat(d,"_").concat(p),f.current.search_type)};return(0,r.useEffect)(function(){if(q){if(f.current.search_type=3,ee.length){var m=ee.filter(function(i){return i.type=="my_".concat(p)}),_=ee.filter(function(i){return i.type=="more_".concat(p)});D.current=o()(m),I.current=o()(_)}f.current.apps_name="",N(g()(g()({},f.current),{},{search_type:3}),!0),N(g()(g()({},f.current),{},{search_type:2}),!0)}},[q]),q?(0,e.jsx)("div",{ref:Le,style:ce?{zIndex:ce}:{zIndex:30},className:'transition  w-full h-full fixed top-[0] left-[0] bg-[rgba(0,0,0,0.5)] flex items-center justify-center z-30"',children:(0,e.jsx)("div",{className:"w-[980px] h-[646px] bg-[#fff] rounded-[6px] transition",children:(0,e.jsxs)("div",{className:"flex flex-col h-full",children:[(0,e.jsxs)("div",{className:"text-[16px] flex items-center p-[20px]",style:{borderBottom:"1px solid #ebebeb"},children:[(0,e.jsx)("span",{className:"flex-1 text-[14px] font-[500] text-[#213044]",children:P.formatMessage({id:"app.check_".concat(p,"_popup.title")})}),(0,e.jsx)(G.Z,{className:"text-[16px] cursor-pointer",onClick:ne})]}),(0,e.jsxs)("div",{className:"pt-[20px] flex-1 min-h-[0]",children:[(0,e.jsxs)("div",{className:"flex items-center pt-[0] p-[20px]",children:[(0,e.jsxs)("span",{className:"text-[#999]",children:[P.formatMessage({id:"app.check_".concat(p,"_popup.chenck_text")}),"\uFF1A"]}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[12px]",children:[(0,e.jsxs)("span",{className:"text-[#213044] text-[14px]",children:[P.formatMessage({id:"app.check_".concat(p,"_popup.select_1")}),":"," ",le["my_".concat(p)]]}),(0,e.jsxs)("span",{className:"text-[#213044] text-[14px]",children:[P.formatMessage({id:"app.check_".concat(p,"_popup.select_2")}),":"," ",le["more_".concat(p)]]})]})]}),(0,e.jsxs)("div",{className:"flex gap-x-[20px] pt-[0] p-[20px]",children:[(0,e.jsxs)(H.ZP.Group,{onChange:Re,defaultValue:"3",size:"large",children:[(0,e.jsx)(H.ZP.Button,{value:"3",children:(0,e.jsx)("span",{className:"text-[14px]",children:P.formatMessage({id:"app.check_".concat(p,"_popup.select_1")})})}),(0,e.jsx)(H.ZP.Button,{value:"2",children:(0,e.jsx)("span",{className:"text-[14px]",children:P.formatMessage({id:"app.check_".concat(p,"_popup.select_2")})})})]}),(0,e.jsx)(Q.Z,{className:"w-[320px] text-[14px]",style:{fontSize:"14px !important"},onPressEnter:Se,size:"large",placeholder:P.formatMessage({id:"app.check_".concat(p,"_popup.search")}),onChange:function(_){return Ne(_.target.value)},value:we,prefix:(0,e.jsx)("img",{src:"/icons/search_icon.svg",className:"w-[16px] h-[16px] mr-[10px]"})}),(0,e.jsx)(u.Z,{allowClear:!0,onChange:function(_){f.current.tag_ids=_?_.join(","):"",f.current.page=1,N(f.current,!0)},showAddButton:!1,size:"large",className:"w-[260px]",listStyle:"horizontal"})]}),(0,e.jsx)("div",{className:"overflow-y-auto  px-[20px]",id:"agentScroll",style:{height:"calc(100% - 100px)"},children:(0,e.jsx)(Z.Z,{dataLength:$==3?A.length:w.length,elid:"agentScroll",ishasMore:$==3?be:Oe,upSlide:function(){f.current.page+=1,N(f.current)},children:(0,e.jsx)("div",{className:"w-full overflow-x-hidden",children:(0,e.jsx)(X.Z,{gutter:[15,15],children:te()&&te().length?te().map(function(m,_){return(0,e.jsx)(Y.Z,{span:6,children:(0,e.jsxs)("div",{className:"bg-[#fff] flex gap-x-[20px] p-[10px] cursor-pointer border-solid border-[1px] rounded-[4px] ".concat(m.check?"border-[#1B64F3]":"border-[#eee]"),onClick:function(){re?Be($,m):Ue($,m)},children:[(0,e.jsx)("div",{className:"w-[40px] h-[40px] bg-[#F4F8F1] rounded-[6px] relative flex items-center justify-center shrink-0",children:(0,e.jsx)("img",{src:(0,L.s9)("single",m.icon),alt:"",className:"w-[20px]  h-[20px]"})}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("div",{className:"text-[#213044] text-[12px] font-[500] w-full truncate",children:m.name}),(0,e.jsx)("div",{className:"text-[#999] text-[12px] w-full truncate",children:m.description})]})]})},m.app_id)}):(0,e.jsx)("div",{className:"w-full h-[380px] flex justify-center items-center",children:(0,e.jsx)(l.Z,{style:{margin:"0px",fontSize:"16px"},imageStyle:{width:"60px",margin:"0 auto",marginBottom:"2px"},description:P.formatMessage({id:"app.dashboard.None"}),image:l.Z.PRESENTED_IMAGE_SIMPLE})})})})})})]}),(0,e.jsxs)("div",{className:"p-[20px] flex gap-x-[20px] justify-end",style:{borderTop:"1px solid #e8e8e8"},children:[re?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsx)(t.ZP,{htmlType:"submit",onClick:ke,children:P.formatMessage({id:"app.check_popup.check"})})}),(0,e.jsx)(t.ZP,{className:"text-[14px] text-[#213044] w-[88px] h-[40px]",style:{border:"1px solid #D8D8D8"},onClick:ne,children:P.formatMessage({id:"app.check_".concat(p,"_popup.cancel")})}),(0,e.jsx)(t.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px]",htmlType:"submit",onClick:We,children:P.formatMessage({id:"app.check_".concat(p,"_popup.save")})})]})]})})}):(0,e.jsx)(e.Fragment,{})};S.Z=n}}]);
