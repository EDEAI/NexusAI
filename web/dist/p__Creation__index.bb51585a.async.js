"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[928],{83510:function(_e,K,a){a.d(K,{LK:function(){return S},bs:function(){return L},go:function(){return G},uy:function(){return w}});var J=a(15009),M=a.n(J),F=a(99289),d=a.n(F),O=a(47520),E="/v1/apps/apps_list",b="/v1/agent/agent_delete/",l="/v1/workflow/workflow_app_delete/",z="/v1/vector/delete_dataset/",A="/v1/skill/delete_skill_by_app_id/",V="/v1/apps/apps_create",R="/v1/apps/app_update/",G=function(){var I=d()(M()().mark(function i(g){var N;return M()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,O.ZP)("".concat(E),{method:"GET",data:g});case 2:return N=r.sent,r.abrupt("return",N);case 4:case"end":return r.stop()}},i)}));return function(g){return I.apply(this,arguments)}}(),S=function(){var I=d()(M()().mark(function i(g){var N;return M()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(g),r.next=3,g.mode;case 3:if(r.t0=r.sent,r.t0!=1){r.next=8;break}r.t1=(0,O.ZP)("".concat(b).concat(g.app_id),{method:"DELETE"}),r.next=9;break;case 8:r.t1=g.mode==2?(0,O.ZP)("".concat(l).concat(g.app_id),{method:"DELETE"}):g.mode==3?(0,O.ZP)("".concat(z).concat(g.app_id),{method:"DELETE"}):(0,O.ZP)("".concat(A).concat(g.app_id),{method:"DELETE",data:{is_soft:1}});case 9:return N=r.t1,r.abrupt("return",N);case 11:case"end":return r.stop()}},i)}));return function(g){return I.apply(this,arguments)}}(),w=function(){var I=d()(M()().mark(function i(g){var N;return M()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,O.ZP)("".concat(V),{method:"POST",data:g});case 2:return N=r.sent,r.abrupt("return",N);case 4:case"end":return r.stop()}},i)}));return function(g){return I.apply(this,arguments)}}(),L=function(){var I=d()(M()().mark(function i(g){var N;return M()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,O.ZP)("".concat(R).concat(g.app_id),{method:"PUT",data:g});case 2:return N=r.sent,r.abrupt("return",N);case 4:case"end":return r.stop()}},i)}));return function(g){return I.apply(this,arguments)}}()},72406:function(_e,K,a){var J=a(58533),M=a(99702),F=a(74330),d=a(85893),O=function(b){var l=b.children,z=b.elid,A=b.dataLength,V=b.ishasMore,R=b.upSlide,G=b.isFooter,S=b.pageNumber,w=S===void 0?2:S;return(0,d.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,d.jsx)(J.Z,{dataLength:A,scrollableTarget:z,next:R,hasMore:V,loader:(0,d.jsx)("div",{className:"flex justify-center h-[60px] items-center",children:w>1?(0,d.jsx)(F.Z,{}):(0,d.jsx)(d.Fragment,{})}),children:l}),G&&(0,d.jsx)("div",{className:"mt-[30px] flex-1 flex ",style:{alignItems:"flex-end"},children:(0,d.jsx)(M.Z,{className:"relative"})})]})};K.Z=O},21446:function(_e,K,a){var J=a(15009),M=a.n(J),F=a(97857),d=a.n(F),O=a(99289),E=a.n(O),b=a(5574),l=a.n(b),z=a(83510),A=a(29608),V=a(32332),R=a(35312),G=a(26915),S=a(28036),w=a(85576),L=a(67294),I=a(94840),i=a(85893),g=G.Z.TextArea,N=function(r){var Y=r.setIsModalOpen,c=r.isModalOpen,q=r.transformData,D=r.CreationType,Le=r.setcreationType,Ze=r.ModalType,x=(0,R.useIntl)(),Ue=(0,L.useState)(""),P=l()(Ue,2),u=P[0],ee=P[1],Be=(0,L.useState)(""),je=l()(Be,2),Me=je[0],Re=je[1],Ge=(0,L.useState)({id:1,icon:"/icons/headportrait/Android.svg"}),Ce=l()(Ge,2),ye=Ce[0],e=Ce[1],Te=(0,A.Z)(),We=Te.setAgentCreateOpen,Ke=Te.setSkillCreateOpen,Ee=function(v){ee(v.target.value)},Fe=function(v){Re(v.target.value)},Se=function(){var s=E()(M()().mark(function v(){var p,T;return M()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(p={name:u,mode:D.apps_mode,description:Me,icon:JSON.stringify(ye.id),icon_background:""},D.apps_mode!=2){H.next=8;break}return H.next=4,(0,z.uy)(p);case 4:T=H.sent,T.code===0&&(Y(!1),Ne(T.data.app_id)),H.next=10;break;case 8:(0,V.Go)("SET",d()(d()({},p),{},{type:!1})),Ne();case 10:case"end":return H.stop()}},v)}));return function(){return s.apply(this,arguments)}}(),ze=function(v){q.map(function(p){p.name==v.name&&(console.log(p,"item"),Le(p))})},Ne=function(v){v?R.history.push("/".concat(D.path,"?app_id=").concat(v,"&&type=false")):R.history.push("/".concat(D.path,"?type=false"))},He=function(){return(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[D.apps_mode==1&&(0,i.jsx)(S.ZP,{onClick:function(){We(!0),Y(!1)},children:x.formatMessage({id:"agent.creation.button.ai"})}),D.apps_mode==4&&(0,i.jsx)(S.ZP,{onClick:function(){Ke(!0),Y(!1)},children:x.formatMessage({id:"agent.creation.button.skill.ai"})})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(S.ZP,{onClick:function(){return Y(!1)},children:x.formatMessage({id:"agent.modal.button.cancel"})}),(0,i.jsx)(S.ZP,{disabled:u==="",onClick:Se,type:"primary",children:x.formatMessage({id:"creation"})})]})]})};return(0,i.jsx)(w.Z,{title:x.formatMessage({id:"creation.addnewapp"}),open:c,okText:x.formatMessage({id:"creation"}),onOk:Se,onCancel:function(){return Y(!1)},okButtonProps:{disabled:u===""},width:820,footer:(0,i.jsx)(He,{}),children:(0,i.jsxs)("div",{className:"pb-1",children:[Ze?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-xs mb-4 mt-8",children:x.formatMessage({id:"creation.appntype"})}),(0,i.jsx)("div",{className:"flex items-center justify-around gap-y-[24px]",children:q&&q.map(function(s){return(0,i.jsxs)("div",{className:"w-44 h-24 rounded-lg text-center bg-[url('/images/bg.png')] bg-[length:176px_96px] cursor-pointer",style:{border:s.apps_mode===D.apps_mode?"1px solid #1B64F3":"1px solid #eeeeee"},onClick:function(){ze(s)},children:[(0,i.jsx)("div",{className:"flex items-center justify-center mt-5 mb-2.5",children:(0,i.jsx)("img",{className:"w-6 h-6",src:s.signicon,alt:""})}),(0,i.jsx)("div",{className:"text-p[#213044] text-base font-normal",children:s.name})]})})})]}):null,(0,i.jsxs)("div",{className:" mt-5",children:[(0,i.jsxs)("div",{className:"mb-5",children:[(0,i.jsxs)("p",{className:"text-xs",children:[D.apps_mode==1?x.formatMessage({id:"creation.agent"}):D.apps_mode==2?x.formatMessage({id:"creation.workflow"}):D.apps_mode==3?x.formatMessage({id:"creation.repository"}):x.formatMessage({id:"creation.skill"}),x.formatMessage({id:"creation.appiconname"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-around",children:[(0,i.jsx)(I.Z,{CardData:ye,setCardData:e}),(0,i.jsx)(G.Z,{showCount:!0,maxLength:50,placeholder:x.formatMessage({id:"creation.placeholder.appname"}),onChange:Ee})]})]}),(0,i.jsxs)("div",{className:"mb-5 text-xs",children:[(0,i.jsxs)("p",{children:[D.apps_mode==1?x.formatMessage({id:"creation.agent"}):D.apps_mode==2?x.formatMessage({id:"creation.workflow"}):D.apps_mode==3?x.formatMessage({id:"creation.repository"}):x.formatMessage({id:"creation.skill"}),x.formatMessage({id:"creation.appdescribe"})]}),(0,i.jsx)(g,{showCount:!0,maxLength:1e3,rows:4,placeholder:x.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Fe})]})]})]})})};K.Z=N},94840:function(_e,K,a){var J=a(97857),M=a.n(J),F=a(32332),d=a(55241),O=a(67294),E=a(85893),b=function(z){var A=z.CardData,V=z.setCardData;(0,O.useEffect)(function(){},[]);var R=function(){return(0,E.jsx)("div",{className:"flex justify-start items-center flex-wrap w-40",children:(0,F.s9)("all").map(function(w){return(0,E.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",onClick:function(){G(w)},children:(0,E.jsx)("img",{src:w.image,alt:""})})})})},G=function(w){V(M()(M()({},A),{},{icon:w.image,id:w.id}))};return(0,E.jsx)(d.Z,{content:R,trigger:"click",placement:"bottomLeft",children:(0,E.jsx)("div",{className:"w-8 h-8 bg-[#F4F8F1] rounded-lg mr-1.5 flex items-center justify-center m-0.5 cursor-pointer",children:(0,E.jsx)("img",{src:(0,F.s9)("single",A.id?A.id:A.icon),alt:""})})})};K.Z=b},91375:function(_e,K,a){a.r(K),a.d(K,{default:function(){return Ne}});var J=a(97857),M=a.n(J),F=a(15009),d=a.n(F),O=a(99289),E=a.n(O),b=a(5574),l=a.n(b),z=a(40110),A=a(47389),V=a(82061),R=a(43425),G=a(71471),S=a(26915),w=a(85576),L=a(45360),I=a(78045),i=a(74330),g=a(71230),N=a(15746),X=a(4393),r=a(55241),Y=a(28036),c=a(67294),q=a(83510),D=a(42237),Le=a(78697),Ze=a(72406),x=a(22352),Ue=a(26474),P=a(29608),u=a(32332),ee=a(35312),Be=a(27484),je=a.n(Be),Me=a(21446),Re=a(47520),Ge=a(33914),Ce=a(57546),ye=a(46822),e=a(85893),Te=function(s){var v=s.optionsModalId,p=(0,ee.useIntl)(),T=(0,c.useState)(!0),re=l()(T,2),H=re[0],De=re[1],ie=S.Z.TextArea,ae=[{name:p.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",unselected:"/icons/creation/unselectedrobot.svg",apps_mode:1},{name:p.formatMessage({id:"creation.workflow"}),path:"workspace/workflow",icon:"/icons/creation/gongzuoliu1.svg",pitchicon:"/icons/creation/pitchgongzuoliu.svg",signicon:"/icons/creation/signgongzuoliu.svg",unselected:"/icons/creation/unselectedprocess.svg",apps_mode:2},{name:p.formatMessage({id:"creation.skill"}),path:"Skill",icon:"/icons/creation/jienng1.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg",unselected:"/icons/creation/unselectedrepository.svg",apps_mode:4}];location.pathname=="/knowledgebase"&&ae.push({name:p.formatMessage({id:"creation.repository"}),path:"Createkb",icon:"/icons/creation/jienng1.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg",unselected:"/icons/creation/unselectedrepository.svg",apps_mode:3});var Je=(0,c.useState)(!1),ue=l()(Je,2),Ve=ue[0],te=ue[1],Ye=(0,c.useState)({name:p.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1}),pe=l()(Ye,2),le=pe[0],ce=pe[1],$e=(0,c.useState)(""),me=l()($e,2),Oe=me[0],be=me[1],Qe=(0,c.useState)(""),fe=l()(Qe,2),m=fe[0],we=fe[1],Xe=(0,c.useState)({id:12,icon:"\u{1F612}"}),he=l()(Xe,2),qe=he[0],ca=he[1];(0,c.useEffect)(function(){location.pathname=="/knowledgebase"&&De(!1)});var Pe=function(_){var C=ae.filter(function(de){return de.apps_mode==_});te(!0),ce(C[0]?C[0]:{name:"Agent",path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1})},ea=function(){te(!1)},aa=function(_){ee.history.push("/".concat(le.path,"?app_id=").concat(_,"&type=false"))},ta=function(_){ae.map(function(C){C.name==_.target.value&&(console.log(C,"item"),ce(C))})},da=function(_){be(_.target.value)},sa=function(_){we(_.target.value)},ua=function(){var h=E()(d()().mark(function _(){var C;return d()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,q.uy)({name:Oe,mode:le.apps_mode,description:m,icon:qe.icon,icon_background:""});case 2:C=$.sent,C.code===0&&(te(!1),aa(C.data.app_id));case 4:case"end":return $.stop()}},_)}));return function(){return h.apply(this,arguments)}}(),Ie=(0,c.useState)(!1),se=l()(Ie,2),na=se[0],oe=se[1],ge=function(){console.log("Import cancelled"),oe(!1)},oa=(0,c.memo)(function(){var h=(0,c.useState)([]),_=l()(h,2),C=_[0],de=_[1],$={icon:(0,e.jsx)(Ge.Z,{}),title:p.formatMessage({id:"workflow.uploadFileText",defaultMessage:"Drag file here, or click to upload"}),description:"Upload the exported workflow yml file",accept:".yml,.yaml",fieldProps:{listType:"text",name:"file",multiple:!0,maxCount:1,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},action:Re._n+"/v1/workflow/import",beforeUpload:function(Z){return de([Z]),!1}},onChange:function(Z){var W=Z.file.status;if(W==="done"){var k;(Z==null||(k=Z.file)===null||k===void 0||(k=k.response)===null||k===void 0?void 0:k.code)===0?(L.ZP.success(p.formatMessage({id:"workflow.importSuccess"})),oe(!1)):L.ZP.error(p.formatMessage({id:"workflow.importFailed"}))}else W==="error"&&L.ZP.error("".concat(Z.file.name," file upload failed."))}},ke=function(){if(C.length>0){var Z=new FormData;Z.append("file",C[0]),(0,D.Uq)(Z).then(function(W){if((W==null?void 0:W.code)==0){var k;ee.history.push("/workspace/workflow?app_id=".concat(W==null||(k=W.data)===null||k===void 0?void 0:k.app_id,"&type=false"))}})}oe(!1)};return(0,e.jsx)(w.Z,{title:p.formatMessage({id:"creation.importWorkflow"}),open:na,onOk:ke,okButtonProps:{loading:!1},okText:p.formatMessage({id:"workflow.import"}),onCancel:ge,children:(0,e.jsx)(ye.Z,M()({name:"file"},$))})});return(0,e.jsxs)(X.Z,{style:{minWidth:300,marginTop:10,backgroundColor:"#EFF0F2"},bodyStyle:{height:"100%"},hoverable:!1,children:[(0,e.jsx)(oa,{}),(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"194px"},children:[v===6?(0,e.jsxs)("div",{className:"flex justify-around items-start h-full w-full ",style:{flexDirection:"column",height:"calc(100% + 24px)"},children:[ae.map(function(h,_){return(0,e.jsxs)("div",{className:"hover:bg-[#fff] w-full rounded-lg h-8 cursor-pointer flex items-center",onClick:function(){return Pe(h.apps_mode)},children:[(0,e.jsx)("img",{src:h.icon,style:{width:"16px",height:"16px",margin:"0 5px 0 10px"},alt:""}),(0,e.jsxs)("div",{style:{color:"#213044"},children:[p.formatMessage({id:"creation.new"}),h.name]})]})}),(0,e.jsxs)("div",{onClick:function(){return oe(!0)},className:"hover:bg-[#fff] w-full rounded-lg h-8 cursor-pointer flex items-center text-[#213044]",children:[(0,e.jsx)(Ce.Z,{className:"size-4  mr-[5px] ml-[10px]"})," ",p.formatMessage({id:"creation.importWorkflow"})]})]}):null,(0,e.jsx)("div",{className:" flex-wrap h-full text-[#999] text-[12px] cursor-pointer",style:{width:v===6?"50%":"100%"},onClick:function(){return Pe(v)},children:v===6?(0,e.jsxs)("div",{className:"mt-[62px]",children:[(0,e.jsx)("div",{className:"h-[42px] flex justify-center",children:(0,e.jsx)("img",{src:"/icons/creation/add.svg",alt:""})}),(0,e.jsxs)("div",{className:"svg-container w-full text-center",children:[" ",p.formatMessage({id:"creation.addcreation"})]})]}):ae.filter(function(h,_){return h.apps_mode==v}).map(function(h,_){return(0,e.jsxs)("div",{className:"mt-[50px]",children:[(0,e.jsx)("div",{className:"h-[42px] flex justify-center mb-[10px]",children:(0,e.jsx)("img",{src:h.unselected?h.unselected:"/icons/creation/add.svg",alt:""})}),(0,e.jsxs)("div",{className:"svg-container w-full text-center",children:[p.formatMessage({id:"creation.new"}),h.name?h.name:p.formatMessage({id:"creation.adhibition"})]})]})})})]}),(0,e.jsx)(Me.Z,{setIsModalOpen:te,isModalOpen:Ve,ModalType:location.pathname!="/knowledgebase",CreationType:le,setcreationType:ce,transformData:ae})]})},We=Te,Ke=a(94840),Ee=G.Z.Text,Fe=G.Z.Paragraph,Se=S.Z.TextArea,ze=function(){var s=(0,ee.useIntl)(),v=(0,c.useState)(null),p=l()(v,2),T=p[0],re=p[1],H=(0,c.useState)(1),De=l()(H,2),ie=De[0],ae=De[1],Je=(0,c.useState)(!1),ue=l()(Je,2),Ve=ue[0],te=ue[1],Ye=(0,c.useState)(""),pe=l()(Ye,2),le=pe[0],ce=pe[1],$e=(0,c.useState)(""),me=l()($e,2),Oe=me[0],be=me[1],Qe=(0,c.useState)(null),fe=l()(Qe,2),m=fe[0],we=fe[1],Xe=(0,c.useState)(!1),he=l()(Xe,2),qe=he[0],ca=he[1],Pe=(0,c.useState)(!1),ea=l()(Pe,2),aa=ea[0],ta=ea[1],da=(0,c.useState)({name:"Agent",path:s.formatMessage({id:"creation.agent"}),icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1}),sa=l()(da,2),ua=sa[0],Ie=sa[1],se=[{apps_mode:6,name:s.formatMessage({id:"creation.all"}),path:"Agents",icon:"/icons/creation/quanbu.svg",unselected:"/icons/creation/quanbu.svg",pitchicon:"/icons/creation/pitchquanbu.svg",signicon:"/icons/creation/pitchquanbu.svg"},{apps_mode:1,name:s.formatMessage({id:"creation.agent"}),path:"Agents",icon:"/icons/creation/agent.svg",unselected:"/icons/creation/unselectedrobot.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg"},{apps_mode:2,name:s.formatMessage({id:"creation.workflow"}),path:"workspace/workflow",icon:"/icons/creation/gongzuoliu1.svg",unselected:"/icons/creation/unselectedprocess.svg",pitchicon:"/icons/creation/pitchgongzuoliu.svg",signicon:"/icons/creation/signgongzuoliu.svg"},{apps_mode:4,name:s.formatMessage({id:"creation.skill"}),path:"Skill",icon:"/icons/creation/jienng1.svg",unselected:"/icons/creation/unselectedskill.svg",pitchicon:"/icons/creation/pitchskill.svg",signicon:"/icons/creation/signskill.svg"}];location.pathname=="/knowledgebase"&&(se=[{apps_mode:3,name:s.formatMessage({id:"creation.repository"}),path:"Createkb",icon:"/icons/creation/zhishik1.svg",unselected:"/icons/creation/unselectedrepository.svg",pitchicon:"/icons/creation/pitchzhishik.svg",signicon:"/icons/creation/signzhishik.svg"}]);var na=(0,c.useState)(6),oe=l()(na,2),ge=oe[0],oa=oe[1],h=(0,c.useState)(!1),_=l()(h,2),C=_[0],de=_[1],$=(0,c.useState)(""),ke=l()($,2),ne=ke[0],Z=ke[1],W=(0,c.useState)(!1),k=l()(W,2),ba=k[0],pa=k[1],wa=(0,c.useState)([{apps_mode:1,name:s.formatMessage({id:"creation.agent"}),path:"Agents",readOnlypath:"ReadOnlyAgent"},{apps_mode:2,name:s.formatMessage({id:"creation.workflow"}),path:"workspace/workflow"},{apps_mode:3,name:s.formatMessage({id:"creation.repository"}),path:"createkb"},{apps_mode:4,name:s.formatMessage({id:"creation.skill"}),path:"Skill",readOnlypath:"ReadOnlySkill"}]),ma=l()(wa,2),fa=ma[0],at=ma[1],Pa=(0,c.useState)(!0),ha=l()(Pa,2),Ia=ha[0],ga=ha[1],ka=(0,c.useState)(-1),va=l()(ka,2),Aa=va[0],ve=va[1],La=(0,c.useState)([]),xa=l()(La,2),_a=xa[0],Za=xa[1],Ua=(0,c.useState)(Date.now()),ja=l()(Ua,2),ra=ja[0],Ma=ja[1],Ca=(0,P.Z)(),ia=Ca.shouldComponentUpdate,ya=Ca.clearUpdateNotification,Ba=(0,c.useState)(!0),Ta=l()(Ba,2),Ra=Ta[0],Ea=Ta[1],U=function(){var t=E()(d()().mark(function n(f,y,B,o,j,la,Q){var Oa,Ae;return d()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Oa={page:f||ie,page_size:27,search_type:(0,u.f1)("GET").searchType==!0?2:1,apps_mode:(0,u.f1)("GET").optionsModalId,apps_name:o||o==""?o:ne,tag_ids:Q?Q.join(","):""},ga(!0),xe.next=4,(0,q.go)(Oa);case 4:Ae=xe.sent,pa(!0),re(j?{list:T.list.concat(Ae.data.list)}:Ae.data),ga(!1),Ae.data.list.length<27&&pa(!1);case 9:case"end":return xe.stop()}},n)}));return function(f,y,B,o,j,la,Q){return t.apply(this,arguments)}}();(0,c.useEffect)(function(){if((0,u.op)(),location.pathname=="/knowledgebase"){var t={apps_mode:3,name:s.formatMessage({id:"creation.repository"}),path:"Createkb"};Ea(!1),Sa(t)}else ca(!0),U(1,null)},[]);var Ga=function(){ae(ie+1),U(ie+1,C,null,null,!0)},Sa=function(n){oa(n.apps_mode),(0,u.f1)("SET",n.apps_mode,JSON.parse((0,u.f1)("GET").searchType)),U(1,C,n.apps_mode)},Wa=function(n){Z(n.target.value),U(1,C,ge,n.target.value)};(0,c.useEffect)(function(){U(1,C,ge,ne,null,null,_a)},[_a]);var Ka=function(){te(!1)},Fa=function(){var t=E()(d()().mark(function n(){var f,y;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return f={name:le,description:Oe,app_id:m.app_id,mode:m.mode,icon:m.id?JSON.stringify(m.id):m.icon,icon_background:""},o.next=3,(0,q.bs)(f);case 3:y=o.sent,y.code==0&&(te(!1),U(1,C,null,null,null,ie*27));case 5:case"end":return o.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),za=function(n,f){ve(f),te(!0),ce(n.name),be(n.description),we(n)},Ha=function(n){ce(n.target.value)},Ja=function(n){be(n.target.value)},Na=function(n){event.stopPropagation(),(0,u.Go)("SET",M()(M()({},n),{},{type:(0,u.f1)("GET").searchType}));var f=fa.filter(function(y){return y.apps_mode===n.mode});(n.mode===1||n.mode===4)&&(0,u.f1)("GET").searchType==!0?ee.history.push("/".concat(f[0].readOnlypath,"?app_id=").concat(n.app_id?n.app_id:n.apps_id,"&type=").concat((0,u.f1)("GET").searchType)):ee.history.push("/".concat(f[0].path,"?app_id=").concat(n.app_id?n.app_id:n.apps_id,"&type=").concat((0,u.f1)("GET").searchType))},Va=function(n,f){ve(f),w.Z.confirm({title:s.formatMessage({id:"creation.modal.returnconfirm"}),content:s.formatMessage({id:"creation.modal.deldescribe"}),onOk:function(){var y=E()(d()().mark(function o(){var j;return d()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,q.LK)(n);case 2:j=Q.sent,j&&j.code==0?(L.ZP.success(s.formatMessage({id:"creation.modal.delsuccess"})),U(1,null,null,null,null,ie*27)):L.ZP.error(s.formatMessage({id:"creation.modal.delerror"}));case 4:case"end":return Q.stop()}},o)}));function B(){return y.apply(this,arguments)}return B}(),onCancel:function(){}})},Ya=function(n){var f=JSON.parse(n.target.value);de(f),(0,u.f1)("SET",null,f),U(1,f)},$a=function(){var n,f=se.filter(function(y){return y.apps_mode==(0,u.f1)("GET").optionsModalId});location.pathname=="/knowledgebase"&&Ea(!1),ta(!0),Ie(((n=f[0])===null||n===void 0?void 0:n.apps_mode)!==6?f[0]:{name:"Agent",path:"Agents",icon:"/icons/creation/agent.svg",pitchicon:"/icons/creation/pitchagent.svg",signicon:"/icons/creation/pitchagent.svg",apps_mode:1})},Qa=(0,P.Z)(function(t){return t.setRunId}),tt=(0,P.Z)(function(t){return t.setRunPanelLogRecord}),st=(0,P.Z)(function(t){return t.setDealtWithData}),Xa=function(n){Qa(n.app_id)},Da=(0,Ue.v)(),qa=Da.tags,et=Da.fetchTags;return(0,c.useEffect)(function(){},[ge]),(0,c.useEffect)(function(){var t=function(){if(ia(P.B.AGENT_LIST,ra)){var y,B=P.Z.getState().updateNotifications.get(P.B.AGENT_LIST);B==null||(y=B.payload)===null||y===void 0||y.action,U(1,null),Ma(Date.now()),ya(P.B.AGENT_LIST)}if(ia(P.B.SKILL_LIST,ra)){var o,j=P.Z.getState().updateNotifications.get(P.B.SKILL_LIST);j==null||(o=j.payload)===null||o===void 0||o.action,U(4,null),Ma(Date.now()),ya(P.B.SKILL_LIST)}},n=setInterval(t,1e3);return function(){return clearInterval(n)}},[ia,ra]),(0,e.jsxs)("div",{className:" pb-[10px] flex flex-col",style:{height:"calc(-60px + 100vh)",width:"100%",margin:"0 auto"},children:[(0,e.jsxs)("div",{className:"flex px-[30px] py-[20px] mx-[8px] items-center justify-between",children:[(0,e.jsx)("div",{className:"flex items-center",children:qe?se.map(function(t,n){return(0,e.jsxs)("div",{onClick:function(){Sa(t)},className:"flex justify-center items-center h-8 rounded-lg mr-4 cursor-pointer px-[10px]",style:(0,u.f1)("GET").optionsModalId==t.apps_mode?{color:"#1B64F3",backgroundColor:"#ffffff"}:{color:"#9097a1"},children:[(0,e.jsx)("div",{className:"mr-2",children:(0,e.jsx)("img",{src:(0,u.f1)("GET").optionsModalId==t.apps_mode?t.pitchicon:t.unselected,alt:""})}),(0,e.jsx)("div",{children:t.name})]})}):""}),(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"min-w-[200px] mr-4",children:(0,e.jsx)(x.Z,{allowClear:!0,modes:(0,u.f1)("GET").optionsModalId,placeholder:s.formatMessage({id:"creation.placeholder.selectTags"}),onTagChange:function(){et()},onChange:function(n){Za(n)}})}),(0,e.jsx)("div",{className:" mr-5",children:(0,e.jsxs)(I.ZP.Group,{onChange:Ya,defaultValue:JSON.stringify((0,u.f1)("GET").searchType),children:[(0,e.jsx)(I.ZP.Button,{value:"true",children:s.formatMessage({id:"creation.team"})}),(0,e.jsx)(I.ZP.Button,{value:"false",children:s.formatMessage({id:"creation.individual"})})]})}),(0,e.jsx)(S.Z,{style:{width:300},prefix:(0,e.jsx)(z.Z,{}),placeholder:s.formatMessage({id:"creation.placeholder.searchname"}),variant:"filled",onChange:Wa})]})]}),(0,e.jsx)(i.Z,{spinning:Ia,size:"large",className:"mt-[112px]",children:(0,e.jsx)("div",{id:"Creation",style:{overflowY:"auto",height:"calc(100vh - 128px)"},children:T&&T.list&&T.list.length>0?(0,e.jsx)(Ze.Z,{dataLength:T.list.length,elid:"Creation",ishasMore:ba,upSlide:Ga,isFooter:!0,children:(0,e.jsxs)(g.Z,{gutter:[16,8],wrap:!0,style:{margin:0},className:"px-[30px]",children:[(0,e.jsx)(N.Z,{sm:24,md:12,lg:12,xl:8,xxl:6,children:(0,e.jsx)(We,{optionsModalId:(0,u.f1)("GET").optionsModalId})}),T&&T.list&&T.list.length?T.list.map(function(t,n){var f,y,B;return(0,e.jsx)(N.Z,{className:"gutter-row",sm:24,md:12,lg:12,xl:8,xxl:6,children:(0,e.jsx)(X.Z,{className:" cursor-pointer transition shadow-lg shadow-gray-100 hover:shadow-gray-200",style:{marginTop:10,minWidth:300},hoverable:!1,styles:{body:{padding:"20px"}},children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{onClick:function(){return Na(t)},children:(0,e.jsx)(X.Z.Meta,{title:[(0,e.jsxs)("div",{className:"flex w-full",children:[(0,e.jsx)("div",{className:"mr-[17px] shrink-0",children:(0,e.jsx)(Le.Z,{Image:(0,u.s9)("single",t.icon),icon:(0,u.f1)("GET").optionsModalId===6?(f=se.filter(function(o){return o.apps_mode===t.mode})[0])===null||f===void 0?void 0:f.signicon:null})}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[" ",(0,e.jsx)("div",{style:{maxWidth:"160px"},className:"text-sm text-[#213044] font-medium truncate",children:(0,e.jsx)(Ee,{ellipsis:{tooltip:t.name},children:t.name})}),(0,e.jsxs)("div",{className:" leading-6 flex items-center justify-end text-xs font-normal text-[#999999]",children:[(0,e.jsxs)("div",{children:[s.formatMessage({id:"creation.numberofcitation"}),":"," "]}),(0,e.jsxs)("div",{className:"text-[#1B64F3] ml-2",children:[" ",t.execution_times?t.execution_times:0]})]})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between w-full text-xs font-normal text-[#999999]",children:[(0,e.jsx)("div",{className:"text-xs font-normal text-[#999999] mt-[7px]",children:fa.map(function(o,j){return o.apps_mode===t.mode?o.name:null})}),(0,e.jsxs)("div",{className:" flex items-center justify-end mt-[7px]",children:[(0,e.jsx)("div",{className:"max-w-[56px] mr-2 ",children:(0,e.jsx)(Ee,{ellipsis:{tooltip:t.published_creator},className:"text-base",children:(0,e.jsx)("div",{className:" text-[#999999] text-xs",children:t.published_creator})})}),(0,e.jsx)("div",{children:t.published_time?(0,e.jsxs)("span",{className:"text-[#1B64F3]",children:[je()(t.published_time).format("YYYY-MM-DD HH:mm:ss")," ",s.formatMessage({id:"creation.publish"})]}):t.mode!==3?(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("img",{src:"/icons/unpublish.svg",alt:"",className:"mr-[5px]"}),s.formatMessage({id:"creation.unpublish"})]}):null})]})]})]})]})],description:(0,e.jsxs)("div",{style:{height:100,margin:"20px 0 20px 0"},children:[(0,e.jsx)(Fe,{ellipsis:{rows:4,tooltip:t.description},className:"!mb-0",children:(0,e.jsx)("div",{style:{color:"#999999"},children:t.description})}),(0,e.jsx)("div",{onClick:function(j){j.stopPropagation()},className:"not_has_down_select hover:bg-gray-100 rounded-md",children:(0,e.jsx)(x.O,{onBlur:function(j){(0,D.v_)(t.changeTags,[t.app_id])},listStyle:"horizontal",onChange:function(j){t.changeTags=j},placeholder:s.formatMessage({id:"addTag.addTag"}),defaultValue:(y=t.tags)===null||y===void 0?void 0:y.map(function(o){return o.id}),maxTagCount:5,options:qa,className:"!w-full",variant:"borderless"},t.app_id)})]})})}),(0,e.jsxs)("div",{className:"flex justify-between",children:[(0,e.jsx)("div",{className:"flex items-center justify-start",style:{height:"24px"},children:t.list&&t.list.length?(0,e.jsx)(r.Z,{placement:"bottomLeft",content:(0,e.jsx)("div",{className:" overflow-auto",children:t.list.map(function(o,j){return(0,e.jsxs)("div",{className:"w-80 flex items-center justify-start p-1.5 rounded-md  cursor-pointer hover:bg-[#fafafa]",onClick:function(){return Na(o)},children:[(0,e.jsx)("div",{className:"mr-3.5",children:(0,e.jsx)("div",{className:"w-[36px] h-[36px] bg-[#EDF3FE] rounded-lg mr-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:(0,u.s9)("single",o.icon),alt:""})})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-xs font-normal text-[#213044]",children:o.name}),(0,e.jsx)("div",{className:"text-xs font-normal text-[#666]",children:(o==null?void 0:o.mode)==1?s.formatMessage({id:"workflow.agent"}):(o==null?void 0:o.mode)==2?s.formatMessage({id:"component.menu.workflow"}):(o==null?void 0:o.mode)==3?s.formatMessage({id:"component.menu.knowledgeBase"}):s.formatMessage({id:"workflow.skill"})})]})]},j)})}),children:(0,e.jsxs)("div",{className:"flex items-center justify-around text-xs font-normal",children:[s.formatMessage({id:"creation.relevancy.app"})," ",":",t.list.slice(0,4).map(function(o,j){return(0,e.jsx)("div",{children:(0,e.jsx)("div",{className:"w-8 h-8 bg-[#EDF3FE] rounded-lg ml-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:(0,u.s9)("single",o.icon),alt:""})})},j)}),t.list.length>4?(0,e.jsx)("div",{className:"w-8 h-8 bg-[#EDF3FE] rounded-lg ml-1.5 flex items-center justify-center ",children:(0,e.jsx)("img",{src:"/icons/more.svg",alt:""})}):null]})}):null}),(t==null?void 0:t.mode)===2?(0,e.jsx)("div",{className:"flex-1 flex justify-end items-center",children:(t==null?void 0:t.publish_status)==1?(0,e.jsx)("img",{onClick:function(){return Xa(t)},src:"/icons/operation_icon.svg",className:"mr-2"}):(0,e.jsx)("img",{src:"/icons/operation_disable_icon.svg",className:"mr-2"})}):null,(0,e.jsx)("div",{children:JSON.parse((B=(0,u.f1)("GET"))===null||B===void 0?void 0:B.searchType)?null:(0,e.jsx)(r.Z,{placement:"rightTop",open:Aa==n,onOpenChange:function(j){ve(-1)},mouseLeaveDelay:1,content:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsxs)(Y.ZP,{type:"link",className:"text-[#213044]",onClick:function(){za(t,-1)},children:[(0,e.jsx)(A.Z,{}),s.formatMessage({id:"creation.redact"})]})}),(0,e.jsx)("div",{children:(0,e.jsxs)(Y.ZP,{type:"link",className:"text-[#E12222]",onClick:function(){return Va(t,-1)},children:[(0,e.jsx)(V.Z,{}),s.formatMessage({id:"creation.delete"})]})})]}),children:(0,e.jsx)("div",{onMouseEnter:function(){ve(n)},className:"w-[26px] h-[26px] flex items-center justify-center",children:(0,e.jsx)(R.Z,{onClick:function(){ve(n)}},"setting")})})})]})]})})},n)}):null]})}):T&&T.list&&T.list.length==0?(0,e.jsxs)("div",{className:"w-full flex items-center flex-wrap justify-center mt-48",children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-center mb-2.5",children:(0,e.jsx)("img",{src:"/icons/default.svg",alt:""})}),ne&&ne!==""?(0,e.jsxs)("div",{children:["\u201C",ne,"\u201D"]}):(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"w-full text-center mb-3 text-[#666] text-sm",children:[s.formatMessage({id:"creation.margindescribe"})," ~"]}),(0,e.jsxs)("div",{className:"w-full text-center",children:[" ",(0,e.jsx)(Y.ZP,{color:"primary",onClick:function(){$a()},children:s.formatMessage({id:"creation.addnewapp"})})," "]})]})]}):null})}),(0,e.jsxs)(w.Z,{title:"",open:Ve,okText:s.formatMessage({id:"creation.conserve"}),onOk:Fa,onCancel:Ka,children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"mb-[15px]",children:[(m==null?void 0:m.mode)==1?s.formatMessage({id:"creation.agent"}):(m==null?void 0:m.mode)==2?s.formatMessage({id:"creation.workflow"}):(m==null?void 0:m.mode)==3?s.formatMessage({id:"creation.repository"}):s.formatMessage({id:"creation.skill"}),s.formatMessage({id:"creation.appiconname"})]}),(0,e.jsxs)("div",{className:"flex items-center justify-around",children:[(0,e.jsx)(Ke.Z,{CardData:m,setCardData:we}),(0,e.jsx)(S.Z,{showCount:!0,maxLength:20,placeholder:s.formatMessage({id:"creation.placeholder.appname"}),onChange:Ha,value:le})]})]}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsxs)("div",{className:"mb-[15px]",children:[(m==null?void 0:m.mode)==1?s.formatMessage({id:"creation.agent"}):(m==null?void 0:m.mode)==2?s.formatMessage({id:"creation.workflow"}):(m==null?void 0:m.mode)==3?s.formatMessage({id:"creation.repository"}):s.formatMessage({id:"creation.skill"}),s.formatMessage({id:"creation.appdescribe"})]}),(0,e.jsx)(Se,{showCount:!0,maxLength:100,rows:4,placeholder:s.formatMessage({id:"creation.placeholder.appdescribe"}),onChange:Ja,value:Oe})]})]}),(0,e.jsx)(Me.Z,{setIsModalOpen:ta,isModalOpen:aa,ModalType:Ra,CreationType:ua,setcreationType:Ie,transformData:se.filter(function(t){return t.apps_mode!==6})})]})},Ne=ze}}]);
