"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{14955:function(ut,ge,a){a.r(ge),a.d(ge,{default:function(){return st}});var Fe=a(15009),S=a.n(Fe),Ze=a(97857),s=a.n(Ze),we=a(99289),W=a.n(we),Se=a(5574),h=a.n(Se),q=a(11551),Me=a(47520),Ae=a(29432),Pe=a(2068),De=a(89035),Ie=a(15360),Ce=a(82826),Oe=a(69243),G=a(35312),i=a(40741),$=a(45360),ee=a(28036),ze=a(50136),p=a(67294),z=a(92939),Te=a(5608),T=a(26915),K=a(72269),ne=a(34041),M=a(78045),e=a(85893),Ve=T.Z.TextArea,Ee=function(l){var t=l.Detaillist,A=l.repository,x=l.Operationbentate,N=l.Ffromref,X=l.Fourthly_config_id,P=l.Fourthly_select_list,n=(0,G.useIntl)(),k=(0,p.useState)([]),V=h()(k,2),o=V[0],J=V[1];(0,p.useEffect)(function(){L()},[]);var L=function(){var I=W()(S()().mark(function c(){var b;return S()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,q.zl)();case 2:b=g.sent,J(b.data.data.map(function(C){return{value:C.dataset_id,label:C.name}}));case 4:case"end":return g.stop()}},c)}));return function(){return I.apply(this,arguments)}}(),U={readOnly:!0},F={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"100%",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:N,children:[t&&t.app.attrs_are_visible===0?(0,e.jsx)(i.Z.List,{name:"users",children:function(c,b){var D=b.add,g=b.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[t&&t.app&&t.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:x==="true"?n.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:t&&t.app&&t.app.description})]})})]})}}):(0,e.jsx)(i.Z.List,{name:"users",children:function(c,b){var D,g,C=b.add,B=b.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[t&&t.app&&t.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:x==="true"?n.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:t&&t.app&&t.app.description})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(z.Z,{className:"font-medium",name:n.formatMessage({id:"agent.teamvisibility"}),title:n.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(K.Z,s()(s()({},F),{},{size:"small",checked:!!(t&&t.app.is_public===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(z.Z,{className:"font-medium",name:n.formatMessage({id:"agent.attrVisible"}),title:n.formatMessage({id:"agent.explain.attrVisible"})})}),(0,e.jsx)(K.Z,s()(s()({},F),{},{size:"small",checked:!!(t&&t.app.attrs_are_visible===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:n.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(K.Z,s()(s()({},F),{},{size:"small",checked:!!(t&&t.app.enable_api===1)}))]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:n.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(K.Z,s()(s()({},F),{},{size:"small",checked:!!(t&&t.agent.allow_upload_file==1)}))]})]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:n.formatMessage({id:"agent.LLMmodel"})}),(0,e.jsx)(ne.Z,s()(s()({},F),{},{"aria-readonly":"true",style:{width:270},variant:"filled",value:X,options:P}))]})}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(z.Z,{name:n.formatMessage({id:"agent.functiondescription"}),title:n.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(Ve,s()(s()({},F),{},{value:t&&t.agent&&t.agent.obligations,variant:"filled",autoSize:{minRows:8,maxRows:10}}))]})}),(t==null||(D=t.agent)===null||D===void 0?void 0:D.input_variables)&&(0,e.jsx)("div",{className:"mb-[30px]",children:(0,e.jsx)(Te.Z,{readonly:!0,title:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(z.Z,{className:"font-medium",required:!0,name:n.formatMessage({id:"agent.inputvariable"}),title:n.formatMessage({id:"agent.explain.inputvariable"})})}),variables:Object.values((t==null||(g=t.agent)===null||g===void 0||(g=g.input_variables)===null||g===void 0?void 0:g.properties)||{})})}),(0,e.jsxs)(i.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(z.Z,{className:"font-medium",name:n.formatMessage({id:"agent.associatedknowledgebase"}),title:n.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(ne.Z,s()(s()({},F),{},{size:"large",mode:"tags",style:{width:"100%"},placeholder:n.formatMessage({id:"agent.pleaseselect"}),value:A,variant:"filled",options:o}))]}),(0,e.jsx)(i.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",n.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsx)(M.ZP.Group,s()(s()({},F),{},{value:t&&t.agent.default_output_format,options:[{value:1,label:"text"},{value:2,label:"json"},{value:3,label:"code"}]}))]})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},$e=Ee,Le=a(13769),Be=a.n(Le),Re=a(49677),We=a.n(Re),Ge=a(92485),Ke=a(85877),He=a(39944),he=a(10759),Xe=a(71471),ke=a(74330),Je=["key","name"],mt=Xe.Z.Title,xt=T.Z.TextArea,ft=T.Z.Search,Ue=function(l){var t=l.Detaillist,A=l.setDetaillist,x=l.Fourthly_select_list,N=l.setFourthly_config_id,X=l.Fourthly_config_id,P=l.Fourthlyref,n=l.Fourthly_abilities_list,k=l.Operationbentate,V=l.callwordlist,o=(0,G.useIntl)(),J=(0,p.useState)(0),L=h()(J,2),U=L[0],F=L[1],I=(0,p.useState)(""),c=h()(I,2),b=c[0],D=c[1],g=(0,p.useState)(""),C=h()(g,2),B=C[0],de=C[1],te=(0,p.useState)(!1),Y=h()(te,2),oe=Y[0],Q=Y[1],ce={readOnly:!0},ue={disabled:!0},ae=function(d){var f={user:{value:ie(d)}};D(new He.z(f))},me=function(d){F(d)},se=function(d){var f=d.users.filter(function(u,E){return u.type=="number"&&!Number(u.value)&&!!u.value});if(!b.user)$.ZP.warning(o.formatMessage({id:"agent.message.warning.callword"}));else if(f.length>0)$.ZP.warning(o.formatMessage({id:"agent.message.warning.datatype"}));else{Q(!0);var j=new he.Kr("input","","");d.users.forEach(function(u){var E=new he._w(u.name,u.type?u.type:"string",u.type=="string"?u.value:Number(u.value),u.content,u.status);j.addProperty(u.name,E)});var r={agent_id:t.agent.agent_id,ability_id:U,input_dict:j,prompt:b};xe(r)}},ie=function v(d){return d.map(function(f){return f.type==="mention"?f.id:f.children?v(f.children):f.text}).join("")},xe=function(){var v=W()(S()().mark(function d(f){return S()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(0,q.LH)(f).then(function(u){$.ZP.success(o.formatMessage({id:"agent.message.success.runpublish"})),de(u.data.outputs.text),Q(!1)}).catch(function(u){Q(!1)});case 1:case"end":return r.stop()}},d)}));return function(f){return v.apply(this,arguments)}}(),fe=function(){var v=W()(S()().mark(function d(){var f;return S()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,q.Dh)(t.agent.agent_id);case 2:f=r.sent,f.code==0?$.ZP.success("success"):$.ZP.error("error");case 4:case"end":return r.stop()}},d)}));return function(){return v.apply(this,arguments)}}(),le=function(){var v=W()(S()().mark(function d(){return S()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:G.history.push("/Agents?app_id=".concat(t.app.app_id,"&type=false")),location.reload();case 2:case"end":return j.stop()}},d)}));return function(){return v.apply(this,arguments)}}();return(0,p.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:o.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(ne.Z,{placeholder:o.formatMessage({id:"agent.pleaseselect"}),defaultValue:o.formatMessage({id:"agent.allability"}),variant:"filled",style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:me,options:n})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",onFinish:se,style:{width:900},autoComplete:"off",form:P,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(i.Z.List,{name:"users",children:function(d,f){return We()(f),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:o.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52",children:o.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:d.map(function(j){var r=j.key,u=j.name,E=Be()(j,Je);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(i.Z.Item,s()(s()({},E),{},{name:[u,"content"],children:(0,e.jsx)(T.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(i.Z.Item,s()(s()({},E),{},{name:[u,"value"],rules:[{required:!!(P.getFieldsValue()&&P.getFieldsValue().users[r].status==!0),message:o.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(T.Z,{style:{width:"660px"},placeholder:P.getFieldsValue()&&P.getFieldsValue().users[r].status==!0?o.formatMessage({id:"agent.variable.required.value"}):o.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(i.Z.Item,{rules:[{required:!0,message:o.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:o.formatMessage({id:"agent.runpreview"})}),(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)(ke.Z,{spinning:oe,children:(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:B?(0,e.jsx)(Ge.Z,{language:"python3",value:B&&JSON.stringify(B)}):null})}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Ke.Z,{onChange:function(d){console.log(V),ae(d)},options:V})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ee.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})]}),(0,e.jsx)(i.Z.Item,{children:(0,e.jsx)("div",{className:"w-28",children:(t==null?void 0:t.agent.publish_status)===1&&(t==null?void 0:t.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ee.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:le,children:o.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ee.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:k!="false",onClick:fe,children:o.formatMessage({id:"agent.publish"})})})})})]})}),(0,e.jsx)("div",{className:"h-10 w-1"})]})},Ye=Ue,Qe=T.Z.TextArea,pt={readOnly:!0},H={disabled:!0},_e=function(l){var t=l.Detaillist,A=l.Sformref,x=(0,G.useIntl)();return(0,p.useEffect)(function(){}),(0,e.jsxs)("div",{style:{height:"100%",width:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:x.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(z.Z,{name:x.formatMessage({id:"agent.automatch"}),title:x.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(K.Z,s()(s()({},H),{},{size:"small",checked:!!(t&&t.agent.auto_match_ability==1)}))]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(i.Z,{name:"dynamic_form_nest_item",style:{width:"100%"},autoComplete:"off",form:A,children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.capability"})})}),A&&A.getFieldValue("users")&&A.getFieldValue("users").map(function(N,X){return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(i.Z.Item,{className:"mb-0",children:(0,e.jsx)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:x.formatMessage({id:"agent.capabilityname"})})})}),(0,e.jsx)(i.Z.Item,{className:"mb-[20px]",children:(0,e.jsx)(T.Z,s()(s()({},H),{},{placeholder:x.formatMessage({id:"agent.capabilityname"}),value:N.name,className:"w-full"}))}),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(z.Z,{className:"text-[#555555] text-xs font-medium",name:x.formatMessage({id:"agent.capabilitydescription"}),title:x.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(i.Z.Item,{className:"w-full mb-[20px]",children:(0,e.jsx)(Qe,s()(s()({value:N.content},H),{},{placeholder:x.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},style:{width:"100%"}}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:x.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(i.Z.Item,{className:"mb-[20px]",children:(0,e.jsxs)(M.ZP.Group,s()(s()({value:N.status,optionType:"button",buttonStyle:"solid"},H),{},{defaultValue:!0,children:[(0,e.jsx)(M.ZP,{value:!0,children:x.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(M.ZP,{value:!1,children:x.formatMessage({id:"agent.capabilitystatus.disable"})})]}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:x.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(i.Z.Item,{className:"mb-0",children:(0,e.jsxs)(M.ZP.Group,s()(s()({defaultValue:0,value:N.output_format},H),{},{children:[(0,e.jsx)(M.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:x.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(M.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(M.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(M.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))})]})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},qe=_e,et=a(13085),tt=a(27842),at=function(){var l=(0,G.useIntl)(),t=(0,p.useRef)(null),A=i.Z.useForm(),x=h()(A,1),N=x[0],X=i.Z.useForm(),P=h()(X,1),n=P[0],k=i.Z.useForm(),V=h()(k,1),o=V[0],J=i.Z.useForm(),L=h()(J,1),U=L[0],F=(0,p.useState)(null),I=h()(F,2),c=I[0],b=I[1],D=(0,p.useState)(null),g=h()(D,2),C=g[0],B=g[1],de=(0,p.useState)(null),te=h()(de,2),Y=te[0],oe=te[1],Q=(0,p.useState)(null),ce=h()(Q,2),ue=ce[0],ae=ce[1],me=(0,p.useState)(null),se=h()(me,2),ie=se[0],xe=se[1],fe=(0,p.useState)(null),le=h()(fe,2),v=le[0],d=le[1],f=(0,p.useState)("1"),j=h()(f,2),r=j[0],u=j[1],E=(0,p.useState)(null),ve=h()(E,2),it=ve[0],lt=ve[1],nt=[{key:"1",icon:(0,e.jsx)(Pe.Z,{}),label:l.formatMessage({id:"agent.menu.basicsetup"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:r=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(De.Z,{}),label:l.formatMessage({id:"agent.menu.Capacityoutput"}),disabled:c&&c.app.attrs_are_visible===0,style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:r=="2"?"#1B64F3":"#213044"}},{key:"5",icon:(0,e.jsx)(Ie.Z,{}),label:l.formatMessage({id:"app.dashboard.run_log_agent"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",lineHeight:"22px",fontWeight:"500",color:r=="5"?"#1B64F3":"#213044"}}];(0,p.useEffect)(function(){rt()},[]);var rt=function(){var R=W()(S()().mark(function Z(){var w,m,O,ye,pe,be,Ne;return S()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return w=new URLSearchParams(window.location.search),console.log(w.get("type")),_.next=4,(0,q.ek)(w.get("app_id"),w.get("type"));case 4:m=_.sent,O=m.data,m.data.agent_dataset_relation_list&&m.data.agent_dataset_relation_list.length&&(ye=m.data.agent_dataset_relation_list.map(function(y){return y.dataset_id}),B(ye)),b(m.data),d(m.data.agent.publish_status===0&&m.data.is_creator===1?"false":"true"),m.data.agent.publish_status===1&&$.ZP.warning(l.formatMessage({id:"agent.message.listwarning"}),5),N.setFieldsValue(dt(O.agent.input_variables)),m.data.agent_abilities_list&&(pe=m.data.agent_abilities_list.map(function(y){return y.status==1?s()(s()({},y),{},{status:!0}):s()(s()({},y),{},{status:!1})}),o.setFieldsValue({users:pe[0]?pe:[{agent_ability_id:0,name:"",content:"",status:!0}]}),be=O.agent_abilities_list.filter(function(y){return y.output_format!==0}),n.setFieldsValue({users:be.map(function(y){return{agent_ability_id:y.agent_ability_id,output_format:y.output_format}})})),O.m_configurations_list&&oe(O.m_configurations_list.map(function(y){return{value:y.m_config_id,label:y.m_name}})),ae(O.agent.m_config_id),O.agent_abilities_list&&(Ne=O.agent_abilities_list.filter(function(y,ht){return y.status===1}),xe(ot(Ne).concat([{value:0,label:l.formatMessage({id:"agent.allability"})}])));case 15:case"end":return _.stop()}},Z)}));return function(){return R.apply(this,arguments)}}(),dt=function(Z){console.log(!!Z&&!!Z.properties,"obj");var w={users:Z&&Z.properties?Object.values(Z.properties).map(function(m){return{name:m.name,type:m.type,content:m.display_name,status:m.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return w},ot=function(Z){return Z.map(function(w){return{value:w.agent_ability_id,label:w.name}})},ct=function(){je({key:r,keyPath:[],item:void 0,domEvent:void 0}),history.back()},je=function(Z){try{if(r=="1"){var w=N.getFieldsValue().users.map(function(m){return{value:"<<".concat(Ae.qX,".inputs.").concat(m.name,">>"),label:m.name}});U.setFieldsValue(N.getFieldsValue()),lt(w)}u(Z.key)}catch(m){console.log(m,"error")}};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ee.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:ct,children:[(0,e.jsx)(Ce.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:l.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(ze.Z,{selectedKeys:[r],onClick:je,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[r],mode:"inline",items:nt}),c&&c.app.enable_api===1&&c.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:function(){window.open(Me._n+c.app.api_url)},children:(0,e.jsxs)("div",{className:"mr-[20px]",children:[(0,e.jsx)(Oe.Z,{className:"mr-2"}),l.formatMessage({id:"agent.visit"}),"API"]})}):null]})]}),(0,e.jsxs)("div",{className:"flex-1 grid grid-cols-2 relative",children:[(0,e.jsx)("div",{className:"flex flex-col  ",style:{height:"calc(100vh - 56px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-full",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[c?c.creator_nickname:""," ",l.formatMessage({id:"agent.agents"})]})]})}),(0,e.jsx)("div",{style:{display:r==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)($e,{Ffromref:N,Detaillist:c,repository:C,Operationbentate:v,Fourthly_config_id:ue,Fourthly_select_list:Y})}),(0,e.jsx)("div",{style:{display:r==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(qe,{Detaillist:c,Sformref:o})}),(0,e.jsx)("div",{style:{display:r==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ye,{Detaillist:c,setDetaillist:b,Fourthly_select_list:Y,Fourthly_config_id:ue,setFourthly_config_id:ae,Fourthlyref:U,Fourthly_abilities_list:ie,Operationbentate:v,callwordlist:it})})]})}),(0,e.jsx)("div",{children:(0,e.jsx)(et.Z,{operationbentate:v,data:{abilitiesList:ie,detailList:c}})}),r=="5"&&(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-50 w-full h-full z-10",children:(0,e.jsx)(tt.ZP,{agent_id:c.agent.agent_id})})]})]})},st=at}}]);
