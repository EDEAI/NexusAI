"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{14955:function(dt,ge,t){t.r(ge),t.d(ge,{default:function(){return et}});var Fe=t(15009),A=t.n(Fe),Ze=t(97857),a=t.n(Ze),we=t(99289),L=t.n(we),Se=t(5574),f=t.n(Se),q=t(11551),Me=t(47520),Ae=t(29432),Pe=t(2068),Ie=t(89035),De=t(15360),Ce=t(82826),Oe=t(69243),W=t(35312),l=t(40741),z=t(2453),ee=t(14726),Ve=t(50136),x=t(67294),T=t(92939),P=t(55102),G=t(72269),te=t(34041),N=t(78045),e=t(85893),ze=P.Z.TextArea,Te=function(i){var s=i.Detaillist,I=i.repository,m=i.Operationbentate,h=i.Ffromref,k=i.Fourthly_config_id,D=i.Fourthly_select_list,n=(0,W.useIntl)(),X=(0,x.useState)([]),C=f()(X,2),d=C[0],H=C[1];(0,x.useEffect)(function(){E()},[]);var E=function(){var O=L()(A()().mark(function p(){var w;return A()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,q.zl)();case 2:w=S.sent,H(w.data.data.map(function(F){return{value:F.dataset_id,label:F.name}}));case 4:case"end":return S.stop()}},p)}));return function(){return O.apply(this,arguments)}}(),J={readOnly:!0},v={disabled:!0};return(0,e.jsxs)("div",{style:{height:"100%",width:"900px",marginBottom:"30px"},children:[(0,e.jsx)("div",{className:"flex align-center justify-between mt-[30px]",children:(0,e.jsx)("div",{className:"text-base font-medium mb-[30px] text-[#333333]",children:n.formatMessage({id:"agent.menu.basicsetup"})})}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(l.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:h,children:[(0,e.jsx)(l.Z.List,{name:"users",children:function(p,w){var U=w.add,S=w.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appname"})}),(0,e.jsxs)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:[(0,e.jsxs)("div",{children:[s&&s.app&&s.app.name,"\xA0"]}),(0,e.jsx)("div",{className:"",children:m==="true"?n.formatMessage({id:"agent.cannotmodify"}):""})]})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"text-[#555555] text-xs",children:[(0,e.jsx)("div",{className:"font-medium  mb-[15px]",children:n.formatMessage({id:"agent.appdescription"})}),(0,e.jsx)("div",{className:"w-full p-3.5 flex font-normal items-center bg-[#F7F7F7] rounded-lg",children:s&&s.app&&s.app.description})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(T.Z,{className:"font-medium",name:n.formatMessage({id:"agent.teamvisibility"}),title:n.formatMessage({id:"agent.explain.teamvisibility"})})}),(0,e.jsx)(G.Z,a()(a()({},v),{},{size:"small",checked:!!(s&&s.app.is_public===1)}))]}),(0,e.jsxs)("div",{className:"mb-[30px]  font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:n.formatMessage({id:"agent.APIswitch"})}),(0,e.jsx)(G.Z,a()(a()({},v),{},{size:"small",checked:!!(s&&s.app.enable_api===1)}))]}),(0,e.jsxs)("div",{className:"font-medium",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:n.formatMessage({id:"agent.filesupload"})}),(0,e.jsx)(G.Z,a()(a()({},v),{},{size:"small",checked:!!(s&&s.agent.allow_upload_file==1)}))]})]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:n.formatMessage({id:"agent.LLMmodel"})}),(0,e.jsx)(te.Z,a()(a()({},v),{},{"aria-readonly":"true",style:{width:270},variant:"filled",value:k,options:D}))]})}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",name:"obligations",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs",children:(0,e.jsx)(T.Z,{name:n.formatMessage({id:"agent.functiondescription"}),title:n.formatMessage({id:"agent.explain.function"})})}),(0,e.jsx)(ze,a()(a()({},v),{},{value:s&&s.agent&&s.agent.obligations,variant:"filled",autoSize:{minRows:8,maxRows:10}}))]})}),(0,e.jsx)("div",{className:"mb-[11px] text-xs font-bold flex justify-between items-center",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs",children:(0,e.jsx)(T.Z,{className:"font-medium",name:n.formatMessage({id:"agent.inputvariable"}),title:n.formatMessage({id:"agent.explain.inputvariable"})})})}),(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-2.5 text-[#555555] h-12 bg-[#F7F7F7] rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-[300px] ml-[10px]",children:n.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-[300px]",children:n.formatMessage({id:"agent.variable.display"})}),(0,e.jsx)("div",{className:"w-[230px]",children:n.formatMessage({id:"agent.variable.type"})}),(0,e.jsx)("div",{className:"w-[70px]",children:n.formatMessage({id:"agent.variable.required"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:h&&h.getFieldValue("users")&&h.getFieldValue("users").map(function(F,B){return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(l.Z.Item,{className:"m-0",children:(0,e.jsx)(P.Z,a()(a()({value:F.name},v),{},{placeholder:n.formatMessage({id:"agent.variable.name"}),className:"w-[280px] mr-[20px]"}))}),(0,e.jsx)(l.Z.Item,{className:"m-0",children:(0,e.jsx)(P.Z,a()(a()({value:F.content},v),{},{placeholder:n.formatMessage({id:"agent.variable.display"}),className:"w-[270px] mr-[20px]"}))}),(0,e.jsx)(l.Z.Item,{className:"mr-[80px] m-0",children:(0,e.jsx)(te.Z,a()(a()({},v),{},{style:{width:"150px"},value:F.type,defaultValue:"string",options:[{value:"string",label:"string"},{value:"number",label:"number"}]}))}),(0,e.jsx)(l.Z.Item,{className:"w-12 mr-14 m-0 ",children:(0,e.jsx)(G.Z,a()(a()({checked:F.status},v),{},{size:"small"}))})]})})}),(0,e.jsxs)(l.Z.Item,{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"text-[#555555] text-xs mb-[15px]",children:(0,e.jsx)(T.Z,{className:"font-medium",name:n.formatMessage({id:"agent.associatedknowledgebase"}),title:n.formatMessage({id:"agent.explain.associatedknowledgebase"})})}),(0,e.jsx)(te.Z,a()(a()({},v),{},{size:"large",mode:"tags",style:{width:"100%"},placeholder:n.formatMessage({id:"agent.pleaseselect"}),value:I,variant:"filled",options:d}))]}),(0,e.jsx)(l.Z.Item,{className:"mb-[30px]",children:(0,e.jsxs)("div",{className:"",children:[(0,e.jsxs)("div",{className:"text-[#555555] text-xs mb-[15px]",children:[" ",n.formatMessage({id:"agent.defaultoutputformat"})]}),(0,e.jsxs)(N.ZP.Group,a()(a()({},v),{},{value:s&&s.agent.default_output_format,children:[(0,e.jsx)(N.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text"})}),(0,e.jsx)(N.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"json"})}),(0,e.jsx)(N.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))]})})]})}}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},Ee=Te,Be=t(13769),$e=t.n(Be),Re=t(49677),Le=t.n(Re),We=t(22080),Ge=t(85877),Ke=t(39944),he=t(10759),ke=t(5154),Xe=t(74330),He=["key","name"],ot=ke.Z.Title,ct=P.Z.TextArea,ut=P.Z.Search,Je=function(i){var s=i.Detaillist,I=i.setDetaillist,m=i.Fourthly_select_list,h=i.setFourthly_config_id,k=i.Fourthly_config_id,D=i.Fourthlyref,n=i.Fourthly_abilities_list,X=i.Operationbentate,C=i.callwordlist,d=(0,W.useIntl)(),H=(0,x.useState)(0),E=f()(H,2),J=E[0],v=E[1],O=(0,x.useState)(""),p=f()(O,2),w=p[0],U=p[1],S=(0,x.useState)(""),F=f()(S,2),B=F[0],re=F[1],ae=(0,x.useState)(!1),Y=f()(ae,2),de=Y[0],Q=Y[1],oe={readOnly:!0},ce={disabled:!0},se=function(o){var u={user:{value:me(o)}};U(new Ke.z(u))},ue=function(o){v(o)},le=function(o){var u=o.users.filter(function(c,V){return c.type=="number"&&!Number(c.value)&&!!c.value});if(!w.user)z.ZP.warning(d.formatMessage({id:"agent.message.warning.callword"}));else if(u.length>0)z.ZP.warning(d.formatMessage({id:"agent.message.warning.datatype"}));else{Q(!0);var y=new he.Kr("input","","");o.users.forEach(function(c){var V=new he._w(c.name,c.type?c.type:"string",c.type=="string"?c.value:Number(c.value),c.content,c.status);y.addProperty(c.name,V)});var r={agent_id:s.agent.agent_id,ability_id:J,input_dict:y,prompt:w};xe(r)}},me=function j(o){return o.map(function(u){return u.type==="mention"?u.id:u.children?j(u.children):u.text}).join("")},xe=function(){var j=L()(A()().mark(function o(u){return A()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:(0,q.LH)(u).then(function(c){z.ZP.success(d.formatMessage({id:"agent.message.success.runpublish"})),re(c.data.outputs.text),Q(!1)}).catch(function(c){Q(!1)});case 1:case"end":return r.stop()}},o)}));return function(u){return j.apply(this,arguments)}}(),fe=function(){var j=L()(A()().mark(function o(){var u;return A()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,q.Dh)(s.agent.agent_id);case 2:u=r.sent,u.code==0?z.ZP.success("success"):z.ZP.error("error");case 4:case"end":return r.stop()}},o)}));return function(){return j.apply(this,arguments)}}(),ie=function(){var j=L()(A()().mark(function o(){return A()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:W.history.push("/Agents?app_id=".concat(s.app.app_id,"&type=false")),location.reload();case 2:case"end":return y.stop()}},o)}));return function(){return j.apply(this,arguments)}}();return(0,x.useEffect)(function(){},[]),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:d.formatMessage({id:"agent.operationrun"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:d.formatMessage({id:"agent.selectivepower"})}),(0,e.jsx)(te.Z,{placeholder:d.formatMessage({id:"agent.pleaseselect"}),defaultValue:d.formatMessage({id:"agent.allability"}),variant:"filled",style:{width:390,fontSize:"12px",color:"#BBBBBB",fontWeight:"400"},onChange:ue,options:n})]}),(0,e.jsx)("div",{children:(0,e.jsxs)(l.Z,{name:"dynamic_form_nest_item",onFinish:le,style:{width:900},autoComplete:"off",form:D,children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:d.formatMessage({id:"agent.inputvariable"})}),(0,e.jsx)(l.Z.List,{name:"users",children:function(o,u){return Le()(u),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"w-full flex justify-start items-center text-xs font-medium px-[10px] text-[#213044] h-12 bg-[#F7F7F7]  rounded-t-lg",children:[(0,e.jsx)("div",{className:"w-48 mr-5 ml-2.5",children:d.formatMessage({id:"agent.variable.name"})}),(0,e.jsx)("div",{className:"w-52",children:d.formatMessage({id:"agent.variable.value"})})]}),(0,e.jsx)("div",{className:"mb-[30px]",children:o.map(function(y){var r=y.key,c=y.name,V=$e()(y,He);return(0,e.jsxs)("div",{className:"w-full h-20 flex justify-start  px-2.5 border-b border-x pt-7 last:rounded-b-lg",children:[(0,e.jsx)(l.Z.Item,a()(a()({},V),{},{name:[c,"content"],children:(0,e.jsx)(P.Z,{className:"w-48 mr-5",style:{color:"#213044",fontWeight:"400",fontSize:"12px"},variant:"borderless",disabled:!0})})),(0,e.jsx)(l.Z.Item,a()(a()({},V),{},{name:[c,"value"],rules:[{required:!!(D.getFieldsValue()&&D.getFieldsValue().users[r].status==!0),message:d.formatMessage({id:"agent.rules.veriablevalue"})}],children:(0,e.jsx)(P.Z,{style:{width:"660px"},placeholder:D.getFieldsValue()&&D.getFieldsValue().users[r].status==!0?d.formatMessage({id:"agent.variable.required.value"}):d.formatMessage({id:"agent.variable.value"})})}))]})})})]})}}),(0,e.jsxs)(l.Z.Item,{rules:[{required:!0,message:d.formatMessage({id:"agent.rules.callwordvalue"})}],children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:d.formatMessage({id:"agent.runpreview"})}),(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-3.5 rounded-lg",children:[(0,e.jsx)(Xe.Z,{spinning:de,children:(0,e.jsx)("div",{className:"h-[345px] mb-[30px]",children:B?(0,e.jsx)(We.Z,{language:"python3",value:B&&JSON.stringify(B)}):null})}),(0,e.jsxs)("div",{className:"agents-input p-2 bg-white border rounded-md my-2 flex items-center justify-between",style:{border:"1px solid #EEE"},children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(Ge.Z,{onChange:function(o){console.log(C),se(o)},options:C})}),(0,e.jsx)("div",{className:"w-8 h-8 bg-[#e8effc] rounded-md",children:(0,e.jsx)(ee.ZP,{className:"bg-[#e8effc]",icon:(0,e.jsx)("img",{src:"/icons/fs.svg"}),type:"link",htmlType:"submit",block:!0})})]})]})]}),(0,e.jsx)(l.Z.Item,{children:(0,e.jsx)("div",{className:"w-28",children:(s==null?void 0:s.agent.publish_status)===1&&(s==null?void 0:s.is_creator)===1?(0,e.jsx)("div",{children:(0,e.jsx)(ee.ZP,{type:"primary",htmlType:"submit",className:"w-full",onClick:ie,children:d.formatMessage({id:"agent.amend"})})}):(0,e.jsx)("div",{children:(0,e.jsx)(ee.ZP,{type:"primary",htmlType:"submit",className:"w-full",disabled:X!="false",onClick:fe,children:d.formatMessage({id:"agent.publish"})})})})})]})}),(0,e.jsx)("div",{className:"h-10 w-1"})]})},Ue=Je,Ye=P.Z.TextArea,mt={readOnly:!0},K={disabled:!0},Qe=function(i){var s=i.Detaillist,I=i.Sformref,m=(0,W.useIntl)();return(0,x.useEffect)(function(){}),(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)("div",{className:"text-base font-medium text-[#333333] my-[30px]",children:m.formatMessage({id:"agent.Applicationcapabilitysetting"})}),(0,e.jsxs)("div",{className:"mb-[30px]",children:[(0,e.jsx)("div",{className:"mb-[15px] text-[#555555] text-xs font-medium",children:(0,e.jsx)(T.Z,{name:m.formatMessage({id:"agent.automatch"}),title:m.formatMessage({id:"agent.explain.automatch"})})}),(0,e.jsx)(G.Z,a()(a()({},K),{},{size:"small",checked:!!(s&&s.agent.auto_match_ability==1)}))]}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(l.Z,{name:"dynamic_form_nest_item",style:{width:900},autoComplete:"off",form:I,children:[(0,e.jsx)("div",{className:"w-full flex items-center justify-between mb-[11px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.capability"})})}),I&&I.getFieldValue("users")&&I.getFieldValue("users").map(function(h,k){return(0,e.jsxs)("div",{className:"bg-[#F7F7F7] p-[15px] rounded-lg mb-[20px]",children:[(0,e.jsx)(l.Z.Item,{className:"mb-0",children:(0,e.jsx)("div",{className:"w-full flex justify-between items-center mb-[15px]",children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium",children:m.formatMessage({id:"agent.capabilityname"})})})}),(0,e.jsx)(l.Z.Item,{className:"mb-[20px]",children:(0,e.jsx)(P.Z,a()(a()({},K),{},{placeholder:m.formatMessage({id:"agent.capabilityname"}),value:h.name,className:"w-80"}))}),(0,e.jsx)("div",{className:"mb-[15px]",children:(0,e.jsx)(T.Z,{className:"text-[#555555] text-xs font-medium",name:m.formatMessage({id:"agent.capabilitydescription"}),title:m.formatMessage({id:"agent.explain.capabilitydescription"})})}),(0,e.jsx)(l.Z.Item,{className:"w-full mb-[20px]",children:(0,e.jsx)(Ye,a()(a()({value:h.content},K),{},{placeholder:m.formatMessage({id:"agent.capabilitydescription"}),autoSize:{minRows:3,maxRows:10},style:{width:"700px"}}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[15px]",children:m.formatMessage({id:"agent.capabilitystatus"})}),(0,e.jsx)(l.Z.Item,{className:"mb-[20px]",children:(0,e.jsxs)(N.ZP.Group,a()(a()({value:h.status,optionType:"button",buttonStyle:"solid"},K),{},{defaultValue:!0,children:[(0,e.jsx)(N.ZP,{value:!0,children:m.formatMessage({id:"agent.capabilitystatus.enable"})}),(0,e.jsx)(N.ZP,{value:!1,children:m.formatMessage({id:"agent.capabilitystatus.disable"})})]}))}),(0,e.jsx)("div",{className:"text-[#555555] text-xs font-medium mb-[11px]",children:m.formatMessage({id:"agent.enableall"})}),(0,e.jsx)(l.Z.Item,{className:"mb-0",children:(0,e.jsxs)(N.ZP.Group,a()(a()({defaultValue:0,value:h.output_format},K),{},{children:[(0,e.jsx)(N.ZP,{value:0,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:m.formatMessage({id:"agent.menu"})})}),(0,e.jsx)(N.ZP,{value:1,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"text string"})}),(0,e.jsx)(N.ZP,{value:2,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"format json"})}),(0,e.jsx)(N.ZP,{value:3,children:(0,e.jsx)("div",{className:"text-[#555555] text-xs font-normal",children:"code"})})]}))})]})}),(0,e.jsx)("div",{className:"h-[30px] w-1"})]})})]})},_e=Qe,qe=function(){var i=(0,W.useIntl)(),s=(0,x.useRef)(null),I=l.Z.useForm(),m=f()(I,1),h=m[0],k=l.Z.useForm(),D=f()(k,1),n=D[0],X=l.Z.useForm(),C=f()(X,1),d=C[0],H=l.Z.useForm(),E=f()(H,1),J=E[0],v=(0,x.useState)(null),O=f()(v,2),p=O[0],w=O[1],U=(0,x.useState)(null),S=f()(U,2),F=S[0],B=S[1],re=(0,x.useState)(null),ae=f()(re,2),Y=ae[0],de=ae[1],Q=(0,x.useState)(null),oe=f()(Q,2),ce=oe[0],se=oe[1],ue=(0,x.useState)(null),le=f()(ue,2),me=le[0],xe=le[1],fe=(0,x.useState)(null),ie=f()(fe,2),j=ie[0],o=ie[1],u=(0,x.useState)("1"),y=f()(u,2),r=y[0],c=y[1],V=(0,x.useState)(null),ve=f()(V,2),tt=ve[0],at=ve[1],st=[{key:"1",icon:(0,e.jsx)(Pe.Z,{}),label:i.formatMessage({id:"agent.menu.basicsetup"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:r=="1"?"#1B64F3":"#213044"}},{key:"2",icon:(0,e.jsx)(Ie.Z,{}),label:i.formatMessage({id:"agent.menu.Capacityoutput"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:r=="2"?"#1B64F3":"#213044"}},{key:"4",icon:(0,e.jsx)(De.Z,{}),label:i.formatMessage({id:"agent.menu.operation"}),style:{padding:"15px",width:"100%",margin:"0px",marginBottom:"10px",fontSize:"16px",fontWeight:"500",color:r=="3"?"#1B64F3":"#213044"}}];(0,x.useEffect)(function(){lt()},[]);var lt=function(){var $=L()(A()().mark(function Z(){var M,g,R,ye,pe,be,Ne;return A()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return M=new URLSearchParams(window.location.search),console.log(M.get("type")),_.next=4,(0,q.ek)(M.get("app_id"),M.get("type"));case 4:g=_.sent,R=g.data,ye=g.data.agent_dataset_relation_list.map(function(b){return b.dataset_id}),B(ye),w(g.data),o(g.data.agent.publish_status===0&&g.data.is_creator===1?"false":"true"),g.data.agent.publish_status===1&&z.ZP.warning(i.formatMessage({id:"agent.message.listwarning"}),5),h.setFieldsValue(it(R.agent.input_variables)),pe=g.data.agent_abilities_list.map(function(b){return b.status==1?a()(a()({},b),{},{status:!0}):a()(a()({},b),{},{status:!1})}),d.setFieldsValue({users:pe[0]?pe:[{agent_ability_id:0,name:"",content:"",status:!0}]}),be=R.agent_abilities_list.filter(function(b){return b.output_format!==0}),n.setFieldsValue({users:be.map(function(b){return{agent_ability_id:b.agent_ability_id,output_format:b.output_format}})}),de(R.m_configurations_list.map(function(b){return{value:b.m_config_id,label:b.m_name}})),se(R.agent.m_config_id),Ne=R.agent_abilities_list.filter(function(b,ft){return b.status===1}),xe(nt(Ne).concat([{value:0,label:i.formatMessage({id:"agent.allability"})}]));case 20:case"end":return _.stop()}},Z)}));return function(){return $.apply(this,arguments)}}(),it=function(Z){console.log(!!Z&&!!Z.properties,"obj");var M={users:Z&&Z.properties?Object.values(Z.properties).map(function(g){return{name:g.name,type:g.type,content:g.display_name,status:g.required}}):[{name:"",content:"",type:"string",agent_ability_id:0,output_format:0,status:0}]};return M},nt=function(Z){return Z.map(function(M){return{value:M.agent_ability_id,label:M.name}})},rt=function(){je({key:r,keyPath:[],item:void 0,domEvent:void 0}),history.back()},je=function(Z){if(console.log(p.agent.obligations,"1111",d.getFieldsValue().users),r=="1"){var M=h.getFieldsValue().users.map(function(g){return{value:"<<".concat(Ae.qX,".inputs.").concat(g.name,">>"),label:g.name}});J.setFieldsValue(h.getFieldsValue()),at(M)}c(Z.key)};return(0,e.jsxs)("div",{className:" flex bg-white",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsxs)("div",{className:"flex flex-col w-[300px]",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)("div",{className:"flex w-full items-center bg-white px-[30px] pt-[30px] border-[#e5e7eb] border-solid border-r",children:(0,e.jsxs)(ee.ZP,{type:"link",shape:"circle",size:"middle",className:"",onClick:rt,children:[(0,e.jsx)(Ce.Z,{}),(0,e.jsx)("span",{className:"text-sm font-medium text-[#213044]",children:i.formatMessage({id:"agent.back"})})]})}),(0,e.jsxs)("div",{className:"w-full flex-1 px-[30px] py-[30px] bg-white border-[#e5e7eb] border-solid border-r",children:[(0,e.jsx)(Ve.Z,{selectedKeys:[r],onClick:je,style:{width:"100%",borderInlineEnd:"1px solid rgba(0,0,0,0)"},defaultSelectedKeys:[r],mode:"inline",items:st}),p&&p.app.enable_api===1&&p.app.publish_status===1?(0,e.jsx)("div",{className:"w-full h-[40px] rounded-lg text-[#000] hover:bg-[#f0f0f0] p-[12px] pl-[16px] cursor-pointer",onClick:function(){window.open(Me._n+p.app.api_url)},children:(0,e.jsxs)("div",{className:"mr-[20px]",children:[(0,e.jsx)(Oe.Z,{className:"mr-2"}),i.formatMessage({id:"agent.visit"}),"API"]})}):null]})]}),(0,e.jsx)("div",{className:"flex flex-col  ",style:{height:"calc(100vh - 56px)",width:"calc(100vw - 230px)",overflowY:"scroll",scrollbarWidth:"none"},children:(0,e.jsxs)("div",{className:"px-[30px] ",style:{overflowX:"auto",minWidth:"960px",height:"100%"},children:[(0,e.jsx)("div",{className:"w-full flex justify-center mt-[30px]",children:(0,e.jsxs)("div",{className:"flex items-center  w-[900px]",children:[(0,e.jsx)("div",{className:"mr-[10px] w-[16px] h-[16px]",children:(0,e.jsx)("img",{src:"/icons/flag.svg",alt:"",className:"w-[16px] h-[16px]"})}),(0,e.jsxs)("div",{className:"mr-[6px] text-lg text-[#213044] font-medium",children:[p?p.creator_nickname:"",i.formatMessage({id:"agent.agents"})]})]})}),(0,e.jsx)("div",{style:{display:r==="1"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ee,{Ffromref:h,Detaillist:p,repository:F,Operationbentate:j,Fourthly_config_id:ce,Fourthly_select_list:Y})}),(0,e.jsx)("div",{style:{display:r==="2"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(_e,{Detaillist:p,Sformref:d})}),(0,e.jsx)("div",{style:{display:r==="4"?"flex":"none",height:"calc(100vh - 146px)",justifyContent:"center"},children:(0,e.jsx)(Ue,{Detaillist:p,setDetaillist:w,Fourthly_select_list:Y,Fourthly_config_id:ce,setFourthly_config_id:se,Fourthlyref:J,Fourthly_abilities_list:me,Operationbentate:j,callwordlist:tt})})]})})]})},et=qe}}]);
