"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9057],{88872:function(Qe,Ce,l){l.r(Ce),l.d(Ce,{default:function(){return Xt}});var Ie=l(15009),g=l.n(Ie),De=l(99289),T=l.n(De),be=l(5574),m=l.n(be),X=l(43722),xe=l(32983),He=l(55026),t=l(67294),Y=l(35312),Ze=l(19632),he=l.n(Ze),V=l(97857),Z=l.n(V),Ae=l(80459),Xe=l(82114),qe=l(82826),et=l(63783),tt=l(3471),at=l(45360),nt=l(85576),Ne=l(28036),rt=l(83062),ze=l(72269),Me=l(74330),st=l(96486),We=l(44010),le=l(39e3),e=l(85893),it=function(c){var u=(0,Y.useIntl)(),R=c.roomDetail,b=c.setAgent,N=at.ZP.useMessage(),o=m()(N,2),F=o[0],I=o[1],E=(0,Y.useParams)(),S=E.id,x=(0,le.Z)(function(r){return r.disableInput}),L=(0,le.Z)(function(r){return r.truncatable}),_=(0,le.Z)(function(r){return r.setClearMemory}),B=(0,t.useState)([]),G=m()(B,2),H=G[0],J=G[1],D=(0,t.useState)(Z()({},R)),k=m()(D,2),P=k[0],Q=k[1],q=(0,t.useState)([]),ee=m()(q,2),$=ee[0],C=ee[1],z=(0,t.useRef)(!1),oe=(0,t.useRef)(!1),ce=(0,t.useState)(!1),te=m()(ce,2),W=te[0],ae=te[1],ue=function(){var s=nt.Z.confirm;s({title:u.formatMessage({id:"app.chatroom.clear.title"}),icon:(0,e.jsx)(Xe.Z,{}),content:u.formatMessage({id:"app.chatroom.clear.tips"}),okText:u.formatMessage({id:"app.chatroom.clear.confirm"}),okType:"danger",cancelText:u.formatMessage({id:"app.chatroom.clear.cancel"}),onOk:function(){_(["TRUNCATE","0"])}})},w=function(){var r=T()(g()().mark(function s(){var a;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!S){i.next=5;break}return i.next=3,(0,X.cH)({id:S});case 3:if(a=i.sent,a.code==0)try{Q(function(){return Z()(Z()({},a.data.chat_info),{},{max_round:a.data.max_round,smart_selection:a.data.smart_selection})}),J(a.data.agent_list),z.current=!0}catch(f){}case 5:case"end":return i.stop()}},s)}));return function(){return r.apply(this,arguments)}}(),se=function(){var r=T()(g()().mark(function s(){var a;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,X.j2)({id:S});case 2:a=i.sent,a.code==0&&(C(a.data.list),oe.current=!0);case 4:case"end":return i.stop()}},s)}));return function(){return r.apply(this,arguments)}}(),ie=function(){var r=T()(g()().mark(function s(a){var n,i,f;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!S){d.next=11;break}if(n=a.active==1?0:1,n!=0){d.next=7;break}if(i=H.filter(function(h){return h.active==1}),i.length-1!=0){d.next=7;break}return F.open({type:"error",content:u.formatMessage({id:"app.chatroom.sidebar.agent_tips"}),duration:2}),d.abrupt("return",!1);case 7:return d.next=9,(0,X.sT)({active:n},S,a.agent_id);case 9:f=d.sent,f.code==0&&J(function(h){return h.map(function(A){return Z()(Z()({},A),{},{active:A.agent_id==a.agent_id?n:A.active})})});case 11:case"end":return d.stop()}},s)}));return function(a){return r.apply(this,arguments)}}(),de=function(s){return s.length>6?s.length=6:s.lenth,s},pe=function(s){s.type=="my_agent"?Y.history.push("/Agents?app_id=".concat(s.app_id,"&type=false&from=chat_room")):Y.history.push("/ReadOnlyAgent?app_id=".concat(s.app_id,"&type=true&from=chat_room"))},O=function(s){Y.history.replace("/chat_room/".concat(s.chatroom_id)),window.location.reload()},j=function(){ae(!0)},y=function(){ae(!1)},M=function(){var r=T()(g()().mark(function s(a){var n,i,f;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(a.checkItem&&a.checkItem.length==0)){d.next=3;break}return F.open({type:"error",content:u.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2}),d.abrupt("return");case 3:return n=he()(a.checkItem).map(function(h){var A=h.agent_id,ve=h.active,U=ve===void 0?1:ve;return{agent_id:A,active:U}}),i={description:P.description,name:P.name,max_round:P.max_round},d.next=7,(0,X.sI)(Z()(Z()({},i),{},{agent:n}),S);case 7:f=d.sent,f.code==0?(a.checkItem.map(function(h){h.active=h.active==null?1:h.active}),J(he()(a.checkItem)),b.current=he()(a.checkItem),F.open({type:"success",content:u.formatMessage({id:"app.chatroom.content.addAgentTips"}),duration:2})):F.open({type:"error",content:u.formatMessage({id:"app.chatroom.content.addAgentTips_fail"}),duration:2});case 9:case"end":return d.stop()}},s)}));return function(a){return r.apply(this,arguments)}}(),p=function(){var r=T()(g()().mark(function s(){var a;return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=P.smart_selection==1?0:1,i.next=3,(0,X.r5)({smart_selection:a},S);case 3:Q(function(f){return Z()(Z()({},f),{},{smart_selection:a})});case 4:case"end":return i.stop()}},s)}));return function(){return r.apply(this,arguments)}}();return(0,t.useEffect)(function(){w(),se()},[]),(0,e.jsxs)(e.Fragment,{children:[I,(0,e.jsxs)("div",{className:"h-full w-[320px] bg-[#fff] shrink-0",style:{boxShadow:"0px 2px 4px 0px rgba(0,0,0,0.1)"},id:"sider",children:[(0,e.jsxs)("div",{className:"flex flex-col  h-full",children:[(0,e.jsx)("div",{className:"w-full flex  justify-start px-[30px]",children:(0,e.jsxs)("div",{className:"py-[20px] text-[14px] text-[#213044] font-[500] flex gap-x-[10px] items-center w-full",children:[(0,e.jsxs)("div",{className:"cursor-pointer flex items-center shrink-0",onClick:function(){Y.history.go(-1)},children:[(0,e.jsx)(Ne.ZP,{type:"link",danger:!0,className:"p-0",children:(0,e.jsx)(qe.Z,{className:"text-[#1B64F3] w-[16px] h-[16px]"})}),(0,e.jsx)("span",{className:"ml-[5px] text-[#213044] text-sm",children:u.formatMessage({id:"app.chatroom.sidebar.return"})})]}),(0,e.jsx)("div",{className:"h-full flex items-center shrink-0",children:(0,e.jsx)("div",{className:"w-[1px] h-[13px] bg-[#ebebeb]"})}),(0,e.jsx)("div",{className:"flex-1 min-w-0 truncate",children:P.name})]})}),(0,e.jsx)("div",{className:"h-[360px]",children:(0,e.jsxs)("div",{className:"pb-[20px] border-b-[1px] px-[10px]",children:[(0,e.jsxs)("div",{className:"flex items-center cursor-pointer px-[20px]",children:[(0,e.jsx)("div",{className:"flex gap-x-[5px] flex-1",children:(0,e.jsx)("span",{className:"text-[#666] text-[14px]",children:u.formatMessage({id:"app.chatroom.sidebar.agent_title"})})}),(0,e.jsxs)("div",{className:"shrink-0 flex items-center",children:[(0,e.jsx)(rt.Z,{className:"pr-[2px]",overlayStyle:{fontSize:"12px"},title:u.formatMessage({id:"app.chatroom.sidebar.chatroom_switch_tips"}),children:(0,e.jsx)(et.Z,{className:"cursor-pointer text-[#666] text-[12px]"})}),(0,e.jsx)("span",{className:"text-[12px] text-[#666] pr-[5px]",children:u.formatHTMLMessage({id:"app.chatroom_list.switch"})}),(0,e.jsx)(ze.Z,{size:"small",defaultChecked:!0,className:"w-[28px]",checked:P.smart_selection==1,onChange:p,disabled:x})]})]}),(0,e.jsx)("div",{className:"py-[20px] pt-[10px]",children:(0,e.jsx)("div",{className:"h-[220px] overflow-y-auto px-[10px]",children:z.current?(0,e.jsx)("div",{className:"flex flex-col",children:H&&H.length>0?H.map(function(r){return(0,e.jsxs)("div",{className:"flex items-center gap-x-[5px] hover:bg-[#FAFAFA] transition p-[10px] slider_agent_box",children:[(0,e.jsxs)("div",{className:"flex gap-x-[15px] flex-1 min-w-[0]",children:[(0,e.jsx)(Ae.Z,{data:r}),(0,e.jsxs)("div",{className:"flex flex-col gap-y-[5px] justify-center flex-1 min-w-[0]",children:[(0,e.jsx)("span",{className:"text-[#213044] text-[12px] font-[500] truncate w-full",children:r.name}),(0,e.jsx)("span",{className:"text-[#999999] text-[12px] truncate",children:r.description})]})]}),(0,e.jsxs)("div",{className:"shrink-0 flex gap-x-[15px] items-center",children:[(0,e.jsx)("div",{className:"edit cursor-pointer w-[20px] h-[20px] flex justify-center items-center opacity-0 transition",onClick:function(){pe(r)},children:(0,e.jsx)("img",{className:"w-[16px] h-[16px]",src:"/icons/edit_icon_1.svg"})}),(0,e.jsx)(ze.Z,{size:"small",disabled:x,defaultChecked:!0,className:"w-[28px]",checked:r.active==1,onChange:function(){ie(r)}})]})]},r.agent_id)}):(0,e.jsx)("div",{className:"w-full min-h-[220px] flex items-center justify-center",children:(0,e.jsx)(xe.Z,{image:xe.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(Me.Z,{})})})}),(0,e.jsx)("div",{className:"px-[20px] ",children:(0,e.jsx)("div",{style:{border:"1px solid #1B64F3"},onClick:j,className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:u.formatMessage({id:"app.chatroom.add.agent"})})})}),(0,e.jsx)("div",{className:"px-[20px] pt-[15px]",children:(0,e.jsx)("div",{style:L&&!x?{border:"1px solid #1B64F3"}:{background:"#d9d9d9",color:"rgba(0,0,0,0.25)",cursor:"not-allowed"},onClick:(0,st.throttle)(function(){L&&!x&&ue()}),className:"w-full h-[30px] transition text-[#1B64F3] flex items-center justify-center cursor-pointer rounded-[6px] hover:text-[#fff] hover:bg-[#1B64F3]",children:(0,e.jsx)("span",{className:"text-[12px]",children:u.formatMessage({id:"app.chatroom.sidebar.agent_button"})})})})]})}),(0,e.jsxs)("div",{className:"flex-1 min-h-[0] flex flex-col",children:[(0,e.jsx)("div",{className:"pt-[30px] px-[30px] text-[#666] text-[14px] shrink-0",children:u.formatMessage({id:"app.chatroom.sidebar.othe_title"})}),(0,e.jsx)("div",{className:"px-[10px] flex-1 min-h-[0] py-[10px]",children:(0,e.jsx)("div",{style:{height:"calc(100% - 20px)"},className:"px-[10px]  overflow-y-auto",children:oe.current?(0,e.jsx)("div",{className:"h-full flex flex-col",children:$&&$.length>0?$.map(function(r){return(0,e.jsxs)("div",{className:"w-full transition hover:bg-[#FAFAFA] p-[10px] cursor-pointer",onClick:function(){O(r)},children:[(0,e.jsxs)("div",{className:"flex pb-[10px]",children:[(0,e.jsx)("div",{className:"flex-1 min-w-[0] truncate text-[#333] text-[14px]",children:r.name}),r.active==0?(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c2.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:u.formatMessage({id:"app.chatroom.sidebar.othe_status"})})]}):(0,e.jsxs)("div",{className:"flex items-center gap-x-[6px]",children:[(0,e.jsx)("img",{className:"w-[12px] h-[12px]",src:"/icons/plaza_m2_c1.svg",alt:""}),(0,e.jsx)("span",{className:"text-[12px] text-[#aaa]",children:u.formatMessage({id:"app.chatroom.sidebar.othe_status_succeed"})})]})]}),(0,e.jsx)("div",{className:"flex gap-x-[10px]",children:r.agent_list&&r.agent_list.length>0?(0,e.jsxs)(e.Fragment,{children:[de(r.agent_list).map(function(s,a){return(0,e.jsx)("div",{className:"flex",children:(0,e.jsx)(Ae.Z,{data:s,width:"30px"})},a)}),r.agent_list.length>=6?(0,e.jsx)(tt.Z,{}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})]},r.chatroom_id)}):(0,e.jsx)("div",{className:"w-full h-full",children:(0,e.jsx)(xe.Z,{image:xe.Z.PRESENTED_IMAGE_SIMPLE})})}):(0,e.jsx)("div",{className:"flex justify-center w-full h-full items-center",children:(0,e.jsx)(Me.Z,{})})})})]})]}),(0,e.jsx)(We.Z,{show:W,popupClose:y,popupSave:M,checkList:H,zIndex:99})]})]})},lt=(0,t.memo)(it),ot=l(18304),ct=l(39873),ge=l(1413),ut={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},dt=ut,Fe=l(91146),pt=function(c,u){return t.createElement(Fe.Z,(0,ge.Z)((0,ge.Z)({},c),{},{ref:u,icon:dt}))},ft=t.forwardRef(pt),vt=ft,mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},xt=mt,ht=function(c,u){return t.createElement(Fe.Z,(0,ge.Z)((0,ge.Z)({},c),{},{ref:u,icon:xt}))},gt=t.forwardRef(ht),jt=gt,yt=l(83159),St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},wt=St,Nt=function(c,u){return t.createElement(Fe.Z,(0,ge.Z)((0,ge.Z)({},c),{},{ref:u,icon:wt}))},Mt=t.forwardRef(Nt),Rt=Mt,Ee=l(86),Ue=l(34994),Ve=l(2216),kt=l(85877),Ct=l(29432),At=l(39944),Ft=l(11551),Oe=l(55927),_e=l(22683),Pe=l(97807),It=function(c){var u,R,b,N,o=c.selectApp,F=c.runid,I=c.setBoxLoading,E=c.setinputShow,S=c.appId,x=c.id,L=c.setisRun,_=(0,Y.useIntl)(),B=(0,t.useRef)(""),G=(0,t.useRef)(""),H=(0,t.useRef)(null),J=(0,t.useState)(""),D=m()(J,2),k=D[0],P=D[1],Q=(0,t.useState)(null),q=m()(Q,2),ee=q[0],$=q[1],C=(0,t.useState)([]),z=m()(C,2),oe=z[0],ce=z[1],te=(0,t.useState)(""),W=m()(te,2),ae=W[0],ue=W[1],w=(0,Oe.Z)(function(O){return O.flowMessage}),se=function(j){G.current=ie(j);var y={user:{value:ie(j)}};ue(new At.z(y))},ie=function O(j){return j.map(function(y){return y.type==="mention"?y.id:y.children?O(y.children):y.text}).join("")},de=function(){var O=T()(g()().mark(function j(y){var M,p;return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return I(!0),M=Object.keys(y),M.forEach(function(a){H.current.properties[a]&&(H.current.properties[a].value=y[a])}),s.next=5,(0,Ft.LH)({agent_id:o.checkItem[0].agent_id,ability_id:0,input_dict:H.current,prompt:ae,data_source_run_id:B.current});case 5:p=s.sent,p.code==0&&(P(p.data.outputs_md),I(!1),L(!1));case 7:case"end":return s.stop()}},j)}));return function(y){return O.apply(this,arguments)}}(),pe=function(){var O=T()(g()().mark(function j(y,M){var p,r;return g()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,X.xT)(y,M);case 2:p=a.sent,(p==null?void 0:p.code)==0&&(B.current=p==null||(r=p.data)===null||r===void 0?void 0:r.app_run_id);case 4:case"end":return a.stop()}},j)}));return function(y,M){return O.apply(this,arguments)}}();return(0,t.useEffect)(function(){o&&o.checkItem.length&&(L(!0),pe(x,{app_id:S,app_run_id:F,status:1,corrected_parameter:""}))},[o]),(0,t.useEffect)(function(){var O=w.filter(function(s){return s.data.app_run_id==F&&s.type.indexOf("generate_meeting_action_items")!==-1});if(O.length!=0){var j,y=(j=O[O.length-1])===null||j===void 0||(j=j.data)===null||j===void 0||(j=j.exec_data)===null||j===void 0||(j=j.outputs)===null||j===void 0?void 0:j.value;if(y){var M=JSON.parse(y);H.current=M;var p=Object.keys(M.properties);if(p.length){$(M.properties);var r=p.map(function(s){return{value:"<<".concat(Ct.qX,".inputs.").concat(s,">>"),label:s}});ce(r)}E(!1),I(!1)}}},[w]),console.log(o),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ee.Z,{icon:o==null||(u=o.checkItem[0])===null||u===void 0?void 0:u.icon,title:o==null||(R=o.checkItem[0])===null||R===void 0?void 0:R.name,textDetails:o==null||(b=o.checkItem[0])===null||b===void 0?void 0:b.description,iconType:"robot_icon",avatar:o==null||(N=o.checkItem[0])===null||N===void 0?void 0:N.avatar,handleClick:function(){}})}),ee!=null?(0,e.jsxs)(Ue.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full",disabled:!G.current},searchConfig:{submitText:_.formatMessage({id:"workflow.button.run"})}},onFinish:function(j){de(j)},children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ve._,{data:ee})}),(0,e.jsx)("div",{className:"h-[150px] overflow-y-auto border border-color-[#eee] py-[4px] px-[11px] mb-[8px]",children:(0,e.jsx)(kt.Z,{onChange:function(j){se(j)},options:oe,placeholder:"\u8BF7\u8F93\u5165\u8FD0\u884C\u6307\u4EE4\uFF0C\u8F93\u5165@\u63D2\u5165\u53D8\u91CF"})})]}):(0,e.jsx)(e.Fragment,{}),k?(0,e.jsx)("div",{className:"max-h-[400px] overflow-y-auto mt-[16px]",children:(0,e.jsx)("div",{className:"p-[12px]  bg-[#F7F7F7] leading-[22px]",children:(0,e.jsx)(_e.U,{rehypePlugins:[Pe.Z],children:k})})}):(0,e.jsx)(e.Fragment,{})]})},Dt=(0,t.memo)(It),bt=l(66309),Ke=l(42237),Zt=l(93696),Et=function(c,u){return t.createElement(Fe.Z,(0,ge.Z)((0,ge.Z)({},c),{},{ref:u,icon:Zt.Z}))},Ot=t.forwardRef(Et),_t=Ot,Pt=l(4981),Ge=l(29608),$t=(0,t.memo)(function(K){var c=K.progressObj,u=function(){return parseFloat(c.elapsed_time).toFixed(6)},R=function(N){var o=new Date(N),F=o.getFullYear(),I=(o.getMonth()+1).toString().padStart(2,"0"),E=o.getDate().toString().padStart(2,"0"),S=o.getHours().toString().padStart(2,"0"),x=o.getMinutes().toString().padStart(2,"0"),L=o.getSeconds().toString().padStart(2,"0");return(0,e.jsx)(e.Fragment,{children:"".concat(F,".").concat(I,".").concat(E," ").concat(S,":").concat(x,":").concat(L)})};return(0,e.jsx)("div",{className:"inline-flex gap-x-4 justify-end max-w-[100%]",children:(0,e.jsxs)("div",{className:"inline-flex gap-x-[20px] max-w-[100%]",children:[(0,e.jsx)("div",{className:"truncate min-w-[70px]",children:c.created_time&&R(c.created_time)}),(0,e.jsx)("div",{className:"truncate",children:c.apps_name||c.app_name}),(0,e.jsxs)("div",{className:"flex items-center gap-x-[7px] truncate min-w-[50px]",children:[(0,e.jsx)("div",{className:"shrink-0 rounded-full ".concat(c.status==1?"bg-blue-600":c.status==2?"bg-green-500":"bg-red-500"),style:{width:"3px",height:"3px"}}),(0,e.jsxs)("div",{className:"truncate",children:[u(),"S"]})]})]})})}),Lt=function(c){var u,R,b,N,o=c.selectApp,F=c.runid,I=c.setBoxLoading,E=c.setinputShow,S=c.appId,x=c.id,L=c.setisRun,_=(0,Y.useIntl)(),B=(0,t.useRef)(""),G=(0,t.useRef)(null),H=(0,t.useState)(null),J=m()(H,2),D=J[0],k=J[1],P=(0,t.useState)(!1),Q=m()(P,2),q=Q[0],ee=Q[1],$=(0,t.useState)(null),C=m()($,2),z=C[0],oe=C[1],ce=(0,t.useState)(null),te=m()(ce,2),W=te[0],ae=te[1],ue=(0,t.useState)(null),w=m()(ue,2),se=w[0],ie=w[1],de=(0,Ge.Z)(function(a){return a.setDealtWithData}),pe=(0,Ge.Z)(function(a){return a.setRunPanelLogRecord}),O=function(){var a=T()(g()().mark(function n(i){var f,v,d,h,A;return g()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return I(!0),f=Object.keys(i),v={},f.forEach(function(fe){G.current.properties[fe]&&(G.current.properties[fe].value=i[fe]),W&&W.forEach(function(ye){ye.node_id==fe&&(v[fe]=i[fe])})}),d={inputs:G.current,node_confirm_users:v,run_name:"chatroom-".concat(x,"-run-").concat(B.current,"-driven"),run_type:1,data_source_run_id:B.current},U.next=7,(0,Ke.UE)(S,d);case 7:h=U.sent,h.code==0&&(B.current=h==null||(A=h.data)===null||A===void 0?void 0:A.app_run_id,ee(!0),L(!1));case 9:case"end":return U.stop()}},n)}));return function(i){return a.apply(this,arguments)}}(),j=function(){var a=T()(g()().mark(function n(){var i,f;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:i=s==null?void 0:s.filter(function(h){return h.type=="workflow_run_progress"&&h.data.app_run_id==B.current}).map(function(h){var A=h.data;return A}),i&&i.length&&(f=i[i.length-1],k(f),I(!1));case 2:case"end":return d.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),y=function(){var a=T()(g()().mark(function n(){var i,f,v,d,h;return g()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:f=s==null?void 0:s.filter(function(U){return U.type=="workflow_need_human_confirm"&&U.data.app_run_id==B.current}),v=(i=f.map(function(U){var fe=U.data,ye=U.need_human_confirm;return{data:fe,need_human_confirm:ye}}))===null||i===void 0?void 0:i.filter(function(U){return U.data.type!==1}),v&&v.length&&(h=v[v.length-1].data,h.exec_id=h==null||(d=h.node_exec_data)===null||d===void 0?void 0:d.node_exec_id,ie(v[v.length-1]),I(!1));case 3:case"end":return ve.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),M=function(n){return n.completed_progress?parseInt(n.completed_progress.slice(0,-1)):!1},p=function(){var a=T()(g()().mark(function n(i,f){var v,d;return g()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,X.xT)(i,f);case 2:v=A.sent,(v==null?void 0:v.code)==0&&(B.current=v==null||(d=v.data)===null||d===void 0?void 0:d.app_run_id);case 4:case"end":return A.stop()}},n)}));return function(i,f){return a.apply(this,arguments)}}(),r=function(){var a=T()(g()().mark(function n(){var i,f;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log(S),d.next=3,(0,Ke.zO)(S);case 3:i=d.sent,i.code==0&&ae(i==null||(f=i.data)===null||f===void 0?void 0:f.need_confirm_nodes),p(x,{app_id:S,app_run_id:F,status:1,corrected_parameter:""});case 6:case"end":return d.stop()}},n)}));return function(){return a.apply(this,arguments)}}();(0,t.useEffect)(function(){o&&o.checkItem.length&&(L(!0),r())},[o]);var s=(0,Oe.Z)(function(a){return a.flowMessage});return(0,t.useEffect)(function(){j(),y();var a=s.filter(function(d){return d.data.app_run_id==F&&d.type.indexOf("generate_meeting_action_items")!==-1});if(a.length!=0){var n,i=(n=a[a.length-1])===null||n===void 0||(n=n.data)===null||n===void 0||(n=n.exec_data)===null||n===void 0||(n=n.outputs)===null||n===void 0?void 0:n.value;if(i){var f=JSON.parse(i);G.current=f;var v=Object.keys(f.properties);v.length&&(console.log(f.properties),oe(f.properties)),E(!1),I(!1)}}},[s]),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ee.Z,{icon:o==null||(u=o.checkItem[0])===null||u===void 0?void 0:u.icon,title:o==null||(R=o.checkItem[0])===null||R===void 0?void 0:R.name,textDetails:o==null||(b=o.checkItem[0])===null||b===void 0?void 0:b.description,iconType:"workflow_icon",avatar:o==null||(N=o.checkItem[0])===null||N===void 0?void 0:N.avatar,handleClick:function(){}})}),!q&&z!=null?(0,e.jsxs)(Ue.A,{submitter:{resetButtonProps:!1,submitButtonProps:{className:"w-full"},searchConfig:{submitText:_.formatMessage({id:"workflow.button.run"})}},onFinish:O,children:[(0,e.jsx)("div",{className:"py-[6px]",children:(0,e.jsx)(Ve._,{data:z})}),(0,e.jsx)(Pt.e,{data:W})]}):(0,e.jsx)(e.Fragment,{children:z!=null?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] color-[#000] font-[600] py-[12px]",children:[_.formatMessage({id:"app.summaryhistory.input"}),":"]}),Object.values(z).map(function(a){return(0,e.jsxs)("div",{className:"pb-[10px]",children:[(0,e.jsx)("div",{className:"pb-[8px] font-[600]",children:a.display_name||a.name}),(0,e.jsx)("div",{className:"py-[4px] px-[11px] text-[14px] leading-[1.5] ",children:a.value})]})})]}):(0,e.jsx)(e.Fragment,{})}),se&&se.need_human_confirm!=0?(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsxs)("div",{className:"flex gap-x-[6px] items-center h-[20px] cursor-pointer",onClick:function(){de(se.data)},children:[(0,e.jsx)("div",{children:(0,e.jsx)(_t,{className:"text-[#1B64F3] text-[16px]"})}),(0,e.jsx)("span",{children:_.formatMessage({id:"app.summary.backlogTips"})})]})}):(0,e.jsx)(e.Fragment,{}),D?(0,e.jsx)("div",{className:"pt-[10px]",children:(0,e.jsx)(Ee.Z,{status:D.status,icon:D.icon,title:(0,e.jsxs)("div",{className:"items-center gap-x-[8px] inline-flex justify-end w-full",children:[(0,e.jsx)("span",{className:"flex-1 truncate",children:D.run_name}),D.need_human_confirm==1?(0,e.jsx)(bt.Z,{className:" text-[12px] flex items-center justify-center margin-0",color:"blue",children:_.formatMessage({id:"app.summaryhistory.tag"})}):(0,e.jsx)(e.Fragment,{})]}),textDetails:(0,e.jsx)($t,{progressObj:D}),handleClick:function(){pe(D)},progress:M(D)})}):(0,e.jsx)(e.Fragment,{})]})},Tt=(0,t.memo)(Lt),Bt=function(c){var u,R,b,N=(0,Y.useIntl)(),o=c.runid,F=c.id,I=c.setBoxLoading,E=c.scrollDom,S=c.setinputShow,x=(0,t.useRef)("agent"),L=(0,t.useRef)(""),_=(0,t.useState)(!1),B=m()(_,2),G=B[0],H=B[1],J=(0,t.useState)({type:"agent",checkItem:[],show:!1}),D=m()(J,2),k=D[0],P=D[1],Q=[{key:"1",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){P(function(C){return Z()(Z()({},C),{},{type:"agent",show:!0})})},children:N.formatMessage({id:"app.summary.SelectAgent"})})},{key:"2",label:(0,e.jsx)("div",{className:"hover:text-[#1B64F3]",onClick:function(){P(function(C){return Z()(Z()({},C),{},{type:"workflow",show:!0})})},children:N.formatMessage({id:"app.summary.SelectWorkflow"})})}],q=function(){P(function(C){return Z()(Z()({},C),{},{show:!1})})},ee=function(C){I(!0),P(function(z){return Z()(Z()({},z),{},{checkItem:C.checkItem})}),x.current=k.type,L.current=C.checkItem[0].app_id};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"pt-[24px]  border-[#ddd]",style:{minHeight:k!=null&&(u=k.checkItem)!==null&&u!==void 0&&u.length?E==null||(R=E.current)===null||R===void 0?void 0:R.offsetHeight:"100%"},children:[(0,e.jsxs)("div",{className:"text-[14px] font-[500] flex item-center",children:[(0,e.jsx)("div",{className:"flex-1",children:N.formatMessage({id:"app.summary.Runapp"})}),(0,e.jsx)("div",{className:"px-[10px]",children:G?(0,e.jsx)(yt.Z,{menu:{items:Q},children:(0,e.jsx)(Rt,{className:"transition cursor-pointer text-[#999] text-[18px] hover:text-[#1B64F3]"})}):(0,e.jsx)(e.Fragment,{})})]}),(0,e.jsx)("div",{children:k!=null&&(b=k.checkItem)!==null&&b!==void 0&&b.length?(0,e.jsx)(e.Fragment,{children:x.current=="agent"?(0,e.jsx)(Dt,{id:F,appId:L.current,selectApp:k,runid:o,setBoxLoading:I,scrollDom:E,setinputShow:S,setisRun:H}):(0,e.jsx)(Tt,{id:F,appId:L.current,selectApp:k,runid:o,setBoxLoading:I,scrollDom:E,setinputShow:S,setisRun:H})}):(0,e.jsxs)("div",{className:"flex gap-x-[20px] min-h-[70px] items-center px-[20px]",children:[(0,e.jsxs)(Ne.ZP,{className:"flex-1 text-[14px]",onClick:function(){P(function(C){return Z()(Z()({},C),{},{type:"agent",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/robot_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),N.formatMessage({id:"app.summary.SelectAgent"})]}),(0,e.jsxs)(Ne.ZP,{className:"flex-1 text-[14px]",onClick:function(){P(function(C){return Z()(Z()({},C),{},{type:"workflow",show:!0})})},children:[(0,e.jsx)("img",{src:"/icons/workflow_icon.svg",alt:"",className:"w-[14px] h-[14px]"}),N.formatMessage({id:"app.summary.SelectWorkflow"})]})]})})]}),(0,e.jsx)(We.Z,{show:k.show,nodetype:k.type,popupClose:q,popupSave:ee,checkList:x.current==k.type?k.checkItem:[],zIndex:99,radio:!0})]})},Ht=(0,t.memo)(Bt),zt=l(26915),Wt=l(87740),Je=(0,t.memo)(function(K){var c=K.id,u=K.message,R=(0,Y.useIntl)(),b=(0,le.Z)(function(x){return x.setSummaryClick}),N=(0,t.useState)(!0),o=m()(N,2),F=o[0],I=o[1],E=(0,le.Z)(function(x){return x.summaryClick}),S=(0,le.Z)(function(x){return x.setSummaryParams});return(0,t.useEffect)(function(){I(E)},[E]),(0,e.jsx)("div",{className:"flex flex-row-reverse",children:(0,e.jsxs)(Ne.ZP,{type:"primary",className:"bg-[#1B64F3] rounded-[4px] my-3 h-[30px] w-[110px] gap-[6px]",onClick:function(L){F&&(S({id:c,message:u}),b(!1))},children:[(0,e.jsx)("span",{className:"text-[12px]",children:R.formatMessage({id:"app.summaryhistory.submitText"})}),(0,e.jsx)(Wt.Z,{className:"text-[14px]"})]})})}),Ut=function(c){var u,R,b,N,o=c.setShow,F=c.inputShow,I=c.setBoxLoading,E=c.setAppRunId,S=c.scrollDom,x=(0,Y.useIntl)(),L=(0,t.useState)(!1),_=m()(L,2),B=_[0],G=_[1],H=(0,t.useState)(""),J=m()(H,2),D=J[0],k=J[1],P=(0,t.useState)(""),Q=m()(P,2),q=Q[0],ee=Q[1],$=(0,t.useRef)(""),C=(0,t.useRef)(""),z=(0,t.useRef)(!1),oe=(0,t.useState)(!1),ce=m()(oe,2),te=ce[0],W=ce[1],ae=(0,t.useState)(null),ue=m()(ae,2),w=ue[0],se=ue[1],ie=(0,le.Z)(function(p){return p.setSummaryClick}),de=function(){var p=T()(g()().mark(function r(s){var a,n,i,f,v=arguments;return g()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=v.length>1&&v[1]!==void 0?v[1]:{app_run_id:"",corrected_parameter:""},h.next=3,(0,X.Rp)(s,a);case 3:n=h.sent,(n==null?void 0:n.code)==0&&(E(n==null||(i=n.data)===null||i===void 0?void 0:i.app_run_id),C.current=n==null||(f=n.data)===null||f===void 0?void 0:f.app_run_id,a.app_run_id&&(z.current=!0));case 5:case"end":return h.stop()}},r)}));return function(s){return p.apply(this,arguments)}}(),pe=function(){var p=T()(g()().mark(function r(s,a){var n,i,f,v,d;return g()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,X.xM)(s,{message:a});case 2:n=A.sent,(n==null?void 0:n.code)==0&&(C.current=n==null||(i=n.data)===null||i===void 0?void 0:i.app_run_id,E(n==null||(f=n.data)===null||f===void 0?void 0:f.app_run_id),n!=null&&(v=n.data)!==null&&v!==void 0&&(v=v.outputs)!==null&&v!==void 0&&v.value&&(k(n==null||(d=n.data)===null||d===void 0||(d=d.outputs)===null||d===void 0?void 0:d.value),o(!0),I(!1),ie(!0),S.current.scrollTo({top:0})));case 4:case"end":return A.stop()}},r)}));return function(s,a){return p.apply(this,arguments)}}(),O=function(){var p=T()(g()().mark(function r(){var s;return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,X.Gh)({chatroom_id:$.current,app_run_id:C.current});case 2:s=n.sent,s&&s!==null&&s!==void 0&&s.data&&se(s.data);case 4:case"end":return n.stop()}},r)}));return function(){return p.apply(this,arguments)}}(),j=function(r){var s=new Date(r),a=s.getMonth()+1,n=s.getDate(),i=s.getHours(),f=s.getMinutes(),v=s.getSeconds();return s.getFullYear()+"-"+(a<10?"0"+a:a)+"-"+(n<10?"0"+n:n)+" "+(i<10?"0"+i:i)+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},y=(0,Oe.Z)(function(p){return p.flowMessage});(0,t.useEffect)(function(){var p=y.filter(function(a){return a.data.app_run_id==C.current&&a.type.indexOf("generate_meeting_summary")!==-1});if(p.length!=0){var r,s=(r=p[p.length-1])===null||r===void 0||(r=r.data)===null||r===void 0||(r=r.exec_data)===null||r===void 0||(r=r.outputs)===null||r===void 0?void 0:r.value;s&&(z.current&&O(),k(s),W(!1),o(!0),ie(!0),I(!1),S.current.scrollTo({top:0}))}},[y]);var M=(0,le.Z)(function(p){return p.summaryParams});return(0,t.useEffect)(function(){M&&M.id&&($.current=M.id,w&&se(null),te&&W(!1),D&&k(""),G(!0),M.message?(I(!0),pe(M.id,M.message)):de(M.id))},[M]),(0,e.jsx)(e.Fragment,{children:B?(0,e.jsxs)("div",{className:"pb-[16px]",children:[(0,e.jsx)("div",{className:"text-[16px] font-[600] pt-[12px]",children:x.formatMessage({id:"app.summary.title"})}),(0,e.jsx)("div",{className:"text-[14px] pt-[12px] leading-[23px] px-[8px]",children:D?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:" ".concat("max-h-[400px]"," p-[12px]  bg-[#F7F7F7]  relative overflow-y-auto"),children:(0,e.jsx)(_e.U,{rehypePlugins:[Pe.Z],children:w?w==null||(u=w.source_run)===null||u===void 0?void 0:u.summary:D})}),w&&(w==null||(R=w.source_corrections)===null||R===void 0?void 0:R.length)>0||!F?(0,e.jsx)(Je,{id:$.current,message:w?w==null||(b=w.source_run)===null||b===void 0?void 0:b.summary:D}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)("div",{className:"min-h-[120px] flex items-center justify-center",children:(0,e.jsx)(Me.Z,{size:"large"})})}),w&&(w==null||(N=w.source_corrections)===null||N===void 0?void 0:N.length)>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"text-[16px] font-[600] py-[8px]",children:[x.formatMessage({id:"app.summaryhistory.orientation"}),":"]}),w.source_corrections.map(function(p,r){return(0,e.jsxs)("div",{className:"mb-[16px]",children:[(0,e.jsx)("div",{className:"rounded-[4px]  ".concat(w.source_corrections.length-1==r?"bg-blue-100":"bg-[#F7F7F7]"),children:(0,e.jsxs)("div",{className:"p-[12px]   leading-[22px]",children:[(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[x.formatMessage({id:"app.summaryhistory.userPrompt"}),": ",p.user_prompt]}),(0,e.jsxs)("div",{className:"tetx-[14px] font-[600] pb-[12px]",children:[x.formatMessage({id:"app.summaryhistory.time"}),": ",j(p.created_time)]}),(0,e.jsx)(_e.U,{rehypePlugins:[Pe.Z],children:p==null?void 0:p.corrected_summary})]})},p.created_time),!F||w.source_corrections.length-1!=r?(0,e.jsx)(Je,{id:$.current,message:p==null?void 0:p.corrected_summary}):(0,e.jsx)(e.Fragment,{})]},p.created_time)})]}):(0,e.jsx)(e.Fragment,{}),F?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"pt-[12px]",children:(0,e.jsx)(zt.Z.TextArea,{onChange:function(r){ee(r.target.value)},value:q,disabled:!D||te,rows:4,placeholder:x.formatMessage({id:"app.summary.placeholder"})})}),(0,e.jsx)("div",{className:"flex pt-[12px] gap-x-[4px]",children:(0,e.jsx)(Ne.ZP,{type:"primary",disabled:!D||!q,loading:te,className:"bg-[#1B64F3] rounded-[4px] w-[88px] h-[40px] flex-1",onClick:function(){de($.current,{app_run_id:String(C.current),corrected_parameter:q}),W(!0),ee(""),o("")},children:x.formatMessage({id:"app.summary.submitText"})})})]}):(0,e.jsx)(e.Fragment,{})]}):(0,e.jsx)(e.Fragment,{})})},Vt=(0,t.memo)(Ut),Kt=l(38027),Gt=function(c){var u,R=c.id,b=(0,t.useState)(""),N=m()(b,2),o=N[0],F=N[1],I=(0,t.useState)(!1),E=m()(I,2),S=E[0],x=E[1],L=(0,t.useState)([]),_=m()(L,2),B=_[0],G=_[1],H=(0,t.useState)(!1),J=m()(H,2),D=J[0],k=J[1],P=(0,t.useState)(!1),Q=m()(P,2),q=Q[0],ee=Q[1],$=(0,t.useState)(""),C=m()($,2),z=C[0],oe=C[1],ce=(0,t.useState)(!1),te=m()(ce,2),W=te[0],ae=te[1],ue=(0,t.useState)(!1),w=m()(ue,2),se=w[0],ie=w[1],de=(0,t.useState)(!0),pe=m()(de,2),O=pe[0],j=pe[1],y=(0,t.useRef)(null),M=(0,t.useRef)(1),p=(0,t.useRef)(!1),r=(0,t.useRef)(!0),s=(0,t.useRef)(0),a=(0,t.useState)(!1),n=m()(a,2),i=n[0],f=n[1],v=(0,t.useState)(800),d=m()(v,2),h=d[0],A=d[1],ve=(0,t.useState)(!1),U=m()(ve,2),fe=U[0],ye=U[1],Re=(0,le.Z)(function(ne){return ne.summaryParams}),qt=(0,le.Z)(function(ne){return ne.setSummaryParams}),$e=function(){var ne=T()(g()().mark(function me(){var Ye,Le,re,Te,Se,Be,we=arguments;return g()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(Ye=we.length>0&&we[0]!==void 0?we[0]:!0,Le=we.length>1&&we[1]!==void 0?we[1]:!0,!(s.current!=0&&s.current<M.current)){je.next=5;break}return f(!1),je.abrupt("return");case 5:return je.next=8,(0,X.sh)({chatroom_id:R,page:M.current,page_size:10});case 8:re=je.sent,re.code==0&&(re!=null&&(Te=re.data)!==null&&Te!==void 0&&Te.list&&re!==null&&re!==void 0&&(Se=re.data)!==null&&Se!==void 0&&(Se=Se.list)!==null&&Se!==void 0&&Se.length&&(s.current=re==null||(Be=re.data)===null||Be===void 0?void 0:Be.total_pages,G(function(ke){return Le?he()(re.data.list.reverse()):[].concat(he()(re.data.list.reverse()),he()(ke))}),r.current=!0,x(!0),f(!0)),Le&&setTimeout(function(){var ke;y==null||(ke=y.current)===null||ke===void 0||ke.scrollTo({top:0})},200),Ye||(F(Re.id),qt({})));case 10:case"end":return je.stop()}},me)}));return function(){return ne.apply(this,arguments)}}(),ea=function(me){me.target.scrollHeight+(me.target.scrollTop-me.target.clientHeight)<400&&r.current&&(r.current=!1,f(!0),M.current=M.current+=1,$e(!0,!1))};(0,t.useEffect)(function(){M.current=1,$e()},[R]),(0,t.useEffect)(function(){console.log(Re),Re&&Re.id&&(x(!0),O||j(!0),D&&k(!1),W&&ae(!1),M.current=1,ee(!0),$e(!1),p.current=!0)},[Re]);var ta=(0,le.Z)(function(ne){return ne.setOrientationShow});return(0,t.useEffect)(function(){S&&ta(!0)},[S]),(0,t.useEffect)(function(){console.log(i);var ne=function(){window.innerWidth<1280?(A(400),ye(!0),console.log(y),setTimeout(function(){ae(!0)},200)):(A((window.innerWidth-320)/2),ye(!1),ae(!1))};return ne(),window.addEventListener("resize",ne),function(){window.removeEventListener("resize",ne)}},[]),(0,e.jsx)(e.Fragment,{children:S?(0,e.jsxs)("div",{style:{overflow:W?"hidden":"initial"},className:"pl-[32px] box-border ".concat(fe?"fixed  right-0 bottom-0 top-[56px]":"relative"),children:[(0,e.jsx)("div",{onClick:function(){ae(function(me){return!me})},className:`
                                `.concat(W?"absolute left-[2px]  top-[60px]":"absolute left-[2px] top-[60px]",`
                                history_packup
                                hover:text-[#1B64F3]
                                w-[30px] h-[60px] bg-[rgba(255,255,255,1)] shadow-md flex justify-center items-center cursor-pointer z-[99]
                            `),children:W?(0,e.jsx)(jt,{className:"text-[18px]"}):(0,e.jsx)(vt,{className:"text-[18px]"})}),(0,e.jsxs)(ct.Z,{minWidth:400,maxWidth:h,className:"relative h-full right-0 border-0 returned-0 px-[0] ".concat(W?"hidden flex-[0]":"block"),children:[se?(0,e.jsx)("div",{className:"h-full w-full absolute top-0 left-0 flex justify-center items-center z-[100] bg-[rgba(255,255,255,0.5)]",children:(0,e.jsx)(Me.Z,{size:"large"})}):(0,e.jsx)(e.Fragment,{}),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"h-full min-h-full overflow-y-auto flex flex-col-reverse scroll-smooth relative",onScroll:ea,ref:y,children:[(0,e.jsxs)("div",{children:[B.length?(0,e.jsx)(Kt.ZP,{id:R,runid:z,scrollDom:y,list:B,historyHeight:p.current}):(0,e.jsx)(e.Fragment,{}),(0,e.jsxs)("div",{className:"w-full px-4 h-full",style:{minHeight:q?y==null||(u=y.current)===null||u===void 0?void 0:u.offsetHeight:""},children:[(0,e.jsx)(Vt,{setShow:k,inputShow:O,setBoxLoading:ie,setAppRunId:oe,scrollDom:y}),D?(0,e.jsx)(Ht,{id:o,runid:z,setBoxLoading:ie,scrollDom:y,setinputShow:j}):(0,e.jsx)(e.Fragment,{})]})]}),i?(0,e.jsx)("div",{className:"text-center justify-center items-center flex",children:(0,e.jsx)(Me.Z,{})}):(0,e.jsx)(e.Fragment,{})]})})]})]}):(0,e.jsx)(e.Fragment,{})})},Jt=(0,t.memo)(Gt),Yt=function(c){return(0,e.jsx)("div",{className:"flex items-center h-full justify-center",children:(0,e.jsx)(xe.Z,{image:xe.Z.PRESENTED_IMAGE_SIMPLE})})},Qt=(0,t.memo)(function(){var K=(0,Y.useParams)(),c=K.id,u=(0,t.useRef)([]),R=(0,t.useRef)(null),b=(0,t.useState)(!1),N=m()(b,2),o=N[0],F=N[1],I=function(){var E=T()(g()().mark(function S(){var x;return g()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!c){_.next=5;break}return _.next=3,(0,X.cH)({id:c});case 3:x=_.sent,x.code==0?(F(!0),R.current=x.data,u.current=x.data.agent_list):Y.history.replace("/meeting");case 5:case"end":return _.stop()}},S)}));return function(){return E.apply(this,arguments)}}();return(0,t.useEffect)(function(){I()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex bg-[#fff] overflow-hidden overflow-x-auto",style:{height:"calc(100vh - 56px)"},children:[(0,e.jsx)(lt,{roomDetail:R.current,setAgent:u}),(0,e.jsx)("div",{className:"flex-1 min-h-0 h-full",children:o?(0,e.jsx)(ot.F,{agentList:u}):(0,e.jsx)(Yt,{})}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Jt,{id:c})})]})})}),Xt=Qt},79697:function(Qe,Ce,l){var Ie=l(39473),g=l(83970),De=l(29169),T=l(27771),be=l(50585),m=l(77008),X=l(72764),xe=l(18843),He="[object Map]",t="[object Set]",Y=Object.prototype,Ze=Y.hasOwnProperty;function he(V){if(V==null)return!0;if((0,be.Z)(V)&&((0,T.Z)(V)||typeof V=="string"||typeof V.splice=="function"||(0,m.Z)(V)||(0,xe.Z)(V)||(0,De.Z)(V)))return!V.length;var Z=(0,g.Z)(V);if(Z==He||Z==t)return!V.size;if((0,X.Z)(V))return!(0,Ie.Z)(V).length;for(var Ae in V)if(Ze.call(V,Ae))return!1;return!0}Ce.Z=he}}]);
